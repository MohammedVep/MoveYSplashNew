module.exports=[46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},75718,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return e}});class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class e extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},57997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={UnrecognizedActionError:function(){return f},unstable_isUnrecognizedActionError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor(...a){super(...a),this.name="UnrecognizedActionError"}}function g(a){return!!(a&&"object"==typeof a&&a instanceof f)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},15128,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RedirectStatusCode",{enumerable:!0,get:function(){return e}});var d,e=((d={})[d.SeeOther=303]="SeeOther",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},11026,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={REDIRECT_ERROR_CODE:function(){return h},RedirectType:function(){return i},isRedirectError:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(15128),h="NEXT_REDIRECT";var i=((d={}).push="push",d.replace="replace",d);function j(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,d]=b,e=b.slice(2,-2).join(";"),f=Number(b.at(-2));return c===h&&("replace"===d||"push"===d)&&"string"==typeof e&&!isNaN(f)&&f in g.RedirectStatusCode}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},22099,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return n},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return k},redirect:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(15128),g=a.r(11026),h=a.r(20635).actionAsyncStorage;function i(a,b,c=f.RedirectStatusCode.TemporaryRedirect){let d=Object.defineProperty(Error(g.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d.digest=`${g.REDIRECT_ERROR_CODE};${b};${a};${c};`,d}function j(a,b){throw i(a,b??=h?.getStore()?.isAction?g.RedirectType.push:g.RedirectType.replace,f.RedirectStatusCode.TemporaryRedirect)}function k(a,b=g.RedirectType.replace){throw i(a,b,f.RedirectStatusCode.PermanentRedirect)}function l(a){return(0,g.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function m(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function n(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},8535,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HTTPAccessErrorStatus:function(){return f},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return h},getAccessFallbackErrorTypeByStatus:function(){return k},getAccessFallbackHTTPStatus:function(){return j},isHTTPAccessFallbackError:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},g=new Set(Object.values(f)),h="NEXT_HTTP_ERROR_FALLBACK";function i(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===h&&g.has(Number(c))}function j(a){return Number(a.digest.split(";")[1])}function k(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},28102,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"notFound",{enumerable:!0,get:function(){return f}});let d=a.r(8535),e=`${d.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function f(){let a=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=e,a}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},64177,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"forbidden",{enumerable:!0,get:function(){return d}}),a.r(8535).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},88213,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unauthorized",{enumerable:!0,get:function(){return d}}),a.r(8535).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},35710,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},31101,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isPostpone",{enumerable:!0,get:function(){return e}});let d=Symbol.for("react.postpone");function e(a){return"object"==typeof a&&null!==a&&a.$$typeof===d}},41997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},77747,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=a.r(8535),e=a.r(11026);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},3326,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},99392,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},83590,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},76383,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},88644,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},40656,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(88644),h=a.r(54427);var i=((d={})[d.Static=1]="Static",d[d.Runtime=2]="Runtime",d[d.Dynamic=3]="Dynamic",d);class j{constructor(a=null){this.abortSignal=a,this.currentStage=1,this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),a&&a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<2&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),this.currentStage<3&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0})}advanceStage(a){!(this.currentStage>=a)&&(this.currentStage=a,a>=2&&this.runtimeStagePromise.resolve(),a>=3&&this.dynamicStagePromise.resolve())}getStagePromise(a){switch(a){case 2:return this.runtimeStagePromise.promise;case 3:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},54110,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return D},PreludeState:function(){return Z},abortAndThrowOnSynchronousRequestDataAccess:function(){return C},abortOnSynchronousPlatformIOAccess:function(){return A},accessedDynamicData:function(){return L},annotateDynamicAccess:function(){return Q},consumeDynamicAccess:function(){return M},createDynamicTrackingState:function(){return t},createDynamicValidationState:function(){return u},createHangingInputAbortSignal:function(){return P},createRenderInBrowserAbortSignal:function(){return O},delayUntilRuntimeStage:function(){return aa},formatDynamicAPIAccesses:function(){return N},getFirstDynamicReason:function(){return v},isDynamicPostpone:function(){return G},isPrerenderInterruptedError:function(){return K},logDisallowedDynamicError:function(){return $},markCurrentScopeAsDynamic:function(){return w},postponeWithTracking:function(){return E},throwIfDisallowedDynamic:function(){return _},throwToInterruptStaticGeneration:function(){return x},trackAllowedDynamicAccess:function(){return Y},trackDynamicDataInDynamicRender:function(){return y},trackSynchronousPlatformIOAccessInDev:function(){return B},useDynamicRouteParams:function(){return R},useDynamicSearchParams:function(){return S}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(72131))&&d.__esModule?d:{default:d},i=a.r(3326),j=a.r(99392),k=a.r(32319),l=a.r(56704),m=a.r(35710),n=a.r(83590),o=a.r(76383),p=a.r(41997),q=a.r(88644),r=a.r(40656),s="function"==typeof h.default.unstable_postpone;function t(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function u(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function v(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function w(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return E(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function x(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function y(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function z(a,b,c){let d=J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function A(a,b,c,d){let e=d.dynamicTracking;z(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function B(a){a.stagedRendering&&a.stagedRendering.advanceStage(r.RenderStage.Dynamic)}function C(a,b,c,d){if(!1===d.controller.signal.aborted){z(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function D({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();E(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function E(a,b,c){(function(){if(!s)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(F(a,b))}function F(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function G(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&H(a.message)}function H(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===H(F("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let I="NEXT_PRERENDER_INTERRUPTED";function J(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=I,b}function K(a){return"object"==typeof a&&null!==a&&a.digest===I&&"name"in a&&"message"in a&&a instanceof Error}function L(a){return a.length>0}function M(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function N(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function O(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function P(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function Q(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function R(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return E(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function S(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let T=/\n\s+at Suspense \(<anonymous>\)/,U=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),V=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),W=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),X=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function Y(a,b,c,d){if(!X.test(b)){if(V.test(b)){c.hasDynamicMetadata=!0;return}if(W.test(b)){c.hasDynamicViewport=!0;return}if(U.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(T.test(b)){c.hasAllowedDynamic=!0;return}else{var e,f;let g;if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let h=(e=`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,f=b,(g=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})).stack=g.name+": "+e+f,g);return void c.dynamicErrors.push(h)}}}var Z=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function $(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function _(a,b,c,d){if(d.syncDynamicErrorWithStack)throw $(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)$(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function aa(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},44753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b)||(0,h.isPrerenderInterruptedError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=a.r(35710),e=a.r(31101),f=a.r(41997),g=a.r(77747),h=a.r(54110),i=a.r(3326);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},47083,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=a.r(44753).unstable_rethrow;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},21066,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return f.ReadonlyURLSearchParams},RedirectType:function(){return h.RedirectType},forbidden:function(){return j.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return g.permanentRedirect},redirect:function(){return g.redirect},unauthorized:function(){return k.unauthorized},unstable_isUnrecognizedActionError:function(){return m},unstable_rethrow:function(){return l.unstable_rethrow}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(75718),g=a.r(22099),h=a.r(11026),i=a.r(28102),j=a.r(64177),k=a.r(88213),l=a.r(47083);function m(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},74137,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return m.ReadonlyURLSearchParams},RedirectType:function(){return m.RedirectType},ServerInsertedHTMLContext:function(){return k.ServerInsertedHTMLContext},forbidden:function(){return m.forbidden},notFound:function(){return m.notFound},permanentRedirect:function(){return m.permanentRedirect},redirect:function(){return m.redirect},unauthorized:function(){return m.unauthorized},unstable_isUnrecognizedActionError:function(){return l.unstable_isUnrecognizedActionError},unstable_rethrow:function(){return m.unstable_rethrow},useParams:function(){return s},usePathname:function(){return q},useRouter:function(){return r},useSearchParams:function(){return p},useSelectedLayoutSegment:function(){return u},useSelectedLayoutSegments:function(){return t},useServerInsertedHTML:function(){return k.useServerInsertedHTML}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(9270),h=a.r(36313),i=a.r(39118),j=a.r(75718),k=a.r(18341),l=a.r(57997),m=a.r(21066),n=a.r(54110).useDynamicRouteParams,o=a.r(54110).useDynamicSearchParams;function p(){o?.("useSearchParams()");let a=(0,f.useContext)(h.SearchParamsContext);return(0,f.useMemo)(()=>a?new j.ReadonlyURLSearchParams(a):null,[a])}function q(){return n?.("usePathname()"),(0,f.useContext)(h.PathnameContext)}function r(){let a=(0,f.useContext)(g.AppRouterContext);if(null===a)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return a}function s(){return n?.("useParams()"),(0,f.useContext)(h.PathParamsContext)}function t(a="children"){n?.("useSelectedLayoutSegments()");let b=(0,f.useContext)(g.LayoutRouterContext);return b?(0,i.getSelectedLayoutSegmentPath)(b.parentTree,a):null}function u(a="children"){n?.("useSelectedLayoutSegment()"),(0,f.useContext)(h.NavigationPromisesContext);let b=t(a);return(0,i.computeSelectedLayoutSegment)(b,a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},50944,(a,b,c)=>{b.exports=a.r(74137)},72124,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}},56592,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(23952)),f=d(a.r(72124));c.default=class{constructor(a){var b,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=null!=(b=a.shouldThrowOnError)&&b,this.signal=a.signal,this.isMaybeSingle=null!=(c=a.isMaybeSingle)&&c,a.fetch?this.fetch=a.fetch:"undefined"==typeof fetch?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,b){return this.headers=new Headers(this.headers),this.headers.set(a,b),this}then(a,b){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let c=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var b,c,d,e;let g=null,h=null,i=null,j=a.status,k=a.statusText;if(a.ok){if("HEAD"!==this.method){let c=await a.text();""===c||(h="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null==(b=this.headers.get("Accept"))?void 0:b.includes("application/vnd.pgrst.plan+text"))?c:JSON.parse(c))}let e=null==(c=this.headers.get("Prefer"))?void 0:c.match(/count=(exact|planned|estimated)/),f=null==(d=a.headers.get("content-range"))?void 0:d.split("/");e&&f&&f.length>1&&(i=parseInt(f[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(h)&&(h.length>1?(g={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,i=null,j=406,k="Not Acceptable"):h=1===h.length?h[0]:null)}else{let b=await a.text();try{g=JSON.parse(b),Array.isArray(g)&&404===a.status&&(h=[],g=null,j=200,k="OK")}catch(c){404===a.status&&""===b?(j=204,k="No Content"):g={message:b}}if(g&&this.isMaybeSingle&&(null==(e=null==g?void 0:g.details)?void 0:e.includes("0 rows"))&&(g=null,j=200,k="OK"),g&&this.shouldThrowOnError)throw new f.default(g)}return{error:g,data:h,count:i,status:j,statusText:k}});return this.shouldThrowOnError||(c=c.catch(a=>{var b,c,d;return{error:{message:`${null!=(b=null==a?void 0:a.name)?b:"FetchError"}: ${null==a?void 0:a.message}`,details:`${null!=(c=null==a?void 0:a.stack)?c:""}`,hint:"",code:`${null!=(d=null==a?void 0:a.code)?d:""}`},data:null,count:null,status:0,statusText:""}})),c.then(a,b)}returns(){return this}overrideTypes(){return this}}},98564,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(56592));class f extends e.default{select(a){let b=!1,c=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!b?"":('"'===a&&(b=!b),a)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:b=!0,nullsFirst:c,foreignTable:d,referencedTable:e=d}={}){let f=e?`${e}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${b?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:b,referencedTable:c=b}={}){let d=void 0===c?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,b,{foreignTable:c,referencedTable:d=c}={}){let e=void 0===d?"offset":`${d}.offset`,f=void 0===d?"limit":`${d}.limit`;return this.url.searchParams.set(e,`${a}`),this.url.searchParams.set(f,`${b-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:b=!1,settings:c=!1,buffers:d=!1,wal:e=!1,format:f="text"}={}){var g;let h=[a?"analyze":null,b?"verbose":null,c?"settings":null,d?"buffers":null,e?"wal":null].filter(Boolean).join("|"),i=null!=(g=this.headers.get("Accept"))?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${i}"; options=${h};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}c.default=f},19001,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(98564));class f extends e.default{eq(a,b){return this.url.searchParams.append(a,`eq.${b}`),this}neq(a,b){return this.url.searchParams.append(a,`neq.${b}`),this}gt(a,b){return this.url.searchParams.append(a,`gt.${b}`),this}gte(a,b){return this.url.searchParams.append(a,`gte.${b}`),this}lt(a,b){return this.url.searchParams.append(a,`lt.${b}`),this}lte(a,b){return this.url.searchParams.append(a,`lte.${b}`),this}like(a,b){return this.url.searchParams.append(a,`like.${b}`),this}likeAllOf(a,b){return this.url.searchParams.append(a,`like(all).{${b.join(",")}}`),this}likeAnyOf(a,b){return this.url.searchParams.append(a,`like(any).{${b.join(",")}}`),this}ilike(a,b){return this.url.searchParams.append(a,`ilike.${b}`),this}ilikeAllOf(a,b){return this.url.searchParams.append(a,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(a,b){return this.url.searchParams.append(a,`ilike(any).{${b.join(",")}}`),this}is(a,b){return this.url.searchParams.append(a,`is.${b}`),this}in(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cs.{${b.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(b)}`),this}containedBy(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cd.{${b.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(b)}`),this}rangeGt(a,b){return this.url.searchParams.append(a,`sr.${b}`),this}rangeGte(a,b){return this.url.searchParams.append(a,`nxl.${b}`),this}rangeLt(a,b){return this.url.searchParams.append(a,`sl.${b}`),this}rangeLte(a,b){return this.url.searchParams.append(a,`nxr.${b}`),this}rangeAdjacent(a,b){return this.url.searchParams.append(a,`adj.${b}`),this}overlaps(a,b){return"string"==typeof b?this.url.searchParams.append(a,`ov.${b}`):this.url.searchParams.append(a,`ov.{${b.join(",")}}`),this}textSearch(a,b,{config:c,type:d}={}){let e="";"plain"===d?e="pl":"phrase"===d?e="ph":"websearch"===d&&(e="w");let f=void 0===c?"":`(${c})`;return this.url.searchParams.append(a,`${e}fts${f}.${b}`),this}match(a){return Object.entries(a).forEach(([a,b])=>{this.url.searchParams.append(a,`eq.${b}`)}),this}not(a,b,c){return this.url.searchParams.append(a,`not.${b}.${c}`),this}or(a,{foreignTable:b,referencedTable:c=b}={}){let d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,b,c){return this.url.searchParams.append(a,`${b}.${c}`),this}}c.default=f},3619,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(19001));c.default=class{constructor(a,{headers:b={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(b),this.schema=c,this.fetch=d}select(a,b){let{head:c=!1,count:d}=null!=b?b:{},f=!1,g=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!f?"":('"'===a&&(f=!f),a)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:c?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:b,defaultToNull:c=!0}={}){var d;if(b&&this.headers.append("Prefer",`count=${b}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(d=this.fetch)?d:fetch})}upsert(a,{onConflict:b,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){var g;if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),void 0!==b&&this.url.searchParams.set("on_conflict",b),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(g=this.fetch)?g:fetch})}update(a,{count:b}={}){var c;return b&&this.headers.append("Prefer",`count=${b}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(c=this.fetch)?c:fetch})}delete({count:a}={}){var b;return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(b=this.fetch)?b:fetch})}}},27749,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});let e=d(a.r(3619)),f=d(a.r(19001));class g{constructor(a,{headers:b={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(b),this.schemaName=c,this.fetch=d}from(a){let b=new URL(`${this.url}/${a}`);return new e.default(b,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new g(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,b={},{head:c=!1,get:d=!1,count:e}={}){var g;let h,i,j=new URL(`${this.url}/rpc/${a}`);c||d?(h=c?"HEAD":"GET",Object.entries(b).filter(([a,b])=>void 0!==b).map(([a,b])=>[a,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([a,b])=>{j.searchParams.append(a,b)})):(h="POST",i=b);let k=new Headers(this.headers);return e&&k.set("Prefer",`count=${e}`),new f.default({method:h,url:j,headers:k,schema:this.schemaName,body:i,fetch:null!=(g=this.fetch)?g:fetch})}}c.default=g},79614,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.PostgrestError=c.PostgrestBuilder=c.PostgrestTransformBuilder=c.PostgrestFilterBuilder=c.PostgrestQueryBuilder=c.PostgrestClient=void 0;let e=d(a.r(27749));c.PostgrestClient=e.default;let f=d(a.r(3619));c.PostgrestQueryBuilder=f.default;let g=d(a.r(19001));c.PostgrestFilterBuilder=g.default;let h=d(a.r(98564));c.PostgrestTransformBuilder=h.default;let i=d(a.r(56592));c.PostgrestBuilder=i.default;let j=d(a.r(72124));c.PostgrestError=j.default,c.default={PostgrestClient:e.default,PostgrestQueryBuilder:f.default,PostgrestFilterBuilder:g.default,PostgrestTransformBuilder:h.default,PostgrestBuilder:i.default,PostgrestError:j.default}},47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},4446,(a,b,c)=>{b.exports=a.x("net",()=>require("net"))},55004,(a,b,c)=>{b.exports=a.x("tls",()=>require("tls"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},65514,(a,b,c)=>{"use strict";let d=["nodebuffer","arraybuffer","fragments"],e="undefined"!=typeof Blob;e&&d.push("blob"),b.exports={BINARY_TYPES:d,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:e,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},40352,(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=a.r(65514),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(b.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let a=(()=>{let a=Error("Cannot find module 'bufferutil'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.mask=function(b,c,d,e,g){g<48?f(b,c,d,e,g):a.mask(b,c,d,e,g)},b.exports.unmask=function(b,c){b.length<32?g(b,c):a.unmask(b,c)}}catch(a){}},29110,(a,b,c)=>{"use strict";let d=Symbol("kDone"),e=Symbol("kRun");b.exports=class{constructor(a){this[d]=()=>{this.pending--,this[e]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[e]()}[e](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[d])}}}},19199,(a,b,c)=>{"use strict";let d,e=a.r(6461),f=a.r(40352),g=a.r(29110),{kStatusCode:h}=a.r(65514),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");function p(a){this[n].push(a),this[l]+=a.length}function q(a){(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)?this[n].push(a):(this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",q),this.reset())}function r(a){(this[k]._inflate=null,this[o])?this[m](this[o]):(a[h]=1007,this[m](a))}b.exports=class{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",r),this._inflate.on("data",q)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",p)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},55572,(a,b,c)=>{"use strict";let{isUtf8:d}=a.r(874),{hasBlob:e}=a.r(65514);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(b.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)b.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let a=(()=>{let a=Error("Cannot find module 'utf-8-validate'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.isValidUTF8=function(b){return b.length<32?f(b):a(b)}}catch(a){}},74160,(a,b,c)=>{"use strict";let{Writable:d}=a.r(88947),e=a.r(19199),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=a.r(65514),{concat:j,toArrayBuffer:k,unmask:l}=a.r(40352),{isValidStatusCode:m,isValidUTF8:n}=a.r(55572),o=Buffer[Symbol.species];b.exports=class extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0)return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop)this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);c>2097151?a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a))}haveLength(a){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}},10697,(a,b,c)=>{"use strict";let d,{Duplex:e}=a.r(88947),{randomFillSync:f}=a.r(54799),g=a.r(19199),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=a.r(65514),{isBlob:k,isValidStatusCode:l}=a.r(55572),{mask:m,toBuffer:n}=a.r(40352),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{this._socket.destroyed?s(this,Error("The socket was closed while data was being compressed"),d):(this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}b.exports=r},4049,(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=a.r(65514),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),b.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},20529,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(55572);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}b.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},89877,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(24836),f=a.r(21517),g=a.r(4446),h=a.r(55004),{randomBytes:i,createHash:j}=a.r(54799),{Duplex:k,Readable:l}=a.r(88947),{URL:m}=a.r(92509),n=a.r(19199),o=a.r(74160),p=a.r(10697),{isBlob:q}=a.r(55572),{BINARY_TYPES:r,EMPTY_BUFFER:s,GUID:t,kForOnEventAttribute:u,kListener:v,kStatusCode:w,kWebSocket:x,NOOP:y}=a.r(65514),{EventTarget:{addEventListener:z,removeEventListener:A}}=a.r(4049),{format:B,parse:C}=a.r(20529),{toBuffer:D}=a.r(40352),E=Symbol("kAborted"),F=[8,13],G=["CONNECTING","OPEN","CLOSING","CLOSED"],H=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class I extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=s,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=I.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:F[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!F.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${F.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void J(b,a);throw a}let s=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=p.createConnection||(q?L:K),p.defaultPort=p.defaultPort||s,p.port=h.port||s,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=B({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!H.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{M(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[E]||(o=b._req=null,J(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void M(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){J(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||M(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==I.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void M(b,c,"Invalid Upgrade header");let g=j("sha1").update(u+t).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void M(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void M(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void M(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=C(i)}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void M(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[x]=this,e[x]=this,a[x]=this,d.on("conclude",O),d.on("drain",P),d.on("error",Q),d.on("message",S),d.on("ping",T),d.on("pong",U),e.onerror=W,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Y),a.on("data",Z),a.on("end",$),a.on("error",_),this._readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===I.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=I.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),X(this)}}pause(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.ping(a||s,b,c))}pong(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.pong(a||s,b,c))}resume(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||s,d,c)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=I.CLOSING,this._socket.destroy())}}}function J(a,b){a._readyState=I.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function K(a){return a.path=a.socketPath,g.connect(a)}function L(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function M(a,b,c){a._readyState=I.CLOSING;let d=Error(c);Error.captureStackTrace(d,M),b.setHeader?(b[E]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(J,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function N(a,b,c){if(b){let c=q(b)?b.size:D(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${G[a.readyState]})`);process.nextTick(c,b)}}function O(a,b){let c=this[x];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[x]&&(c._socket.removeListener("data",Z),process.nextTick(V,c._socket),1005===a?c.close():c.close(a,b))}function P(){let a=this[x];a.isPaused||a._socket.resume()}function Q(a){let b=this[x];void 0!==b._socket[x]&&(b._socket.removeListener("data",Z),process.nextTick(V,b._socket),b.close(a[w])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function R(){this[x].emitClose()}function S(a,b){this[x].emit("message",a,b)}function T(a){let b=this[x];b._autoPong&&b.pong(a,!this._isServer,y),b.emit("ping",a)}function U(a){this[x].emit("pong",a)}function V(a){a.resume()}function W(a){let b=this[x];b.readyState!==I.CLOSED&&(b.readyState===I.OPEN&&(b._readyState=I.CLOSING,X(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function X(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),3e4)}function Y(){let a,b=this[x];this.removeListener("close",Y),this.removeListener("data",Z),this.removeListener("end",$),b._readyState=I.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[x]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",R),b._receiver.on("finish",R))}function Z(a){this[x]._receiver.write(a)||this.pause()}function $(){let a=this[x];a._readyState=I.CLOSING,a._receiver.end(),this.end()}function _(){let a=this[x];this.removeListener("error",_),this.on("error",y),a&&(a._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(I.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(I.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[u])return b[v];return null},set(b){for(let b of this.listeners(a))if(b[u]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[u]:!0})}})}),I.prototype.addEventListener=z,I.prototype.removeEventListener=A,b.exports=I},29e3,(a,b,c)=>{"use strict";a.r(89877);let{Duplex:d}=a.r(88947);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}b.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){a.readyState===a.CONNECTING?a.once("open",function(){h._final(b)}):null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){a.readyState===a.CONNECTING?a.once("open",function(){h._write(b,c,d)}):a.send(b,d)},h.on("end",f),h.on("error",g),h}},71553,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(55572);b.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},95837,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(21517),{Duplex:f}=a.r(88947),{createHash:g}=a.r(54799),h=a.r(20529),i=a.r(19199),j=a.r(71553),k=a.r(89877),{GUID:l,kWebSocket:m}=a.r(65514),n=/^[+/0-9A-Za-z]{22}==$/;function o(a){a._state=2,a.emit("close")}function p(){this.destroy()}function q(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function r(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,r),a.emit("wsClientError",d,c,b)}else q(c,d,e,f)}b.exports=class extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){const a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(o,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(o,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{o(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",p);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void r(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void r(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!n.test(e))return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void q(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){r(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],o={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),o[i.extensionName]=c)}catch(c){r(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return q(b,g||401,h,i);this.completeUpgrade(o,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return q(b,401)}this.completeUpgrade(o,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[m])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return q(e,503);let k=g("sha1").update(b+l).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],r=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),r._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",p),r.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(r),r.on("close",()=>{this.clients.delete(r),this._shouldEmitClose&&!this.clients.size&&process.nextTick(o,this)})),j(r,d)}}},74248,(a,b,c)=>{"use strict";let d=a.r(89877);d.createWebSocketStream=a.r(29e3),d.Server=a.r(95837),d.Receiver=a.r(74160),d.Sender=a.r(10697),d.WebSocket=d,d.WebSocketServer=d.Server,b.exports=d},68964,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],e=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...d],f=["null","undefined","string","number","bigint","boolean","symbol"];function g(a){return b=>typeof b===a}let{toString:h}=Object.prototype,i=a=>{let b=h.call(a).slice(8,-1);return/HTML\w+Element/.test(b)&&k.domElement(a)?"HTMLElement":e.includes(b)?b:void 0},j=a=>b=>i(b)===a;function k(a){if(null===a)return"null";switch(typeof a){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(k.observable(a))return"Observable";if(k.array(a))return"Array";if(k.buffer(a))return"Buffer";let b=i(a);if(b)return b;if(a instanceof String||a instanceof Boolean||a instanceof Number)throw TypeError("Please don't use object wrappers for primitive types");return"Object"}k.undefined=g("undefined"),k.string=g("string");let l=g("number");k.number=a=>l(a)&&!k.nan(a),k.bigint=g("bigint"),k.function_=g("function"),k.null_=a=>null===a,k.class_=a=>k.function_(a)&&a.toString().startsWith("class "),k.boolean=a=>!0===a||!1===a,k.symbol=g("symbol"),k.numericString=a=>k.string(a)&&!k.emptyStringOrWhitespace(a)&&!Number.isNaN(Number(a)),k.array=(a,b)=>!!Array.isArray(a)&&(!k.function_(b)||a.every(b)),k.buffer=a=>{var b,c,d;return null!=(d=null==(c=null==(b=null==a?void 0:a.constructor)?void 0:b.isBuffer)?void 0:c.call(b,a))&&d},k.blob=a=>j("Blob")(a),k.nullOrUndefined=a=>k.null_(a)||k.undefined(a),k.object=a=>!k.null_(a)&&("object"==typeof a||k.function_(a)),k.iterable=a=>k.function_(null==a?void 0:a[Symbol.iterator]),k.asyncIterable=a=>k.function_(null==a?void 0:a[Symbol.asyncIterator]),k.generator=a=>k.iterable(a)&&k.function_(null==a?void 0:a.next)&&k.function_(null==a?void 0:a.throw),k.asyncGenerator=a=>k.asyncIterable(a)&&k.function_(a.next)&&k.function_(a.throw),k.nativePromise=a=>j("Promise")(a),k.promise=a=>{let b;return k.nativePromise(a)||(b=a,k.function_(null==b?void 0:b.then)&&k.function_(null==b?void 0:b.catch))},k.generatorFunction=j("GeneratorFunction"),k.asyncGeneratorFunction=a=>"AsyncGeneratorFunction"===i(a),k.asyncFunction=a=>"AsyncFunction"===i(a),k.boundFunction=a=>k.function_(a)&&!a.hasOwnProperty("prototype"),k.regExp=j("RegExp"),k.date=j("Date"),k.error=j("Error"),k.map=a=>j("Map")(a),k.set=a=>j("Set")(a),k.weakMap=a=>j("WeakMap")(a),k.weakSet=a=>j("WeakSet")(a),k.int8Array=j("Int8Array"),k.uint8Array=j("Uint8Array"),k.uint8ClampedArray=j("Uint8ClampedArray"),k.int16Array=j("Int16Array"),k.uint16Array=j("Uint16Array"),k.int32Array=j("Int32Array"),k.uint32Array=j("Uint32Array"),k.float32Array=j("Float32Array"),k.float64Array=j("Float64Array"),k.bigInt64Array=j("BigInt64Array"),k.bigUint64Array=j("BigUint64Array"),k.arrayBuffer=j("ArrayBuffer"),k.sharedArrayBuffer=j("SharedArrayBuffer"),k.dataView=j("DataView"),k.enumCase=(a,b)=>Object.values(b).includes(a),k.directInstanceOf=(a,b)=>Object.getPrototypeOf(a)===b.prototype,k.urlInstance=a=>j("URL")(a),k.urlString=a=>{if(!k.string(a))return!1;try{return new URL(a),!0}catch(a){return!1}},k.truthy=a=>!!a,k.falsy=a=>!a,k.nan=a=>Number.isNaN(a),k.primitive=a=>{var b;return k.null_(a)||(b=typeof a,f.includes(b))},k.integer=a=>Number.isInteger(a),k.safeInteger=a=>Number.isSafeInteger(a),k.plainObject=a=>{if("[object Object]"!==h.call(a))return!1;let b=Object.getPrototypeOf(a);return null===b||b===Object.getPrototypeOf({})},k.typedArray=a=>{var b;return b=i(a),d.includes(b)},k.arrayLike=a=>{let b;return!k.nullOrUndefined(a)&&!k.function_(a)&&(b=a.length,k.safeInteger(b)&&b>=0)},k.inRange=(a,b)=>{if(k.number(b))return a>=Math.min(0,b)&&a<=Math.max(b,0);if(k.array(b)&&2===b.length)return a>=Math.min(...b)&&a<=Math.max(...b);throw TypeError(`Invalid range: ${JSON.stringify(b)}`)};let m=["innerHTML","ownerDocument","style","attributes","nodeValue"];k.domElement=a=>k.object(a)&&1===a.nodeType&&k.string(a.nodeName)&&!k.plainObject(a)&&m.every(b=>b in a),k.observable=a=>{var b,c;return!!a&&(a===(null==(b=a[Symbol.observable])?void 0:b.call(a))||a===(null==(c=a["@@observable"])?void 0:c.call(a)))},k.nodeStream=a=>k.object(a)&&k.function_(a.pipe)&&!k.observable(a),k.infinite=a=>a===1/0||a===-1/0;let n=a=>b=>k.integer(b)&&Math.abs(b%2)===a;k.evenInteger=n(0),k.oddInteger=n(1),k.emptyArray=a=>k.array(a)&&0===a.length,k.nonEmptyArray=a=>k.array(a)&&a.length>0,k.emptyString=a=>k.string(a)&&0===a.length,k.emptyStringOrWhitespace=a=>k.emptyString(a)||k.string(a)&&!/\S/.test(a),k.nonEmptyString=a=>k.string(a)&&a.length>0,k.nonEmptyStringAndNotWhitespace=a=>k.string(a)&&!k.emptyStringOrWhitespace(a),k.emptyObject=a=>k.object(a)&&!k.map(a)&&!k.set(a)&&0===Object.keys(a).length,k.nonEmptyObject=a=>k.object(a)&&!k.map(a)&&!k.set(a)&&Object.keys(a).length>0,k.emptySet=a=>k.set(a)&&0===a.size,k.nonEmptySet=a=>k.set(a)&&a.size>0,k.emptyMap=a=>k.map(a)&&0===a.size,k.nonEmptyMap=a=>k.map(a)&&a.size>0,k.propertyKey=a=>k.any([k.string,k.number,k.symbol],a),k.formData=a=>j("FormData")(a),k.urlSearchParams=a=>j("URLSearchParams")(a);let o=(a,b,c)=>{if(!k.function_(b))throw TypeError(`Invalid predicate: ${JSON.stringify(b)}`);if(0===c.length)throw TypeError("Invalid number of values");return a.call(c,b)};k.any=(a,...b)=>(k.array(a)?a:[a]).some(a=>o(Array.prototype.some,a,b)),k.all=(a,...b)=>o(Array.prototype.every,a,b);let p=(a,b,c,d={})=>{if(!a){let{multipleValues:a}=d,e=a?`received values of types ${[...new Set(c.map(a=>`\`${k(a)}\``))].join(", ")}`:`received value of type \`${k(c)}\``;throw TypeError(`Expected value which is \`${b}\`, ${e}.`)}};c.assert={undefined:a=>p(k.undefined(a),"undefined",a),string:a=>p(k.string(a),"string",a),number:a=>p(k.number(a),"number",a),bigint:a=>p(k.bigint(a),"bigint",a),function_:a=>p(k.function_(a),"Function",a),null_:a=>p(k.null_(a),"null",a),class_:a=>p(k.class_(a),"Class",a),boolean:a=>p(k.boolean(a),"boolean",a),symbol:a=>p(k.symbol(a),"symbol",a),numericString:a=>p(k.numericString(a),"string with a number",a),array:(a,b)=>{p(k.array(a),"Array",a),b&&a.forEach(b)},buffer:a=>p(k.buffer(a),"Buffer",a),blob:a=>p(k.blob(a),"Blob",a),nullOrUndefined:a=>p(k.nullOrUndefined(a),"null or undefined",a),object:a=>p(k.object(a),"Object",a),iterable:a=>p(k.iterable(a),"Iterable",a),asyncIterable:a=>p(k.asyncIterable(a),"AsyncIterable",a),generator:a=>p(k.generator(a),"Generator",a),asyncGenerator:a=>p(k.asyncGenerator(a),"AsyncGenerator",a),nativePromise:a=>p(k.nativePromise(a),"native Promise",a),promise:a=>p(k.promise(a),"Promise",a),generatorFunction:a=>p(k.generatorFunction(a),"GeneratorFunction",a),asyncGeneratorFunction:a=>p(k.asyncGeneratorFunction(a),"AsyncGeneratorFunction",a),asyncFunction:a=>p(k.asyncFunction(a),"AsyncFunction",a),boundFunction:a=>p(k.boundFunction(a),"Function",a),regExp:a=>p(k.regExp(a),"RegExp",a),date:a=>p(k.date(a),"Date",a),error:a=>p(k.error(a),"Error",a),map:a=>p(k.map(a),"Map",a),set:a=>p(k.set(a),"Set",a),weakMap:a=>p(k.weakMap(a),"WeakMap",a),weakSet:a=>p(k.weakSet(a),"WeakSet",a),int8Array:a=>p(k.int8Array(a),"Int8Array",a),uint8Array:a=>p(k.uint8Array(a),"Uint8Array",a),uint8ClampedArray:a=>p(k.uint8ClampedArray(a),"Uint8ClampedArray",a),int16Array:a=>p(k.int16Array(a),"Int16Array",a),uint16Array:a=>p(k.uint16Array(a),"Uint16Array",a),int32Array:a=>p(k.int32Array(a),"Int32Array",a),uint32Array:a=>p(k.uint32Array(a),"Uint32Array",a),float32Array:a=>p(k.float32Array(a),"Float32Array",a),float64Array:a=>p(k.float64Array(a),"Float64Array",a),bigInt64Array:a=>p(k.bigInt64Array(a),"BigInt64Array",a),bigUint64Array:a=>p(k.bigUint64Array(a),"BigUint64Array",a),arrayBuffer:a=>p(k.arrayBuffer(a),"ArrayBuffer",a),sharedArrayBuffer:a=>p(k.sharedArrayBuffer(a),"SharedArrayBuffer",a),dataView:a=>p(k.dataView(a),"DataView",a),enumCase:(a,b)=>p(k.enumCase(a,b),"EnumCase",a),urlInstance:a=>p(k.urlInstance(a),"URL",a),urlString:a=>p(k.urlString(a),"string with a URL",a),truthy:a=>p(k.truthy(a),"truthy",a),falsy:a=>p(k.falsy(a),"falsy",a),nan:a=>p(k.nan(a),"NaN",a),primitive:a=>p(k.primitive(a),"primitive",a),integer:a=>p(k.integer(a),"integer",a),safeInteger:a=>p(k.safeInteger(a),"integer",a),plainObject:a=>p(k.plainObject(a),"plain object",a),typedArray:a=>p(k.typedArray(a),"TypedArray",a),arrayLike:a=>p(k.arrayLike(a),"array-like",a),domElement:a=>p(k.domElement(a),"HTMLElement",a),observable:a=>p(k.observable(a),"Observable",a),nodeStream:a=>p(k.nodeStream(a),"Node.js Stream",a),infinite:a=>p(k.infinite(a),"infinite number",a),emptyArray:a=>p(k.emptyArray(a),"empty array",a),nonEmptyArray:a=>p(k.nonEmptyArray(a),"non-empty array",a),emptyString:a=>p(k.emptyString(a),"empty string",a),emptyStringOrWhitespace:a=>p(k.emptyStringOrWhitespace(a),"empty string or whitespace",a),nonEmptyString:a=>p(k.nonEmptyString(a),"non-empty string",a),nonEmptyStringAndNotWhitespace:a=>p(k.nonEmptyStringAndNotWhitespace(a),"non-empty string and not whitespace",a),emptyObject:a=>p(k.emptyObject(a),"empty object",a),nonEmptyObject:a=>p(k.nonEmptyObject(a),"non-empty object",a),emptySet:a=>p(k.emptySet(a),"empty set",a),nonEmptySet:a=>p(k.nonEmptySet(a),"non-empty set",a),emptyMap:a=>p(k.emptyMap(a),"empty map",a),nonEmptyMap:a=>p(k.nonEmptyMap(a),"non-empty map",a),propertyKey:a=>p(k.propertyKey(a),"PropertyKey",a),formData:a=>p(k.formData(a),"FormData",a),urlSearchParams:a=>p(k.urlSearchParams(a),"URLSearchParams",a),evenInteger:a=>p(k.evenInteger(a),"even integer",a),oddInteger:a=>p(k.oddInteger(a),"odd integer",a),directInstanceOf:(a,b)=>p(k.directInstanceOf(a,b),"T",a),inRange:(a,b)=>p(k.inRange(a,b),"in range",a),any:(a,...b)=>p(k.any(a,...b),"predicate returns truthy for any value",b,{multipleValues:!0}),all:(a,...b)=>p(k.all(a,...b),"predicate returns truthy for all values",b,{multipleValues:!0})},Object.defineProperties(k,{class:{value:k.class_},function:{value:k.function_},null:{value:k.null_}}),Object.defineProperties(c.assert,{class:{value:c.assert.class_},function:{value:c.assert.function_},null:{value:c.assert.null_}}),c.default=k,b.exports=k,b.exports.default=k,b.exports.assert=c.assert},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},48429,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=(a,b)=>{let c,d="function"==typeof(c="function"==typeof b?{connect:b}:b).connect,e="function"==typeof c.secureConnect,f="function"==typeof c.close,g=()=>{d&&c.connect(),a.encrypted&&e&&(a.authorized?c.secureConnect():a.authorizationError||a.once("secureConnect",c.secureConnect)),f&&a.once("close",c.close)};a.writable&&!a.connecting?g():a.connecting?a.once("connect",g):a.destroyed&&f&&c.close(a._hadError)};c.default=d,b.exports=d,b.exports.default=d},65763,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(48429),e=a.r(24361),f=Number(process.versions.node.split(".")[0]),g=a=>{if(a.timings)return a.timings;let b={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};a.timings=b;let c=a=>{let c=a.emit.bind(a);a.emit=(d,...e)=>("error"===d&&(b.error=Date.now(),b.phases.total=b.error-b.start,a.emit=c),c(d,...e))};c(a);let g=()=>{b.abort=Date.now(),(!b.response||f>=13)&&(b.phases.total=Date.now()-b.start)};a.prependOnceListener("abort",g);let h=a=>{if(b.socket=Date.now(),b.phases.wait=b.socket-b.start,e.types.isProxy(a))return;let c=()=>{b.lookup=Date.now(),b.phases.dns=b.lookup-b.socket};a.prependOnceListener("lookup",c),d.default(a,{connect:()=>{b.connect=Date.now(),void 0===b.lookup&&(a.removeListener("lookup",c),b.lookup=b.connect,b.phases.dns=b.lookup-b.socket),b.phases.tcp=b.connect-b.lookup},secureConnect:()=>{b.secureConnect=Date.now(),b.phases.tls=b.secureConnect-b.connect}})};a.socket?h(a.socket):a.prependOnceListener("socket",h);let i=()=>{var a;b.upload=Date.now(),b.phases.request=b.upload-(null!=(a=b.secureConnect)?a:b.connect)};return("boolean"==typeof a.writableFinished?a.writableFinished:a.finished&&0===a.outputSize&&(!a.socket||0===a.socket.writableLength))?i():a.prependOnceListener("finish",i),a.prependOnceListener("response",a=>{b.response=Date.now(),b.phases.firstByte=b.response-b.upload,a.timings=b,c(a),a.prependOnceListener("end",()=>{b.end=Date.now(),b.phases.download=b.end-b.response,b.phases.total=b.end-b.start}),a.prependOnceListener("aborted",g)}),b};c.default=g,b.exports=g,b.exports.default=g},79594,(a,b,c)=>{b.exports=a.x("dns",()=>require("dns"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},25600,(a,b,c)=>{"use strict";let{V4MAPPED:d,ADDRCONFIG:e,ALL:f,promises:{Resolver:g},lookup:h}=a.r(79594),{promisify:i}=a.r(24361),j=a.r(46786),k=Symbol("cacheableLookupCreateConnection"),l=Symbol("cacheableLookupInstance"),m=Symbol("expires"),n="number"==typeof f,o=a=>{if(!(a&&"function"==typeof a.createConnection))throw Error("Expected an Agent instance as the first argument")},p=()=>{let a=!1,b=!1;for(let c of Object.values(j.networkInterfaces()))for(let d of c)if(!d.internal&&("IPv6"===d.family?b=!0:a=!0,a&&b))return{has4:a,has6:b};return{has4:a,has6:b}},q={ttl:!0},r={all:!0};class s{constructor({cache:a=new Map,maxTtl:b=1/0,fallbackDuration:c=3600,errorTtl:d=.15,resolver:e=new g,lookup:f=h}={}){if(this.maxTtl=b,this.errorTtl=d,this._cache=a,this._resolver=e,this._dnsLookup=i(f),this._resolver instanceof g?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=i(this._resolver.resolve4.bind(this._resolver)),this._resolve6=i(this._resolver.resolve6.bind(this._resolver))),this._iface=p(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,c<1)this._fallback=!1;else{this._fallback=!0;const a=setInterval(()=>{this._hostnamesToFallback.clear()},1e3*c);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(a){this.clear(),this._resolver.setServers(a)}get servers(){return this._resolver.getServers()}lookup(a,b,c){if("function"==typeof b?(c=b,b={}):"number"==typeof b&&(b={family:b}),!c)throw Error("Callback must be a function.");this.lookupAsync(a,b).then(a=>{b.all?c(null,a):c(null,a.address,a.family,a.expires,a.ttl)},c)}async lookupAsync(a,b={}){"number"==typeof b&&(b={family:b});let c=await this.query(a);if(6===b.family){let a=c.filter(a=>6===a.family);if(b.hints&d)if(n&&b.hints&f||0===a.length)for(let a of c)6!==a.family&&(a.address=`::ffff:${a.address}`,a.family=6);else c=a;else c=a}else 4===b.family&&(c=c.filter(a=>4===a.family));if(b.hints&e){let{_iface:a}=this;c=c.filter(b=>6===b.family?a.has6:a.has4)}if(0===c.length){let b=Error(`cacheableLookup ENOTFOUND ${a}`);throw b.code="ENOTFOUND",b.hostname=a,b}return b.all?c:c[0]}async query(a){let b=await this._cache.get(a);if(!b){let c=this._pending[a];if(c)b=await c;else{let c=this.queryAndCache(a);this._pending[a]=c;try{b=await c}finally{delete this._pending[a]}}}return b.map(a=>({...a}))}async _resolve(a){let b=async a=>{try{return await a}catch(a){if("ENODATA"===a.code||"ENOTFOUND"===a.code)return[];throw a}},[c,d]=await Promise.all([this._resolve4(a,q),this._resolve6(a,q)].map(a=>b(a))),e=0,f=0,g=0,h=Date.now();for(let a of c)a.family=4,a.expires=h+1e3*a.ttl,e=Math.max(e,a.ttl);for(let a of d)a.family=6,a.expires=h+1e3*a.ttl,f=Math.max(f,a.ttl);return g=c.length>0?d.length>0?Math.min(e,f):e:f,{entries:[...c,...d],cacheTtl:g}}async _lookup(a){try{return{entries:await this._dnsLookup(a,{all:!0}),cacheTtl:0}}catch(a){return{entries:[],cacheTtl:0}}}async _set(a,b,c){if(this.maxTtl>0&&c>0){c=1e3*Math.min(c,this.maxTtl),b[m]=Date.now()+c;try{await this._cache.set(a,b,c)}catch(a){this.lookupAsync=async()=>{let b=Error("Cache Error. Please recreate the CacheableLookup instance.");throw b.cause=a,b}}Symbol.iterator in this._cache&&this._tick(c)}}async queryAndCache(a){if(this._hostnamesToFallback.has(a))return this._dnsLookup(a,r);let b=await this._resolve(a);0===b.entries.length&&this._fallback&&0!==(b=await this._lookup(a)).entries.length&&this._hostnamesToFallback.add(a);let c=0===b.entries.length?this.errorTtl:b.cacheTtl;return await this._set(a,b.entries,c),b.entries}_tick(a){let b=this._nextRemovalTime;(!b||a<b)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=a,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let a=1/0,b=Date.now();for(let[c,d]of this._cache){let e=d[m];b>=e?this._cache.delete(c):e<a&&(a=e)}a!==1/0&&this._tick(a-b)},a),this._removalTimeout.unref&&this._removalTimeout.unref())}install(a){if(o(a),k in a)throw Error("CacheableLookup has been already installed");a[k]=a.createConnection,a[l]=this,a.createConnection=(b,c)=>("lookup"in b||(b.lookup=this.lookup),a[k](b,c))}uninstall(a){if(o(a),a[k]){if(a[l]!==this)throw Error("The agent is not owned by this CacheableLookup instance");a.createConnection=a[k],delete a[k],delete a[l]}}updateInterfaceInfo(){let{_iface:a}=this;this._iface=p(),(a.has4&&!this._iface.has4||a.has6&&!this._iface.has6)&&this._cache.clear()}clear(a){a?this._cache.delete(a):this._cache.clear()}}b.exports=s,b.exports.default=s},80852,(a,b,c)=>{"use strict";let d=(a,b)=>b.some(b=>b instanceof RegExp?b.test(a):b===a);b.exports=(a,b)=>{if(b={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...b},a=a.trim(),/^data:/i.test(a))return((a,{stripHash:b})=>{let c=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(a);if(!c)throw Error(`Invalid URL: ${a}`);let{type:d,data:e,hash:f}=c.groups,g=d.split(";");f=b?"":f;let h=!1;"base64"===g[g.length-1]&&(g.pop(),h=!0);let i=(g.shift()||"").toLowerCase(),j=[...g.map(a=>{let[b,c=""]=a.split("=").map(a=>a.trim());return"charset"===b&&"us-ascii"===(c=c.toLowerCase())?"":`${b}${c?`=${c}`:""}`}).filter(Boolean)];return h&&j.push("base64"),(0!==j.length||i&&"text/plain"!==i)&&j.unshift(i),`data:${j.join(";")},${h?e.trim():e}${f?`#${f}`:""}`})(a,b);if(/^view-source:/i.test(a))throw Error("`view-source:` is not supported as it is a non-standard protocol");let c=a.startsWith("//");!c&&/^\.*\//.test(a)||(a=a.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,b.defaultProtocol));let e=new URL(a);if(b.forceHttp&&b.forceHttps)throw Error("The `forceHttp` and `forceHttps` options cannot be used together");if(b.forceHttp&&"https:"===e.protocol&&(e.protocol="http:"),b.forceHttps&&"http:"===e.protocol&&(e.protocol="https:"),b.stripAuthentication&&(e.username="",e.password=""),b.stripHash?e.hash="":b.stripTextFragment&&(e.hash=e.hash.replace(/#?:~:text.*?$/i,"")),e.pathname&&(e.pathname=e.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),e.pathname)try{e.pathname=decodeURI(e.pathname)}catch(a){}if(!0===b.removeDirectoryIndex&&(b.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(b.removeDirectoryIndex)&&b.removeDirectoryIndex.length>0){let a=e.pathname.split("/");d(a[a.length-1],b.removeDirectoryIndex)&&(e.pathname=(a=a.slice(0,a.length-1)).slice(1).join("/")+"/")}if(e.hostname&&(e.hostname=e.hostname.replace(/\.$/,""),b.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(e.hostname)&&(e.hostname=e.hostname.replace(/^www\./,""))),Array.isArray(b.removeQueryParameters))for(let a of[...e.searchParams.keys()])d(a,b.removeQueryParameters)&&e.searchParams.delete(a);!0===b.removeQueryParameters&&(e.search=""),b.sortQueryParameters&&e.searchParams.sort(),b.removeTrailingSlash&&(e.pathname=e.pathname.replace(/\/$/,""));let f=a;return a=e.toString(),b.removeSingleSlash||"/"!==e.pathname||f.endsWith("/")||""!==e.hash||(a=a.replace(/\/$/,"")),(b.removeTrailingSlash||"/"===e.pathname)&&""===e.hash&&b.removeSingleSlash&&(a=a.replace(/\/$/,"")),c&&!b.normalizeProtocol&&(a=a.replace(/^http:\/\//,"//")),b.stripProtocol&&(a=a.replace(/^(?:https?:)?\/\//,"")),a}},97894,(a,b,c)=>{b.exports=function a(b,c){if(b&&c)return a(b)(c);if("function"!=typeof b)throw TypeError("need wrapper function");return Object.keys(b).forEach(function(a){d[a]=b[a]}),d;function d(){for(var a=Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];var d=b.apply(this,a),e=a[a.length-1];return"function"==typeof d&&d!==e&&Object.keys(e).forEach(function(a){d[a]=e[a]}),d}}},45713,(a,b,c)=>{var d=a.r(97894);function e(a){var b=function(){return b.called?b.value:(b.called=!0,b.value=a.apply(this,arguments))};return b.called=!1,b}function f(a){var b=function(){if(b.called)throw Error(b.onceError);return b.called=!0,b.value=a.apply(this,arguments)};return b.onceError=(a.name||"Function wrapped with `once`")+" shouldn't be called more than once",b.called=!1,b}b.exports=d(e),b.exports.strict=d(f),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return f(this)},configurable:!0})})},75444,(a,b,c)=>{var d=a.r(45713),e=function(){},f=a.g.Bare?queueMicrotask:process.nextTick.bind(process),g=function(a,b,c){if("function"==typeof b)return g(a,null,b);b||(b={}),c=d(c||e);var h=a._writableState,i=a._readableState,j=b.readable||!1!==b.readable&&a.readable,k=b.writable||!1!==b.writable&&a.writable,l=!1,m=function(){a.writable||n()},n=function(){k=!1,j||c.call(a)},o=function(){j=!1,k||c.call(a)},p=function(b){c.call(a,b?Error("exited with error code: "+b):null)},q=function(b){c.call(a,b)},r=function(){f(s)},s=function(){if(!l&&(j&&!(i&&i.ended&&!i.destroyed)||k&&!(h&&h.ended&&!h.destroyed)))return c.call(a,Error("premature close"))},t=function(){a.req.on("finish",n)};return a.setHeader&&"function"==typeof a.abort?(a.on("complete",n),a.on("abort",r),a.req?t():a.on("request",t)):k&&!h&&(a.on("end",m),a.on("close",m)),a.stdio&&Array.isArray(a.stdio)&&3===a.stdio.length&&a.on("exit",p),a.on("end",o),a.on("finish",n),!1!==b.error&&a.on("error",q),a.on("close",r),function(){l=!0,a.removeListener("complete",n),a.removeListener("abort",r),a.removeListener("request",t),a.req&&a.req.removeListener("finish",n),a.removeListener("end",m),a.removeListener("close",m),a.removeListener("finish",n),a.removeListener("exit",p),a.removeListener("end",o),a.removeListener("error",q),a.removeListener("close",r)}};b.exports=g},41383,(a,b,c)=>{var d,e=a.r(45713),f=a.r(75444);try{d=a.r(22734)}catch(a){}var g=function(){},h="undefined"!=typeof process&&/^v?\.0/.test(process.version),i=function(a){return"function"==typeof a},j=function(a,b,c,j){j=e(j);var k=!1;a.on("close",function(){k=!0}),f(a,{readable:b,writable:c},function(a){if(a)return j(a);k=!0,j()});var l=!1;return function(b){if(!k&&!l){if(l=!0,h&&d&&(a instanceof(d.ReadStream||g)||a instanceof(d.WriteStream||g))&&i(a.close))return a.close(g);if(a.setHeader&&i(a.abort))return a.abort();if(i(a.destroy))return a.destroy();j(b||Error("stream was destroyed"))}}},k=function(a){a()},l=function(a,b){return a.pipe(b)};b.exports=function(){var a,b=Array.prototype.slice.call(arguments),c=i(b[b.length-1]||g)&&b.pop()||g;if(Array.isArray(b[0])&&(b=b[0]),b.length<2)throw Error("pump requires two streams per minimum");var d=b.map(function(e,f){var g=f<b.length-1;return j(e,g,f>0,function(b){a||(a=b),b&&d.forEach(k),g||(d.forEach(k),c(a))})});return b.reduce(l)}},22617,(a,b,c)=>{"use strict";let{PassThrough:d}=a.r(88947);b.exports=a=>{let{array:b}=a={...a},{encoding:c}=a,e="buffer"===c,f=!1;b?f=!(c||e):c=c||"utf8",e&&(c=null);let g=new d({objectMode:f});c&&g.setEncoding(c);let h=0,i=[];return g.on("data",a=>{i.push(a),f?h=i.length:h+=a.length}),g.getBufferedValue=()=>b?i:e?Buffer.concat(i,h):i.join(""),g.getBufferedLength=()=>h,g}},52248,(a,b,c)=>{"use strict";let{constants:d}=a.r(874),e=a.r(41383),f=a.r(22617);class g extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function h(a,b){let c;if(!a)return Promise.reject(Error("Expected a stream"));let{maxBuffer:h}=b={maxBuffer:1/0,...b};return await new Promise((i,j)=>{let k=a=>{a&&c.getBufferedLength()<=d.MAX_LENGTH&&(a.bufferedData=c.getBufferedValue()),j(a)};(c=e(a,f(b),a=>{a?k(a):i()})).on("data",()=>{c.getBufferedLength()>h&&k(new g)})}),c.getBufferedValue()}b.exports=h,b.exports.default=h,b.exports.buffer=(a,b)=>h(a,{...b,encoding:"buffer"}),b.exports.array=(a,b)=>h(a,{...b,array:!0}),b.exports.MaxBufferError=g},88062,(a,b,c)=>{"use strict";let d=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),e=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),f=new Set([500,502,503,504]),g={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},h={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function i(a){let b=parseInt(a,10);return isFinite(b)?b:0}function j(a){let b={};if(!a)return b;for(let c of a.trim().split(/,/)){let[a,d]=c.split(/=/,2);b[a.trim()]=void 0===d||d.trim().replace(/^"|"$/g,"")}return b}b.exports=class{constructor(a,b,{shared:c,cacheHeuristic:d,immutableMinTimeToLive:e,ignoreCargoCult:f,_fromObject:g}={}){if(g)return void this._fromObject(g);if(!b||!b.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(a),this._responseTime=this.now(),this._isShared=!1!==c,this._ignoreCargoCult=!!f,this._cacheHeuristic=void 0!==d?d:.1,this._immutableMinTtl=void 0!==e?e:864e5,this._status="status"in b?b.status:200,this._resHeaders=b.headers,this._rescc=j(b.headers["cache-control"]),this._method="method"in a?a.method:"GET",this._url=a.url,this._host=a.headers.host,this._noAuthorization=!a.headers.authorization,this._reqHeaders=b.headers.vary?a.headers:null,this._reqcc=j(a.headers["cache-control"]),this._ignoreCargoCult&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":function(a){let b=[];for(let c in a){let d=a[c];b.push(!0===d?c:c+"="+d)}if(b.length)return b.join(", ")}(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==b.headers["cache-control"]&&/no-cache/.test(b.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())&&e.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||d.has(this._status)))}_hasExplicitExpiration(){return!!(this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires)}_assertRequestHasHeaders(a){if(!a||!a.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(a){return!this.evaluateRequest(a).revalidation}_evaluateRequestHitResult(a){return{response:{headers:this.responseHeaders()},revalidation:a}}_evaluateRequestRevalidation(a,b){return{synchronous:b,headers:this.revalidationHeaders(a)}}_evaluateRequestMissResult(a){return{response:void 0,revalidation:this._evaluateRequestRevalidation(a,!0)}}evaluateRequest(a){if(this._assertRequestHasHeaders(a),this._rescc["must-revalidate"]||!this._requestMatches(a,!1))return this._evaluateRequestMissResult(a);let b=j(a.headers["cache-control"]);return b["no-cache"]||/no-cache/.test(a.headers.pragma)||b["max-age"]&&this.age()>i(b["max-age"])||b["min-fresh"]&&this.maxAge()-this.age()<i(b["min-fresh"])?this._evaluateRequestMissResult(a):this.stale()?"max-stale"in b&&(!0===b["max-stale"]||b["max-stale"]>this.age()-this.maxAge())?this._evaluateRequestHitResult(void 0):this.useStaleWhileRevalidate()?this._evaluateRequestHitResult(this._evaluateRequestRevalidation(a,!1)):this._evaluateRequestMissResult(a):this._evaluateRequestHitResult(void 0)}_requestMatches(a,b){return!!((!this._url||this._url===a.url)&&this._host===a.headers.host&&(!a.method||this._method===a.method||b&&"HEAD"===a.method)&&this._varyMatches(a))}_allowsStoringAuthenticated(){return!!(this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"])}_varyMatches(a){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;for(let b of this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/))if(a.headers[b]!==this._reqHeaders[b])return!1;return!0}_copyWithoutHopByHopHeaders(a){let b={};for(let c in a)g[c]||(b[c]=a[c]);if(a.connection)for(let c of a.connection.trim().split(/\s*,\s*/))delete b[c];if(b.warning){let a=b.warning.split(/,/).filter(a=>!/^\s*1[0-9][0-9]/.test(a));a.length?b.warning=a.join(",").trim():delete b.warning}return b}responseHeaders(){let a=this._copyWithoutHopByHopHeaders(this._resHeaders),b=this.age();return b>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(a.warning=(a.warning?`${a.warning}, `:"")+'113 - "rfc7234 5.5.4"'),a.age=`${Math.round(b)}`,a.date=new Date(this.now()).toUTCString(),a}date(){let a=Date.parse(this._resHeaders.date);return isFinite(a)?a:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return i(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||"*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return i(this._rescc["s-maxage"])}if(this._rescc["max-age"])return i(this._rescc["max-age"]);let a=this._rescc.immutable?this._immutableMinTtl:0,b=this.date();if(this._resHeaders.expires){let c=Date.parse(this._resHeaders.expires);return Number.isNaN(c)||c<b?0:Math.max(a,(c-b)/1e3)}if(this._resHeaders["last-modified"]){let c=Date.parse(this._resHeaders["last-modified"]);if(isFinite(c)&&b>c)return Math.max(a,(b-c)/1e3*this._cacheHeuristic)}return a}timeToLive(){let a=this.maxAge()-this.age(),b=a+i(this._rescc["stale-if-error"]),c=a+i(this._rescc["stale-while-revalidate"]);return Math.round(1e3*Math.max(0,a,b,c))}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+i(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){let a=i(this._rescc["stale-while-revalidate"]);return a>0&&this.maxAge()+a>this.age()}static fromObject(a){return new this(void 0,void 0,{_fromObject:a})}_fromObject(a){if(this._responseTime)throw Error("Reinitialized");if(!a||1!==a.v)throw Error("Invalid serialization");this._responseTime=a.t,this._isShared=a.sh,this._cacheHeuristic=a.ch,this._immutableMinTtl=void 0!==a.imm?a.imm:864e5,this._ignoreCargoCult=!!a.icc,this._status=a.st,this._resHeaders=a.resh,this._rescc=a.rescc,this._method=a.m,this._url=a.u,this._host=a.h,this._noAuthorization=a.a,this._reqHeaders=a.reqh,this._reqcc=a.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,icc:this._ignoreCargoCult,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(a){this._assertRequestHasHeaders(a);let b=this._copyWithoutHopByHopHeaders(a.headers);if(delete b["if-range"],!this._requestMatches(a,!0)||!this.storable())return delete b["if-none-match"],delete b["if-modified-since"],b;if(this._resHeaders.etag&&(b["if-none-match"]=b["if-none-match"]?`${b["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),b["accept-ranges"]||b["if-match"]||b["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete b["if-modified-since"],b["if-none-match"]){let a=b["if-none-match"].split(/,/).filter(a=>!/^\s*W\//.test(a));a.length?b["if-none-match"]=a.join(",").trim():delete b["if-none-match"]}}else this._resHeaders["last-modified"]&&!b["if-modified-since"]&&(b["if-modified-since"]=this._resHeaders["last-modified"]);return b}revalidatedPolicy(a,b){if(this._assertRequestHasHeaders(a),this._useStaleIfError()&&(!b||f.has(b.status)))return{policy:this,modified:!1,matches:!0};if(!b||!b.headers)throw Error("Response headers missing");let c=!1;void 0!==b.status&&304!=b.status?c=!1:b.headers.etag&&!/^\s*W\//.test(b.headers.etag)?c=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===b.headers.etag:this._resHeaders.etag&&b.headers.etag?c=this._resHeaders.etag.replace(/^\s*W\//,"")===b.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?c=this._resHeaders["last-modified"]===b.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||b.headers.etag||b.headers["last-modified"]||(c=!0);let d={shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl,ignoreCargoCult:this._ignoreCargoCult};if(!c)return{policy:new this.constructor(a,b,d),modified:304!=b.status,matches:!1};let e={};for(let a in this._resHeaders)e[a]=a in b.headers&&!h[a]?b.headers[a]:this._resHeaders[a];let g=Object.assign({},b,{status:this._status,method:this._method,headers:e});return{policy:new this.constructor(a,g,d),modified:!1,matches:!0}}}},66077,(a,b,c)=>{"use strict";b.exports=a=>{let b={};for(let[c,d]of Object.entries(a))b[c.toLowerCase()]=d;return b}},21713,(a,b,c)=>{"use strict";let d=a.r(88947).Readable,e=a.r(66077);b.exports=class extends d{constructor(a,b,c,d){if("number"!=typeof a)throw TypeError("Argument `statusCode` should be a number");if("object"!=typeof b)throw TypeError("Argument `headers` should be an object");if(!(c instanceof Buffer))throw TypeError("Argument `body` should be a buffer");if("string"!=typeof d)throw TypeError("Argument `url` should be a string");super(),this.statusCode=a,this.headers=e(b),this.body=c,this.url=d}_read(){this.push(this.body),this.push(null)}}},45928,(a,b,c)=>{"use strict";let d=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];b.exports=(a,b)=>{for(let c of new Set(Object.keys(a).concat(d)))c in b||(b[c]="function"==typeof a[c]?a[c].bind(a):a[c])}},47985,(a,b,c)=>{"use strict";let d=a.r(88947).PassThrough,e=a.r(45928);b.exports=a=>{if(!(a&&a.pipe))throw TypeError("Parameter `response` must be a response stream.");let b=new d;return e(a,b),a.pipe(b)}},62139,(a,b,c)=>{b.exports=a.x("keyv",()=>require("keyv"))},95364,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(92509),f=a.r(80852),g=a.r(52248),h=a.r(88062),i=a.r(21713),j=a.r(66077),k=a.r(47985),l=a.r(62139);class m{constructor(a,b){if("function"!=typeof a)throw TypeError("Parameter `request` must be a function");return this.cache=new l({uri:"string"==typeof b&&b,store:"string"!=typeof b&&b,namespace:"cacheable-request"}),this.createCacheableRequest(a)}createCacheableRequest(a){return(b,c)=>{var l;let o,p;if("string"==typeof b)o=n(e.parse(b)),b={};else if(b instanceof e.URL)o=n(e.parse(b.toString())),b={};else{let[a,...c]=(b.path||"").split("?"),d=c.length>0?`?${c.join("?")}`:"";o=n({...b,pathname:a,search:d})}(b={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...b,...((p={...l=o}).path=`${l.pathname||"/"}${l.search||""}`,delete p.pathname,delete p.search,p)}).headers=j(b.headers);let q=new d,r=f(e.format(o),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),s=`${b.method}:${r}`,t=!1,u=!1,v=b=>{let d;u=!0;let e=!1,f=new Promise(a=>{d=()=>{e||(e=!0,a())}}),j=a=>{let d;if(t&&!b.forceRefresh){a.status=a.statusCode;let c=h.fromObject(t.cachePolicy).revalidatedPolicy(b,a);if(!c.modified){let b=c.policy.responseHeaders();(a=new i(t.statusCode,b,t.body,t.url)).cachePolicy=c.policy,a.fromCache=!0}}a.fromCache||(a.cachePolicy=new h(b,a,b),a.fromCache=!1),b.cache&&a.cachePolicy.storable()?(d=k(a),(async()=>{try{let c=g.buffer(a);if(await Promise.race([f,new Promise(b=>a.once("end",b))]),e)return;let d=await c,h={cachePolicy:a.cachePolicy.toObject(),url:a.url,statusCode:a.fromCache?t.statusCode:a.statusCode,body:d},i=b.strictTtl?a.cachePolicy.timeToLive():void 0;b.maxTtl&&(i=i?Math.min(i,b.maxTtl):b.maxTtl),await this.cache.set(s,h,i)}catch(a){q.emit("error",new m.CacheError(a))}})()):b.cache&&t&&(async()=>{try{await this.cache.delete(s)}catch(a){q.emit("error",new m.CacheError(a))}})(),q.emit("response",d||a),"function"==typeof c&&c(d||a)};try{let c=a(b,j);c.once("error",d),c.once("abort",d),q.emit("request",c)}catch(a){q.emit("error",new m.RequestError(a))}};return(async()=>{let a=async a=>{await Promise.resolve();let b=a.cache?await this.cache.get(s):void 0;if(void 0===b)return v(a);let d=h.fromObject(b.cachePolicy);if(d.satisfiesWithoutRevalidation(a)&&!a.forceRefresh){let a=d.responseHeaders(),e=new i(b.statusCode,a,b.body,b.url);e.cachePolicy=d,e.fromCache=!0,q.emit("response",e),"function"==typeof c&&c(e)}else t=b,a.headers=d.revalidationHeaders(a),v(a)},d=a=>q.emit("error",new m.CacheError(a));this.cache.once("error",d),q.on("response",()=>this.cache.removeListener("error",d));try{await a(b)}catch(a){b.automaticFailover&&!u&&v(b),q.emit("error",new m.CacheError(a))}})(),q}}}function n(a){return{protocol:a.protocol,auth:a.auth,hostname:a.hostname||a.host||"localhost",port:a.port,pathname:a.pathname,search:a.search}}m.RequestError=class extends Error{constructor(a){super(a.message),this.name="RequestError",Object.assign(this,a)}},m.CacheError=class extends Error{constructor(a){super(a.message),this.name="CacheError",Object.assign(this,a)}},b.exports=m},61740,(a,b,c)=>{"use strict";let d=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];b.exports=(a,b)=>{if(b._readableState.autoDestroy)throw Error("The second stream must have the `autoDestroy` option set to `false`");let c=new Set(Object.keys(a).concat(d)),e={};for(let d of c)d in b||(e[d]={get(){let b=a[d];return"function"==typeof b?b.bind(a):b},set(b){a[d]=b},enumerable:!0,configurable:!1});return Object.defineProperties(b,e),a.once("aborted",()=>{b.destroy(),b.emit("aborted")}),a.once("close",()=>{a.complete&&b.readable?b.once("end",()=>{b.emit("close")}):b.emit("close")}),b}},74100,(a,b,c)=>{"use strict";let{Transform:d,PassThrough:e}=a.r(88947),f=a.r(6461),g=a.r(61740);b.exports=a=>{let b=(a.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(b))return a;let c="br"===b;if(c&&"function"!=typeof f.createBrotliDecompress)return a.destroy(Error("Brotli is not supported on Node.js < 12")),a;let h=!0,i=new d({transform(a,b,c){h=!1,c(null,a)},flush(a){a()}}),j=new e({autoDestroy:!1,destroy(b,c){a.destroy(),c(b)}}),k=c?f.createBrotliDecompress():f.createUnzip();return k.once("error",b=>{h&&!a.readable?j.end():j.destroy(b)}),g(a,j),a.pipe(i).pipe(k).pipe(j),j}},25328,(a,b,c)=>{b.exports=a.x("http2",()=>require("http2"))},35027,(a,b,c)=>{"use strict";class d{constructor(a={}){if(!(a.maxSize&&a.maxSize>0))throw TypeError("`maxSize` must be a number greater than 0");this.maxSize=a.maxSize,this.onEviction=a.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(a,b){if(this.cache.set(a,b),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(let[a,b]of this.oldCache.entries())this.onEviction(a,b);this.oldCache=this.cache,this.cache=new Map}}get(a){if(this.cache.has(a))return this.cache.get(a);if(this.oldCache.has(a)){let b=this.oldCache.get(a);return this.oldCache.delete(a),this._set(a,b),b}}set(a,b){return this.cache.has(a)?this.cache.set(a,b):this._set(a,b),this}has(a){return this.cache.has(a)||this.oldCache.has(a)}peek(a){return this.cache.has(a)?this.cache.get(a):this.oldCache.has(a)?this.oldCache.get(a):void 0}delete(a){let b=this.cache.delete(a);return b&&this._size--,this.oldCache.delete(a)||b}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[a]of this)yield a}*values(){for(let[,a]of this)yield a}*[Symbol.iterator](){for(let a of this.cache)yield a;for(let a of this.oldCache){let[b]=a;this.cache.has(b)||(yield a)}}get size(){let a=0;for(let b of this.oldCache.keys())!this.cache.has(b)&&a++;return Math.min(this._size+a,this.maxSize)}}b.exports=d},25599,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(55004),f=a.r(25328),g=a.r(35027),h=Symbol("currentStreamsCount"),i=Symbol("request"),j=Symbol("cachedOriginSet"),k=Symbol("gracefullyClosing"),l=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],m=(a,b)=>a.remoteSettings.maxConcurrentStreams>b.remoteSettings.maxConcurrentStreams,n=(a,b)=>{for(let c of a)c[j].length<b[j].length&&c[j].every(a=>b[j].includes(a))&&c[h]+b[h]<=b.remoteSettings.maxConcurrentStreams&&p(c)},o=({agent:a,isFree:b})=>{let c={};for(let d in a.sessions){let e=a.sessions[d].filter(a=>{let c=a[q.kCurrentStreamsCount]<a.remoteSettings.maxConcurrentStreams;return b?c:!c});0!==e.length&&(c[d]=e)}return c},p=a=>{a[k]=!0,0===a[h]&&a.close()};class q extends d{constructor({timeout:a=6e4,maxSessions:b=1/0,maxFreeSessions:c=10,maxCachedTlsSessions:d=100}={}){super(),this.sessions={},this.queue={},this.timeout=a,this.maxSessions=b,this.maxFreeSessions=c,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new g({maxSize:d})}static normalizeOrigin(a,b){return"string"==typeof a&&(a=new URL(a)),b&&a.hostname!==b&&(a.hostname=b),a.origin}normalizeOptions(a){let b="";if(a)for(let c of l)a[c]&&(b+=`:${a[c]}`);return b}_tryToCreateNewSession(a,b){if(!(a in this.queue)||!(b in this.queue[a]))return;let c=this.queue[a][b];this._sessionsCount<this.maxSessions&&!c.completed&&(c.completed=!0,c())}getSession(a,b,c){return new Promise((d,e)=>{Array.isArray(c)?(c=[...c],d()):c=[{resolve:d,reject:e}];let g=this.normalizeOptions(b),l=q.normalizeOrigin(a,b&&b.servername);if(void 0===l){for(let{reject:a}of c)a(TypeError("The `origin` argument needs to be a string or an URL object"));return}if(g in this.sessions){let a,b=this.sessions[g],d=-1,e=-1;for(let c of b){let b=c.remoteSettings.maxConcurrentStreams;if(b<d)break;if(c[j].includes(l)){let f=c[h];if(f>=b||c[k]||c.destroyed)continue;a||(d=b),f>e&&(a=c,e=f)}}if(a){if(1!==c.length){for(let{reject:a}of c)a(Error(`Expected the length of listeners to be 1, got ${c.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`));return}c[0].resolve(a);return}}if(g in this.queue){if(l in this.queue[g]){this.queue[g][l].listeners.push(...c),this._tryToCreateNewSession(g,l);return}}else this.queue[g]={};let o=()=>{g in this.queue&&this.queue[g][l]===r&&(delete this.queue[g][l],0===Object.keys(this.queue[g]).length&&delete this.queue[g])},r=()=>{let d=`${l}:${g}`,e=!1;try{let q=f.connect(a,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(d),...b});q[h]=0,q[k]=!1;let s=()=>q[h]<q.remoteSettings.maxConcurrentStreams,t=!0;q.socket.once("session",a=>{this.tlsSessionCache.set(d,a)}),q.once("error",a=>{for(let{reject:b}of c)b(a);this.tlsSessionCache.delete(d)}),q.setTimeout(this.timeout,()=>{q.destroy()}),q.once("close",()=>{if(e){t&&this._freeSessionsCount--,this._sessionsCount--;let a=this.sessions[g];a.splice(a.indexOf(q),1),0===a.length&&delete this.sessions[g]}else{let a=Error("Session closed without receiving a SETTINGS frame");for(let{reject:b}of(a.code="HTTP2WRAPPER_NOSETTINGS",c))b(a);o()}this._tryToCreateNewSession(g,l)});let u=()=>{if(g in this.queue&&s()){for(let a of q[j])if(a in this.queue[g]){let{listeners:b}=this.queue[g][a];for(;0!==b.length&&s();)b.shift().resolve(q);let c=this.queue[g];if(0===c[a].listeners.length&&(delete c[a],0===Object.keys(c).length)){delete this.queue[g];break}if(!s())break}}};q.on("origin",()=>{q[j]=q.originSet,s()&&(u(),n(this.sessions[g],q))}),q.once("remoteSettings",()=>{if(q.ref(),q.unref(),this._sessionsCount++,r.destroyed){let a=Error("Agent has been destroyed");for(let b of c)b.reject(a);q.destroy();return}q[j]=q.originSet;{let a=this.sessions;if(g in a){let b=a[g];b.splice(((a,b,c)=>{let d=0,e=a.length;for(;d<e;){let f=d+e>>>1;c(a[f],b)?d=f+1:e=f}return d})(b,q,m),0,q)}else a[g]=[q]}this._freeSessionsCount+=1,e=!0,this.emit("session",q),u(),o(),0===q[h]&&this._freeSessionsCount>this.maxFreeSessions&&q.close(),0!==c.length&&(this.getSession(l,b,c),c.length=0),q.on("remoteSettings",()=>{u(),n(this.sessions[g],q)})}),q[i]=q.request,q.request=(a,b)=>{if(q[k])throw Error("The session is gracefully closing. No new streams are allowed.");let c=q[i](a,b);return q.ref(),++q[h],q[h]===q.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,c.once("close",()=>{if(t=s(),--q[h],!q.destroyed&&!q.closed){for(let a of this.sessions[g])q[j].length<a[j].length&&q[j].every(b=>a[j].includes(b))&&q[h]+a[h]<=a.remoteSettings.maxConcurrentStreams&&p(q);if(s()&&!q.closed){t||(this._freeSessionsCount++,t=!0);let a=0===q[h];a&&q.unref(),a&&(this._freeSessionsCount>this.maxFreeSessions||q[k])?q.close():(n(this.sessions[g],q),u())}}}),c}}catch(a){for(let b of c)b.reject(a);o()}};r.listeners=c,r.completed=!1,r.destroyed=!1,this.queue[g][l]=r,this._tryToCreateNewSession(g,l)})}request(a,b,c,d){return new Promise((e,f)=>{this.getSession(a,b,[{reject:f,resolve:a=>{try{e(a.request(c,d))}catch(a){f(a)}}}])})}createConnection(a,b){return q.connect(a,b)}static connect(a,b){b.ALPNProtocols=["h2"];let c=a.port||443,d=a.hostname||a.host;return void 0===b.servername&&(b.servername=d),e.connect(c,d,b)}closeFreeSessions(){for(let a of Object.values(this.sessions))for(let b of a)0===b[h]&&b.close()}destroy(a){for(let b of Object.values(this.sessions))for(let c of b)c.destroy(a);for(let a of Object.values(this.queue))for(let b of Object.values(a))b.destroyed=!0;this.queue={}}get freeSessions(){return o({agent:this,isFree:!0})}get busySessions(){return o({agent:this,isFree:!1})}}q.kCurrentStreamsCount=h,q.kGracefullyClosing=k,b.exports={Agent:q,globalAgent:new q}},19620,(a,b,c)=>{"use strict";let{Readable:d}=a.r(88947);b.exports=class extends d{constructor(a,b){super({highWaterMark:b,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=a,this.connection=a,this._dumped=!1}_destroy(a){this.req._request.destroy(a)}setTimeout(a,b){return this.req.setTimeout(a,b),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},49785,(a,b,c)=>{"use strict";b.exports=a=>{let b={protocol:a.protocol,hostname:"string"==typeof a.hostname&&a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,host:a.host,hash:a.hash,search:a.search,pathname:a.pathname,href:a.href,path:`${a.pathname||""}${a.search||""}`};return"string"==typeof a.port&&0!==a.port.length&&(b.port=Number(a.port)),(a.username||a.password)&&(b.auth=`${a.username||""}:${a.password||""}`),b}},76473,(a,b,c)=>{"use strict";b.exports=(a,b,c)=>{for(let d of c)a.on(d,(...a)=>b.emit(d,...a))}},5914,(a,b,c)=>{"use strict";b.exports=a=>{switch(a){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},33658,(a,b,c)=>{"use strict";let d=(a,c,d)=>{b.exports[c]=class extends a{constructor(...a){super("string"==typeof d?d:d(a)),this.name=`${super.name} [${c}]`,this.code=c}}};d(TypeError,"ERR_INVALID_ARG_TYPE",a=>{let b=a[0].includes(".")?"property":"argument",c=a[1],d=Array.isArray(c);return d&&(c=`${c.slice(0,-1).join(", ")} or ${c.slice(-1)}`),`The "${a[0]}" ${b} must be ${d?"one of":"of"} type ${c}. Received ${typeof a[2]}`}),d(TypeError,"ERR_INVALID_PROTOCOL",a=>`Protocol "${a[0]}" not supported. Expected "${a[1]}"`),d(Error,"ERR_HTTP_HEADERS_SENT",a=>`Cannot ${a[0]} headers after they are sent to the client`),d(TypeError,"ERR_INVALID_HTTP_TOKEN",a=>`${a[0]} must be a valid HTTP token [${a[1]}]`),d(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",a=>`Invalid value "${a[0]} for header "${a[1]}"`),d(TypeError,"ERR_INVALID_CHAR",a=>`Invalid character in ${a[0]} [${a[1]}]`)},85276,(a,b,c)=>{"use strict";let d=a.r(25328),{Writable:e}=a.r(88947),{Agent:f,globalAgent:g}=a.r(25599),h=a.r(19620),i=a.r(49785),j=a.r(76473),k=a.r(5914),{ERR_INVALID_ARG_TYPE:l,ERR_INVALID_PROTOCOL:m,ERR_HTTP_HEADERS_SENT:n,ERR_INVALID_HTTP_TOKEN:o,ERR_HTTP_INVALID_HEADER_VALUE:p,ERR_INVALID_CHAR:q}=a.r(33658),{HTTP2_HEADER_STATUS:r,HTTP2_HEADER_METHOD:s,HTTP2_HEADER_PATH:t,HTTP2_METHOD_CONNECT:u}=d.constants,v=Symbol("headers"),w=Symbol("origin"),x=Symbol("session"),y=Symbol("options"),z=Symbol("flushedHeaders"),A=Symbol("jobs"),B=/^[\^`\-\w!#$%&*+.|~]+$/,C=/[^\t\u0020-\u007E\u0080-\u00FF]/;b.exports=class extends e{constructor(a,b,c){super({autoDestroy:!1});const d="string"==typeof a||a instanceof URL;if(d&&(a=i(a instanceof URL?a:new URL(a))),"function"==typeof b||void 0===b?(c=b,b=d?a:{...a}):b={...a,...b},b.h2session)this[x]=b.h2session;else if(!1===b.agent)this.agent=new f({maxFreeSessions:0});else if(void 0===b.agent||null===b.agent)"function"==typeof b.createConnection?(this.agent=new f({maxFreeSessions:0}),this.agent.createConnection=b.createConnection):this.agent=g;else if("function"==typeof b.agent.request)this.agent=b.agent;else throw new l("options.agent",["Agent-like Object","undefined","false"],b.agent);if(b.protocol&&"https:"!==b.protocol)throw new m(b.protocol,"https:");const e=b.port||b.defaultPort||this.agent&&this.agent.defaultPort||443,h=b.hostname||b.host||"localhost";delete b.hostname,delete b.host,delete b.port;const{timeout:j}=b;if(b.timeout=void 0,this[v]=Object.create(null),this[A]=[],this.socket=null,this.connection=null,this.method=b.method||"GET",this.path=b.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,b.headers)for(const[a,c]of Object.entries(b.headers))this.setHeader(a,c);!b.auth||"authorization"in this[v]||(this[v].authorization="Basic "+Buffer.from(b.auth).toString("base64")),b.session=b.tlsSession,b.path=b.socketPath,this[y]=b,443===e?(this[w]=`https://${h}`,":authority"in this[v]||(this[v][":authority"]=h)):(this[w]=`https://${h}:${e}`,":authority"in this[v]||(this[v][":authority"]=`${h}:${e}`)),j&&this.setTimeout(j),c&&this.once("response",c),this[z]=!1}get method(){return this[v][s]}set method(a){a&&(this[v][s]=a.toUpperCase())}get path(){return this[v][t]}set path(a){a&&(this[v][t]=a)}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(a,b,c){if(this._mustNotHaveABody)return void c(Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();let d=()=>this._request.write(a,b,c);this._request?d():this[A].push(d)}_final(a){if(this.destroyed)return;this.flushHeaders();let b=()=>{this._mustNotHaveABody?a():this._request.end(a)};this._request?b():this[A].push(b)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(a,b){this.res&&this.res._dump(),this._request&&this._request.destroy(),b(a)}async flushHeaders(){if(this[z]||this.destroyed)return;this[z]=!0;let a=this.method===u,b=b=>{if(this._request=b,this.destroyed)return void b.destroy();a||j(b,this,["timeout","continue","close","error"]);let c=a=>(...b)=>{this.writable||this.destroyed?this.once("finish",()=>{a(...b)}):a(...b)};b.once("response",c((c,d,e)=>{let f=new h(this.socket,b.readableHighWaterMark);this.res=f,f.req=this,f.statusCode=c[r],f.headers=c,f.rawHeaders=e,f.once("end",()=>{this.aborted?(f.aborted=!0,f.emit("aborted")):(f.complete=!0,f.socket=null,f.connection=null)}),a?(f.upgrade=!0,this.emit("connect",f,b,Buffer.alloc(0))?this.emit("close"):b.destroy()):(b.on("data",a=>{f._dumped||f.push(a)||b.pause()}),b.once("end",()=>{f.push(null)}),this.emit("response",f)||f._dump())})),b.once("headers",c(a=>this.emit("information",{statusCode:a[r]}))),b.once("trailers",c((a,b,c)=>{let{res:d}=this;d.trailers=a,d.rawTrailers=c}));let{socket:d}=b.session;for(let a of(this.socket=d,this.connection=d,this[A]))a();this.emit("socket",this.socket)};if(this[x])try{b(this[x].request(this[v]))}catch(a){this.emit("error",a)}else{this.reusedSocket=!0;try{b(await this.agent.request(this[w],this[y],this[v]))}catch(a){this.emit("error",a)}}}getHeader(a){if("string"!=typeof a)throw new l("name","string",a);return this[v][a.toLowerCase()]}get headersSent(){return this[z]}removeHeader(a){if("string"!=typeof a)throw new l("name","string",a);if(this.headersSent)throw new n("remove");delete this[v][a.toLowerCase()]}setHeader(a,b){if(this.headersSent)throw new n("set");if("string"!=typeof a||!B.test(a)&&!k(a))throw new o("Header name",a);if(void 0===b)throw new p(b,a);if(C.test(b))throw new q("header content",a);this[v][a.toLowerCase()]=b}setNoDelay(){}setSocketKeepAlive(){}setTimeout(a,b){let c=()=>this._request.setTimeout(a,b);return this._request?c():this[A].push(c),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(a){}}},7126,(a,b,c)=>{"use strict";let d=a.r(55004);b.exports=(a={},b=d.connect)=>new Promise((c,d)=>{let e,f=!1,g=async()=>{await i,e.off("timeout",h),e.off("error",d),a.resolveSocket?(c({alpnProtocol:e.alpnProtocol,socket:e,timeout:f}),f&&(await Promise.resolve(),e.emit("timeout"))):(e.destroy(),c({alpnProtocol:e.alpnProtocol,timeout:f}))},h=async()=>{f=!0,g()},i=(async()=>{try{(e=await b(a,g)).on("error",d),e.once("timeout",h)}catch(a){d(a)}})()})},62116,(a,b,c)=>{"use strict";let d=a.r(4446);b.exports=a=>{let b=a.host,c=a.headers&&a.headers.host;return(c&&(b=c.startsWith("[")?-1===c.indexOf("]")?c:c.slice(1,-1):c.split(":",1)[0]),d.isIP(b))?"":b}},25844,(a,b,c)=>{"use strict";let d=a.r(21517),e=a.r(24836),f=a.r(7126),g=a.r(35027),h=a.r(85276),i=a.r(62116),j=a.r(49785),k=new g({maxSize:100}),l=new Map,m=(a,b,c)=>{b._httpMessage={shouldKeepAlive:!0};let d=()=>{a.emit("free",b,c)};b.on("free",d);let e=()=>{a.removeSocket(b,c)};b.on("close",e);let f=()=>{a.removeSocket(b,c),b.off("close",e),b.off("free",d),b.off("agentRemove",f)};b.on("agentRemove",f),a.emit("free",b,c)},n=async a=>{let b=`${a.host}:${a.port}:${a.ALPNProtocols.sort()}`;if(!k.has(b)){if(l.has(b))return(await l.get(b)).alpnProtocol;let{path:c,agent:d}=a;a.path=a.socketPath;let g=f(a);l.set(b,g);try{let{socket:f,alpnProtocol:h}=await g;if(k.set(b,h),a.path=c,"h2"===h)f.destroy();else{let{globalAgent:b}=e,c=e.Agent.prototype.createConnection;d?d.createConnection===c?m(d,f,a):f.destroy():b.createConnection===c?m(b,f,a):f.destroy()}return l.delete(b),h}catch(a){throw l.delete(b),a}}return k.get(b)};b.exports=async(a,b,c)=>{if(("string"==typeof a||a instanceof URL)&&(a=j(new URL(a))),"function"==typeof b&&(c=b,b=void 0),!Array.isArray((b={ALPNProtocols:["h2","http/1.1"],...a,...b,resolveSocket:!0}).ALPNProtocols)||0===b.ALPNProtocols.length)throw Error("The `ALPNProtocols` option must be an Array with at least one entry");b.protocol=b.protocol||"https:";let f="https:"===b.protocol;b.host=b.hostname||b.host||"localhost",b.session=b.tlsSession,b.servername=b.servername||i(b),b.port=b.port||(f?443:80),b._defaultAgent=f?e.globalAgent:d.globalAgent;let g=b.agent;if(g){if(g.addRequest)throw Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");b.agent=g[f?"https":"http"]}return f&&"h2"===await n(b)?(g&&(b.agent=g.http2),new h(b,c)):d.request(b,c)},b.exports.protocolCache=k},93098,(a,b,c)=>{"use strict";let d=a.r(25328),e=a.r(25599),f=a.r(85276),g=a.r(19620),h=a.r(25844);b.exports={...d,ClientRequest:f,IncomingMessage:g,...e,request:(a,b,c)=>new f(a,b,c),get:(a,b,c)=>{let d=new f(a,b,c);return d.end(),d},auto:h}},47771,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(68964);c.default=a=>d.default.nodeStream(a)&&d.default.function_(a.getBoundary)},75689,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(22734),e=a.r(24361),f=a.r(68964),g=a.r(47771),h=e.promisify(d.stat);c.default=async(a,b)=>{if(b&&"content-length"in b)return Number(b["content-length"]);if(!a)return 0;if(f.default.string(a))return Buffer.byteLength(a);if(f.default.buffer(a))return a.length;if(g.default(a))return e.promisify(a.getLength.bind(a))();if(a instanceof d.ReadStream){let{size:b}=await h(a.path);if(0===b)return;return b}}},22567,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(a,b,c){let d={};for(let e of c)d[e]=(...a)=>{b.emit(e,...a)},a.on(e,d[e]);return()=>{for(let b of c)a.off(b,d[b])}}},26375,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=()=>{let a=[];return{once(b,c,d){b.once(c,d),a.push({origin:b,event:c,fn:d})},unhandleAll(){for(let b of a){let{origin:a,event:c,fn:d}=b;a.removeListener(c,d)}a.length=0}}}},38433,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TimeoutError=void 0;let d=a.r(4446),e=a.r(26375),f=Symbol("reentry"),g=()=>{};class h extends Error{constructor(a,b){super(`Timeout awaiting '${b}' for ${a}ms`),this.event=b,this.name="TimeoutError",this.code="ETIMEDOUT"}}c.TimeoutError=h,c.default=(a,b,c)=>{if(f in a)return g;a[f]=!0;let i=[],{once:j,unhandleAll:k}=e.default(),l=(a,b,c)=>{var d;let e=setTimeout(b,a,a,c);null==(d=e.unref)||d.call(e);let f=()=>{clearTimeout(e)};return i.push(f),f},{host:m,hostname:n}=c,o=(b,c)=>{a.destroy(new h(b,c))},p=()=>{for(let a of i)a();k()};if(a.once("error",b=>{if(p(),0===a.listenerCount("error"))throw b}),a.once("close",p),j(a,"response",a=>{j(a,"end",p)}),void 0!==b.request&&l(b.request,o,"request"),void 0!==b.socket){let c=()=>{o(b.socket,"socket")};a.setTimeout(b.socket,c),i.push(()=>{a.removeListener("timeout",c)})}return j(a,"socket",e=>{var f;let{socketPath:g}=a;if(e.connecting){let a=!!(null!=g?g:0!==d.isIP(null!=(f=null!=n?n:m)?f:""));void 0===b.lookup||a||void 0!==e.address().address||j(e,"lookup",l(b.lookup,o,"lookup")),void 0!==b.connect&&(a?j(e,"connect",l(b.connect,o,"connect")):j(e,"lookup",a=>{null===a&&j(e,"connect",l(b.connect,o,"connect"))})),void 0!==b.secureConnect&&"https:"===c.protocol&&j(e,"connect",()=>{j(e,"secureConnect",l(b.secureConnect,o,"secureConnect"))})}void 0!==b.send&&(e.connecting?j(e,"connect",()=>{j(a,"upload-complete",l(b.send,o,"send"))}):j(a,"upload-complete",l(b.send,o,"send")))}),void 0!==b.response&&j(a,"upload-complete",()=>{j(a,"response",l(b.response,o,"response"))}),p}},72709,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(68964);c.default=a=>{let b={protocol:a.protocol,hostname:d.default.string(a.hostname)&&a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,host:a.host,hash:a.hash,search:a.search,pathname:a.pathname,href:a.href,path:`${a.pathname||""}${a.search||""}`};return d.default.string(a.port)&&a.port.length>0&&(b.port=Number(a.port)),(a.username||a.password)&&(b.auth=`${a.username||""}:${a.password||""}`),b}},8167,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(92509),e=["protocol","host","hostname","port","pathname","search"];c.default=(a,b)=>{var c,f;if(b.path){if(b.pathname)throw TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(b.search)throw TypeError("Parameters `path` and `search` are mutually exclusive.");if(b.searchParams)throw TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(b.search&&b.searchParams)throw TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!a){if(!b.protocol)throw TypeError("No URL protocol specified");a=`${b.protocol}//${null!=(f=null!=(c=b.hostname)?c:b.host)?f:""}`}let g=new d.URL(a);if(b.path){let a=b.path.indexOf("?");-1===a?b.pathname=b.path:(b.pathname=b.path.slice(0,a),b.search=b.path.slice(a+1)),delete b.path}for(let a of e)b[a]&&(g[a]=b[a].toString());return g}},90138,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(a,b){"object"==typeof a?this.weakMap.set(a,b):this.map.set(a,b)}get(a){return"object"==typeof a?this.weakMap.get(a):this.map.get(a)}has(a){return"object"==typeof a?this.weakMap.has(a):this.map.has(a)}}},53183,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=async a=>{let b=[],c=0;for await(let d of a)b.push(d),c+=Buffer.byteLength(d);return Buffer.isBuffer(b[0])?Buffer.concat(b,c):Buffer.from(b.join(""))}},41072,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.dnsLookupIpVersionToFamily=c.isDnsLookupIpVersion=void 0;let d={auto:0,ipv4:4,ipv6:6};c.isDnsLookupIpVersion=a=>a in d,c.dnsLookupIpVersionToFamily=a=>{if(c.isDnsLookupIpVersion(a))return d[a];throw Error("Invalid DNS lookup IP version")}},46087,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isResponseOk=void 0,c.isResponseOk=a=>{let{statusCode:b}=a,c=a.request.options.followRedirect?299:399;return b>=200&&b<=c||304===b}},90880,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=new Set;c.default=a=>{d.has(a)||(d.add(a),process.emitWarning(`Got: ${a}`,{type:"DeprecationWarning"}))}},97153,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(68964);c.default=(a,b)=>{if(d.default.null_(a.encoding))throw TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");d.assert.any([d.default.string,d.default.undefined],a.encoding),d.assert.any([d.default.boolean,d.default.undefined],a.resolveBodyOnly),d.assert.any([d.default.boolean,d.default.undefined],a.methodRewriting),d.assert.any([d.default.boolean,d.default.undefined],a.isStream),d.assert.any([d.default.string,d.default.undefined],a.responseType),void 0===a.responseType&&(a.responseType="text");let{retry:c}=a;if(b?a.retry={...b.retry}:a.retry={calculateDelay:a=>a.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},d.default.object(c)?(a.retry={...a.retry,...c},a.retry.methods=[...new Set(a.retry.methods.map(a=>a.toUpperCase()))],a.retry.statusCodes=[...new Set(a.retry.statusCodes)],a.retry.errorCodes=[...new Set(a.retry.errorCodes)]):d.default.number(c)&&(a.retry.limit=c),d.default.undefined(a.retry.maxRetryAfter)&&(a.retry.maxRetryAfter=Math.min(...[a.timeout.request,a.timeout.connect].filter(d.default.number))),d.default.object(a.pagination)){b&&(a.pagination={...b.pagination,...a.pagination});let{pagination:c}=a;if(!d.default.function_(c.transform))throw Error("`options.pagination.transform` must be implemented");if(!d.default.function_(c.shouldContinue))throw Error("`options.pagination.shouldContinue` must be implemented");if(!d.default.function_(c.filter))throw TypeError("`options.pagination.filter` must be implemented");if(!d.default.function_(c.paginate))throw Error("`options.pagination.paginate` must be implemented")}return"json"===a.responseType&&void 0===a.headers.accept&&(a.headers.accept="application/json"),a}},76233,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.retryAfterStatusCodes=void 0,c.retryAfterStatusCodes=new Set([413,429,503]),c.default=({attemptCount:a,retryOptions:b,error:c,retryAfter:d})=>{if(a>b.limit)return 0;let e=b.methods.includes(c.options.method),f=b.errorCodes.includes(c.code),g=c.response&&b.statusCodes.includes(c.response.statusCode);if(!e||!f&&!g)return 0;if(c.response){if(d)return void 0===b.maxRetryAfter||d>b.maxRetryAfter?0:d;if(413===c.response.statusCode)return 0}return 2**(a-1)*1e3+100*Math.random()}},64219,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),c.UnsupportedProtocolError=c.ReadError=c.TimeoutError=c.UploadError=c.CacheError=c.HTTPError=c.MaxRedirectsError=c.RequestError=c.setNonEnumerableProperties=c.knownHookEvents=c.withoutBody=c.kIsNormalizedAlready=void 0;let e=a.r(24361),f=a.r(88947),g=a.r(22734),h=a.r(92509),i=a.r(21517),j=a.r(21517),k=a.r(24836),l=a.r(65763),m=a.r(25600),n=a.r(95364),o=a.r(74100),p=a.r(93098),q=a.r(66077),r=a.r(68964),s=a.r(75689),t=a.r(47771),u=a.r(22567),v=a.r(38433),w=a.r(72709),x=a.r(8167),y=a.r(90138),z=a.r(53183),A=a.r(41072),B=a.r(46087),C=a.r(90880),D=a.r(97153),E=a.r(76233),F=Symbol("request"),G=Symbol("response"),H=Symbol("responseSize"),I=Symbol("downloadedSize"),J=Symbol("bodySize"),K=Symbol("uploadedSize"),L=Symbol("serverResponsesPiped"),M=Symbol("unproxyEvents"),N=Symbol("isFromCache"),O=Symbol("cancelTimeouts"),P=Symbol("startedReading"),Q=Symbol("stopReading"),R=Symbol("triggerRead"),S=Symbol("body"),T=Symbol("jobs"),U=Symbol("originalResponse"),V=Symbol("retryTimeout");c.kIsNormalizedAlready=Symbol("isNormalizedAlready");let W=r.default.string(process.versions.brotli);c.withoutBody=new Set(["GET","HEAD"]),c.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];let X=new y.default,Y=async a=>new Promise((b,c)=>{let d=a=>{c(a)};a.pending||b(),a.once("error",d),a.once("ready",()=>{a.off("error",d),b()})}),Z=new Set([300,301,302,303,304,307,308]),$=["context","body","json","form"];c.setNonEnumerableProperties=(a,b)=>{let c={};for(let b of a)if(b)for(let a of $)a in b&&(c[a]={writable:!0,configurable:!0,enumerable:!1,value:b[a]});Object.defineProperties(b,c)};class _ extends Error{constructor(a,b,c){var d,e;if(super(a),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=null!=(d=b.code)?d:"ERR_GOT_REQUEST_ERROR",c instanceof ai?(Object.defineProperty(this,"request",{enumerable:!1,value:c}),Object.defineProperty(this,"response",{enumerable:!1,value:c[G]}),Object.defineProperty(this,"options",{enumerable:!1,value:c.options})):Object.defineProperty(this,"options",{enumerable:!1,value:c}),this.timings=null==(e=this.request)?void 0:e.timings,r.default.string(b.stack)&&r.default.string(this.stack)){const a=this.stack.indexOf(this.message)+this.message.length,c=this.stack.slice(a).split("\n").reverse(),d=b.stack.slice(b.stack.indexOf(b.message)+b.message.length).split("\n").reverse();for(;0!==d.length&&d[0]===c[0];)c.shift();this.stack=`${this.stack.slice(0,a)}${c.reverse().join("\n")}${d.reverse().join("\n")}`}}}c.RequestError=_;class aa extends _{constructor(a){super(`Redirected ${a.options.maxRedirects} times. Aborting.`,{},a),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}c.MaxRedirectsError=aa;class ab extends _{constructor(a){super(`Response code ${a.statusCode} (${a.statusMessage})`,{},a.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}c.HTTPError=ab;class ac extends _{constructor(a,b){super(a.message,a,b),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}c.CacheError=ac;class ad extends _{constructor(a,b){super(a.message,a,b),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}c.UploadError=ad;class ae extends _{constructor(a,b,c){super(a.message,a,c),this.name="TimeoutError",this.event=a.event,this.timings=b}}c.TimeoutError=ae;class af extends _{constructor(a,b){super(a.message,a,b),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}c.ReadError=af;class ag extends _{constructor(a){super(`Unsupported protocol "${a.url.protocol}"`,{},a),this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}}c.UnsupportedProtocolError=ag;let ah=["socket","connect","continue","information","upgrade","timeout"];class ai extends f.Duplex{constructor(a,b={},d){super({autoDestroy:!1,highWaterMark:0}),this[I]=0,this[K]=0,this.requestInitialized=!1,this[L]=new Set,this.redirects=[],this[Q]=!1,this[R]=!1,this[T]=[],this.retryCount=0,this._progressCallbacks=[];const e=()=>this._unlockWrite(),f=()=>this._lockWrite();this.on("pipe",a=>{a.prependListener("data",e),a.on("data",f),a.prependListener("end",e),a.on("end",f)}),this.on("unpipe",a=>{a.off("data",e),a.off("data",f),a.off("end",e),a.off("end",f)}),this.on("pipe",a=>{a instanceof j.IncomingMessage&&(this.options.headers={...a.headers,...this.options.headers})});const{json:h,body:i,form:k}=b;if((h||i||k)&&this._lockWrite(),c.kIsNormalizedAlready in b)this.options=b;else try{this.options=this.constructor.normalizeArguments(a,b,d)}catch(a){r.default.nodeStream(b.body)&&b.body.destroy(),this.destroy(a);return}(async()=>{var a;try{this.options.body instanceof g.ReadStream&&await Y(this.options.body);let{url:b}=this.options;if(!b)throw TypeError("Missing `url` property");if(this.requestUrl=b.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){null==(a=this[F])||a.destroy();return}for(let a of this[T])a();this[T].length=0,this.requestInitialized=!0}catch(a){if(a instanceof _)return void this._beforeError(a);this.destroyed||this.destroy(a)}})()}static normalizeArguments(a,b,f){var g,i,j,k,l;let o=b;if(r.default.object(a)&&!r.default.urlInstance(a))b={...f,...a,...b};else{if(a&&b&&void 0!==b.url)throw TypeError("The `url` option is mutually exclusive with the `input` argument");b={...f,...b},void 0!==a&&(b.url=a),r.default.urlInstance(b.url)&&(b.url=new h.URL(b.url.toString()))}if(!1===b.cache&&(b.cache=void 0),!1===b.dnsCache&&(b.dnsCache=void 0),r.assert.any([r.default.string,r.default.undefined],b.method),r.assert.any([r.default.object,r.default.undefined],b.headers),r.assert.any([r.default.string,r.default.urlInstance,r.default.undefined],b.prefixUrl),r.assert.any([r.default.object,r.default.undefined],b.cookieJar),r.assert.any([r.default.object,r.default.string,r.default.undefined],b.searchParams),r.assert.any([r.default.object,r.default.string,r.default.undefined],b.cache),r.assert.any([r.default.object,r.default.number,r.default.undefined],b.timeout),r.assert.any([r.default.object,r.default.undefined],b.context),r.assert.any([r.default.object,r.default.undefined],b.hooks),r.assert.any([r.default.boolean,r.default.undefined],b.decompress),r.assert.any([r.default.boolean,r.default.undefined],b.ignoreInvalidCookies),r.assert.any([r.default.boolean,r.default.undefined],b.followRedirect),r.assert.any([r.default.number,r.default.undefined],b.maxRedirects),r.assert.any([r.default.boolean,r.default.undefined],b.throwHttpErrors),r.assert.any([r.default.boolean,r.default.undefined],b.http2),r.assert.any([r.default.boolean,r.default.undefined],b.allowGetBody),r.assert.any([r.default.string,r.default.undefined],b.localAddress),r.assert.any([A.isDnsLookupIpVersion,r.default.undefined],b.dnsLookupIpVersion),r.assert.any([r.default.object,r.default.undefined],b.https),r.assert.any([r.default.boolean,r.default.undefined],b.rejectUnauthorized),b.https&&(r.assert.any([r.default.boolean,r.default.undefined],b.https.rejectUnauthorized),r.assert.any([r.default.function_,r.default.undefined],b.https.checkServerIdentity),r.assert.any([r.default.string,r.default.object,r.default.array,r.default.undefined],b.https.certificateAuthority),r.assert.any([r.default.string,r.default.object,r.default.array,r.default.undefined],b.https.key),r.assert.any([r.default.string,r.default.object,r.default.array,r.default.undefined],b.https.certificate),r.assert.any([r.default.string,r.default.undefined],b.https.passphrase),r.assert.any([r.default.string,r.default.buffer,r.default.array,r.default.undefined],b.https.pfx)),r.assert.any([r.default.object,r.default.undefined],b.cacheOptions),r.default.string(b.method)?b.method=b.method.toUpperCase():b.method="GET",b.headers===(null==f?void 0:f.headers)?b.headers={...b.headers}:b.headers=q({...null==f?void 0:f.headers,...b.headers}),"slashes"in b)throw TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in b)throw TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in b&&b.searchParams&&b.searchParams!==(null==f?void 0:f.searchParams)){let a;if(r.default.string(b.searchParams)||b.searchParams instanceof h.URLSearchParams)a=new h.URLSearchParams(b.searchParams);else{var p=b.searchParams;for(let a in p){let b=p[a];if(!r.default.string(b)&&!r.default.number(b)&&!r.default.boolean(b)&&!r.default.null_(b)&&!r.default.undefined(b))throw TypeError(`The \`searchParams\` value '${String(b)}' must be a string, number, boolean or null`)}for(let c in a=new h.URLSearchParams,b.searchParams){let d=b.searchParams[c];null===d?a.append(c,""):void 0!==d&&a.append(c,d)}}null==(g=null==f?void 0:f.searchParams)||g.forEach((b,c)=>{a.has(c)||a.append(c,b)}),b.searchParams=a}if(b.username=null!=(i=b.username)?i:"",b.password=null!=(j=b.password)?j:"",r.default.undefined(b.prefixUrl)?b.prefixUrl=null!=(k=null==f?void 0:f.prefixUrl)?k:"":(b.prefixUrl=b.prefixUrl.toString(),""===b.prefixUrl||b.prefixUrl.endsWith("/")||(b.prefixUrl+="/")),r.default.string(b.url)){if(b.url.startsWith("/"))throw Error("`input` must not start with a slash when using `prefixUrl`");b.url=x.default(b.prefixUrl+b.url,b)}else(r.default.undefined(b.url)&&""!==b.prefixUrl||b.protocol)&&(b.url=x.default(b.prefixUrl,b));if(b.url){"port"in b&&delete b.port;let{prefixUrl:a}=b;Object.defineProperty(b,"prefixUrl",{set:c=>{let d=b.url;if(!d.href.startsWith(c))throw Error(`Cannot change \`prefixUrl\` from ${a} to ${c}: ${d.href}`);b.url=new h.URL(c+d.href.slice(a.length)),a=c},get:()=>a});let{protocol:c}=b.url;if("unix:"===c&&(c="http:",b.url=new h.URL(`http://unix${b.url.pathname}${b.url.search}`)),b.searchParams&&(b.url.search=b.searchParams.toString()),"http:"!==c&&"https:"!==c)throw new ag(b);""===b.username?b.username=b.url.username:b.url.username=b.username,""===b.password?b.password=b.url.password:b.url.password=b.password}let{cookieJar:s}=b;if(s){let{setCookie:a,getCookieString:c}=s;r.assert.function_(a),r.assert.function_(c),4===a.length&&0===c.length&&(a=e.promisify(a.bind(b.cookieJar)),c=e.promisify(c.bind(b.cookieJar)),b.cookieJar={setCookie:a,getCookieString:c})}let{cache:t}=b;if(t&&!X.has(t)&&X.set(t,new n((a,b)=>{let c=a[F](a,b);return r.default.promise(c)&&(c.once=(a,b)=>{if("error"===a)c.catch(b);else if("abort"===a)(async()=>{try{(await c).once("abort",b)}catch(a){}})();else throw Error(`Unknown HTTP2 promise event: ${a}`);return c}),c},t)),b.cacheOptions={...b.cacheOptions},!0===b.dnsCache)d||(d=new m.default),b.dnsCache=d;else if(!r.default.undefined(b.dnsCache)&&!b.dnsCache.lookup)throw TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${r.default(b.dnsCache)}`);r.default.number(b.timeout)?b.timeout={request:b.timeout}:f&&b.timeout!==f.timeout?b.timeout={...f.timeout,...b.timeout}:b.timeout={...b.timeout},b.context||(b.context={});let u=b.hooks===(null==f?void 0:f.hooks);for(let a of(b.hooks={...b.hooks},c.knownHookEvents))if(a in b.hooks)if(r.default.array(b.hooks[a]))b.hooks[a]=[...b.hooks[a]];else throw TypeError(`Parameter \`${a}\` must be an Array, got ${r.default(b.hooks[a])}`);else b.hooks[a]=[];if(f&&!u)for(let a of c.knownHookEvents)f.hooks[a].length>0&&(b.hooks[a]=[...f.hooks[a],...b.hooks[a]]);if("family"in b&&C.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),(null==f?void 0:f.https)&&(b.https={...f.https,...b.https}),"rejectUnauthorized"in b&&C.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in b&&C.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in b&&C.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in b&&C.default('"options.key" was never documented, please use "options.https.key"'),"cert"in b&&C.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in b&&C.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in b&&C.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in b)throw TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(b.agent){for(let a in b.agent)if("http"!==a&&"https"!==a&&"http2"!==a)throw TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${a}\``)}return b.maxRedirects=null!=(l=b.maxRedirects)?l:0,c.setNonEnumerableProperties([f,o],b),D.default(b,f)}_lockWrite(){let a=()=>{throw TypeError("The payload has been already provided")};this.write=a,this.end=a}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:a}=this,{headers:b}=a,d=!r.default.undefined(a.form),e=!r.default.undefined(a.json),g=!r.default.undefined(a.body),i=d||e||g,j=c.withoutBody.has(a.method)&&!("GET"===a.method&&a.allowGetBody);if(this._cannotHaveBody=j,i){if(j)throw TypeError(`The \`${a.method}\` method cannot be used with a body`);if([g,d,e].filter(a=>a).length>1)throw TypeError("The `body`, `json` and `form` options are mutually exclusive");if(g&&!(a.body instanceof f.Readable)&&!r.default.string(a.body)&&!r.default.buffer(a.body)&&!t.default(a.body))throw TypeError("The `body` option must be a stream.Readable, string or Buffer");if(d&&!r.default.object(a.form))throw TypeError("The `form` option must be an Object");{let c=!r.default.string(b["content-type"]);g?(t.default(a.body)&&c&&(b["content-type"]=`multipart/form-data; boundary=${a.body.getBoundary()}`),this[S]=a.body):d?(c&&(b["content-type"]="application/x-www-form-urlencoded"),this[S]=new h.URLSearchParams(a.form).toString()):(c&&(b["content-type"]="application/json"),this[S]=a.stringifyJson(a.json));let e=await s.default(this[S],a.headers);r.default.undefined(b["content-length"])&&r.default.undefined(b["transfer-encoding"])&&!j&&!r.default.undefined(e)&&(b["content-length"]=String(e))}}else j?this._lockWrite():this._unlockWrite();this[J]=Number(b["content-length"])||void 0}async _onResponseBase(a){let{options:b}=this,{url:c}=b;this[U]=a,b.decompress&&(a=o(a));let d=a.statusCode,e=a;e.statusMessage=e.statusMessage?e.statusMessage:i.STATUS_CODES[d],e.url=b.url.toString(),e.requestUrl=this.requestUrl,e.redirectUrls=this.redirects,e.request=this,e.isFromCache=a.fromCache||!1,e.ip=this.ip,e.retryCount=this.retryCount,this[N]=e.isFromCache,this[H]=Number(a.headers["content-length"])||void 0,this[G]=a,a.once("end",()=>{this[H]=this[I],this.emit("downloadProgress",this.downloadProgress)}),a.once("error",b=>{a.destroy(),this._beforeError(new af(b,this))}),a.once("aborted",()=>{this._beforeError(new af({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let f=a.headers["set-cookie"];if(r.default.object(b.cookieJar)&&f){let a=f.map(async a=>b.cookieJar.setCookie(a,c.toString()));b.ignoreInvalidCookies&&(a=a.map(async a=>a.catch(()=>{})));try{await Promise.all(a)}catch(a){this._beforeError(a);return}}if(b.followRedirect&&a.headers.location&&Z.has(d)){if(a.resume(),this[F]&&(this[O](),delete this[F],this[M]()),(303!==d||"GET"===b.method||"HEAD"===b.method)&&b.methodRewriting||(b.method="GET","body"in b&&delete b.body,"json"in b&&delete b.json,"form"in b&&delete b.form,this[S]=void 0,delete b.headers["content-length"]),this.redirects.length>=b.maxRedirects)return void this._beforeError(new aa(this));try{let d=Buffer.from(a.headers.location,"binary").toString(),f=new h.URL(d,c),i=f.toString();function g(a){return"unix:"===a.protocol||"unix"===a.hostname}if(decodeURI(i),!g(c)&&g(f))return void this._beforeError(new _("Cannot redirect to UNIX socket",{},this));for(let a of(f.hostname!==c.hostname||f.port!==c.port?("host"in b.headers&&delete b.headers.host,"cookie"in b.headers&&delete b.headers.cookie,"authorization"in b.headers&&delete b.headers.authorization,(b.username||b.password)&&(b.username="",b.password="")):(f.username=b.username,f.password=b.password),this.redirects.push(i),b.url=f,b.hooks.beforeRedirect))await a(b,e);this.emit("redirect",e,b),await this._makeRequest()}catch(a){this._beforeError(a)}return}if(b.isStream&&b.throwHttpErrors&&!B.isResponseOk(e))return void this._beforeError(new ab(e));for(let c of(a.on("readable",()=>{this[R]&&this._read()}),this.on("resume",()=>{a.resume()}),this.on("pause",()=>{a.pause()}),a.once("end",()=>{this.push(null)}),this.emit("response",a),this[L]))if(!c.headersSent){for(let d in a.headers){let e=!b.decompress||"content-encoding"!==d,f=a.headers[d];e&&c.setHeader(d,f)}c.statusCode=d}}async _onResponse(a){try{await this._onResponseBase(a)}catch(a){this._beforeError(a)}}_onRequest(a){let{options:b}=this,{timeout:c,url:d}=b;l.default(a),this[O]=v.default(a,c,d);let e=b.cache?"cacheableResponse":"response";a.once(e,a=>{this._onResponse(a)}),a.once("error",b=>{var c;a.destroy(),null==(c=a.res)||c.removeAllListeners("end"),b=b instanceof v.TimeoutError?new ae(b,this.timings,this):new _(b.message,b,this),this._beforeError(b)}),this[M]=u.default(a,this,ah),this[F]=a,this.emit("uploadProgress",this.uploadProgress);let f=this[S],g=0===this.redirects.length?this:a;r.default.nodeStream(f)?(f.pipe(g),f.once("error",a=>{this._beforeError(new ad(a,this))})):(this._unlockWrite(),r.default.undefined(f)?(this._cannotHaveBody||this._noPipe)&&(g.end(),this._lockWrite()):(this._writeRequest(f,void 0,()=>{}),g.end(),this._lockWrite())),this.emit("request",a)}async _createCacheableRequest(a,b){return new Promise((c,d)=>{let e;Object.assign(b,w.default(a)),delete b.url;let f=X.get(b.cache)(b,async a=>{a._readableState.autoDestroy=!1,e&&(await e).emit("cacheableResponse",a),c(a)});b.url=a,f.once("error",d),f.once("request",async a=>{c(e=a)})})}async _makeRequest(){var a,b,c,d,e,f;let g,{options:h}=this,{headers:j}=h;for(let a in j)if(r.default.undefined(j[a]))delete j[a];else if(r.default.null_(j[a]))throw TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${a}\` header`);if(h.decompress&&r.default.undefined(j["accept-encoding"])&&(j["accept-encoding"]=W?"gzip, deflate, br":"gzip, deflate"),h.cookieJar){let a=await h.cookieJar.getCookieString(h.url.toString());r.default.nonEmptyString(a)&&(h.headers.cookie=a)}for(let a of h.hooks.beforeRequest){let b=await a(h);if(!r.default.undefined(b)){h.request=()=>b;break}}h.body&&this[S]!==h.body&&(this[S]=h.body);let{agent:l,request:m,timeout:o,url:q}=h;if(!h.dnsCache||"lookup"in h||(h.lookup=h.dnsCache.lookup),"unix"===q.hostname){let a=/(?<socketPath>.+?):(?<path>.+)/.exec(`${q.pathname}${q.search}`);if(null==a?void 0:a.groups){let{socketPath:b,path:c}=a.groups;Object.assign(h,{socketPath:b,path:c,host:""})}}let s="https:"===q.protocol;g=h.http2?p.auto:s?k.request:i.request;let t=null!=(a=h.request)?a:g,u=h.cache?this._createCacheableRequest:t;if(l&&!h.http2&&(h.agent=l[s?"https":"http"]),h[F]=t,delete h.request,delete h.timeout,h.shared=null==(b=h.cacheOptions)?void 0:b.shared,h.cacheHeuristic=null==(c=h.cacheOptions)?void 0:c.cacheHeuristic,h.immutableMinTimeToLive=null==(d=h.cacheOptions)?void 0:d.immutableMinTimeToLive,h.ignoreCargoCult=null==(e=h.cacheOptions)?void 0:e.ignoreCargoCult,void 0!==h.dnsLookupIpVersion)try{h.family=A.dnsLookupIpVersionToFamily(h.dnsLookupIpVersion)}catch(a){throw Error("Invalid `dnsLookupIpVersion` option value")}h.https&&("rejectUnauthorized"in h.https&&(h.rejectUnauthorized=h.https.rejectUnauthorized),h.https.checkServerIdentity&&(h.checkServerIdentity=h.https.checkServerIdentity),h.https.certificateAuthority&&(h.ca=h.https.certificateAuthority),h.https.certificate&&(h.cert=h.https.certificate),h.https.key&&(h.key=h.https.key),h.https.passphrase&&(h.passphrase=h.https.passphrase),h.https.pfx&&(h.pfx=h.https.pfx));try{let a=await u(q,h);(r.default.undefined(a)&&(a=g(q,h)),h.request=m,h.timeout=o,h.agent=l,h.https&&("rejectUnauthorized"in h.https&&delete h.rejectUnauthorized,h.https.checkServerIdentity&&delete h.checkServerIdentity,h.https.certificateAuthority&&delete h.ca,h.https.certificate&&delete h.cert,h.https.key&&delete h.key,h.https.passphrase&&delete h.passphrase,h.https.pfx&&delete h.pfx),f=a,!r.default.object(f)||"statusCode"in f)?this.writable?(this.once("finish",()=>{this._onResponse(a)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(a):this._onRequest(a)}catch(a){if(a instanceof n.CacheError)throw new ac(a,this);throw new _(a.message,a,this)}}async _error(a){try{for(let b of this.options.hooks.beforeError)a=await b(a)}catch(b){a=new _(b.message,b,this)}this.destroy(a)}_beforeError(a){if(this[Q])return;let{options:b}=this,c=this.retryCount+1;this[Q]=!0,a instanceof _||(a=new _(a.message,a,this));let d=a,{response:e}=d;(async()=>{if(e&&!e.body){e.setEncoding(this._readableState.encoding);try{e.rawBody=await z.default(e),e.body=e.rawBody.toString()}catch(a){}}if(0!==this.listenerCount("retry")){let f;try{let a;e&&"retry-after"in e.headers&&(a=Number(e.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(e.headers["retry-after"])-Date.now())<=0&&(a=1):a*=1e3),f=await b.retry.calculateDelay({attemptCount:c,retryOptions:b.retry,error:d,retryAfter:a,computedValue:E.default({attemptCount:c,retryOptions:b.retry,error:d,retryAfter:a,computedValue:0})})}catch(a){this._error(new _(a.message,a,this));return}if(f){let b=async()=>{try{for(let a of this.options.hooks.beforeRetry)await a(this.options,d,c)}catch(b){this._error(new _(b.message,a,this));return}this.destroyed||(this.destroy(),this.emit("retry",c,a))};this[V]=setTimeout(b,f);return}}this._error(d)})()}_read(){this[R]=!0;let a=this[G];if(a&&!this[Q]){let b;for(a.readableLength&&(this[R]=!1);null!==(b=a.read());){this[I]+=b.length,this[P]=!0;let a=this.downloadProgress;a.percent<1&&this.emit("downloadProgress",a),this.push(b)}}}_write(a,b,c){let d=()=>{this._writeRequest(a,b,c)};this.requestInitialized?d():this[T].push(d)}_writeRequest(a,b,c){this[F].destroyed||(this._progressCallbacks.push(()=>{this[K]+=Buffer.byteLength(a,b);let c=this.uploadProgress;c.percent<1&&this.emit("uploadProgress",c)}),this[F].write(a,b,a=>{!a&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),c(a)}))}_final(a){let b=()=>{for(;0!==this._progressCallbacks.length;)this._progressCallbacks.shift()();F in this&&!this[F].destroyed?this[F].end(b=>{b||(this[J]=this[K],this.emit("uploadProgress",this.uploadProgress),this[F].emit("upload-complete")),a(b)}):a()};this.requestInitialized?b():this[T].push(b)}_destroy(a,b){var c;this[Q]=!0,clearTimeout(this[V]),F in this&&(this[O](),(null==(c=this[G])?void 0:c.complete)||this[F].destroy()),null===a||r.default.undefined(a)||a instanceof _||(a=new _(a.message,a,this)),b(a)}get _isAboutToError(){return this[Q]}get ip(){var a;return null==(a=this.socket)?void 0:a.remoteAddress}get aborted(){var a,b,c;return(null!=(b=null==(a=this[F])?void 0:a.destroyed)?b:this.destroyed)&&!(null==(c=this[U])?void 0:c.complete)}get socket(){var a,b;return null!=(b=null==(a=this[F])?void 0:a.socket)?b:void 0}get downloadProgress(){return{percent:this[H]?this[I]/this[H]:+(this[H]===this[I]),transferred:this[I],total:this[H]}}get uploadProgress(){return{percent:this[J]?this[K]/this[J]:+(this[J]===this[K]),transferred:this[K],total:this[J]}}get timings(){var a;return null==(a=this[F])?void 0:a.timings}get isFromCache(){return this[N]}pipe(a,b){if(this[P])throw Error("Failed to pipe. The response has been emitted already.");return a instanceof j.ServerResponse&&this[L].add(a),super.pipe(a,b)}unpipe(a){return a instanceof j.ServerResponse&&this[L].delete(a),super.unpipe(a),this}}c.default=ai},3369,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),c.CancelError=c.ParseError=void 0;let f=a.r(64219);class g extends f.RequestError{constructor(a,b){const{options:c}=b.request;super(`${a.message} in "${c.url.toString()}"`,a,b.request),this.name="ParseError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_BODY_PARSE_FAILURE":this.code}}c.ParseError=g;class h extends f.RequestError{constructor(a){super("Promise was canceled",{},a),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}c.CancelError=h,e(a.r(64219),c)},45458,(a,b,c)=>{"use strict";class d extends Error{constructor(a){super(a||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class e{static fn(a){return(...b)=>new e((c,d,e)=>{b.push(e),a(...b).then(c,d)})}constructor(a){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((b,c)=>{this._reject=c;let d=a=>{this._isCanceled&&f.shouldReject||(this._isPending=!1,b(a))},e=a=>{this._isPending=!1,c(a)},f=a=>{if(!this._isPending)throw Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(f,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),a(d,e,f)})}then(a,b){return this._promise.then(a,b)}catch(a){return this._promise.catch(a)}finally(a){return this._promise.finally(a)}cancel(a){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let a of this._cancelHandlers)a()}catch(a){this._reject(a);return}this._rejectOnCancel&&this._reject(new d(a))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(e.prototype,Promise.prototype),b.exports=e,b.exports.CancelError=d},51219,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(3369);c.default=(a,b,c,e)=>{let{rawBody:f}=a;try{if("text"===b)return f.toString(e);if("json"===b)return 0===f.length?"":c(f.toString());if("buffer"===b)return f;throw new d.ParseError({message:`Unknown body type '${b}'`,name:"Error"},a)}catch(b){throw new d.ParseError(b,a)}}},14595,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0});let f=a.r(27699),g=a.r(68964),h=a.r(45458),i=a.r(3369),j=a.r(51219),k=a.r(64219),l=a.r(22567),m=a.r(53183),n=a.r(46087),o=["request","response","redirect","uploadProgress","downloadProgress"];c.default=function a(b){let c,d,e=new f.EventEmitter,p=new h((f,h,q)=>{let r=s=>{let t=new k.default(void 0,b);t.retryCount=s,t._noPipe=!0,q(()=>t.destroy()),q.shouldReject=!1,q(()=>h(new i.CancelError(t))),c=t,t.once("response",async b=>{var c;let e;if(b.retryCount=s,b.request.aborted)return;try{e=await m.default(t),b.rawBody=e}catch(a){return}if(t._isAboutToError)return;let g=["gzip","deflate","br"].includes((null!=(c=b.headers["content-encoding"])?c:"").toLowerCase()),{options:h}=t;if(g&&!h.decompress)b.body=e;else try{b.body=j.default(b,h.responseType,h.parseJson,h.encoding)}catch(a){if(b.body=e.toString(),n.isResponseOk(b))return void t._beforeError(a)}try{for(let[c,d]of h.hooks.afterResponse.entries())b=await d(b,async b=>{let d=k.default.normalizeArguments(void 0,{...b,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},h);for(let a of(d.hooks.afterResponse=d.hooks.afterResponse.slice(0,c),d.hooks.beforeRetry))await a(d);let e=a(d);return q(()=>{e.catch(()=>{}),e.cancel()}),e})}catch(a){t._beforeError(new i.RequestError(a.message,a,t));return}(d=b,n.isResponseOk(b))?(t.destroy(),f(t.options.resolveBodyOnly?b.body:b)):t._beforeError(new i.HTTPError(b))});let u=a=>{if(p.isCanceled)return;let{options:b}=t;if(a instanceof i.HTTPError&&!b.throwHttpErrors){let{response:b}=a;f(t.options.resolveBodyOnly?b.body:b);return}h(a)};t.once("error",u);let v=t.options.body;t.once("retry",(a,b)=>{var c,d;v===(null==(c=b.request)?void 0:c.options.body)&&g.default.nodeStream(null==(d=b.request)?void 0:d.options.body)?u(b):r(a)}),l.default(t,e,o)};r(0)});p.on=(a,b)=>(e.on(a,b),p);let q=a=>{let b=(async()=>{await p;let{options:b}=d.request;return j.default(d,a,b.parseJson,b.encoding)})();return Object.defineProperties(b,Object.getOwnPropertyDescriptors(p)),b};return p.json=()=>{let{headers:a}=c.options;return c.writableFinished||void 0!==a.accept||(a.accept="application/json"),q("json")},p.buffer=()=>q("buffer"),p.text=()=>q("text"),p},e(a.r(3369),c)},80970,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(3369);c.default=function(a,...b){let c=(async()=>{if(a instanceof d.RequestError)try{for(let c of b)if(c)for(let b of c)a=await b(a)}catch(b){a=b}throw a})(),e=()=>c;return c.json=e,c.text=e,c.buffer=e,c.on=e,c}},7742,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(68964);c.default=function a(b){for(let c of Object.values(b))(d.default.plainObject(c)||d.default.array(c))&&a(c);return Object.freeze(b)}},35418,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},47069,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),c.defaultHandler=void 0;let f=a.r(68964),g=a.r(14595),h=a.r(80970),i=a.r(64219),j=a.r(7742),k={RequestError:g.RequestError,CacheError:g.CacheError,ReadError:g.ReadError,HTTPError:g.HTTPError,MaxRedirectsError:g.MaxRedirectsError,TimeoutError:g.TimeoutError,ParseError:g.ParseError,CancelError:g.CancelError,UnsupportedProtocolError:g.UnsupportedProtocolError,UploadError:g.UploadError},l=async a=>new Promise(b=>{setTimeout(b,a)}),{normalizeArguments:m}=i.default,n=(...a)=>{let b;for(let c of a)b=m(void 0,c,b);return b},o=a=>a.isStream?new i.default(void 0,a):g.default(a),p=a=>"defaults"in a&&"options"in a.defaults,q=["get","post","put","patch","head","delete"];c.defaultHandler=(a,b)=>b(a);let r=(a,b)=>{if(a)for(let c of a)c(b)},s=a=>{a._rawHandlers=a.handlers,a.handlers=a.handlers.map(a=>(b,c)=>{let d,e=a(b,a=>d=c(a));if(e!==d&&!b.isStream&&d){let{then:a,catch:b,finally:c}=e;Object.setPrototypeOf(e,Object.getPrototypeOf(d)),Object.defineProperties(e,Object.getOwnPropertyDescriptors(d)),e.then=a,e.catch=b,e.finally=c}return e});let b=(b,c={},d)=>{var e,j;let k=0,l=b=>a.handlers[k++](b,k===a.handlers.length?o:l);if(f.default.plainObject(b)){let a={...b,...c};i.setNonEnumerableProperties([b,c],a),c=a,b=void 0}try{let f;try{r(a.options.hooks.init,c),r(null==(e=c.hooks)?void 0:e.init,c)}catch(a){f=a}let h=m(b,c,null!=d?d:a.options);if(h[i.kIsNormalizedAlready]=!0,f)throw new g.RequestError(f.message,f,h);return l(h)}catch(b){if(!c.isStream)return h.default(b,a.options.hooks.beforeError,null==(j=c.hooks)?void 0:j.beforeError);throw b}};b.extend=(...b)=>{let d,e=[a.options],f=[...a._rawHandlers];for(let a of b)p(a)?(e.push(a.defaults.options),f.push(...a.defaults._rawHandlers),d=a.defaults.mutableDefaults):(e.push(a),"handlers"in a&&f.push(...a.handlers),d=a.mutableDefaults);return 0===(f=f.filter(a=>a!==c.defaultHandler)).length&&f.push(c.defaultHandler),s({options:n(...e),handlers:f,mutableDefaults:!!d})};let d=async function*(c,d){let e=m(c,d,a.options);e.resolveBodyOnly=!1;let g=e.pagination;if(!f.default.object(g))throw TypeError("`options.pagination` must be implemented");let h=[],{countLimit:i}=g,j=0;for(;j<g.requestLimit;){0!==j&&await l(g.backoff);let a=await b(void 0,void 0,e),c=await g.transform(a),d=[];for(let a of c)if(g.filter(a,h,d)&&(!g.shouldContinue(a,h,d)||(yield a,g.stackAllItems&&h.push(a),d.push(a),--i<=0)))return;let f=g.paginate(a,h,d);if(!1===f)return;f===a.request.options?e=a.request.options:void 0!==f&&(e=m(void 0,f,e)),j++}};for(let a of(b.paginate=d,b.paginate.all=async(a,b)=>{let c=[];for await(let e of d(a,b))c.push(e);return c},b.paginate.each=d,b.stream=(a,c)=>b(a,{...c,isStream:!0}),q))b[a]=(c,d)=>b(c,{...d,method:a}),b.stream[a]=(c,d)=>b(c,{...d,method:a,isStream:!0});return Object.assign(b,k),Object.defineProperty(b,"defaults",{value:a.mutableDefaults?a:j.default(a),writable:a.mutableDefaults,configurable:a.mutableDefaults,enumerable:!0}),b.mergeOptions=n,b};c.default=s,e(a.r(35418),c)},64312,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0});let f=a.r(92509),g=a.r(47069),h={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:a})=>a},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:a=>"json"===a.request.options.responseType?a.body:JSON.parse(a.body),paginate:a=>{let b;if(!Reflect.has(a.headers,"link"))return!1;for(let c of a.headers.link.split(",")){let a=c.split(";");if(a[1].includes("next")){b=(b=a[0].trimStart().trim()).slice(1,-1);break}}return!!b&&{url:new f.URL(b)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:a=>JSON.parse(a),stringifyJson:a=>JSON.stringify(a),cacheOptions:{}},handlers:[g.defaultHandler],mutableDefaults:!1},i=g.default(h);c.default=i,b.exports=i,b.exports.default=i,b.exports.__esModule=!0,e(a.r(47069),c),e(a.r(14595),c)},81133,(a,b,c)=>{a.e,b.exports=((b,c)=>{"use strict";var d,e,f,g,h,i,j,k={},l={exports:k},m=Object.create,n=Object.defineProperty,o=Object.defineProperties,p=Object.getOwnPropertyDescriptor,q=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,t=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,w=(a,b,c)=>b in a?n(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,x=(a,b)=>{for(var c in b||(b={}))u.call(b,c)&&w(a,c,b[c]);if(s)for(var c of s(b))v.call(b,c)&&w(a,c,b[c]);return a},y=(a,b)=>function(){return b||(0,a[r(a)[0]])((b={exports:{}}).exports,b),b.exports},z=(a,b,c)=>(c=null!=a?m(t(a)):{},((a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of r(b))u.call(a,e)||e===c||n(a,e,{get:()=>b[e],enumerable:!(d=p(b,e))||d.enumerable});return a})(!b&&a&&a.__esModule?c:n(c,"default",{value:a,enumerable:!0}),a)),A=y({"node_modules/bops/from.js"(b,c){var d=a.r(874).Buffer;c.exports=6>Number(((process||{}).version||"v0.0.0").slice(1).split(".")[0])?function(a,b){return new d(a,b)}:function(a,b){return d.from(a,b)}}}),B=y({"node_modules/bops/to.js"(a,b){b.exports=function(a,b){return a.toString(b)}}}),C=y({"node_modules/bops/is.js"(b,c){var d=a.r(874).Buffer;c.exports=function(a){return d.isBuffer(a)}}}),D=y({"node_modules/bops/subarray.js"(a,b){b.exports=function(a,b,c){return 2==arguments.length?a.slice(b):a.slice(b,c)}}}),E=y({"node_modules/bops/join.js"(b,c){var d=a.r(874).Buffer;c.exports=function(a,b){return void 0!==b?d.concat(a,b):d.concat(a)}}}),F=y({"node_modules/bops/copy.js"(a,b){b.exports=function(a,b,c,d,e){return a.copy(b,c,d,e)}}}),G=y({"node_modules/bops/create.js"(b,c){var d=a.r(874).Buffer;c.exports=6>Number(((process||{}).version||"v0.0.0").slice(1).split(".")[0])?function(a){return new d(a)}:function(a){return d.alloc(a)}}}),H=y({"node_modules/bops/read.js"(a,b){var c,d={},e=/read.+/;for(c in b.exports=d,Buffer.prototype)e.test(c)&&(d[c]=Function(["buf","a","b","c"],"return buf."+c+"(a,b,c)"))}}),I=y({"node_modules/bops/write.js"(b,c){var d,e=a.r(874).Buffer,f={},g=/write.+/;for(d in c.exports=f,e.prototype)g.test(d)&&(f[d]=Function(["buf","a","b","c"],"return buf."+d+"(a,b,c)"))}}),J=y({"node_modules/bops/index.js"(a,b){var c={};function d(a,b){for(var c in a)b[c]=a[c]}b.exports=c,c.from=A(),c.to=B(),c.is=C(),c.subarray=D(),c.join=E(),c.copy=F(),c.create=G(),d(H(),c),d(I(),c)}}),K=y({"node_modules/@ably/msgpack-js/msgpack.js"(a){var b=J();a.encode=function(a,d){var f=function a(c,d,f){var g,h,i=typeof c;if("string"===i){if((g=b.from(c).length)<32)return 1+g;if(g<256)return 2+g;if(g<65536)return 3+g;if(g<0x100000000)return 5+g}if(b.is(c)){if((g=c.length)<256)return 2+g;if(g<65536)return 3+g;if(g<0x100000000)return 5+g}if("number"===i){if(Math.floor(c)!==c)return 9;if(c>=0){if(c<128)return 1;if(c<256)return 2;if(c<65536)return 3;if(c<0x100000000)return 5;if(c<0xffffffffffffffff)return 9;throw Error("Number too big 0x"+c.toString(16))}if(c>=-32)return 1;if(c>=-128)return 2;if(c>=-32768)return 3;if(c>=-0x80000000)return 5;if(c>=-0x8000000000000000)return 9;throw Error("Number too small -0x"+c.toString(16).substr(1))}if("boolean"===i)return 1;if(null===c)return d&&f?0:1;if(void 0===c)return d&&f?0:3;if("function"==typeof c.toJSON)return a(c.toJSON(),d);if("object"===i){if(h=0,Array.isArray(c)){g=c.length;for(var j=0;j<g;j++)h+=a(c[j],d)}else{var k=e(c,d);g=k.length;for(var j=0;j<g;j++){var l=k[j];h+=a(l)+a(c[l],d,!0)}}if(g<16)return 1+h;if(g<65536)return 3+h;if(g<0x100000000)return 5+h;throw Error("Array or object too long 0x"+g.toString(16))}if("function"===i)return 0;throw Error("Unknown type "+i)}(a,d);if(0!=f){var g=b.create(f);return function a(d,f,g,h,i){var j,k,l,m,n,o,p=typeof d;if("string"===p){if((n=(d=b.from(d)).length)<32)return f[g]=160|n,b.copy(d,f,g+1),1+n;if(n<256)return f[g]=217,b.writeUInt8(f,n,g+1),b.copy(d,f,g+2),2+n;if(n<65536)return f[g]=218,b.writeUInt16BE(f,n,g+1),b.copy(d,f,g+3),3+n;if(n<0x100000000)return f[g]=219,b.writeUInt32BE(f,n,g+1),b.copy(d,f,g+5),5+n}if(b.is(d)){if((n=d.length)<256)return f[g]=196,b.writeUInt8(f,n,g+1),b.copy(d,f,g+2),2+n;if(n<65536)return f[g]=197,b.writeUInt16BE(f,n,g+1),b.copy(d,f,g+3),3+n;if(n<0x100000000)return f[g]=198,b.writeUInt32BE(f,n,g+1),b.copy(d,f,g+5),5+n}if("number"===p){if(Math.floor(d)!==d)return f[g]=203,b.writeDoubleBE(f,d,g+1),9;if(d>=0){if(d<128)return f[g]=d,1;if(d<256)return f[g]=204,f[g+1]=d,2;if(d<65536)return f[g]=205,b.writeUInt16BE(f,d,g+1),3;if(d<0x100000000)return f[g]=206,b.writeUInt32BE(f,d,g+1),5;if(d<0xffffffffffffffff)return f[g]=207,j=d,k=g+1,j<0xffffffffffffffff?(f.writeUInt32BE(Math.floor(j*c),k),f.writeInt32BE(-1&j,k+4)):(f.writeUInt32BE(0xffffffff,k),f.writeUInt32BE(0xffffffff,k+4)),9;throw Error("Number too big 0x"+d.toString(16))}if(d>=-32)return b.writeInt8(f,d,g),1;if(d>=-128)return f[g]=208,b.writeInt8(f,d,g+1),2;if(d>=-32768)return f[g]=209,b.writeInt16BE(f,d,g+1),3;if(d>=-0x80000000)return f[g]=210,b.writeInt32BE(f,d,g+1),5;if(d>=-0x8000000000000000)return f[g]=211,l=d,m=g+1,l<0x8000000000000000?(f.writeInt32BE(Math.floor(l*c),m),f.writeInt32BE(-1&l,m+4)):(f.writeUInt32BE(0x7fffffff,m),f.writeUInt32BE(0xffffffff,m+4)),9;throw Error("Number too small -0x"+d.toString(16).substr(1))}if("undefined"===p)return h&&i?0:(f[g]=212,f[g+1]=0,f[g+2]=0,3);if(null===d)return h&&i?0:(f[g]=192,1);if("boolean"===p)return f[g]=d?195:194,1;if("function"==typeof d.toJSON)return a(d.toJSON(),f,g,h);if("object"===p){o=0;var q=Array.isArray(d);if(q)n=d.length;else{var r=e(d,h);n=r.length}if(n<16?(f[g]=n|(q?144:128),o=1):n<65536?(f[g]=q?220:222,b.writeUInt16BE(f,n,g+1),o=3):n<0x100000000&&(f[g]=q?221:223,b.writeUInt32BE(f,n,g+1),o=5),q)for(var s=0;s<n;s++)o+=a(d[s],f,g+o,h);else for(var s=0;s<n;s++){var t=r[s];o+=a(t,f,g+o),o+=a(d[t],f,g+o,h,!0)}return o}if("function"!==p)throw Error("Unknown type "+p)}(a,g,0,d),g}},a.decode=function(a){var b=new d(a),c=b.parse();if(b.offset!==a.length)throw Error(a.length-b.offset+" trailing bytes");return c};var c=23283064365386963e-26;function d(a,b){this.offset=b||0,this.buffer=a,this.bufferLength=a.length}function e(a,b){return Object.keys(a).filter(function(c){var d=a[c],e=typeof d;return(!b||null!=d)&&("function"!==e||!!d.toJSON)})}d.prototype.map=function(a){if(2*a>this.bufferLength)throw Error(`malformed messagepack detected: buffer size was ${this.bufferLength}, but referenced a map of length ${a})`);for(var b={},c=0;c<a;c++)b[this.parse()]=this.parse();return b},d.prototype.bin=d.prototype.buf=function(a){if(a>this.bufferLength)throw Error(`malformed messagepack detected: buffer size was ${this.bufferLength}, but referenced a binary of length ${a})`);var c=b.subarray(this.buffer,this.offset,this.offset+a);return this.offset+=a,c},d.prototype.str=function(a){if(a>this.bufferLength)throw Error(`malformed messagepack detected: buffer size was ${this.bufferLength}, but referenced a string of length ${a})`);var c=b.to(b.subarray(this.buffer,this.offset,this.offset+a));return this.offset+=a,c},d.prototype.array=function(a){if(a>this.bufferLength)throw Error(`malformed messagepack detected: buffer size was ${this.bufferLength}, but referenced an array of length ${a})`);for(var b=Array(a),c=0;c<a;c++)b[c]=this.parse();return b},d.prototype.parse=function(){var a,c,d,e,f,g,h,i=this.buffer[this.offset];if(void 0===i)throw Error("malformed messagepack (referenced offset is outside buffer)");if((128&i)==0)return this.offset++,i;if((240&i)==128)return g=15&i,this.offset++,this.map(g);if((240&i)==144)return g=15&i,this.offset++,this.array(g);if((224&i)==160)return g=31&i,this.offset++,this.str(g);if((224&i)==224)return f=b.readInt8(this.buffer,this.offset),this.offset++,f;switch(i){case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return g=b.readUInt8(this.buffer,this.offset+1),this.offset+=2,this.bin(g);case 197:return g=b.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.bin(g);case 198:return g=b.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.bin(g);case 199:return g=b.readUInt8(this.buffer,this.offset+1),h=b.readUInt8(this.buffer,this.offset+2),this.offset+=3,[h,this.bin(g)];case 200:return g=b.readUInt16BE(this.buffer,this.offset+1),h=b.readUInt8(this.buffer,this.offset+3),this.offset+=4,[h,this.bin(g)];case 201:return g=b.readUInt32BE(this.buffer,this.offset+1),h=b.readUInt8(this.buffer,this.offset+5),this.offset+=6,[h,this.bin(g)];case 202:return f=b.readFloatBE(this.buffer,this.offset+1),this.offset+=5,f;case 203:return f=b.readDoubleBE(this.buffer,this.offset+1),this.offset+=9,f;case 204:return f=this.buffer[this.offset+1],this.offset+=2,f;case 205:return f=b.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,f;case 206:return f=b.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,f;case 207:return a=this.buffer,c=(c=this.offset+1)||0,f=0x100000000*a.readUInt32BE(c+0)+a.readUInt32BE(c+4),this.offset+=9,f;case 208:return f=b.readInt8(this.buffer,this.offset+1),this.offset+=2,f;case 209:return f=b.readInt16BE(this.buffer,this.offset+1),this.offset+=3,f;case 210:return f=b.readInt32BE(this.buffer,this.offset+1),this.offset+=5,f;case 211:return d=this.buffer,e=(e=this.offset+1)||0,f=0x100000000*d.readInt32BE(e+0)+d.readUInt32BE(e+4),this.offset+=9,f;case 212:return h=b.readUInt8(this.buffer,this.offset+1),f=b.readUInt8(this.buffer,this.offset+2),this.offset+=3,0===h&&0===f?void 0:[h,f];case 213:return h=b.readUInt8(this.buffer,this.offset+1),this.offset+=2,[h,this.bin(2)];case 214:return h=b.readUInt8(this.buffer,this.offset+1),this.offset+=2,[h,this.bin(4)];case 215:return h=b.readUInt8(this.buffer,this.offset+1),this.offset+=2,[h,this.bin(8)];case 216:return h=b.readUInt8(this.buffer,this.offset+1),this.offset+=2,[h,this.bin(16)];case 217:return g=b.readUInt8(this.buffer,this.offset+1),this.offset+=2,this.str(g);case 218:return g=b.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.str(g);case 219:return g=b.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.str(g);case 220:return g=b.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.array(g);case 221:return g=b.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.array(g);case 222:return g=b.readUInt16BE(this.buffer,this.offset+1),this.offset+=3,this.map(g);case 223:return g=b.readUInt32BE(this.buffer,this.offset+1),this.offset+=5,this.map(g)}throw Error("Unknown type 0x"+i.toString(16))}}}),L=class{},M=a.g;function N(a,b){return`${a}`.padStart(b?3:2,"0")}function O(a){return L.Config.logTimestamps?function(b){let c=new Date;a(N(c.getHours())+":"+N(c.getMinutes())+":"+N(c.getSeconds())+"."+N(c.getMilliseconds(),1)+" "+b)}:function(b){a(b)}}var P=class a{constructor(){this.deprecated=(a,b)=>{this.deprecationWarning(`${a} is deprecated and will be removed in a future version. ${b}`)},this.shouldLog=a=>a<=this.logLevel,this.setLog=(a,b)=>{void 0!==a&&(this.logLevel=a),void 0!==b&&(this.logHandler=this.logErrorHandler=b)},this.logLevel=a.defaultLogLevel,this.logHandler=a.defaultLogHandler,this.logErrorHandler=a.defaultLogErrorHandler}static initLogHandlers(){var b;let c,d,[e,f]=("function"==typeof(null==(b=null==M?void 0:M.console)?void 0:b.log)?(c=function(...a){console.log.apply(console,a)},d=console.warn?function(...a){console.warn.apply(console,a)}:c):c=d=function(){},[c,d].map(O));this.defaultLogHandler=e,this.defaultLogErrorHandler=f,this.defaultLogger=new a}static logActionNoStrip(a,b,c,d){a.logAction(b,c,d)}logAction(a,b,c){this.shouldLog(a)&&(1===a?this.logErrorHandler:this.logHandler)("Ably: "+b+": "+c,a)}renamedClientOption(a,b){this.deprecationWarning(`The \`${a}\` client option has been renamed to \`${b}\`. Please update your code to use \`${b}\` instead. \`${a}\` will be removed in a future version.`)}renamedMethod(a,b,c){this.deprecationWarning(`\`${a}\`\u2019s \`${b}\` method has been renamed to \`${c}\`. Please update your code to use \`${c}\` instead. \`${b}\` will be removed in a future version.`)}deprecationWarning(a){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${a}`,1)}};P.defaultLogLevel=1,P.LOG_NONE=0,P.LOG_ERROR=1,P.LOG_MAJOR=2,P.LOG_MINOR=3,P.LOG_MICRO=4,P.logAction=(a,b,c,d)=>{P.logActionNoStrip(a,b,c,d)};var Q={},R={Format:()=>an,allSame:()=>am,allToLowerCase:()=>aB,allToUpperCase:()=>aC,arrChooseN:()=>ax,arrDeleteValue:()=>ah,arrEquals:()=>aK,arrIntersect:()=>af,arrIntersectOb:()=>ag,arrPopRandomElement:()=>ao,arrWithoutValue:()=>ai,cheapRandStr:()=>av,containsValue:()=>ad,copy:()=>X,createMissingPluginError:()=>aL,dataSizeBytes:()=>au,decodeBody:()=>az,encodeBody:()=>aA,ensureArray:()=>Y,forInOwnNonNullProperties:()=>al,getBackoffCoefficient:()=>aD,getGlobalObject:()=>aG,getJitterCoefficient:()=>aE,getRetryTime:()=>aF,inherits:()=>ac,inspectBody:()=>at,inspectError:()=>as,intersect:()=>ae,isEmpty:()=>$,isErrorInfoOrPartialErrorInfo:()=>ar,isNil:()=>_,isObject:()=>Z,keysArray:()=>aj,matchDerivedChannel:()=>aI,mixin:()=>W,parseQueryString:()=>aq,prototypicalClone:()=>ab,randomString:()=>aw,shallowClone:()=>aa,shallowEquals:()=>aH,throwMissingPluginError:()=>aM,toBase64:()=>aJ,toQueryString:()=>ap,valuesArray:()=>ak,whenPromiseSettles:()=>ay,withTimeoutAsync:()=>aN};for(var S in R)n(Q,S,{get:R[S],enumerable:!0});function T(a){let b="["+a.constructor.name;return a.message&&(b+=": "+a.message),a.statusCode&&(b+="; statusCode="+a.statusCode),a.code&&(b+="; code="+a.code),a.cause&&(b+="; cause="+as(a.cause)),a.href&&!(a.message&&a.message.indexOf("help.ably.io")>-1)&&(b+="; see "+a.href+" "),b+="]"}var U=class a extends Error{constructor(b,c,d,e){super(b),void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(this,a.prototype),this.code=c,this.statusCode=d,this.cause=e}toString(){return T(this)}static fromValues(b){let{message:c,code:d,statusCode:e}=b;if("string"!=typeof c||"number"!=typeof d||"number"!=typeof e)throw Error("ErrorInfo.fromValues(): invalid values: "+L.Config.inspect(b));let f=Object.assign(new a(c,d,e),b);return f.code&&!f.href&&(f.href="https://help.ably.io/error/"+f.code),f}},V=class a extends Error{constructor(b,c,d,e){super(b),void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(this,a.prototype),this.code=c,this.statusCode=d,this.cause=e}toString(){return T(this)}static fromValues(b){let{message:c,code:d,statusCode:e}=b;if("string"!=typeof c||!_(d)&&"number"!=typeof d||!_(e)&&"number"!=typeof e)throw Error("PartialErrorInfo.fromValues(): invalid values: "+L.Config.inspect(b));let f=Object.assign(new a(c,d,e),b);return f.code&&!f.href&&(f.href="https://help.ably.io/error/"+f.code),f}};function W(a,...b){for(let c=0;c<b.length;c++){let d=b[c];if(!d)break;for(let b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])}return a}function X(a){return W({},a)}function Y(a){return _(a)?[]:Array.isArray(a)?a:[a]}function Z(a){return"[object Object]"==Object.prototype.toString.call(a)}function $(a){for(let b in a)return!1;return!0}function _(a){return null==a}function aa(a){let b={};for(let c in a)b[c]=a[c];return b}function ab(a,b){class c{}c.prototype=a;let d=new c;return b&&W(d,b),d}var ac=function(a,b){L.Config.inherits?L.Config.inherits(a,b):(a.super_=b,a.prototype=ab(b.prototype,{constructor:a}))};function ad(a,b){for(let c in a)if(a[c]==b)return!0;return!1}function ae(a,b){return Array.isArray(b)?af(a,b):ag(a,b)}function af(a,b){let c=[];for(let d=0;d<a.length;d++){let e=a[d];-1!=b.indexOf(e)&&c.push(e)}return c}function ag(a,b){let c=[];for(let d=0;d<a.length;d++){let e=a[d];e in b&&c.push(e)}return c}function ah(a,b){let c=a.indexOf(b),d=-1!=c;return d&&a.splice(c,1),d}function ai(a,b){let c=a.slice();return ah(c,b),c}function aj(a,b){let c=[];for(let d in a)(!b||Object.prototype.hasOwnProperty.call(a,d))&&c.push(d);return c}function ak(a,b){let c=[];for(let d in a)(!b||Object.prototype.hasOwnProperty.call(a,d))&&c.push(a[d]);return c}function al(a,b){for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&b(c)}function am(a,b){if(0===a.length)return!0;let c=a[0][b];return a.every(function(a){return a[b]===c})}var an=((d=an||{}).msgpack="msgpack",d.json="json",d);function ao(a){return a.splice(Math.floor(Math.random()*a.length),1)[0]}function ap(a){let b=[];if(a)for(let c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.length?"?"+b.join("&"):""}function aq(a){let b,c=/([^?&=]+)=?([^&]*)/g,d={};for(;b=c.exec(a);)d[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return d}function ar(a){return"object"==typeof a&&null!==a&&(a instanceof U||a instanceof V)}function as(a){var b,c;return a instanceof Error||(null==(b=null==a?void 0:a.constructor)?void 0:b.name)==="ErrorInfo"||(null==(c=null==a?void 0:a.constructor)?void 0:c.name)==="PartialErrorInfo"?a.toString():L.Config.inspect(a)}function at(a){return L.BufferUtils.isBuffer(a)?a.toString():"string"==typeof a?a:L.Config.inspect(a)}function au(a){if(L.BufferUtils.isBuffer(a))return L.BufferUtils.byteLength(a);if("string"==typeof a)return L.Config.stringByteSize(a);if("number"==typeof a)return 8;if("boolean"==typeof a)return 1;throw Error(`Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ${typeof a}`)}function av(){return String(Math.random()).substr(2)}var aw=async a=>{let b=await L.Config.getRandomArrayBuffer(a);return L.BufferUtils.base64Encode(b)};function ax(a,b){let c=Math.min(b,a.length),d=a.slice(),e=[];for(let a=0;a<c;a++)e.push(ao(d));return e}function ay(a,b){a.then(a=>{null==b||b(null,a)}).catch(a=>{null==b||b(a)})}function az(a,b,c){return"msgpack"==c?(b||aM("MsgPack"),b.decode(a)):JSON.parse(String(a))}function aA(a,b,c){return"msgpack"==c?(b||aM("MsgPack"),b.encode(a,!0)):JSON.stringify(a)}function aB(a){return a.map(function(a){return a&&a.toLowerCase()})}function aC(a){return a.map(function(a){return a&&a.toUpperCase()})}function aD(a){return Math.min((a+2)/3,2)}function aE(){return 1-.2*Math.random()}function aF(a,b){return a*aD(b)*aE()}function aG(){return a.g}function aH(a,b){return Object.keys(a).every(c=>a[c]===b[c])&&Object.keys(b).every(c=>b[c]===a[c])}function aI(a){let b=a.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!b||!b.length||b.length<5)throw new U("regex match failed",400,40010);if(b[2])throw new U(`cannot use a derived option with a ${b[2]} channel`,400,40010);return{qualifierParam:b[3]||"",channelName:b[4]}}function aJ(a){let b=L.BufferUtils,c=b.utf8Encode(a);return b.base64Encode(c)}function aK(a,b){return a.length===b.length&&a.every(function(a,c){return a===b[c]})}function aL(a){return new U(`${a} plugin not provided`,40019,400)}function aM(a){throw aL(a)}async function aN(a,b=5e3,c="Timeout expired"){let d=new U(c,5e4,500);return Promise.race([a,new Promise((a,c)=>setTimeout(()=>c(d),b))])}var aO="2.14.0",aP={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:aO,protocolVersion:4,agent:"ably-js/"+aO,getPort:function(a,b){return b||a.tls?a.tlsPort:a.port},getHttpScheme:function(a){return a.tls?"https://":"http://"},getPrimaryDomainFromEndpoint:aR,getEndpointFallbackHosts:aS,getFallbackHosts:aU,getHosts:function(a){return[a.primaryDomain].concat(aU(a))},checkHost:aV,objectifyOptions:function(a,b,c,d,e){let f;if(void 0===a){let a=b?`${c} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${c} must be initialized with a client options object`;throw P.logAction(d,P.LOG_ERROR,`${c}()`,a),Error(a)}if("string"==typeof a)if(-1==a.indexOf(":")){if(!b){let a=`${c} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object\u2019s \`token\` property.)`;throw P.logAction(d,P.LOG_ERROR,`${c}()`,a),Error(a)}f={token:a}}else{if(!b){let a=`${c} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object\u2019s \`key\` property.)`;throw P.logAction(d,P.LOG_ERROR,`${c}()`,a),Error(a)}f={key:a}}else f=a;return e&&(f=o(x({},f),q({plugins:x(x({},e),f.plugins)}))),f},normaliseOptions:function(a,b,c){let d=null!=c?c:P.defaultLogger;a.environment&&d.deprecated("The `environment` client option","Use the `endpoint` client option instead."),a.restHost&&d.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),a.realtimeHost&&d.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead.");if(a.endpoint&&(a.environment||a.restHost||a.realtimeHost))throw new U("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(a.environment&&(a.restHost||a.realtimeHost))throw new U("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400);"function"==typeof a.recover&&!0===a.closeOnUnload&&(P.logAction(d,P.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),a.recover=void 0),"closeOnUnload"in a||(a.closeOnUnload=!a.recover),"queueMessages"in a||(a.queueMessages=!0);let e=a.endpoint||aP.ENDPOINT;a.fallbackHosts||a.restHost||a.realtimeHost||a.port||a.tlsPort||(a.fallbackHosts=aS(a.environment||e));let f=a.environment&&`${a.environment}.realtime.ably.net`,g=a.restHost||a.realtimeHost||f||aR(e);(a.fallbackHosts||[]).concat(g).forEach(aV),a.port=a.port||aP.PORT,a.tlsPort=a.tlsPort||aP.TLS_PORT,"tls"in a||(a.tls=!0);let h=function(a){let b={};for(let c in aP.TIMEOUTS)b[c]=a[c]||aP.TIMEOUTS[c];return b}(a);b?"useBinaryProtocol"in a?a.useBinaryProtocol=L.Config.supportsBinary&&a.useBinaryProtocol:a.useBinaryProtocol=L.Config.preferBinary:a.useBinaryProtocol=!1;let i={};a.clientId&&(i["X-Ably-ClientId"]=L.BufferUtils.base64Encode(L.BufferUtils.utf8Encode(a.clientId))),"idempotentRestPublishing"in a||(a.idempotentRestPublishing=!0);let j=null,k=a.connectivityCheckUrl;if(a.connectivityCheckUrl){let[b,c]=a.connectivityCheckUrl.split("?");j=c?aq(c):{},-1===b.indexOf("://")&&(b="https://"+b),k=b}let l=a.wsConnectivityCheckUrl;return l&&-1===l.indexOf("://")&&(l="wss://"+l),o(x({},a),q({primaryDomain:g,maxMessageSize:a.maxMessageSize||aP.maxMessageSize,timeouts:h,connectivityCheckParams:j,connectivityCheckUrl:k,wsConnectivityCheckUrl:l,headers:i}))},defaultGetHeaders:function(a,{format:b=aZ.format,protocolVersion:c=aZ.protocolVersion}={}){return{accept:aY[b],"X-Ably-Version":c.toString(),"Ably-Agent":aW(a)}},defaultPostHeaders:function(a,{format:b=aZ.format,protocolVersion:c=aZ.protocolVersion}={}){let d;return{accept:d=aY[b],"content-type":d,"X-Ably-Version":c.toString(),"Ably-Agent":aW(a)}}};function aQ(a){return a.includes(".")||a.includes("::")||"localhost"===a}function aR(a){if(aQ(a))return a;if(a.startsWith("nonprod:")){let b=a.replace("nonprod:","");return`${b}.realtime.ably-nonprod.net`}return`${a}.realtime.ably.net`}function aS(a){return aQ(a)?[]:a.startsWith("nonprod:")?aT(a.replace("nonprod:",""),"ably-realtime-nonprod.com"):aT(a,"ably-realtime.com")}function aT(a,b){return["a","b","c","d","e"].map(c=>`${a}.${c}.fallback.${b}`)}function aU(a){let b=a.fallbackHosts,c=void 0!==a.httpMaxRetryCount?a.httpMaxRetryCount:aP.httpMaxRetryCount;return b?ax(b,c):[]}function aV(a){if("string"!=typeof a)throw new U("host must be a string; was a "+typeof a,4e4,400);if(!a.length)throw new U("host must not be zero-length",4e4,400)}function aW(a){let b=aP.agent;if(a.agents)for(var c in a.agents)b+=" "+c+"/"+a.agents[c];return b}function aX(a,b,c){let d=c||{};if(d.cipher){a||aM("Crypto");let c=a.getCipher(d.cipher,b);d.cipher=c.cipherParams,d.channelCipher=c.cipher}else"cipher"in d&&(d.cipher=void 0,d.channelCipher=null);return d}var aY={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},aZ={format:"json",protocolVersion:aP.protocolVersion},a$=class a{constructor(a,b){this.logger=a,this.members=b||[]}call(a,b){for(let c of this.members)if(c)try{c(a,b)}catch(a){P.logAction(this.logger,P.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+a+"; stack = "+a.stack)}}push(...a){this.members.push(...a)}createPromise(){return new Promise((a,b)=>{this.push((c,d)=>{c?b(c):a(d)})})}resolveAll(a){this.call(null,a)}rejectAll(a){this.call(a)}static create(b,c){let d=new a(b,c);return Object.assign((a,b)=>d.call(a,b),{push:a=>d.push(a),createPromise:()=>d.createPromise(),resolveAll:a=>d.resolveAll(a),rejectAll:a=>d.rejectAll(a)})}},a_=((e=a_||{}).Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch",e),a0=((f=a0||{})[f.Success=200]="Success",f[f.NoContent=204]="NoContent",f[f.BadRequest=400]="BadRequest",f[f.Unauthorized=401]="Unauthorized",f[f.Forbidden=403]="Forbidden",f[f.RequestTimeout=408]="RequestTimeout",f[f.InternalServerError=500]="InternalServerError",f);function a1(a){return ar(a)?(a.code||(403===a.statusCode?a.code=40300:(a.code=40170,a.statusCode=401)),a):new U(as(a),a.code||40170,a.statusCode||401)}function a2(a){if(!a)return"";"string"==typeof a&&(a=JSON.parse(a));let b=Object.create(null),c=aj(a,!0);c.sort();for(let d=0;d<c.length;d++)b[c[d]]=a[c[d]].sort();return JSON.stringify(b)}function a3(a,b){if(a.authCallback)P.logAction(b,P.LOG_MINOR,"Auth()","using token auth with authCallback");else if(a.authUrl)P.logAction(b,P.LOG_MINOR,"Auth()","using token auth with authUrl");else if(a.key)P.logAction(b,P.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(a.tokenDetails)P.logAction(b,P.LOG_MINOR,"Auth()","using token auth with supplied token only");else{let a="authOptions must include valid authentication parameters";throw P.logAction(b,P.LOG_ERROR,"Auth()",a),Error(a)}}function a4(a){return a.useTokenAuth||!("useTokenAuth"in a&&!a.useTokenAuth)&&(a.authCallback||a.authUrl||a.token||a.tokenDetails)}var a5=0,a6=class{constructor(a,b){if(this.authOptions={},this.client=a,this.tokenParams=b.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,a4(b))(function(a){return!a.key&&!a.authCallback&&!a.authUrl})(b)&&P.logAction(this.logger,P.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(b.defaultTokenParams,b),a3(this.authOptions,this.logger);else{if(!b.key){const a="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw P.logAction(this.logger,P.LOG_ERROR,"Auth()",a),new U(a,40160,401)}P.logAction(this.logger,P.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(b)}}get logger(){return this.client.logger}async authorize(a,b){if(b&&b.key&&this.authOptions.key!==b.key)throw new U("Unable to update auth options with incompatible key",40102,401);try{let c=await this._forceNewToken(null!=a?a:null,null!=b?b:null);if(this.client.connection)return new Promise((a,b)=>{this.client.connection.connectionManager.onAuthUpdated(c,(c,d)=>c?b(c):a(d))});return c}catch(a){throw this.client.connection&&a.statusCode===a0.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(a),a}}async _forceNewToken(a,b){this.tokenDetails=null,this._saveTokenOptions(a,b),a3(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(a,b){let c=b||this.authOptions,d=a||X(this.tokenParams),e,f=this.client;if(c.authCallback)P.logAction(this.logger,P.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),e=c.authCallback;else if(c.authUrl)P.logAction(this.logger,P.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),e=(a,b)=>{let d,e=W({accept:"application/json, text/plain"},c.authHeaders),f=c.authMethod&&"post"===c.authMethod.toLowerCase(),g=c.authUrl.indexOf("?");g>-1&&(d=aq(c.authUrl.slice(g)),c.authUrl=c.authUrl.slice(0,g),f||(c.authParams=W(d,c.authParams)));let h=W({},c.authParams||{},a),i=a=>{var c,d;let e=null!=(c=a.body)?c:null,f=null;if(a.error)P.logAction(this.logger,P.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+as(a.error));else{let b=null!=(d=a.headers["content-type"])?d:null;f=Array.isArray(b)?b.join(", "):b,P.logAction(this.logger,P.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+f+"; body: "+at(e))}if(a.error)return void b(a.error,null);if(a.unpacked)return void b(null,e);if(L.BufferUtils.isBuffer(e)&&(e=e.toString()),!f)return void b(new U("authUrl response is missing a content-type header",40170,401),null);let g=f.indexOf("application/json")>-1,h=f.indexOf("text/plain")>-1||f.indexOf("application/jwt")>-1;if(!g&&!h)return void b(new U("authUrl responded with unacceptable content-type "+f+", should be either text/plain, application/jwt or application/json",40170,401),null);if(g){if(e.length>131072)return void b(new U("authUrl response exceeded max permitted length",40170,401),null);try{e=JSON.parse(e)}catch(a){b(new U("Unexpected error processing authURL response; err = "+a.message,40170,401),null);return}}b(null,e,f)};if(P.logAction(this.logger,P.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+c.authUrl+"; Params: "+JSON.stringify(h)+"; method: "+(f?"POST":"GET")),f){let a=e||{};a["content-type"]="application/x-www-form-urlencoded";let b=ap(h).slice(1);ay(this.client.http.doUri(a_.Post,c.authUrl,a,b,d),(a,b)=>a?i(a):i(b))}else ay(this.client.http.doUri(a_.Get,c.authUrl,e||{},null,h),(a,b)=>a?i(a):i(b))};else if(c.key)P.logAction(this.logger,P.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),e=(a,b)=>{ay(this.createTokenRequest(a,c),(a,c)=>b(a,null!=c?c:null))};else throw P.logAction(this.logger,P.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new U("Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)",40171,403);"capability"in d&&(d.capability=a2(d.capability));let g=(a,b)=>{let d="/keys/"+a.keyName+"/requestToken",e=aP.defaultPostHeaders(this.client.options);c.requestHeaders&&W(e,c.requestHeaders),P.logAction(this.logger,P.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+d+"; Token params: "+JSON.stringify(a)),ay(this.client.http.do(a_.Post,function(a){return f.baseUri(a)+d},e,JSON.stringify(a),null),(a,c)=>a?b(a):b(c.error,c.body,c.unpacked))};return new Promise((a,b)=>{let f=!1,h=this.client.options.timeouts.realtimeRequestTimeout,i=setTimeout(()=>{f=!0;let a="Token request callback timed out after "+h/1e3+" seconds";P.logAction(this.logger,P.LOG_ERROR,"Auth.requestToken()",a),b(new U(a,40170,401))},h);e(d,(d,e,h)=>{if(f)return;if(clearTimeout(i),d){P.logAction(this.logger,P.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+as(d)),b(a1(d));return}if("string"==typeof e)return void(0===e.length?b(new U("Token string is empty",40170,401)):e.length>131072?b(new U("Token string exceeded max permitted length (was "+e.length+" bytes)",40170,401)):"undefined"===e||"null"===e?b(new U("Token string was literal null/undefined",40170,401)):"{"!==e[0]||h&&h.indexOf("application/jwt")>-1?a({token:e}):b(new U("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)));if("object"!=typeof e||null===e){let a="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof e;P.logAction(this.logger,P.LOG_ERROR,"Auth.requestToken()",a),b(new U(a,40170,401));return}let j=JSON.stringify(e).length;if(j>131072&&!c.suppressMaxLengthCheck)return void b(new U("Token request/details object exceeded max permitted stringified size (was "+j+" bytes)",40170,401));if("issued"in e)return void a(e);if(!("keyName"in e)){let a="Expected token request callback to call back with a token string, token request object, or token details object";P.logAction(this.logger,P.LOG_ERROR,"Auth.requestToken()",a),b(new U(a,40170,401));return}g(e,(c,d,e)=>{if(c){P.logAction(this.logger,P.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+as(c)),b(a1(c));return}e||(d=JSON.parse(d)),P.logAction(this.logger,P.LOG_MINOR,"Auth.getToken()","token received"),a(d)})})})}async createTokenRequest(a,b){let c,d,e,f;b=b||this.authOptions,a=a||X(this.tokenParams);let g=b.key;if(!g)throw new U("No key specified",40101,403);let h=g.split(":"),i=h[0],j=h[1];if(!j)throw new U("Invalid key specified",40101,403);if(""===a.clientId)throw new U("clientId cant be an empty string",40012,400);"capability"in a&&(a.capability=a2(a.capability));let k=W({keyName:i},a),l=a.clientId||"",m=a.ttl||"",n=a.capability||"";k.timestamp||(k.timestamp=await this._getTimestamp(b&&b.queryTime));let o=k.nonce||(k.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),p=k.timestamp,q=k.keyName+"\n"+m+"\n"+n+"\n"+l+"\n"+p+"\n"+o+"\n";return k.mac=k.mac||(d=(c=L.BufferUtils).utf8Encode(q),e=c.utf8Encode(j),f=c.hmacSha256(d,e),c.base64Encode(f)),P.logAction(this.logger,P.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),k}async getAuthParams(){if("basic"==this.method)return{key:this.key};{let a=await this._ensureValidAuthCredentials(!1);if(!a)throw Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:a.token}}}async getAuthHeaders(){if("basic"==this.method)return{authorization:"Basic "+this.basicKey};{let a=await this._ensureValidAuthCredentials(!1);if(!a)throw Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+aJ(a.token)}}}_saveBasicOptions(a){this.method="basic",this.key=a.key,this.basicKey=aJ(a.key),this.authOptions=a||{},"clientId"in a&&this._userSetClientId(a.clientId)}_saveTokenOptions(a,b){this.method="token",a&&(this.tokenParams=a),b&&(b.token&&(b.tokenDetails="string"==typeof b.token?{token:b.token}:b.token),b.tokenDetails&&(this.tokenDetails=b.tokenDetails),"clientId"in b&&this._userSetClientId(b.clientId),this.authOptions=b)}async _ensureValidAuthCredentials(a){let b=this.tokenDetails;if(b){if(this._tokenClientIdMismatch(b.clientId))throw new U("Mismatch between clientId in token ("+b.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!b.expires||b.expires>=this.client.getTimestampUsingOffset())return P.logAction(this.logger,P.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+b.expires),b;P.logAction(this.logger,P.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}let c=(this.waitingForTokenRequest||(this.waitingForTokenRequest=a$.create(this.logger))).createPromise();if(null!==this.currentTokenRequestId&&!a)return c;let d=this.currentTokenRequestId=a5++,e,f=null;try{e=await this.requestToken(this.tokenParams,this.authOptions)}catch(a){f=a}if(this.currentTokenRequestId>d)return P.logAction(this.logger,P.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),c;this.currentTokenRequestId=null;let g=this.waitingForTokenRequest;return(this.waitingForTokenRequest=null,f)?null==g||g.rejectAll(f):null==g||g.resolveAll(this.tokenDetails=e),c}_userSetClientId(a){if("string"!=typeof a&&null!==a)throw new U("clientId must be either a string or null",40012,400);if("*"===a)throw new U('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{let b=this._uncheckedSetClientId(a);if(b)throw b}}_uncheckedSetClientId(a){if(!this._tokenClientIdMismatch(a))return this.clientId=this.tokenParams.clientId=a,null;{let b="Unexpected clientId mismatch: client has "+this.clientId+", requested "+a,c=new U(b,40102,401);return P.logAction(this.logger,P.LOG_ERROR,"Auth._uncheckedSetClientId()",b),c}}_tokenClientIdMismatch(a){return!!(this.clientId&&"*"!==this.clientId&&a&&"*"!==a&&this.clientId!==a)}static isTokenErr(a){return a.code&&a.code>=40140&&a.code<40150}revokeTokens(a,b){return this.client.rest.revokeTokens(a,b)}async _getTimestamp(a){return this.client.getTimestamp(a||!!this.authOptions.queryTime)}};function a7(a){let b=[];if(a)for(let c in a)b.push(c+"="+a[c]);return b.join("&")}function a8(a,b){return a+(b?"?":"")+a7(b)}var a9=class{constructor(a){this.client=a,this.platformHttp=new L.Http(a),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var a,b;return null!=(b=null==(a=this.client)?void 0:a.logger)?b:P.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(a){let b=a.connection,c=b&&b.connectionManager.host;return c?[c].concat(aP.getFallbackHosts(a.options)):aP.getHosts(a.options)}async do(a,b,c,d,e){try{let f=this.client;if(!f)return{error:new U("http.do called without client",5e4,500)};let g="function"==typeof b?b:function(a){return f.baseUri(a)+b},h=f._currentFallback;if(h)if(h.validUntil>Date.now()){let i=await this.doUri(a,g(h.host),c,d,e);if(i.error&&this.platformHttp.shouldFallback(i.error))return f._currentFallback=null,this.do(a,b,c,d,e);return i}else f._currentFallback=null;let i=this._getHosts(f);if(1===i.length)return this.doUri(a,g(i[0]),c,d,e);let j=null,k=async(b,h)=>{let i=b.shift();j=null!=j?j:new Date;let l=await this.doUri(a,g(i),c,d,e);return l.error&&this.platformHttp.shouldFallback(l.error)&&b.length?Date.now()-j.getTime()>f.options.timeouts.httpMaxRetryDuration?{error:new U(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${f.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:k(b,!0):(h&&(f._currentFallback={host:i,validUntil:Date.now()+f.options.timeouts.fallbackRetryTimeout}),l)};return k(i)}catch(a){return{error:new U(`Unexpected error in Http.do: ${as(a)}`,500,5e4)}}}async doUri(a,b,c,d,e){try{var f,g;(f=this.logger).shouldLog(P.LOG_MICRO)&&P.logActionNoStrip(f,P.LOG_MICRO,"Http."+a+"()","Sending; "+a8(b,e)+"; Body"+(L.BufferUtils.isBuffer(d)?" (Base64): "+L.BufferUtils.base64Encode(d):": "+d));let h=await this.platformHttp.doUri(a,b,c,d,e);return this.logger.shouldLog(P.LOG_MICRO)&&(g=this.logger,h.error?P.logActionNoStrip(g,P.LOG_MICRO,"Http."+a+"()","Received Error; "+a8(b,e)+"; Error: "+as(h.error)):P.logActionNoStrip(g,P.LOG_MICRO,"Http."+a+"()","Received; "+a8(b,e)+"; Headers: "+a7(h.headers)+"; StatusCode: "+h.statusCode+"; Body"+(L.BufferUtils.isBuffer(h.body)?" (Base64): "+L.BufferUtils.base64Encode(h.body):": "+h.body))),h}catch(a){return{error:new U(`Unexpected error in Http.doUri: ${as(a)}`,500,5e4)}}}};function ba(a,b,c){let d,e,f;for(let g=0;g<a.length;g++)if(d=a[g],c&&(d=d[c]),Array.isArray(d)){for(;-1!==(e=d.indexOf(b));)d.splice(e,1);c&&0===d.length&&delete a[g][c]}else if(Z(d))for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&Array.isArray(d[f])&&ba([d],b,f)}var bb=class{constructor(a){this.logger=a,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...a){if(1===a.length){let b=a[0];if("function"==typeof b)this.any.push(b);else throw Error("EventListener.on(): Invalid arguments: "+L.Config.inspect(a))}if(2===a.length){let[b,c]=a;if("function"!=typeof c)throw Error("EventListener.on(): Invalid arguments: "+L.Config.inspect(a));if(_(b))this.any.push(c);else if(Array.isArray(b))b.forEach(a=>{this.on(a,c)});else{if("string"!=typeof b)throw Error("EventListener.on(): Invalid arguments: "+L.Config.inspect(a));(this.events[b]||(this.events[b]=[])).push(c)}}}off(...a){if(0==a.length||_(a[0])&&_(a[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}let[b,c]=a,d=null,e=null;if(1!==a.length&&c){if("function"!=typeof c)throw Error("EventEmitter.off(): invalid arguments:"+L.Config.inspect(a));[e,d]=[b,c]}else"function"==typeof b?d=b:e=b;if(d&&_(e))return void ba([this.any,this.events,this.anyOnce,this.eventsOnce],d);if(Array.isArray(e))return void e.forEach(a=>{this.off(a,d)});if("string"!=typeof e)throw Error("EventEmitter.off(): invalid arguments:"+L.Config.inspect(a));d?ba([this.events,this.eventsOnce],d,e):(delete this.events[e],delete this.eventsOnce[e])}listeners(a){if(a){let b=this.events[a]||[];return this.eventsOnce[a]&&Array.prototype.push.apply(b,this.eventsOnce[a]),b.length?b:null}return this.any.length?this.any:null}emit(a,...b){let c={event:a},d=[];this.anyOnce.length&&(Array.prototype.push.apply(d,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(d,this.any);let e=this.eventsOnce[a];e&&(Array.prototype.push.apply(d,e),delete this.eventsOnce[a]);let f=this.events[a];f&&Array.prototype.push.apply(d,f),d.forEach(a=>{var d=this.logger;try{a.apply(c,b)}catch(a){P.logAction(d,P.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+a+"; stack = "+(a&&a.stack))}})}once(...a){let b=a.length;if(0===b||1===b&&"function"!=typeof a[0]){let b=a[0];return new Promise(a=>{this.once(b,a)})}let[c,d]=a;if(1===a.length&&"function"==typeof c)this.anyOnce.push(c);else if(_(c)){if("function"!=typeof d)throw Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(a));this.anyOnce.push(d)}else if(Array.isArray(c)){let b=this,e=function(){let f=Array.prototype.slice.call(arguments);if(c.forEach(function(a){b.off(a,e)}),"function"!=typeof d)throw Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(a));d.apply(this,f)};c.forEach(function(a){b.on(a,e)})}else{if("string"!=typeof c)throw Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(a));let b=this.eventsOnce[c]||(this.eventsOnce[c]=[]);if(d){if("function"!=typeof d)throw Error("EventEmitter.once(): Invalid arguments:"+L.Config.inspect(a));b.push(d)}}}async whenState(a,b){if("string"!=typeof a||"string"!=typeof b)throw Error("whenState requires a valid state String argument");return a===b?null:this.once(a)}},bc={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},bd=[];Object.keys(bc).forEach(function(a){bd[bc[a]]=a});var be={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:131072,SUBSCRIBE:262144,PRESENCE_SUBSCRIBE:524288,ANNOTATION_PUBLISH:2097152,ANNOTATION_SUBSCRIBE:4194304,OBJECT_SUBSCRIBE:0x1000000,OBJECT_PUBLISH:0x2000000},bf=Object.keys(be);be.MODE_ALL=be.PRESENCE|be.PUBLISH|be.SUBSCRIBE|be.PRESENCE_SUBSCRIBE|be.ANNOTATION_PUBLISH|be.ANNOTATION_SUBSCRIBE|be.OBJECT_SUBSCRIBE|be.OBJECT_PUBLISH;var bg=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function bh(a,b,c){if(c&&c.cipher){a||aM("Crypto");let d=a.getCipher(c.cipher,b);return{cipher:d.cipherParams,channelCipher:d.cipher}}return null!=c?c:{}}async function bi(a,b){let{data:c,encoding:d}=await bj(a.data,a.encoding,b);return a.data=c,a.encoding=d,a}async function bj(a,b,c){let d=c.channelCipher,e=a,f=b?b+"/":"";return L.BufferUtils.isBuffer(e)||(e=L.BufferUtils.utf8Encode(String(e)),f+="utf-8/"),{data:await d.encrypt(e),encoding:f=f+"cipher+"+d.algorithm}}async function bk(a,b){let{data:c,encoding:d}=bl(a.data,a.encoding);return(a.data=c,a.encoding=d,null!=b&&b.cipher)?bi(a,b):a}function bl(a,b){if("string"==typeof a||L.BufferUtils.isBuffer(a)||null==a)return{data:a,encoding:b};if(Z(a)||Array.isArray(a))return{data:JSON.stringify(a),encoding:b?b+"/json":"json"};throw new U("Data type is unsupported",40013,400)}async function bm(a,b){let{data:c,encoding:d,error:e}=await bn(a.data,a.encoding,b);if(a.data=c,a.encoding=d,e)throw e}async function bn(a,b,c){let d,e=c&&c.channelOptions?c:{channelOptions:c,plugins:{},baseEncodedPreviousPayload:void 0},f=a,g=a,h=b;if(b){let a,c=b.split("/"),i=c.length,j="";try{for(;(a=i)>0;){let b=c[--i].match(/([-\w]+)(\+([\w-]+))?/);if(!b)break;switch(j=b[1]){case"base64":g=L.BufferUtils.base64Decode(String(g)),a==c.length&&(f=g);continue;case"utf-8":g=L.BufferUtils.utf8Decode(g);continue;case"json":g=JSON.parse(g);continue;case"cipher":if(null!=e.channelOptions&&e.channelOptions.cipher&&e.channelOptions.channelCipher){let a=b[3],c=e.channelOptions.channelCipher;if(a!=c.algorithm)throw Error("Unable to decrypt message with given cipher; incompatible cipher params");g=await c.decrypt(g);continue}throw Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!e.plugins||!e.plugins.vcdiff)throw new U("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"==typeof Uint8Array)throw new U("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let a=e.baseEncodedPreviousPayload;"string"==typeof a&&(a=L.BufferUtils.utf8Encode(a));let b=L.BufferUtils.toBuffer(a);g=L.BufferUtils.toBuffer(g),f=g=L.BufferUtils.arrayBufferViewToBuffer(e.plugins.vcdiff.decode(g,b))}catch(a){throw new U("Vcdiff delta decode failed with "+a,40018,400)}continue;default:throw Error("Unknown encoding")}}}catch(a){d=new U(`Error processing the ${j} encoding, decoder returned \u2018${a.message}\u2019`,a.code||40013,400)}finally{h=a<=0?null:c.slice(0,a).join("/")}}return d?{error:d,data:g,encoding:h}:(e.baseEncodedPreviousPayload=f,{data:g,encoding:h})}function bo(...a){let b=a.length>0?"json":"msgpack",{data:c,encoding:d}=bp(this.data,this.encoding,b);return Object.assign({},this,{encoding:d,data:c})}function bp(a,b,c){return a&&L.BufferUtils.isBuffer(a)?"msgpack"===c?{data:L.BufferUtils.toBuffer(a),encoding:b}:{data:L.BufferUtils.base64Encode(a),encoding:b?b+"/base64":"base64"}:{data:a,encoding:b}}var bq={encryptData:bj,encodeData:bl,encodeDataForWire:bp,decodeData:bn};function br(a){let b,{id:c,connectionId:d,timestamp:e}=a;switch(a.action){case bc.MESSAGE:b=a.messages;break;case bc.PRESENCE:case bc.SYNC:b=a.presence;break;case bc.ANNOTATION:b=a.annotations;break;case bc.OBJECT:case bc.OBJECT_SYNC:b=a.state;break;default:throw new U("Unexpected action "+a.action,4e4,400)}for(let a=0;a<b.length;a++){let f=b[a];f.connectionId||(f.connectionId=d),f.timestamp||(f.timestamp=e),c&&!f.id&&(f.id=c+":"+a)}}function bs(a,b){let c="["+b;for(let b in a)"data"===b?"string"==typeof a.data?c+="; data="+a.data:L.BufferUtils.isBuffer(a.data)?c+="; data (buffer)="+L.BufferUtils.base64Encode(a.data):void 0!==a.data&&(c+="; data (json)="+JSON.stringify(a.data)):b&&("extras"===b||"operation"===b)?c+="; "+b+"="+JSON.stringify(a[b]):"version"===b?c+="; version="+JSON.stringify(a[b]):"annotations"===b?c+="; annotations="+JSON.stringify(a[b]):void 0!==a[b]&&(c+="; "+b+"="+a[b]);return c+"]"}var bt=class{},bu=class{constructor(a){var b,c,d,e,f,g,h,i,j,k;this.Platform=L,this.ErrorInfo=U,this.Logger=P,this.Defaults=aP,this.Utils=Q,this.EventEmitter=bb,this.MessageEncoding=bq,this._additionalHTTPRequestImplementations=null!=(b=a.plugins)?b:null,this.logger=new P,this.logger.setLog(a.logLevel,a.logHandler),P.logAction(this.logger,P.LOG_MICRO,"BaseClient()","initialized with clientOptions "+L.Config.inspect(a)),this._MsgPack=null!=(d=null==(c=a.plugins)?void 0:c.MsgPack)?d:null;const l=this.options=aP.normaliseOptions(a,this._MsgPack,this.logger);if(l.key){const a=l.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!a){const a="invalid key parameter";throw P.logAction(this.logger,P.LOG_ERROR,"BaseClient()",a),new U(a,40400,404)}l.keyName=a[1],l.keySecret=a[2]}if("clientId"in l){if("string"!=typeof l.clientId&&null!==l.clientId)throw new U("clientId must be either a string or null",40012,400);else if("*"===l.clientId)throw new U('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}P.logAction(this.logger,P.LOG_MINOR,"BaseClient()","started; version = "+aP.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new a9(this),this.auth=new a6(this,l),this._rest=(null==(e=a.plugins)?void 0:e.Rest)?new a.plugins.Rest(this):null,this._Crypto=null!=(g=null==(f=a.plugins)?void 0:f.Crypto)?g:null,this.__FilteredSubscriptions=null!=(i=null==(h=a.plugins)?void 0:h.MessageInteractions)?i:null,this._Annotations=null!=(k=null==(j=a.plugins)?void 0:j.Annotations)?k:null}get rest(){return this._rest||aM("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||aM("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var a;return(null==(a=this.options.plugins)?void 0:a.Push)&&this.push.LocalDevice||aM("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(a){return aP.getHttpScheme(this.options)+a+":"+aP.getPort(this.options,!1)}async stats(a){return this.rest.stats(a)}async time(a){return this.rest.time(a)}async request(a,b,c,d,e,f){return this.rest.request(a,b,c,d,e,f)}batchPublish(a){return this.rest.batchPublish(a)}batchPresence(a){return this.rest.batchPresence(a)}setLog(a){this.logger.setLog(a.level,a.handler)}async getTimestamp(a){return!this.isTimeOffsetSet()&&a?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return null!==this.serverTimeOffset}};bu.Platform=L;var bv=bu,bw=class a{toJSON(){var a,b,c;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null==(a=this.push)?void 0:a.recipient,state:null==(b=this.push)?void 0:b.state,error:null==(c=this.push)?void 0:c.error}}}toString(){var a,b,c,d;let e="[DeviceDetails";return this.id&&(e+="; id="+this.id),this.platform&&(e+="; platform="+this.platform),this.formFactor&&(e+="; formFactor="+this.formFactor),this.clientId&&(e+="; clientId="+this.clientId),this.metadata&&(e+="; metadata="+this.metadata),this.deviceIdentityToken&&(e+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null==(a=this.push)?void 0:a.recipient)&&(e+="; push.recipient="+JSON.stringify(this.push.recipient)),(null==(b=this.push)?void 0:b.state)&&(e+="; push.state="+this.push.state),(null==(c=this.push)?void 0:c.error)&&(e+="; push.error="+JSON.stringify(this.push.error)),(null==(d=this.push)?void 0:d.metadata)&&(e+="; push.metadata="+this.push.metadata),e+="]"}static toRequestBody(a,b,c){return aA(a,b,c)}static fromResponseBody(b,c,d){return(d&&(b=az(b,c,d)),Array.isArray(b))?a.fromValuesArray(b):a.fromValues(b)}static fromValues(b){return b.error=b.error&&U.fromValues(b.error),Object.assign(new a,b)}static fromLocalDevice(b){return Object.assign(new a,b)}static fromValuesArray(b){let c=b.length,d=Array(c);for(let e=0;e<c;e++)d[e]=a.fromValues(b[e]);return d}};async function bx(a,b,c,d){return a.http.supportsAuthHeaders?d(W(await a.auth.getAuthHeaders(),b),c):d(b,W(await a.auth.getAuthParams(),c))}var by=class a{static async get(b,c,d,e,f,g){return a.do(a_.Get,b,c,null,d,e,f,null!=g&&g)}static async delete(b,c,d,e,f,g){return a.do(a_.Delete,b,c,null,d,e,f,g)}static async post(b,c,d,e,f,g,h){return a.do(a_.Post,b,c,d,e,f,g,h)}static async patch(b,c,d,e,f,g,h){return a.do(a_.Patch,b,c,d,e,f,g,h)}static async put(b,c,d,e,f,g,h){return a.do(a_.Put,b,c,d,e,f,g,h)}static async do(a,b,c,d,e,f,g,h){var i,j;g&&((f=f||{}).envelope=g);let k=b.logger;async function l(e,f){var g;if(k.shouldLog(P.LOG_MICRO)){let h=d;if((null==(g=e["content-type"])?void 0:g.indexOf("msgpack"))>0)try{b._MsgPack||aM("MsgPack"),h=b._MsgPack.decode(d)}catch(b){P.logAction(k,P.LOG_MICRO,"Resource."+a+"()","Sending MsgPack Decoding Error: "+as(b))}P.logAction(k,P.LOG_MICRO,"Resource."+a+"()","Sending; "+a8(c,f)+"; Body: "+h)}let h=await b.http.do(a,c,e,d,f);return h.error&&a6.isTokenErr(h.error)?(await b.auth.authorize(null,null),bx(b,e,f,l)):{err:h.error,body:h.body,headers:h.headers,unpacked:h.unpacked,statusCode:h.statusCode}}let m=await bx(b,e,f,l);if(g&&(m=function(a,b,c){if(a.err&&!a.body)return{err:a.err};if(a.statusCode===a0.NoContent)return o(x({},a),q({body:[],unpacked:!0}));let d=a.body;if(!a.unpacked)try{d=az(d,b,c)}catch(a){if(ar(a))return{err:a};return{err:new V(as(a),null)}}if(!d)return{err:new V("unenvelope(): Response body is missing",null)};let{statusCode:e,response:f,headers:g}=d;if(void 0===e)return o(x({},a),q({body:d,unpacked:!0}));if(e<200||e>=300){let b=f&&f.error||a.err;return b||((b=Error("Error in unenveloping "+d)).statusCode=e),{err:b,body:f,headers:g,unpacked:!0,statusCode:e}}return{err:a.err,body:f,headers:g,unpacked:!0,statusCode:e}}(m,b._MsgPack,g)),k.shouldLog(P.LOG_MICRO)&&(i=m,j=f,i.err?P.logAction(k,P.LOG_MICRO,"Resource."+a+"()","Received Error; "+a8(c,j)+"; Error: "+as(i.err)):P.logAction(k,P.LOG_MICRO,"Resource."+a+"()","Received; "+a8(c,j)+"; Headers: "+a7(i.headers)+"; StatusCode: "+i.statusCode+"; Body: "+(L.BufferUtils.isBuffer(i.body)?" (Base64): "+L.BufferUtils.base64Encode(i.body):": "+L.Config.inspect(i.body)))),h)if(m.err)throw m.err;else{let a=x({},m);return delete a.err,a}return m}},bz=class{constructor(a,b,c,d,e,f){this.client=a,this.path=b,this.headers=c,this.envelope=null!=d?d:null,this.bodyHandler=e,this.useHttpPaginatedResponse=f||!1}get logger(){return this.client.logger}async get(a){let b=await by.get(this.client,this.path,this.headers,a,this.envelope,!1);return this.handlePage(b)}async delete(a){let b=await by.delete(this.client,this.path,this.headers,a,this.envelope,!1);return this.handlePage(b)}async post(a,b){let c=await by.post(this.client,this.path,b,this.headers,a,this.envelope,!1);return this.handlePage(c)}async put(a,b){let c=await by.put(this.client,this.path,b,this.headers,a,this.envelope,!1);return this.handlePage(c)}async patch(a,b){let c=await by.patch(this.client,this.path,b,this.headers,a,this.envelope,!1);return this.handlePage(c)}async handlePage(a){var b,c;let d,e,f;if(a.err&&(b=a.err,c=a.body,!(this.useHttpPaginatedResponse&&(c||"number"==typeof b.code))))throw P.logAction(this.logger,P.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+as(a.err)),a.err;try{d=a.statusCode==a0.NoContent?[]:await this.bodyHandler(a.body,a.headers||{},a.unpacked)}catch(b){throw a.err||b}return(a.headers&&(e=a.headers.Link||a.headers.link)&&(f=function(a){"string"==typeof a&&(a=a.split(","));let b={};for(let c=0;c<a.length;c++){let d=a[c].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(d){let a=function(a){let b=a.match(/^\.\/(\w+)\?(.*)$/);return b&&b[2]&&aq(b[2])}(d[1]);a&&(b[d[2]]=a)}}return b}(e)),this.useHttpPaginatedResponse)?new bB(this,d,a.headers||{},a.statusCode,f,a.err):new bA(this,d,f)}},bA=class{constructor(a,b,c){this.resource=a,this.items=b,this._relParams=c}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new U("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new U("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return null!=this._relParams&&"first"in this._relParams}hasCurrent(){return null!=this._relParams&&"current"in this._relParams}hasNext(){return null!=this._relParams&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(a){let b=this.resource,c=await by.get(b.client,b.path,b.headers,a,b.envelope,!1);return b.handlePage(c)}},bB=class extends bA{constructor(a,b,c,d,e,f){super(a,b,e),this.statusCode=d,this.success=d<300&&d>=200,this.headers=c,this.errorCode=f&&f.code,this.errorMessage=f&&f.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},bC=class a{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let a="[PushChannelSubscription";return this.channel&&(a+="; channel="+this.channel),this.deviceId&&(a+="; deviceId="+this.deviceId),this.clientId&&(a+="; clientId="+this.clientId),a+="]"}static fromResponseBody(b,c,d){return(d&&(b=az(b,c,d)),Array.isArray(b))?a.fromValuesArray(b):a.fromValues(b)}static fromValues(b){return Object.assign(new a,b)}static fromValuesArray(b){let c=b.length,d=Array(c);for(let e=0;e<c;e++)d[e]=a.fromValues(b[e]);return d}};bC.toRequestBody=aA;var bD=class{constructor(a){var b;this.client=a,this.admin=new bE(a),L.Config.push&&(null==(b=a.options.plugins)?void 0:b.Push)&&(this.stateMachine=new a.options.plugins.Push.ActivationStateMachine(a),this.LocalDevice=a.options.plugins.Push.localDeviceFactory(bw))}async activate(a,b){await new Promise((c,d)=>{var e;(null==(e=this.client.options.plugins)?void 0:e.Push)?this.stateMachine?this.stateMachine.activatedCallback?d(new U("Activation already in progress",4e4,400)):(this.stateMachine.activatedCallback=a=>{a?d(a):c()},this.stateMachine.updateFailedCallback=b,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,a))):d(new U("This platform is not supported as a target of push notifications",4e4,400)):d(aL("Push"))})}async deactivate(a){await new Promise((b,c)=>{var d;(null==(d=this.client.options.plugins)?void 0:d.Push)?this.stateMachine?this.stateMachine.deactivatedCallback?c(new U("Deactivation already in progress",4e4,400)):(this.stateMachine.deactivatedCallback=a=>{a?c(a):b()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,a))):c(new U("This platform is not supported as a target of push notifications",4e4,400)):c(aL("Push"))})}},bE=class{constructor(a){this.client=a,this.deviceRegistrations=new bF(a),this.channelSubscriptions=new bG(a)}async publish(a,b){let c=this.client,d=c.options.useBinaryProtocol?"msgpack":"json",e=aP.defaultPostHeaders(c.options,{format:d}),f={},g=W({recipient:a},b);W(e,c.options.headers),c.options.pushFullWait&&W(f,{fullWait:"true"});let h=aA(g,c._MsgPack,d);await by.post(c,"/push/publish",h,e,f,null,!0)}},bF=class{constructor(a){this.client=a}async save(a){let b=this.client,c=bw.fromValues(a),d=b.options.useBinaryProtocol?"msgpack":"json",e=aP.defaultPostHeaders(b.options,{format:d}),f={};W(e,b.options.headers),b.options.pushFullWait&&W(f,{fullWait:"true"});let g=aA(c,b._MsgPack,d),h=await by.put(b,"/push/deviceRegistrations/"+encodeURIComponent(a.id),g,e,f,null,!0);return bw.fromResponseBody(h.body,b._MsgPack,h.unpacked?void 0:d)}async get(a){let b=this.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=aP.defaultGetHeaders(b.options,{format:c}),e=a.id||a;if("string"!=typeof e||!e.length)throw new U("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);W(d,b.options.headers);let f=await by.get(b,"/push/deviceRegistrations/"+encodeURIComponent(e),d,{},null,!0);return bw.fromResponseBody(f.body,b._MsgPack,f.unpacked?void 0:c)}async list(a){let b=this.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,e=aP.defaultGetHeaders(b.options,{format:c});return W(e,b.options.headers),new bz(b,"/push/deviceRegistrations",e,d,async function(a,d,e){return bw.fromResponseBody(a,b._MsgPack,e?void 0:c)}).get(a)}async remove(a){let b=this.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=aP.defaultGetHeaders(b.options,{format:c}),e={},f=a.id||a;if("string"!=typeof f||!f.length)throw new U("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);W(d,b.options.headers),b.options.pushFullWait&&W(e,{fullWait:"true"}),await by.delete(b,"/push/deviceRegistrations/"+encodeURIComponent(f),d,e,null,!0)}async removeWhere(a){let b=this.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=aP.defaultGetHeaders(b.options,{format:c});W(d,b.options.headers),b.options.pushFullWait&&W(a,{fullWait:"true"}),await by.delete(b,"/push/deviceRegistrations",d,a,null,!0)}},bG=class a{constructor(b){this.remove=a.prototype.removeWhere,this.client=b}async save(a){let b=this.client,c=bC.fromValues(a),d=b.options.useBinaryProtocol?"msgpack":"json",e=aP.defaultPostHeaders(b.options,{format:d}),f={};W(e,b.options.headers),b.options.pushFullWait&&W(f,{fullWait:"true"});let g=aA(c,b._MsgPack,d),h=await by.post(b,"/push/channelSubscriptions",g,e,f,null,!0);return bC.fromResponseBody(h.body,b._MsgPack,h.unpacked?void 0:d)}async list(a){let b=this.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,e=aP.defaultGetHeaders(b.options,{format:c});return W(e,b.options.headers),new bz(b,"/push/channelSubscriptions",e,d,async function(a,d,e){return bC.fromResponseBody(a,b._MsgPack,e?void 0:c)}).get(a)}async removeWhere(a){let b=this.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=aP.defaultGetHeaders(b.options,{format:c});W(d,b.options.headers),b.options.pushFullWait&&W(a,{fullWait:"true"}),await by.delete(b,"/push/channelSubscriptions",d,a,null,!0)}async listChannels(a){let b=this.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c,e=aP.defaultGetHeaders(b.options,{format:c});return W(e,b.options.headers),b.options.pushFullWait&&W(a,{fullWait:"true"}),new bz(b,"/push/channels",e,d,async function(a,d,e){let f=!e&&c?az(a,b._MsgPack,c):a;for(let a=0;a<f.length;a++)f[a]=String(f[a]);return f}).get(a)}},bH=["absent","present","enter","leave","update"];async function bI(a,b,c,d){let e=bh(b,a,null!=d?d:null);return bN.fromValues(c).decode(e,a)}async function bJ(a,b,c,d){return Promise.all(c.map(function(c){return bI(a,b,c,d)}))}async function bK(a,b){return bN.fromValues(a).decode(b.channelOptions,b.logger)}async function bL(a,b){return Promise.all(a.map(function(a){return bK(a,b)}))}var bM=class a extends bt{isSynthesized(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw Error("parseId(): Presence message does not contain an id");let a=this.id.split(":");return{connectionId:a[0],msgSerial:parseInt(a[1],10),index:parseInt(a[2],10)}}async encode(a){return bk(Object.assign(new bN,this,{action:bH.indexOf(this.action||"present")}),a)}static fromValues(b){return Object.assign(new a,b)}static fromValuesArray(b){return b.map(b=>a.fromValues(b))}static fromData(b){return b instanceof a?b:a.fromValues({data:b})}toString(){return bs(this,"PresenceMessage")}},bN=class a extends bt{toJSON(...a){return bo.call(this,...a)}static fromValues(b){return Object.assign(new a,b)}static fromValuesArray(b){return b.map(b=>a.fromValues(b))}async decode(a,b){let c=Object.assign(new bM,o(x({},this),q({action:bH[this.action]})));try{await bm(c,a)}catch(a){P.logAction(b,P.LOG_ERROR,"WirePresenceMessage.decode()",as(a))}return c}toString(){return bs(this,"WirePresenceMessage")}},bO=bM,bP=class{constructor(a){this.channel=a}get logger(){return this.channel.logger}async get(a){P.logAction(this.logger,P.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);let b=this.channel.client,c=b.options.useBinaryProtocol?"msgpack":"json",d=this.channel.client.http.supportsLinkHeaders?void 0:c,e=aP.defaultGetHeaders(b.options,{format:c});return W(e,b.options.headers),new bz(b,this.channel.client.rest.presenceMixin.basePath(this),e,d,async(a,d,e)=>bL(e?a:az(a,b._MsgPack,c),this.channel)).get(a)}async history(a){return P.logAction(this.logger,P.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,a)}},bQ=["message.create","message.update","message.delete","meta","message.summary"];async function bR(a,b,c,d){let e=bh(b,a,null!=d?d:null);return bY.fromValues(c).decode(e,a)}async function bS(a,b,c,d){return Promise.all(c.map(function(c){return bR(a,b,c,d)}))}async function bT(a,b){return bY.fromValues(a).decode(b.channelOptions,b.logger)}async function bU(a,b){return Promise.all(a.map(function(a){return bT(a,b)}))}async function bV(a,b){return Promise.all(a.map(a=>a.encode(b)))}function bW(a){let b,c=0;for(let d=0;d<a.length;d++)c+=(b=a[d]).size||(b.size=function(a){let b=0;return a.name&&(b+=a.name.length),a.clientId&&(b+=a.clientId.length),a.extras&&(b+=JSON.stringify(a.extras).length),a.data&&(b+=au(a.data)),b}(b));return c}var bX=class a extends bt{expandFields(){if(this.version||(this.version={}),!this.version.serial&&this.serial&&(this.version.serial=this.serial),!this.version.timestamp&&this.timestamp&&(this.version.timestamp=this.timestamp),this.annotations?this.annotations.summary||(this.annotations.summary={}):this.annotations={summary:{}},this.annotations&&this.annotations.summary)for(let[a,b]of Object.entries(this.annotations.summary))if(a.endsWith(":distinct.v1")||a.endsWith(":unique.v1")||a.endsWith(":multiple.v1"))for(let[,a]of Object.entries(b))a.clipped||(a.clipped=!1);else a.endsWith(":flag.v1")&&!b.clipped&&(b.clipped=!1)}async encode(a){return bk(Object.assign(new bY,this,{action:bQ.indexOf(this.action||"message.create")}),a)}static fromValues(b){return Object.assign(new a,b)}static fromValuesArray(b){return b.map(b=>a.fromValues(b))}toString(){return bs(this,"Message")}},bY=class a extends bt{toJSON(...a){return bo.call(this,...a)}static fromValues(b){return Object.assign(new a,b)}static fromValuesArray(b){return b.map(b=>a.fromValues(b))}async decodeWithErr(a,b){let c,d=Object.assign(new bX,o(x({},this),q({action:bQ[this.action||0]||"unknown"})));try{await bm(d,a)}catch(a){P.logAction(b,P.LOG_ERROR,"WireMessage.decode()",as(a)),c=a}return d.expandFields(),{decoded:d,err:c}}async decode(a,b){let{decoded:c}=await this.decodeWithErr(a,b);return c}toString(){return bs(this,"WireMessage")}},bZ=bX,b$=class{constructor(a,b,c){var d,e;this._annotations=null,P.logAction(a.logger,P.LOG_MINOR,"RestChannel()","started; name = "+b),this.name=b,this.client=a,this.presence=new bP(this),this.channelOptions=aX(null!=(d=a._Crypto)?d:null,this.logger,c),(null==(e=a.options.plugins)?void 0:e.Push)&&(this._push=new a.options.plugins.Push.PushChannel(this)),a._Annotations&&(this._annotations=new a._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||aM("Annotations"),this._annotations}get push(){return this._push||aM("Push"),this._push}get logger(){return this.client.logger}setOptions(a){var b;this.channelOptions=aX(null!=(b=this.client._Crypto)?b:null,this.logger,a)}async history(a){return P.logAction(this.logger,P.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,a)}async publish(...a){let b,c,d=a[0],e=a[1];if("string"==typeof d||null===d)b=[bZ.fromValues({name:d,data:e})],c=a[2];else if(Z(d))b=[bZ.fromValues(d)],c=a[1];else if(Array.isArray(d))b=bZ.fromValuesArray(d),c=a[1];else throw new U("The single-argument form of publish() expects a message object or an array of message objects",40013,400);c||(c={});let f=this.client,g=f.options,h=g.useBinaryProtocol?"msgpack":"json",i=f.options.idempotentRestPublishing,j=aP.defaultPostHeaders(f.options,{format:h});if(W(j,g.headers),i&&b.every(function(a){return!a.id})){let a=await aw(9);b.forEach(function(b,c){b.id=a+":"+c.toString()})}let k=await bV(b,this.channelOptions),l=bW(k),m=g.maxMessageSize;if(l>m)throw new U(`Maximum size of messages that can be published at once exceeded (was ${l} bytes; limit is ${m} bytes)`,40009,400);await this._publish(aA(k,f._MsgPack,h),j,c)}async _publish(a,b,c){await by.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",a,b,c,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},b_=class a{constructor(a){this.entries=a&&a.entries||void 0,this.schema=a&&a.schema||void 0,this.appId=a&&a.appId||void 0,this.inProgress=a&&a.inProgress||void 0,this.unit=a&&a.unit||void 0,this.intervalId=a&&a.intervalId||void 0}static fromValues(b){return new a(b)}},b0=class{static basePath(a){return"/channels/"+encodeURIComponent(a.name)}static history(a,b){let c=a.client,d=c.options.useBinaryProtocol?"msgpack":"json",e=a.client.http.supportsLinkHeaders?void 0:d,f=aP.defaultGetHeaders(c.options,{format:d});return W(f,c.options.headers),new bz(c,this.basePath(a)+"/messages",f,e,async function(b,e,f){return bU(f?b:az(b,c._MsgPack,d),a)}).get(b)}static async status(a){let b=a.client.options.useBinaryProtocol?"msgpack":"json",c=aP.defaultPostHeaders(a.client.options,{format:b});return(await by.get(a.client,this.basePath(a),c,{},b,!0)).body}},b1=class{static basePath(a){return b0.basePath(a.channel)+"/presence"}static async history(a,b){let c=a.channel.client,d=c.options.useBinaryProtocol?"msgpack":"json",e=a.channel.client.http.supportsLinkHeaders?void 0:d,f=aP.defaultGetHeaders(c.options,{format:d});return W(f,c.options.headers),new bz(c,this.basePath(a)+"/history",f,e,async(b,e,f)=>bL(f?b:az(b,c._MsgPack,d),a.channel)).get(b)}},b2=class{constructor(a){this.channelMixin=b0,this.presenceMixin=b1,this.Resource=by,this.PaginatedResource=bz,this.DeviceDetails=bw,this.PushChannelSubscription=bC,this.client=a,this.channels=new b3(this.client),this.push=new bD(this.client)}async stats(a){let b=aP.defaultGetHeaders(this.client.options),c=this.client.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:c;return W(b,this.client.options.headers),new bz(this.client,"/stats",b,d,function(a,b,c){let d=c?a:JSON.parse(a);for(let a=0;a<d.length;a++)d[a]=b_.fromValues(d[a]);return d}).get(a)}async time(a){let b=aP.defaultGetHeaders(this.client.options);this.client.options.headers&&W(b,this.client.options.headers);let c=a=>this.client.baseUri(a)+"/time",{error:d,body:e,unpacked:f}=await this.client.http.do(a_.Get,c,b,null,a);if(d)throw d;f||(e=JSON.parse(e));let g=e[0];if(!g)throw new U("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=g-Date.now(),g}async request(a,b,c,d,e,f){var g;let[h,i,j]=this.client.options.useBinaryProtocol?(this.client._MsgPack||aM("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],k=this.client.http.supportsLinkHeaders?void 0:j;d=d||{};let l=a.toLowerCase(),m="get"==l?aP.defaultGetHeaders(this.client.options,{format:j,protocolVersion:c}):aP.defaultPostHeaders(this.client.options,{format:j,protocolVersion:c});"string"!=typeof e&&(e=null!=(g=h(e))?g:null),W(m,this.client.options.headers),f&&W(m,f);let n=new bz(this.client,b,m,k,async function(a,b,c){return Y(c?a:i(a))},!0);if(!L.Http.methods.includes(l))throw new U("Unsupported method "+l,40500,405);return L.Http.methodsWithBody.includes(l)?n[l](d,e):n[l](d)}async batchPublish(a){let b,c;Array.isArray(a)?(b=a,c=!1):(b=[a],c=!0);let d=this.client.options.useBinaryProtocol?"msgpack":"json",e=aP.defaultPostHeaders(this.client.options,{format:d});this.client.options.headers&&W(e,this.client.options.headers);let f=aA(b,this.client._MsgPack,d),g=await by.post(this.client,"/messages",f,e,{},null,!0),h=g.unpacked?g.body:az(g.body,this.client._MsgPack,d);return c?h[0]:h}async batchPresence(a){let b=this.client.options.useBinaryProtocol?"msgpack":"json",c=aP.defaultPostHeaders(this.client.options,{format:b});this.client.options.headers&&W(c,this.client.options.headers);let d=a.join(","),e=await by.get(this.client,"/presence",c,{channels:d},null,!0);return e.unpacked?e.body:az(e.body,this.client._MsgPack,b)}async revokeTokens(a,b){if(a4(this.client.options))throw new U("Cannot revoke tokens when using token auth",40162,401);let c=this.client.options.keyName,d=x({targets:a.map(a=>`${a.type}:${a.value}`)},null!=b?b:{}),e=this.client.options.useBinaryProtocol?"msgpack":"json",f=aP.defaultPostHeaders(this.client.options,{format:e});this.client.options.headers&&W(f,this.client.options.headers);let g=aA(d,this.client._MsgPack,e),h=await by.post(this.client,`/keys/${c}/revokeTokens`,g,f,{},null,!0);return h.unpacked?h.body:az(h.body,this.client._MsgPack,e)}},b3=class{constructor(a){this.client=a,this.all=Object.create(null)}get(a,b){a=String(a);let c=this.all[a];return c?b&&c.setOptions(b):this.all[a]=c=new b$(this.client,a,b),c}release(a){delete this.all[String(a)]}},b4=class extends bv{constructor(a){super(aP.objectifyOptions(a,!1,"BaseRest",P.defaultLogger,{Rest:b2}))}},b5={Rest:b2},b6=class extends bZ{static async fromEncoded(a,b){return bR(P.defaultLogger,L.Crypto,a,b)}static async fromEncodedArray(a,b){return bS(P.defaultLogger,L.Crypto,a,b)}static fromValues(a){return bZ.fromValues(a)}},b7=class extends bO{static async fromEncoded(a,b){return bI(P.defaultLogger,L.Crypto,a,b)}static async fromEncodedArray(a,b){return bJ(P.defaultLogger,L.Crypto,a,b)}static fromValues(a){return bO.fromValues(a)}},b8=["annotation.create","annotation.delete"];async function b9(a,b,c){return ce.fromValues(b).decode(c||{},a)}async function ca(a,b,c){return Promise.all(b.map(function(b){return b9(a,b,c)}))}async function cb(a,b){return ce.fromValues(a).decode(b.channelOptions,b.logger)}async function cc(a,b){return Promise.all(a.map(function(a){return cb(a,b)}))}var cd=class a extends bt{async encode(){return bk(Object.assign(new ce,this,{action:b8.indexOf(this.action||"annotation.create")}),{})}static fromValues(b){return Object.assign(new a,b)}static fromValuesArray(b){return b.map(b=>a.fromValues(b))}toString(){return bs(this,"Annotation")}},ce=class a extends bt{toJSON(...a){return bo.call(this,...a)}static fromValues(b){return Object.assign(new a,b)}static fromValuesArray(b){return b.map(b=>a.fromValues(b))}async decode(a,b){let c=Object.assign(new cd,o(x({},this),q({action:b8[this.action]})));try{await bm(c,a)}catch(a){P.logAction(b,P.LOG_ERROR,"WireAnnotation.decode()",as(a))}return c}toString(){return bs(this,"WireAnnotation")}},cf=cd,cg=class extends cf{static async fromEncoded(a,b){return b9(P.defaultLogger,a,b)}static async fromEncodedArray(a,b){return ca(P.defaultLogger,a,b)}static fromValues(a){return cf.fromValues(a)}};function ch(a){let b;switch(typeof a){case"string":b=a;break;case"object":b=a.serial}if(!b||"string"!=typeof b)throw new U("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return b}function ci(a,b){let c=ch(a);if(!b||"object"!=typeof b)throw new U("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);let d=cf.fromValues(b);return d.messageSerial=c,d.action||(d.action="annotation.create"),d}function cj(a,b){return a.client.rest.channelMixin.basePath(a)+"/messages/"+encodeURIComponent(b)+"/annotations"}var ck=class{constructor(a){this.channel=a}async publish(a,b){let c=ci(a,b),d=await c.encode(),e=this.channel.client,f=e.options.useBinaryProtocol?"msgpack":"json",g=aP.defaultPostHeaders(e.options,{format:f});W(g,e.options.headers);let h=aA([d],e._MsgPack,f);await by.post(e,cj(this.channel,c.messageSerial),h,g,{},null,!0)}async delete(a,b){return b.action="annotation.delete",this.publish(a,b)}async get(a,b){let c=this.channel.client,d=ch(a),e=c.options.useBinaryProtocol?"msgpack":"json",f=c.http.supportsLinkHeaders?void 0:e,g=aP.defaultGetHeaders(c.options,{format:e});return W(g,c.options.headers),new bz(c,cj(this.channel,d),g,f,async(a,b,d)=>cc(d?a:az(a,c._MsgPack,e),this.channel)).get(b)}};function cl(a){let b=[];if(a)for(let c=0;c<a.length;c++)b.push(a[c].toString());return"[ "+b.join(", ")+" ]"}function cm(a,b,c,d){let e,f,g,h,i;return a.error&&(e=U.fromValues(a.error)),a.messages&&(f=bY.fromValuesArray(a.messages)),b&&a.presence&&(g=b.WirePresenceMessage.fromValuesArray(a.presence)),c&&a.annotations&&(h=c.WireAnnotation.fromValuesArray(a.annotations)),d&&a.state&&(i=d.WireObjectMessage.fromValuesArray(a.state,Q,bq)),Object.assign(new cp,o(x({},a),q({presence:g,messages:f,annotations:h,state:i,error:e})))}function cn(a){return Object.assign(new cp,a)}function co(a,b,c,d){let e,f="[ProtocolMessage";void 0!==a.action&&(f+="; action="+bd[a.action]);let g=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];for(let b=0;b<g.length;b++)void 0!==a[e=g[b]]&&(f+="; "+e+"="+a[e]);if(a.messages&&(f+="; messages="+cl(bY.fromValuesArray(a.messages))),a.presence&&b&&(f+="; presence="+cl(b.WirePresenceMessage.fromValuesArray(a.presence))),a.annotations&&c&&(f+="; annotations="+cl(c.WireAnnotation.fromValuesArray(a.annotations))),a.state&&d&&(f+="; state="+cl(d.WireObjectMessage.fromValuesArray(a.state,Q,bq))),a.error&&(f+="; error="+U.fromValues(a.error).toString()),a.auth&&a.auth.accessToken&&(f+="; token="+a.auth.accessToken),a.flags&&(f+="; flags="+bf.filter(a.hasFlag).join(",")),a.params){let b="";al(a.params,function(c){b.length>0&&(b+="; "),b+=c+"="+a.params[c]}),b.length>0&&(f+="; params=["+b+"]")}return f+"]"}var cp=class{constructor(){this.hasFlag=a=>(this.flags&be[a])>0}setFlag(a){return this.flags=this.flags|be[a]}getMode(){return(this.flags||0)&be.MODE_ALL}encodeModesToFlags(a){a.forEach(a=>this.setFlag(a))}decodeModesFromFlags(){let a=[];return bg.forEach(b=>{this.hasFlag(b)&&a.push(b)}),a.length>0?a:void 0}},cq=class{constructor(a,b,c,d,e){this.previous=a,this.current=b,"attached"===b&&(this.resumed=c,this.hasBacklog=d),e&&(this.reason=e)}},cr=function(){},cs=class a extends bb{constructor(a,b,c){var d,e,f;super(a.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(a){P.logAction(this.logger,P.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);let b=this.client.rest.channelMixin;if(a&&a.untilAttach){if("attached"!==this.state)throw new U("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new U("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete a.untilAttach,a.from_serial=this.properties.attachSerial}return b.history(this,a)},this.whenState=a=>bb.prototype.whenState.call(this,a,this.state),P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel()","started; name = "+b),this.name=b,this.channelOptions=aX(null!=(d=a._Crypto)?d:null,this.logger,c),this.client=a,this._presence=a._RealtimePresence?new a._RealtimePresence.RealtimePresence(this):null,a._Annotations&&(this._annotations=new a._Annotations.RealtimeAnnotations(this)),this.connectionManager=a.connection.connectionManager,this.state="initialized",this.subscriptions=new bb(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(c),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:a.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new bb(this.logger),(null==(e=a.options.plugins)?void 0:e.Push)&&(this._push=new a.options.plugins.Push.PushChannel(this)),(null==(f=a.options.plugins)?void 0:f.Objects)&&(this._objects=new a.options.plugins.Objects.Objects(this))}get presence(){return this._presence||aM("RealtimePresence"),this._presence}get annotations(){return this._annotations||aM("Annotations"),this._annotations}get push(){return this._push||aM("Push"),this._push}get objects(){return this._objects||aM("Objects"),this._objects}invalidStateError(){return new U("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(a){return"function"==typeof(a=Array.prototype.slice.call(a))[0]&&a.unshift(null),a}async setOptions(a){var b;let c=this.channelOptions,d=function(a){if(a&&"params"in a&&!Z(a.params))return new U("options.params must be an object",4e4,400);if(a&&"modes"in a){if(!Array.isArray(a.modes))return new U("options.modes must be an array",4e4,400);for(let b=0;b<a.modes.length;b++){let c=a.modes[b];if(!c||"string"!=typeof c||!bg.includes(String.prototype.toUpperCase.call(c)))return new U("Invalid channel mode: "+c,4e4,400)}}}(a);if(d)throw d;if(this.channelOptions=aX(null!=(b=this.client._Crypto)?b:null,this.logger,a),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(a,c))return this.attachImpl(),new Promise((a,b)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(c){switch(this.event){case"update":case"attached":a();break;default:b(c.reason)}})})}_shouldReattachToSetOptions(a,b){if("attached"!==this.state&&"attaching"!==this.state)return!1;if(null==a?void 0:a.params){let c=ct(a.params),d=ct(b.params);if(Object.keys(c).length!==Object.keys(d).length||!aH(d,c))return!0}return!(null==a||!a.modes||b.modes&&aK(a.modes,b.modes))}async publish(...a){let b;if(1==a.length)if(Z(a[0]))b=[bZ.fromValues(a[0])];else if(Array.isArray(a[0]))b=bZ.fromValuesArray(a[0]);else throw new U("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else b=[bZ.fromValues({name:a[0],data:a[1]})];let c=this.client.options.maxMessageSize,d=await bV(b,this.channelOptions),e=bW(d);if(e>c)throw new U(`Maximum size of messages that can be published at once exceeded (was ${e} bytes; limit is ${c} bytes)`,40009,400);this.throwIfUnpublishableState(),P.logAction(this.logger,P.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+d.length);let f=cn({action:bc.MESSAGE,channel:this.name,messages:d});return this.sendMessage(f)}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if("failed"===this.state||"suspended"===this.state)throw this.invalidStateError()}onEvent(a){P.logAction(this.logger,P.LOG_MICRO,"RealtimeChannel.onEvent()","received message");let b=this.subscriptions;for(let c=0;c<a.length;c++){let d=a[c];b.emit(d.name,d)}}async attach(){return"attached"===this.state?null:new Promise((a,b)=>{this._attach(!1,null,(c,d)=>c?b(c):a(d))})}_attach(a,b,c){c||(c=a=>{a&&P.logAction(this.logger,P.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+a.toString())});let d=this.connectionManager;d.activeState()?(("attaching"!==this.state||a)&&this.requestState("attaching",b),this.once(function(a){switch(this.event){case"attached":null==c||c(null,a);break;case"detached":case"suspended":case"failed":null==c||c(a.reason||d.getError()||new U("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==c||c(new U("Attach request superseded by a subsequent detach request",9e4,409))}})):c(d.getError())}attachImpl(){P.logAction(this.logger,P.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");let a=cn({action:bc.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&a.encodeModesToFlags(aC(this.channelOptions.modes)),this._attachResume&&a.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(a.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(a).catch(cr)}async detach(){let a=this.connectionManager;if(!a.activeState())throw a.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new U("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((b,c)=>{this.once(function(d){switch(this.event){case"detached":b();break;case"attached":case"suspended":case"failed":c(d.reason||a.getError()||new U("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":c(new U("Detach request superseded by a subsequent attach request",9e4,409))}})})}}detachImpl(){P.logAction(this.logger,P.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");let a=cn({action:bc.DETACH,channel:this.name});this.sendMessage(a).catch(cr)}async subscribe(...b){let[c,d]=a.processListenerArgs(b);if("failed"===this.state)throw U.fromValues(this.invalidStateError());return(c&&"object"==typeof c&&!Array.isArray(c)?this.client._FilteredSubscriptions.subscribeFilter(this,c,d):this.subscriptions.on(c,d),!1!==this.channelOptions.attachOnSubscribe)?this.attach():null}unsubscribe(...b){var c;let[d,e]=a.processListenerArgs(b);"object"==typeof d&&!e||(null==(c=this.filteredSubscriptions)?void 0:c.has(e))?this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,d,e).forEach(a=>this.subscriptions.off(a)):this.subscriptions.off(d,e)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new V("Unable to sync to channel; not attached",4e4)}let a=this.connectionManager;if(!a.activeState())throw a.getError();let b=cn({action:bc.SYNC,channel:this.name});this.syncChannelSerial&&(b.channelSerial=this.syncChannelSerial),a.send(b)}async sendMessage(a){return new Promise((b,c)=>{this.connectionManager.send(a,this.client.options.queueMessages,a=>{a?c(a):b()})})}async sendPresence(a){let b=cn({action:bc.PRESENCE,channel:this.name,presence:a});return this.sendMessage(b)}sendState(a){let b=cn({action:bc.OBJECT,channel:this.name,state:a});return this.sendMessage(b)}async processMessage(a){(a.action===bc.ATTACHED||a.action===bc.MESSAGE||a.action===bc.PRESENCE||a.action===bc.OBJECT||a.action===bc.ANNOTATION)&&this.setChannelSerial(a.channelSerial);let b,c=!1;switch(a.action){case bc.ATTACHED:{this.properties.attachSerial=a.channelSerial,this._mode=a.getMode(),this.params=a.params||{};let b=a.decodeModesFromFlags();this.modes=b&&aB(b)||void 0;let c=a.hasFlag("RESUMED"),d=a.hasFlag("HAS_PRESENCE"),e=a.hasFlag("HAS_BACKLOG"),f=a.hasFlag("HAS_OBJECTS");if("attached"===this.state){!c&&(this._presence&&this._presence.onAttached(d),this._objects&&this._objects.onAttached(f));let b=new cq(this.state,this.state,c,e,a.error);this._allChannelChanges.emit("update",b),(!c||this.channelOptions.updateOnAttached)&&this.emit("update",b)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",a.error,c,d,e,f);break}case bc.DETACHED:{let b=a.error?U.fromValues(a.error):new U("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",b):"attaching"===this.state?this.notifyState("suspended",b):("attached"===this.state||"suspended"===this.state)&&this.requestState("attaching",b);break}case bc.SYNC:if(c=!0,b=this.syncChannelSerial=a.channelSerial,!a.presence)break;case bc.PRESENCE:{if(!a.presence)break;br(a);let d=this.channelOptions;if(this._presence){let e=await Promise.all(a.presence.map(a=>a.decode(d,this.logger)));this._presence.setPresence(e,c,b)}break}case bc.OBJECT:case bc.OBJECT_SYNC:{if(!this._objects||!a.state)return;br(a);let b=this.client.connection.connectionManager.getActiveTransportFormat(),c=a.state.map(a=>a.decode(this.client,b));a.action===bc.OBJECT?this._objects.handleObjectMessages(c):this._objects.handleObjectSyncMessages(c,a.channelSerial);break}case bc.MESSAGE:{if("attached"!==this.state)return void P.logAction(this.logger,P.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+a.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');br(a);let b=a.messages,c=b[0],d=b[b.length-1];if(c.extras&&c.extras.delta&&c.extras.delta.from!==this._lastPayload.messageId){let b='Delta message decode failure - previous message not available for message "'+a.id+'" on this channel "'+this.name+'".';P.logAction(this.logger,P.LOG_ERROR,"RealtimeChannel.processMessage()",b),this._startDecodeFailureRecovery(new U(b,40018,400));break}let e=[];for(let a=0;a<b.length;a++){let{decoded:c,err:d}=await b[a].decodeWithErr(this._decodingContext,this.logger);if(e[a]=c,d)switch(d.code){case 40018:this._startDecodeFailureRecovery(d);return;case 40019:case 40021:this.notifyState("failed",d);return}}this._lastPayload.messageId=d.id,this._lastPayload.protocolMessageChannelSerial=a.channelSerial,this.onEvent(e);break}case bc.ANNOTATION:{br(a);let b=this.channelOptions;if(this._annotations){let c=await Promise.all((a.annotations||[]).map(a=>a.decode(b,this.logger)));this._annotations._processIncoming(c)}break}case bc.ERROR:{let b=a.error;b&&80016==b.code?this.checkPendingState():this.notifyState("failed",U.fromValues(b));break}default:P.logAction(this.logger,P.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+a.action+")")}}_startDecodeFailureRecovery(a){this._lastPayload.decodeFailureRecoveryInProgress||(P.logAction(this.logger,P.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,a,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(a,b,c,d,e,f){if(P.logAction(this.logger,P.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+a),this.clearStateTimer(),["detached","suspended","failed"].includes(a)&&(this.properties.channelSerial=null),a===this.state)return;this._presence&&this._presence.actOnChannelState(a,d,b),this._objects&&this._objects.actOnChannelState(a,f),"suspended"===a&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),b&&(this.errorReason=b);let g=new cq(this.state,a,c,e,b),h='Channel state for channel "'+this.name+'"',i=a+(b?"; reason: "+b:"");"failed"===a?P.logAction(this.logger,P.LOG_ERROR,h,i):P.logAction(this.logger,P.LOG_MAJOR,h,i),"attaching"!==a&&"suspended"!==a&&(this.retryCount=0),"attached"===a&&this.onAttached(),"attached"===a?this._attachResume=!0:("detaching"===a||"failed"===a)&&(this._attachResume=!1),this.state=a,this._allChannelChanges.emit(a,g),this.emit(a,g)}requestState(a,b){P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+a),this.notifyState(a,b),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents)return void P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);switch(P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}}timeoutPendingState(){switch(this.state){case"attaching":{let a=new U("Channel attach timed out",90007,408);this.notifyState("suspended",a);break}case"detaching":{let a=new U("Channel detach timed out",90007,408);this.notifyState("attached",a);break}default:this.checkPendingState()}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){let a=this.stateTimer;a&&(clearTimeout(a),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;let a=aF(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{"suspended"===this.state&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},a)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){let a=this.state;return"initialized"===a||"detached"===a||"failed"===a?null:new U("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+a,90001,400)}setChannelSerial(a){P.logAction(this.logger,P.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+a+"; previous = "+this.properties.channelSerial),a&&(this.properties.channelSerial=a)}async status(){return this.client.rest.channelMixin.status(this)}};function ct(a){let b=a||{},{agent:c}=b;var d=b,e=["agent"],f={};for(var g in d)u.call(d,g)&&0>e.indexOf(g)&&(f[g]=d[g]);if(null!=d&&s)for(var g of s(d))0>e.indexOf(g)&&v.call(d,g)&&(f[g]=d[g]);return f}var cu=class{constructor(a){this.channel=a,this.logger=a.logger,this.subscriptions=new bb(this.logger)}async publish(a,b){let c=this.channel.name,d=ci(a,b),e=await d.encode();this.channel.throwIfUnpublishableState(),P.logAction(this.logger,P.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+c+", sending annotation with messageSerial = "+d.messageSerial+", type = "+d.type);let f=cn({action:bc.ANNOTATION,channel:c,annotations:[e]});return this.channel.sendMessage(f)}async delete(a,b){return b.action="annotation.delete",this.publish(a,b)}async subscribe(...a){let b=cs.processListenerArgs(a),c=b[0],d=b[1],e=this.channel;if("failed"===e.state)throw U.fromValues(e.invalidStateError());if(this.subscriptions.on(c,d),!1!==this.channel.channelOptions.attachOnSubscribe&&await e.attach(),0===("attached"===this.channel.state&&this.channel._mode&be.ANNOTATION_SUBSCRIBE))throw new U("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(...a){let b=cs.processListenerArgs(a),c=b[0],d=b[1];this.subscriptions.off(c,d)}_processIncoming(a){for(let b of a)this.subscriptions.emit(b.type||"",b)}async get(a,b){return ck.prototype.get.call(this,a,b)}},cv=class a extends b4{constructor(b){var c,d;if(!a._MsgPack)throw Error("Expected DefaultRest._MsgPack to have been set");super(aP.objectifyOptions(b,!0,"Rest",P.defaultLogger,o(x({},b5),q({Crypto:null!=(c=a.Crypto)?c:void 0,MsgPack:null!=(d=a._MsgPack)?d:void 0,Annotations:{Annotation:cf,WireAnnotation:ce,RealtimeAnnotations:cu,RestAnnotations:ck}}))))}static get Crypto(){if(null===this._Crypto)throw Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(a){this._Crypto=a}};cv._Crypto=null,cv.Message=b6,cv.PresenceMessage=b7,cv.Annotation=cg,cv._MsgPack=null,cv._Http=a9;var cw=class extends bb{constructor(a){super(a),this.messages=[]}count(){return this.messages.length}push(a){this.messages.push(a)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(a){this.messages.push.apply(this.messages,a)}prepend(a){this.messages.unshift.apply(this.messages,a)}completeMessages(a,b,c){P.logAction(this.logger,P.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+a+"; count = "+b),c=c||null;let d=this.messages;if(0===d.length)throw Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");let e=d[0];if(e){let f=e.message.msgSerial,g=a+b;if(g>f)for(let a of d.splice(0,g-f))a.callback(c);0==d.length&&this.emit("idle")}}completeAllMessages(a){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,a)}resetSendAttempted(){for(let a of this.messages)a.sendAttempted=!1}clear(){P.logAction(this.logger,P.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},cx=class{constructor(a,b){this.message=a,this.callback=b,this.merged=!1;const c=a.action;this.sendAttempted=!1,this.ackRequired="number"==typeof c&&[bc.MESSAGE,bc.PRESENCE,bc.ANNOTATION,bc.OBJECT].includes(c)}},cy=class extends bb{constructor(a){super(a.logger),this.transport=a,this.messageQueue=new cw(this.logger),a.on("ack",(a,b)=>{this.onAck(a,b)}),a.on("nack",(a,b,c)=>{this.onNack(a,b,c)})}onAck(a,b){P.logAction(this.logger,P.LOG_MICRO,"Protocol.onAck()","serial = "+a+"; count = "+b),this.messageQueue.completeMessages(a,b)}onNack(a,b,c){P.logAction(this.logger,P.LOG_ERROR,"Protocol.onNack()","serial = "+a+"; count = "+b+"; err = "+as(c)),c||(c=new U("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(a,b,c)}onceIdle(a){let b=this.messageQueue;0===b.count()?a():b.once("idle",a)}send(a){a.ackRequired&&this.messageQueue.push(a),this.logger.shouldLog(P.LOG_MICRO)&&P.logActionNoStrip(this.logger,P.LOG_MICRO,"Protocol.send()","sending msg; "+co(a.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._objectsPlugin)),a.sendAttempted=!0,this.transport.send(a.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){let a=this.transport;this.onceIdle(function(){a.disconnect()})}},cz=class{constructor(a,b,c,d){this.previous=a,this.current=b,c&&(this.retryIn=c),d&&(this.reason=d)}},cA={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},cB={disconnected:()=>U.fromValues({statusCode:400,code:cA.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>U.fromValues({statusCode:400,code:cA.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>U.fromValues({statusCode:400,code:cA.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>U.fromValues({statusCode:400,code:cA.CLOSING,message:"Connection closing"}),closed:()=>U.fromValues({statusCode:400,code:cA.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>U.fromValues({statusCode:500,code:cA.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>U.fromValues({statusCode:500,code:cA.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})},cC=cn({action:bc.CLOSE}),cD=cn({action:bc.DISCONNECT}),cE=class extends bb{constructor(a,b,c,d){super(a.logger),d&&(c.format=void 0,c.heartbeats=!0),this.connectionManager=a,this.auth=b,this.params=c,this.timeouts=c.options.timeouts,this.format=c.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",cB.closed())}disconnect(a){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",a||cB.disconnected())}fail(a){this.isConnected&&this.requestDisconnect(),this.finish("failed",a||cB.failed())}finish(a,b){var c;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!=(c=this.idleTimer)?c:void 0),this.idleTimer=null,this.emit(a,b),this.dispose())}onProtocolMessage(a){switch(this.logger.shouldLog(P.LOG_MICRO)&&P.logActionNoStrip(this.logger,P.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+co(a,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),a.action){case bc.HEARTBEAT:P.logActionNoStrip(this.logger,P.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",a.id);break;case bc.CONNECTED:this.onConnect(a),this.emit("connected",a.error,a.connectionId,a.connectionDetails,a);break;case bc.CLOSED:this.onClose(a);break;case bc.DISCONNECTED:this.onDisconnect(a);break;case bc.ACK:this.emit("ack",a.msgSerial,a.count);break;case bc.NACK:this.emit("nack",a.msgSerial,a.count,a.error);break;case bc.SYNC:this.connectionManager.onChannelMessage(a,this);break;case bc.ACTIVATE:break;case bc.AUTH:ay(this.auth.authorize(),a=>{a&&P.logAction(this.logger,P.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+as(a))});break;case bc.ERROR:if(P.logAction(this.logger,P.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+L.Config.inspect(a.error)+(a.channel?", channel: "+a.channel:"")),void 0===a.channel){this.onFatalError(a);break}this.connectionManager.onChannelMessage(a,this);break;default:this.connectionManager.onChannelMessage(a,this)}}onConnect(a){if(this.isConnected=!0,!a.connectionDetails)throw Error("Transport.onConnect(): Connect message recieved without connectionDetails");let b=a.connectionDetails.maxIdleInterval;b&&(this.maxIdleInterval=b+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(a){let b=a&&a.error;P.logAction(this.logger,P.LOG_MINOR,"Transport.onDisconnect()","err = "+as(b)),this.finish("disconnected",b)}onFatalError(a){let b=a&&a.error;P.logAction(this.logger,P.LOG_MINOR,"Transport.onFatalError()","err = "+as(b)),this.finish("failed",b)}onClose(a){let b=a&&a.error;P.logAction(this.logger,P.LOG_MINOR,"Transport.onClose()","err = "+as(b)),this.finish("closed",b)}requestClose(){P.logAction(this.logger,P.LOG_MINOR,"Transport.requestClose()",""),this.send(cC)}requestDisconnect(){P.logAction(this.logger,P.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(cD)}ping(a){let b={action:bc.HEARTBEAT};a&&(b.id=a),this.send(cn(b))}dispose(){P.logAction(this.logger,P.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(a){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},a))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;let a=Date.now()-this.lastActivity,b=this.maxIdleInterval-a;if(b<=0){let b="No activity seen from realtime in "+a+"ms; assuming connection has dropped";P.logAction(this.logger,P.LOG_ERROR,"Transport.onIdleTimerExpire()",b),this.disconnect(new U(b,80003,408))}else this.setIdleTimer(b+100)}static tryConnect(a,b,c,d,e){let f,g=new a(b,c,d),h=function(a){clearTimeout(f),e({event:this.event,error:a})};return f=setTimeout(()=>{g.off(["preconnect","disconnected","failed"]),g.dispose(),h.call({event:"disconnected"},new U("Timeout waiting for transport to indicate itself viable",5e4,500))},b.options.timeouts.realtimeRequestTimeout),g.on(["failed","disconnected"],h),g.on("preconnect",function(){P.logAction(b.logger,P.LOG_MINOR,"Transport.tryConnect()","viable transport "+g),clearTimeout(f),g.off(["failed","disconnected"],h),e(null,g)}),g.connect(),g}static isAvailable(){throw new U("isAvailable not implemented for transport",5e4,500)}};(g=i||(i={})).WebSocket="web_socket",g.Comet="comet",g.XhrPolling="xhr_polling";var cF=a.g,cG=()=>{var a;return void 0!==L.WebStorage&&(null==(a=L.WebStorage)?void 0:a.localSupported)},cH=()=>{var a;return void 0!==L.WebStorage&&(null==(a=L.WebStorage)?void 0:a.sessionSupported)},cI=function(){},cJ="ably-transport-preference";function cK(a){try{return JSON.parse(a)}catch(a){return null}}var cL=class{constructor(a,b,c,d){this.options=a,this.host=b,this.mode=c,this.connectionKey=d,this.format=a.useBinaryProtocol?"msgpack":"json"}getConnectParams(a){let b=a?X(a):{},c=this.options;switch(this.mode){case"resume":b.resume=this.connectionKey;break;case"recover":{let a=cK(c.recover);a&&(b.recover=a.connectionKey)}}return void 0!==c.clientId&&(b.clientId=c.clientId),!1===c.echoMessages&&(b.echo="false"),void 0!==this.format&&(b.format=this.format),void 0!==this.stream&&(b.stream=this.stream),void 0!==this.heartbeats&&(b.heartbeats=this.heartbeats),b.v=aP.protocolVersion,b.agent=aW(this.options),void 0!==c.transportParams&&W(b,c.transportParams),b}toString(){let a="[mode="+this.mode;return this.host&&(a+=",host="+this.host),this.connectionKey&&(a+=",connectionKey="+this.connectionKey),this.format&&(a+=",format="+this.format),a+="]"}},cM=class a extends bb{constructor(a,b){super(a.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=a,this.initTransports(),this.options=b;const c=b.timeouts,d=c.webSocketConnectTimeout+c.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:d,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:c.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:c.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new cw(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=c.connectionStateTtl,this.maxIdleInterval=null,this.transports=ae(b.transports||aP.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(i.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(i.XhrPolling)?this.baseTransport=i.XhrPolling:this.transports.includes(i.Comet)&&(this.baseTransport=i.Comet),this.domains=aP.getHosts(b),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,P.logAction(this.logger,P.LOG_MINOR,"Realtime.ConnectionManager()","started"),P.logAction(this.logger,P.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(b.transports||aP.defaultTransports)+"]"),P.logAction(this.logger,P.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),P.logAction(this.logger,P.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const a="no requested transports available";throw P.logAction(this.logger,P.LOG_ERROR,"realtime.ConnectionManager()",a),Error(a)}const e=L.Config.addEventListener;e&&(cH()&&"function"==typeof b.recover&&e("beforeunload",this.persistConnection.bind(this)),!0===b.closeOnUnload&&e("beforeunload",()=>{P.logAction(this.logger,P.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),e("online",()=>{var a;this.state==this.states.disconnected||this.state==this.states.suspended?(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager caught browser online event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&(null==(a=this.pendingTransport)||a.off(),this.disconnectAllTransports(),this.startConnect())}),e("offline",()=>{this.state==this.states.connected&&(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager caught browser offline event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(a){let b={supportedTransports:{}};return this.initTransports(a,b),b.supportedTransports}static initTransports(a,b){let c=x(x({},L.Transports.bundledImplementations),a);[i.WebSocket,...L.Transports.order].forEach(a=>{let d=c[a];d&&d.isAvailable()&&(b.supportedTransports[a]=d)})}initTransports(){a.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(a,b){return new cL(this.options,a,b,this.connectionKey)}getTransportParams(a){(a=>{if(this.connectionKey)return a("resume");if("string"==typeof this.options.recover)return a("recover");let b=this.options.recover,c=this.getSessionRecoverData(),d=this.sessionRecoveryName();if(c&&"function"==typeof b){P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+d+")"),b(c,b=>{b?(this.options.recover=c.recoveryKey,a("recover")):a("clean")});return}a("clean")})(b=>{let c=this.createTransportParams(null,b);if("recover"===b){P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);let a=cK(this.options.recover);a&&(this.msgSerial=a.msgSerial)}else P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+c.toString());a(c)})}tryATransport(a,b,c){P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+b),this.proposedTransport=cE.tryConnect(this.supportedTransports[b],this,this.realtime.auth,a,(d,e)=>{let f=this.state;if(f==this.states.closing||f==this.states.closed||f==this.states.failed){e&&(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+f.state+" while we were attempting the transport; closing "+e),e.close()),c(!0);return}if(d){if(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+b+" "+d.event+", err: "+d.error.toString()),a6.isTokenErr(d.error)&&!(this.errorReason&&a6.isTokenErr(this.errorReason)))this.errorReason=d.error,ay(this.realtime.auth._forceNewToken(null,null),d=>{d?this.actOnErrorFromAuthorize(d):this.tryATransport(a,b,c)});else if("failed"===d.event)this.notifyState({state:"failed",error:d.error}),c(!0);else if("disconnected"===d.event){var g;!(g=d.error).statusCode||!g.code||g.statusCode>=500||Object.values(cA).includes(g.code)?c(!1):(this.notifyState({state:this.states.connecting.failState,error:d.error}),c(!0))}return}P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+b+"; setting pending"),this.setTransportPending(e,a),c(null,e)})}setTransportPending(a,b){let c=b.mode;P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+a+"; mode = "+c),this.pendingTransport=a,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),a.once("connected",(b,d,e)=>{this.activateTransport(b,a,d,e),"recover"===c&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});let d=this;a.on(["disconnected","closed","failed"],function(b){d.deactivateTransport(a,this.event,b)}),this.emit("transport.pending",a)}activateTransport(a,b,c,d){P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+b),a&&P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+a),c&&P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+c),d&&P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(d)),this.persistTransportPreference(b);let e=this.state,f=this.states.connected.state;if(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+e.state),e.state==this.states.closing.state||e.state==this.states.closed.state||e.state==this.states.failed.state)return P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),b.disconnect(),!1;if(delete this.pendingTransport,!b.isConnected)return P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+b+" since it appears to no longer be connected"),!1;let g=this.activeProtocol;this.activeProtocol=new cy(b),this.host=b.params.host;let h=d.connectionKey;if(h&&this.connectionKey!=h&&this.setConnection(c,d,!!a),this.onConnectionDetailsUpdate(d,b),L.Config.nextTick(()=>{b.on("connected",(a,c,d)=>{this.onConnectionDetailsUpdate(d,b),this.emit("update",new cz(f,f,null,a))})}),e.state===this.states.connected.state?a&&(this.errorReason=this.realtime.connection.errorReason=a,this.emit("update",new cz(f,f,null,a))):(this.notifyState({state:"connected",error:a}),this.errorReason=this.realtime.connection.errorReason=a||null),this.emit("transport.active",b),g)if(g.messageQueue.count()>0&&P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+g.transport.shortName+", new one is "+b.shortName+") finishing with "+g.messageQueue.count()+" messages still pending"),g.transport===b){let a="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+b.shortName+"; stack = "+Error().stack;P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.activateTransport()",a)}else g.finish();return!0}deactivateTransport(a,b,c){let d=this.activeProtocol,e=d&&d.getTransport()===a,f=a===this.pendingTransport,g=this.noTransportsScheduledForActivation();if(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+a),P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+b+(e?"; was active":f?"; was pending":"")+(g?"":"; another transport is scheduled for activation")),c&&c.message&&P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+c.message),e&&(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(d.getPendingMessages()),d.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",a),e&&g||e&&"failed"===b||"closed"===b||null===d&&f){if("disconnected"===b&&c&&c.statusCode>500&&this.domains.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:b,error:c,retryImmediately:!0});return}let a="failed"===b&&a6.isTokenErr(c)?"disconnected":b;this.notifyState({state:a,error:c});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(a,b,c){let d=this.connectionId;(d&&d!==a||!d&&c)&&(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==a&&P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=a,this.realtime.connection.key=this.connectionKey=b.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;let a=Date.now()-this.lastActivity;a>this.connectionStateTtl+this.maxIdleInterval&&(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+a+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(cH()){let a=this.createRecoveryKey();a&&this.setSessionRecoverData({recoveryKey:a,disconnectedAt:Date.now(),location:cF.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var a;return null==(a=this.activeProtocol)?void 0:a.getTransport().format}getError(){if(this.errorReason){let a=V.fromValues(this.errorReason);return a.cause=this.errorReason,a}return this.getStateError()}getStateError(){var a;return null==(a=cB[this.state.state])?void 0:a.call(cB)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(a){let b="Connection state",c=a.current+(a.reason?"; reason: "+a.reason:"");"failed"===a.current?P.logAction(this.logger,P.LOG_ERROR,b,c):P.logAction(this.logger,P.LOG_MAJOR,b,c),P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+a.current+"; reason = "+(a.reason&&a.reason.message));let d=this.state=this.states[a.current];a.reason&&(this.errorReason=a.reason,this.realtime.connection.errorReason=a.reason),(d.terminal||"suspended"===d.state)&&this.clearConnection(),this.emit("connectionstate",a)}startTransitionTimer(a){P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+a.state),this.transitionTimer&&(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager "+a.state+" timer expired","requesting new state: "+a.failState),this.notifyState({state:a.failState}))},a.retryDelay)}cancelTransitionTimer(){P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(a){"disconnected"!==a&&"suspended"!==a&&"connecting"!==a&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(a){this.retryTimer=setTimeout(()=>{P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},a)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{P.logAction(this.logger,P.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&ay(this.realtime.http.checkConnectivity(),(a,b)=>{a||!b?(P.logAction(this.logger,P.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new U("Unable to connect (network unreachable)",80003,404)})):P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(a){this.webSocketGiveUpTimer=setTimeout(()=>{var b,c;this.wsCheckResult||(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,null==(b=this.proposedTransport)||b.dispose(),null==(c=this.pendingTransport)||c.dispose(),this.connectBase(a,++this.connectCounter)):P.logAction(this.logger,P.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(a){var b;let c=a.state,d="disconnected"===c&&(this.state===this.states.connected||a.retryImmediately||this.state===this.states.connecting&&a.error&&a6.isTokenErr(a.error)&&!(this.errorReason&&a6.isTokenErr(this.errorReason)));if(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+c+(d?"; will retry connection immediately":"")),c==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(a.state),("suspended"===c||"connected"===c)&&(this.disconnectedRetryCount=0),this.state.terminal))return;let e=this.states[a.state],f=e.retryDelay;"disconnected"===e.state&&(this.disconnectedRetryCount++,f=aF(e.retryDelay,this.disconnectedRetryCount));let g=new cz(this.state.state,e.state,f,a.error||(null==(b=cB[e.state])?void 0:b.call(cB)));if(d){let a=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},b=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;b&&b<1e3?(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+b+"ms ago, waiting another "+(1e3-b)+"ms before trying again"),setTimeout(a,1e3-b)):L.Config.nextTick(a)}else("disconnected"===c||"suspended"===c)&&this.startRetryTimer(f);("disconnected"===c&&!d||"suspended"===c||e.terminal)&&L.Config.nextTick(()=>{this.disconnectAllTransports()}),"connected"!=c||this.activeProtocol||P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(g),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(c,g.reason),this.failQueuedMessages(g.reason))}requestState(a){var b;let c=a.state;if(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+c+"; current state: "+this.state.state),c==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(c),"connecting"==c&&"connected"==this.state.state||"closing"==c&&"closed"==this.state.state))return;let d=this.states[c],e=new cz(this.state.state,d.state,null,a.error||(null==(b=cB[d.state])?void 0:b.call(cB)));this.enactStateChange(e),"connecting"==c&&L.Config.nextTick(()=>{this.startConnect()}),"closing"==c&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting)return void P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);let a=this.realtime.auth,b=++this.connectCounter,c=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(a=>{if("recover"===a.mode&&a.options.recover){let b=cK(a.options.recover);b&&this.realtime.channels.recoverChannels(b.channelSerials)}b===this.connectCounter&&this.connectImpl(a,b)})};if(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===a.method)c();else{let d=a=>{b===this.connectCounter&&(a?this.actOnErrorFromAuthorize(a):c())};this.errorReason&&a6.isTokenErr(this.errorReason)?ay(a._forceNewToken(null,null),d):ay(a._ensureValidAuthCredentials(!1),d)}}connectImpl(a,b){let c=this.state.state;if(c!==this.states.connecting.state)return void P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+c);let d=this.getTransportPreference();d&&d===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(a,++this.connectCounter))}).catch(cI),d&&d===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(a,b):this.connectWs(a,b)}connectWs(a,b){P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(a),this.tryTransportWithFallbacks("web_socket",a,!0,b,()=>!1!==this.wsCheckResult&&!this.abandonedWebSocket)}connectBase(a,b){P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,a,!1,b,()=>!0):this.notifyState({state:"disconnected",error:new U("No transports left to try",8e4,404)})}tryTransportWithFallbacks(a,b,c,d,e){P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",a);let f=a=>{this.notifyState({state:this.states.connecting.failState,error:a})},g=this.domains.slice(),h=(a,b)=>{if(d===this.connectCounter){if(!e()){b&&b.dispose();return}b||a||j()}},i=g.shift();if(!i)return void f(new U("Unable to connect (no available host)",80003,404));b.host=i;let j=()=>{g.length?this.realtime.http.checkConnectivity?ay(this.realtime.http.checkConnectivity(),(c,i)=>{if(d===this.connectCounter&&e()){if(c)return void f(c);if(!i)return void f(new U("Unable to connect (network unreachable)",80003,404));b.host=ao(g),this.tryATransport(b,a,h)}}):f(new V("Internal error: Http.checkConnectivity not set",null,500)):f(new U("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&g.length){this.forceFallbackHost=!1,j();return}this.tryATransport(b,a,h)}closeImpl(){P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(a,b){var c;switch(this.state.state){case"connected":{P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");let d=null==(c=this.activeProtocol)?void 0:c.getTransport();d&&d.onAuthUpdated&&d.onAuthUpdated(a);let e=cn({action:bc.AUTH,auth:{accessToken:a.token}});this.send(e);let f=()=>{this.off(g),b(null,a)},g=a=>{"failed"===a.current&&(this.off(f),this.off(g),b(a.reason||this.getStateError()))};this.once("connectiondetails",f),this.on("connectionstate",g);break}case"connecting":P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");let c=d=>{switch(d.current){case"connected":this.off(c),b(null,a);break;case"failed":case"closed":case"suspended":this.off(c),b(d.reason||this.getStateError())}};this.on("connectionstate",c),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(a,b,c){c=c||cI;let d=this.state;if(d.sendEvents){P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new cx(a,c));return}if(!(b&&d.queueEvents)){let a="rejecting event, queueEvent was "+b+", state was "+d.state;P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.send()",a),c(this.errorReason||new U(a,9e4,400));return}this.logger.shouldLog(P.LOG_MICRO)&&P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+co(a,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._objectsPlugin)),this.queue(a,c)}sendImpl(a){let b=a.message;a.ackRequired&&!a.sendAttempted&&(b.msgSerial=this.msgSerial++);try{this.activeProtocol.send(a)}catch(a){P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+a.stack)}}queue(a,b){P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.queue()","queueing event");let c=this.queuedMessages.last(),d=this.options.maxMessageSize;c&&!c.sendAttempted&&function(a,b,c){let d;if(a.channel!==b.channel||(d=a.action)!==bc.PRESENCE&&d!==bc.MESSAGE||d!==b.action)return!1;let e=d===bc.PRESENCE?"presence":"messages",f=a[e].concat(b[e]);return!(bW(f)>c)&&!!am(f,"clientId")&&!!f.every(function(a){return!a.id})&&(a[e]=f,!0)}(c.message,a,d)?(c.merged||(c.callback=a$.create(this.logger,[c.callback]),c.merged=!0),c.callback.push(b)):this.queuedMessages.push(new cx(a,b))}sendQueuedMessages(){let a;for(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");a=this.queuedMessages.shift();)this.sendImpl(a)}queuePendingMessages(a){a&&a.length&&(P.logAction(this.logger,P.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+a.length+" pending messages"),this.queuedMessages.prepend(a))}failQueuedMessages(a){let b=this.queuedMessages.count();b>0&&(P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+b+" queued messages, err = "+as(a)),this.queuedMessages.completeAllMessages(a))}onChannelMessage(a,b){this.pendingChannelMessagesState.queue.push({message:a,transport:b}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;let a=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(a.message).catch(a=>{P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",a)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(a){await this.realtime.channels.processChannelMessage(a)}async ping(){var a;if("connected"!==this.state.state)throw new U("Unable to ping service; not connected",4e4,400);let b=null==(a=this.activeProtocol)?void 0:a.getTransport();if(!b)throw this.getStateError();P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.ping()","transport = "+b);let c=Date.now(),d=av();return aN(new Promise(a=>{let e=f=>{f===d&&(b.off("heartbeat",e),a(Date.now()-c))};b.on("heartbeat",e),b.ping(d)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(a){this.activeProtocol.getTransport().fail(a)}getTransportPreference(){var a,b;return this.transportPreference||cG()&&(null==(b=null==(a=L.WebStorage)?void 0:a.get)?void 0:b.call(a,cJ))}persistTransportPreference(a){var b,c;this.transportPreference=a.shortName,cG()&&(null==(c=null==(b=L.WebStorage)?void 0:b.set)||c.call(b,cJ,a.shortName))}unpersistTransportPreference(){var a,b;this.transportPreference=null,cG()&&(null==(b=null==(a=L.WebStorage)?void 0:a.remove)||b.call(a,cJ))}actOnErrorFromAuthorize(a){if(40171===a.code)this.notifyState({state:"failed",error:a});else if(40102===a.code)this.notifyState({state:"failed",error:a});else if(a.statusCode===a0.Forbidden){let b="Client configured authentication provider returned 403; failing the connection";P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",b),this.notifyState({state:"failed",error:new U(b,80019,403,a)})}else{let b="Client configured authentication provider request failed";P.logAction(this.logger,P.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",b),this.notifyState({state:this.state.failState,error:new U(b,80019,401,a)})}}onConnectionDetailsUpdate(a,b){if(!a)return;this.connectionDetails=a,a.maxMessageSize&&(this.options.maxMessageSize=a.maxMessageSize);let c=a.clientId;if(c){let a=this.realtime.auth._uncheckedSetClientId(c);if(a){P.logAction(this.logger,P.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",a.message),b.fail(a);return}}let d=a.connectionStateTtl;d&&(this.connectionStateTtl=d),this.maxIdleInterval=a.maxIdleInterval,this.emit("connectiondetails",a)}checkWsConnectivity(){let a=this.options.wsConnectivityCheckUrl||aP.wsConnectivityCheckUrl,b=new L.Config.WebSocket(a);return new Promise((a,c)=>{let d=!1;b.onopen=()=>{d||(d=!0,a(),b.close())},b.onclose=b.onerror=()=>{d||(d=!0,c())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var a,b;return cH()&&(null==(b=null==(a=L.WebStorage)?void 0:a.getSession)?void 0:b.call(a,this.sessionRecoveryName()))}setSessionRecoverData(a){var b,c;return cH()&&(null==(c=null==(b=L.WebStorage)?void 0:b.setSession)?void 0:c.call(b,this.sessionRecoveryName(),a))}clearSessionRecoverData(){var a,b;return cH()&&(null==(b=null==(a=L.WebStorage)?void 0:a.removeSession)?void 0:b.call(a,this.sessionRecoveryName()))}},cN=class extends bb{constructor(a,b){super(a.logger),this.whenState=a=>bb.prototype.whenState.call(this,a,this.state),this.ably=a,this.connectionManager=new cM(a,b),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",a=>{let b=this.state=a.current;L.Config.nextTick(()=>{this.emit(b,a)})}),this.connectionManager.on("update",a=>{L.Config.nextTick(()=>{this.emit("update",a)})})}connect(){P.logAction(this.logger,P.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return P.logAction(this.logger,P.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){P.logAction(this.logger,P.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},cO=class a extends bv{constructor(b){var c,d,e,f;if(super(aP.objectifyOptions(b,!1,"BaseRealtime",P.defaultLogger)),P.logAction(this.logger,P.LOG_MINOR,"Realtime()",""),"string"==typeof EdgeRuntime)throw new U('Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === \'string\')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.',4e4,400);this._additionalTransportImplementations=a.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=null!=(d=null==(c=this.options.plugins)?void 0:c.RealtimePresence)?d:null,this._objectsPlugin=null!=(f=null==(e=this.options.plugins)?void 0:e.Objects)?f:null,this.connection=new cN(this,this.options),this._channels=new cP(this),!1!==this.options.autoConnect&&this.connect()}static transportImplementationsFromPlugins(a){let b={};return(null==a?void 0:a.WebSocketTransport)&&(b[i.WebSocket]=a.WebSocketTransport),(null==a?void 0:a.XHRPolling)&&(b[i.XhrPolling]=a.XHRPolling),b}get channels(){return this._channels}connect(){P.logAction(this.logger,P.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){P.logAction(this.logger,P.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};cO.EventEmitter=bb;var cP=class extends bb{constructor(a){super(a.logger),this.realtime=a,this.all=Object.create(null),a.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let a={};for(let b of aj(this.all,!0)){let c=this.all[b];c.properties.channelSerial&&(a[b]=c.properties.channelSerial)}return a}recoverChannels(a){for(let b of aj(a,!0))this.get(b).properties.channelSerial=a[b]}async processChannelMessage(a){let b=a.channel;if(void 0===b)return void P.logAction(this.logger,P.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+a.action);let c=this.all[b];c?await c.processMessage(a):P.logAction(this.logger,P.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+b)}onTransportActive(){for(let a in this.all){let b=this.all[a];"attaching"===b.state||"detaching"===b.state?b.checkPendingState():"suspended"===b.state?b._attach(!1,null):"attached"===b.state&&b.requestState("attaching")}}propogateConnectionInterruption(a,b){let c=["attaching","attached","detaching","suspended"],d={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[a];for(let a in this.all){let e=this.all[a];c.includes(e.state)&&e.notifyState(d,b)}}get(a,b){a=String(a);let c=this.all[a];if(c){if(b){if(c._shouldReattachToSetOptions(b,c.channelOptions))throw new U("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);c.setOptions(b)}}else c=this.all[a]=new cs(this.realtime,a,b);return c}getDerived(a,b,c){if(b.filter){let c=aJ(b.filter),d=aI(a);a=`[filter=${c}${d.qualifierParam}]${d.channelName}`}return this.get(a,c)}release(a){a=String(a);let b=this.all[a];if(!b)return;let c=b.getReleaseErr();if(c)throw c;delete this.all[a]}},cQ=cO;function cR(a,b){if(a.isSynthesized()||b.isSynthesized())return a.timestamp>=b.timestamp;let c=a.parseId(),d=b.parseId();return c.msgSerial===d.msgSerial?c.index>d.index:c.msgSerial>d.msgSerial}var cS=class extends bb{constructor(a,b,c=cR){super(a.logger),this.presence=a,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=b,this.newerThan=c}get(a){return this.map[a]}getClient(a){let b=this.map,c=[];for(let d in b){let e=b[d];e.clientId==a&&"absent"!=e.action&&c.push(e)}return c}list(a){let b=this.map,c=a&&a.clientId,d=a&&a.connectionId,e=[];for(let a in b){let f=b[a];"absent"!==f.action&&(!c||c==f.clientId)&&(d&&d!=f.connectionId||e.push(f))}return e}put(a){("enter"===a.action||"update"===a.action)&&((a=bO.fromValues(a)).action="present");let b=this.map,c=this.memberKey(a);this.residualMembers&&delete this.residualMembers[c];let d=b[c];return(!d||!!this.newerThan(a,d))&&(b[c]=a,!0)}values(){let a=this.map,b=[];for(let c in a){let d=a[c];"absent"!=d.action&&b.push(d)}return b}remove(a){let b=this.map,c=this.memberKey(a),d=b[c];return(!d||!!this.newerThan(a,d))&&(this.syncInProgress?((a=bO.fromValues(a)).action="absent",b[c]=a):delete b[c],!!d)}startSync(){let a=this.map,b=this.syncInProgress;P.logAction(this.logger,P.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+b),this.syncInProgress||(this.residualMembers=X(a),this.setInProgress(!0))}endSync(){let a=this.map,b=this.syncInProgress;if(P.logAction(this.logger,P.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+b),b){for(let b in a)"absent"===a[b].action&&delete a[b];for(let b in this.presence._synthesizeLeaves(ak(this.residualMembers)),this.residualMembers)delete a[b];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(a){let b=this.syncInProgress;(P.logAction(this.logger,P.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+b),b)?this.once("sync",a):a()}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(a){P.logAction(this.logger,P.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+a),this.syncInProgress=a,this.presence.syncComplete=!a}};function cT(a){let b=a.channel.client,c=b.auth.clientId;return(!c||"*"===c)&&"connected"===b.connection.state}var cU=class extends bb{constructor(a){super(a.logger),this.channel=a,this.syncComplete=!1,this.members=new cS(this,a=>a.clientId+":"+a.connectionId),this._myMembers=new cS(this,a=>a.clientId),this.subscriptions=new bb(this.logger),this.pendingPresence=[]}async enter(a){if(cT(this))throw new U("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,a,"enter")}async update(a){if(cT(this))throw new U("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,a,"update")}async enterClient(a,b){return this._enterOrUpdateClient(void 0,a,b,"enter")}async updateClient(a,b){return this._enterOrUpdateClient(void 0,a,b,"update")}async _enterOrUpdateClient(a,b,c,d){let e=this.channel;if(!e.connectionManager.activeState())throw e.connectionManager.getError();P.logAction(this.logger,P.LOG_MICRO,"RealtimePresence."+d+"Client()","channel = "+e.name+", id = "+a+", client = "+(b||"(implicit) "+this.channel.client.auth.clientId));let f=bO.fromData(c);f.action=d,a&&(f.id=a),b&&(f.clientId=b);let g=await f.encode(e.channelOptions);switch(e.state){case"attached":return e.sendPresence([g]);case"initialized":case"detached":e.attach();case"attaching":return new Promise((a,b)=>{this.pendingPresence.push({presence:g,callback:c=>c?b(c):a()})});default:{let a=new V("Unable to "+d+" presence channel while in "+e.state+" state",90001);throw a.code=90001,a}}}async leave(a){if(cT(this))throw new U("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,a)}async leaveClient(a,b){let c=this.channel;if(!c.connectionManager.activeState())throw c.connectionManager.getError();P.logAction(this.logger,P.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+a);let d=bO.fromData(b);d.action="leave",a&&(d.clientId=a);let e=await d.encode(c.channelOptions);switch(c.state){case"attached":return c.sendPresence([e]);case"attaching":return new Promise((a,b)=>{this.pendingPresence.push({presence:e,callback:c=>c?b(c):a()})});case"initialized":case"failed":throw new V("Unable to leave presence channel (incompatible state)",90001);default:throw c.invalidStateError()}}async get(a){let b=!a||!("waitForSync"in a)||a.waitForSync;return new Promise((c,d)=>{function e(b){c(a?b.list(a):b.values())}"suspended"===this.channel.state?b?d(U.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):e(this.members):function(a,b,c){switch(a.state){case"attached":case"suspended":c();break;case"initialized":case"detached":case"detaching":case"attaching":ay(a.attach(),function(a){a?b(a):c()});break;default:b(U.fromValues(a.invalidStateError()))}}(this.channel,a=>d(a),()=>{let a=this.members;b?a.waitSync(function(){e(a)}):e(a)})})}async history(a){P.logAction(this.logger,P.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);let b=this.channel.client.rest.presenceMixin;if(a&&a.untilAttach)if("attached"===this.channel.state)delete a.untilAttach,a.from_serial=this.channel.properties.attachSerial;else throw new U("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return b.history(this,a)}setPresence(a,b,c){let d,e;P.logAction(this.logger,P.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+a.length+" participants; syncChannelSerial = "+c);let f=this.members,g=this._myMembers,h=[],i=this.channel.connectionManager.connectionId;for(let j of(b&&(this.members.startSync(),c&&(e=c.match(/^[\w-]+:(.*)$/))&&(d=e[1])),a))switch(j.action){case"leave":f.remove(j)&&h.push(j),j.connectionId!==i||j.isSynthesized()||g.remove(j);break;case"enter":case"present":case"update":f.put(j)&&h.push(j),j.connectionId===i&&g.put(j)}b&&!d&&(f.endSync(),this.channel.syncChannelSerial=null);for(let a=0;a<h.length;a++){let b=h[a];this.subscriptions.emit(b.action,b)}}onAttached(a){P.logAction(this.logger,P.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+a),a?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();let b=this.pendingPresence,c=b.length;if(c){this.pendingPresence=[];let a=[],d=a$.create(this.logger);P.logAction(this.logger,P.LOG_MICRO,"RealtimePresence.onAttached","sending "+c+" queued presence messages");for(let e=0;e<c;e++){let c=b[e];a.push(c.presence),d.push(c.callback)}this.channel.sendPresence(a).then(()=>d()).catch(a=>d(a))}}actOnChannelState(a,b,c){switch(a){case"attached":this.onAttached(b);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(c)}}failPendingPresence(a){if(this.pendingPresence.length){P.logAction(this.logger,P.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+as(a));for(let b=0;b<this.pendingPresence.length;b++)try{this.pendingPresence[b].callback(a)}catch(a){}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){let a=this._myMembers,b=this.channel.connectionManager.connectionId;for(let c in a.map){let d=a.map[c];P.logAction(this.logger,P.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+d.clientId+'" into the presence set');let e=d.connectionId===b?d.id:void 0;this._enterOrUpdateClient(e,d.clientId,d.data,"enter").catch(a=>{let b=new U("Presence auto re-enter failed",91004,400,a);P.logAction(this.logger,P.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+as(a));let c=new cq(this.channel.state,this.channel.state,!0,!1,b);this.channel.emit("update",c)})}}_synthesizeLeaves(a){let b=this.subscriptions;a.forEach(function(a){let c=bO.fromValues({action:"leave",connectionId:a.connectionId,clientId:a.clientId,data:a.data,encoding:a.encoding,timestamp:Date.now()});b.emit("leave",c)})}async subscribe(...a){let b=cs.processListenerArgs(a),c=b[0],d=b[1],e=this.channel;if("failed"===e.state)throw U.fromValues(e.invalidStateError());this.subscriptions.on(c,d),!1!==e.channelOptions.attachOnSubscribe&&await e.attach()}unsubscribe(...a){let b=cs.processListenerArgs(a),c=b[0],d=b[1];this.subscriptions.off(c,d)}},cV=i.WebSocket,cW=class extends cE{constructor(a,b,c){super(a,b,c),this.shortName=cV,c.heartbeats=L.Config.useProtocolHeartbeats,this.wsHost=c.host}static isAvailable(){return!!L.Config.WebSocket}createWebSocket(a,b){return this.uri=a+ap(b),new L.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){P.logAction(this.logger,P.LOG_MINOR,"WebSocketTransport.connect()","starting"),cE.prototype.connect.call(this);let a=this,b=this.params,c=b.options,d=(c.tls?"wss://":"ws://")+this.wsHost+":"+aP.getPort(c)+"/";P.logAction(this.logger,P.LOG_MINOR,"WebSocketTransport.connect()","uri: "+d),ay(this.auth.getAuthParams(),function(c,e){if(a.isDisposed)return;let f="";for(let a in e)f+=" "+a+": "+e[a]+";";if(P.logAction(a.logger,P.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+f+" err: "+c),c)return void a.disconnect(c);let g=b.getConnectParams(e);try{let b=a.wsConnection=a.createWebSocket(d,g);b.binaryType=L.Config.binaryType,b.onopen=function(){a.onWsOpen()},b.onclose=function(b){a.onWsClose(b)},b.onmessage=function(b){a.onWsData(b.data)},b.onerror=function(b){a.onWsError(b)},b.on&&b.on("ping",function(){a.onActivity()})}catch(b){P.logAction(a.logger,P.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(b.stack||b.message)),a.disconnect(b)}})}send(a){let b=this.wsConnection;if(!b)return void P.logAction(this.logger,P.LOG_ERROR,"WebSocketTransport.send()","No socket connection");try{b.send(aA(a,this.connectionManager.realtime._MsgPack,this.params.format))}catch(b){let a="Exception from ws connection when trying to send: "+as(b);P.logAction(this.logger,P.LOG_ERROR,"WebSocketTransport.send()",a),this.finish("disconnected",new U(a,5e4,500))}}onWsData(a){P.logAction(this.logger,P.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+a.length+"; type = "+typeof a);try{var b,c,d,e,f;this.onProtocolMessage((b=this.connectionManager.realtime._MsgPack,c=this.connectionManager.realtime._RealtimePresence,d=this.connectionManager.realtime._Annotations,e=this.connectionManager.realtime._objectsPlugin,f=this.format,cm(az(a,b,f),c,d,e)))}catch(a){P.logAction(this.logger,P.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+a.stack)}}onWsOpen(){P.logAction(this.logger,P.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(a){let b,c;if("object"==typeof a?(c=a.code,b=a.wasClean||1e3===c):b=1e3==(c=a),delete this.wsConnection,b){P.logAction(this.logger,P.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");let a=new U("Websocket closed",80003,400);this.finish("disconnected",a)}else{let a="Unclean disconnection of WebSocket ; code = "+c,b=new U(a,80003,400);P.logAction(this.logger,P.LOG_MINOR,"WebSocketTransport.onWsClose()",a),this.finish("disconnected",b)}this.emit("disposed")}onWsError(a){P.logAction(this.logger,P.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+a.message),L.Config.nextTick(()=>{this.disconnect(Error(a.message))})}dispose(){P.logAction(this.logger,P.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;let a=this.wsConnection;a&&(a.onmessage=function(){},delete this.wsConnection,L.Config.nextTick(()=>{if(P.logAction(this.logger,P.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!a)throw Error("WebSocketTransport.dispose(): wsConnection is not defined");a.close()}))}},cX=class{static subscribeFilter(a,b,c){let d=a=>{var d,e,f,g,h,i;let j={name:a.name,refTimeserial:null==(e=null==(d=a.extras)?void 0:d.ref)?void 0:e.timeserial,refType:null==(g=null==(f=a.extras)?void 0:f.ref)?void 0:g.type,isRef:!!(null==(i=null==(h=a.extras)?void 0:h.ref)?void 0:i.timeserial),clientId:a.clientId};Object.entries(b).find(([a,b])=>void 0!==b&&j[a]!==b)||c(a)};this.addFilteredSubscription(a,b,c,d),a.subscriptions.on(d)}static addFilteredSubscription(a,b,c,d){var e;if(a.filteredSubscriptions||(a.filteredSubscriptions=new Map),a.filteredSubscriptions.has(c)){let f=a.filteredSubscriptions.get(c);f.set(b,(null==(e=null==f?void 0:f.get(b))?void 0:e.concat(d))||[d])}else a.filteredSubscriptions.set(c,new Map([[b,[d]]]))}static getAndDeleteFilteredSubscriptions(a,b,c){if(!a.filteredSubscriptions)return[];if(!c&&b)return Array.from(a.filteredSubscriptions.entries()).map(([c,d])=>{var e;let f=d.get(b);return d.delete(b),0===d.size&&(null==(e=a.filteredSubscriptions)||e.delete(c)),f}).reduce((a,b)=>b?a.concat(...b):a,[]);if(!c||!a.filteredSubscriptions.has(c))return[];let d=a.filteredSubscriptions.get(c);if(!b){let b=Array.from(d.values()).reduce((a,b)=>a.concat(...b),[]);return a.filteredSubscriptions.delete(c),b}let e=d.get(b);return d.delete(b),e||[]}},cY=class a extends cQ{constructor(b){var c;const d=a._MsgPack;if(!d)throw Error("Expected DefaultRealtime._MsgPack to have been set");super(aP.objectifyOptions(b,!0,"Realtime",P.defaultLogger,o(x({},b5),q({Crypto:null!=(c=a.Crypto)?c:void 0,MsgPack:d,RealtimePresence:{RealtimePresence:cU,PresenceMessage:bO,WirePresenceMessage:bN},Annotations:{Annotation:cf,WireAnnotation:ce,RealtimeAnnotations:cu,RestAnnotations:ck},WebSocketTransport:cW,MessageInteractions:cX}))))}static get Crypto(){if(null===this._Crypto)throw Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(a){this._Crypto=a}};cY.Utils=Q,cY.ConnectionManager=cM,cY.ProtocolMessage=cp,cY._Crypto=null,cY.Message=b6,cY.PresenceMessage=b7,cY.Annotation=cg,cY._MsgPack=null,cY._Http=a9,cY._PresenceMap=cS,cY._MessageEncoding=bq;var cZ=z(a.r(54799)),c$=new class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}base64Decode(a){return Buffer.from(a,"base64")}base64Encode(a){return this.toBuffer(a).toString("base64")}base64UrlEncode(a){return this.toBuffer(a).toString("base64url")}areBuffersEqual(a,b){return!!a&&!!b&&0==this.toBuffer(a).compare(this.toBuffer(b))}byteLength(a){return a.byteLength}hexDecode(a){return Buffer.from(a,"hex")}hexEncode(a){return this.toBuffer(a).toString("hex")}isBuffer(a){return Buffer.isBuffer(a)||a instanceof ArrayBuffer||ArrayBuffer.isView(a)}toArrayBuffer(a){let b=this.toBuffer(a);return b.buffer.slice(b.byteOffset,b.byteOffset+b.byteLength)}toBuffer(a){return Buffer.isBuffer(a)?a:a instanceof ArrayBuffer?Buffer.from(a):Buffer.from(a.buffer,a.byteOffset,a.byteLength)}arrayBufferViewToBuffer(a){return this.toBuffer(a)}utf8Decode(a){if(!this.isBuffer(a))throw Error("Expected input of utf8Decode to be a buffer, arraybuffer, or view");return this.toBuffer(a).toString("utf8")}utf8Encode(a){return Buffer.from(a,"utf8")}concat(a){return Buffer.concat(a.map(a=>this.toBuffer(a)))}sha256(a){let b=this.toBuffer(a);return cZ.default.createHash("SHA256").update(b).digest()}hmacSha256(a,b){let c=this.toBuffer(a),d=this.toBuffer(b);return cZ.default.createHmac("SHA256",d).update(c).digest()}},c_=z(a.r(54799)),c0=z(a.r(24361)),c1=z(a.r(64312)),c2=z(a.r(21517)),c3=z(a.r(24836)),c4=[],c5=((j=class{constructor(a){this.agent=null,this.supportsAuthHeaders=!0,this.supportsLinkHeaders=!0,this.checkConnectivity=async()=>{var a,b,c,d,e;if(null==(a=this.client)?void 0:a.options.disableConnectivityCheck)return!0;let f=(null==(b=this.client)?void 0:b.options.connectivityCheckUrl)||aP.connectivityCheckUrl,g=null!=(d=null==(c=this.client)?void 0:c.options.connectivityCheckParams)?d:null,h=!(null==(e=this.client)?void 0:e.options.connectivityCheckUrl),{error:i,statusCode:j,body:k}=await this.doUri(a_.Get,f,null,null,g);return i||h?!i&&(null==k?void 0:k.toString().trim())==="yes":j>=200&&j<400},this.client=null!=a?a:null}async doUri(a,b,c,d,e){var f;let g=this.client&&this.client.options.restAgentOptions||aP.restAgentOptions,h={headers:c||void 0,responseType:"buffer"};if(!this.agent){let a=null==(f=c4.find(a=>aH(g,a.options)))?void 0:f.agents;a?this.agent=a:(this.agent={http:new c2.default.Agent(g),https:new c3.default.Agent(g)},c4.push({options:g,agents:this.agent}))}d&&(h.body=d),e&&(h.searchParams=e),h.agent=this.agent,h.url=b,h.timeout={request:(this.client&&this.client.options.timeouts||aP.TIMEOUTS).httpRequestTimeout},h.retry={limit:0};try{let b=await c1.default[a](h);return this._handler(null,b,b.body)}catch(a){if(a instanceof c1.default.HTTPError)return this._handler(null,a.response,a.response.body);return this._handler(a)}}shouldFallback(a){let{code:b,statusCode:c}=a;return"ENETUNREACH"===b||"EHOSTUNREACH"===b||"EHOSTDOWN"===b||"ETIMEDOUT"===b||"ESOCKETTIMEDOUT"===b||"ENOTFOUND"===b||"ECONNRESET"===b||"ECONNREFUSED"===b||c>=500&&c<=504}_handler(a,b,c){var d;if(a)return{error:a};let e=b.statusCode,f=b.headers;if(e>=300){switch(f["content-type"]){case"application/json":c=JSON.parse(c);break;case"application/x-msgpack":if(!(null==(d=this.client)?void 0:d._MsgPack))return{error:aL("MsgPack")};c=this.client._MsgPack.decode(c)}return{error:c.error?U.fromValues(c.error):new U(f["x-ably-errormessage"]||"Error response received from server: "+e+" body was: "+L.Config.inspect(c),Number(f["x-ably-errorcode"]),e),body:c,headers:f,unpacked:!0,statusCode:e}}return{error:null,body:c,headers:f,unpacked:!1,statusCode:e}}}).methods=[a_.Get,a_.Delete,a_.Post,a_.Put,a_.Patch],j.methodsWithoutBody=[a_.Get,a_.Delete],j.methodsWithBody=[a_.Post,a_.Put,a_.Patch],j),c6=z(a.r(54799)),c7=z(a.r(74248)),c8=z(a.r(24361)),c9={agent:"nodejs/"+process.versions.node,logTimestamps:!0,userAgent:null,binaryType:"nodebuffer",WebSocket:c7.default,useProtocolHeartbeats:!1,supportsBinary:!0,preferBinary:!0,nextTick:process.nextTick,inspect:c8.default.inspect,stringByteSize:Buffer.byteLength,inherits:c8.default.inherits,addEventListener:null,getRandomArrayBuffer:async function(a){return c8.default.promisify(c6.default.randomBytes)(a)}},da=((h=da||{})[h.REQ_SEND=0]="REQ_SEND",h[h.REQ_RECV=1]="REQ_RECV",h[h.REQ_RECV_POLL=2]="REQ_RECV_POLL",h[h.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",h);function db(a){return a.code&&!a6.isTokenErr(a)&&([80015,80017,80030].includes(a.code)||a.code>=4e4&&a.code<5e4)?[cn({action:bc.ERROR,error:a})]:[cn({action:bc.DISCONNECTED,error:a})]}var dc=class extends cE{constructor(a,b,c){super(a,b,c,!0),this.onAuthUpdated=a=>{this.authParams={access_token:a.token}},this.stream=!("stream"in c)||c.stream,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){P.logAction(this.logger,P.LOG_MINOR,"CometTransport.connect()","starting"),cE.prototype.connect.call(this);let a=this.params,b=a.options,c=a.host||b.primaryDomain,d=aP.getPort(b),e=b.tls?"https://":"http://";this.baseUri=e+c+":"+d+"/comet/";let f=this.baseUri+"connect";P.logAction(this.logger,P.LOG_MINOR,"CometTransport.connect()","uri: "+f),ay(this.auth.getAuthParams(),(a,b)=>{if(a)return void this.disconnect(a);if(this.isDisposed)return;this.authParams=b;let c=this.params.getConnectParams(b);"stream"in c&&(this.stream=c.stream),P.logAction(this.logger,P.LOG_MINOR,"CometTransport.connect()","connectParams:"+ap(c));let d=!1,e=this.recvRequest=this.createRequest(f,null,c,null,this.stream?da.REQ_RECV_STREAM:da.REQ_RECV);e.on("data",a=>{this.recvRequest&&(d||(d=!0,this.emit("preconnect")),this.onData(a))}),e.on("complete",a=>{(this.recvRequest||(a=a||new U("Request cancelled",80003,400)),this.recvRequest=null,d||a||(d=!0,this.emit("preconnect")),this.onActivity(),a)?a.code?this.onData(db(a)):this.disconnect(a):L.Config.nextTick(()=>{this.recv()})}),e.exec()})}requestClose(){P.logAction(this.logger,P.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){P.logAction(this.logger,P.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(a){let b=a?this.closeUri:this.disconnectUri;if(b){let c=this.createRequest(b,null,this.authParams,null,da.REQ_SEND);c.on("complete",b=>{b&&(P.logAction(this.logger,P.LOG_ERROR,"CometTransport.request"+(a?"Close()":"Disconnect()"),"request returned err = "+as(b)),this.finish("disconnected",b))}),c.exec()}}dispose(){P.logAction(this.logger,P.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(P.logAction(this.logger,P.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",cB.disconnected()),L.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(a){var b;if(this.isDisposed)return;let c=null==(b=a.connectionDetails)?void 0:b.connectionKey;cE.prototype.onConnect.call(this,a);let d=this.baseUri+c;P.logAction(this.logger,P.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+d),this.sendUri=d+"/send",this.recvUri=d+"/recv",this.closeUri=d+"/close",this.disconnectUri=d+"/disconnect"}send(a){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(a);return}let b=this.pendingItems||[];b.push(a),this.pendingItems=null,this.sendItems(b)}sendAnyPending(){let a=this.pendingItems;a&&(this.pendingItems=null,this.sendItems(a))}sendItems(a){let b=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(a),da.REQ_SEND);b.on("complete",(a,b)=>{(a&&P.logAction(this.logger,P.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+as(a)),this.sendRequest=null,a)?a.code?this.onData(db(a)):this.disconnect(a):(b&&this.onData(b),this.pendingItems&&L.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()}))}),b.exec()}recv(){if(this.recvRequest||!this.isConnected)return;let a=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?da.REQ_RECV_STREAM:da.REQ_RECV_POLL);a.on("data",a=>{this.onData(a)}),a.on("complete",a=>{(this.recvRequest=null,this.onActivity(),a)?a.code?this.onData(db(a)):this.disconnect(a):L.Config.nextTick(()=>{this.recv()})}),a.exec()}onData(a){try{let b=this.decodeResponse(a);if(b&&b.length)for(let a=0;a<b.length;a++)this.onProtocolMessage(cm(b[a],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._objectsPlugin))}catch(a){P.logAction(this.logger,P.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+a.stack)}}encodeRequest(a){return JSON.stringify(a)}decodeResponse(a){return"string"==typeof a?JSON.parse(a):a}},dd=z(a.r(21517)),de=z(a.r(24836)),df=z(a.r(92509)),dg=z(a.r(24361)),dh=function(){},di=i.Comet,dj=class extends dc{constructor(a,b,c){super(a,b,c),this.httpAgent=null,this.httpsAgent=null,this.pendingRequests=0,this.shortName=di}static isAvailable(){return!0}toString(){return"NodeCometTransport; uri="+this.baseUri+"; isConnected="+this.isConnected+"; format="+this.format+"; stream="+this.stream}getAgent(a){var b=a?"httpsAgent":"httpAgent",c=this[b];return c||(c=this[b]=new(a?de.default:dd.default).Agent({keepAlive:!0})),c}dispose(){var a=this;this.onceNoPending(function(){a.httpAgent&&a.httpAgent.destroy(),a.httpsAgent&&a.httpsAgent.destroy()}),dc.prototype.dispose.call(this)}request(a,b,c,d,e){var f=this.createRequest(a,b,c,d);return f.once("complete",e),f.exec(),f}createRequest(a,b,c,d,e){return new dk(a,b,c,d,e,this.format,this.timeouts,this)}addPending(){++this.pendingRequests}removePending(){--this.pendingRequests<=0&&this.emit("nopending")}onceNoPending(a){0==this.pendingRequests?a():this.once("nopending",a)}},dk=class extends bb{constructor(a,b,c,d,e,f,g,h){super(h.logger),"string"==typeof a&&(a=df.default.parse(a));var i="https:"==a.protocol;this.client=i?de.default:dd.default,this.requestMode=e,this.timeouts=g,this.transport=h,this.requestComplete=!1,this.req=this.res=null;var j="GET",k="msgpack"==f?"application/x-msgpack":"application/json";(b=b?W({},b):{}).accept=k,d&&(j="POST",Buffer.isBuffer(d)||("object"==typeof d&&(d=JSON.stringify(d)),d=Buffer.from(d)),this.body=d,b["Content-Length"]=d.length,b["Content-Type"]=k);var l=this.requestOptions={hostname:a.hostname,port:a.port,path:a.path+ap(c),method:j,headers:b};h&&(l.agent=h.getAgent(i))}exec(){var a=this.requestMode==da.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,b=this,c=this.timer=setTimeout(function(){b.abort()},a),d=this.req=this.client.request(this.requestOptions);d.on("error",this.onReqError=function(a){a=new V("Request error: "+a.message,null,400),clearTimeout(c),b.timer=null,b.complete(a)}),d.on("response",function(a){clearTimeout(c),b.timer=null;var d=a.statusCode;if(d==a0.NoContent){a.resume(),b.complete();return}a.on("error",b.onResError=function(a){a=new V("Response error: "+a.message,null,400),b.complete(a)}),b.res=a,b.requestMode==da.REQ_RECV_STREAM&&d<400?b.readStream():b.readFully()}),this.transport&&this.transport.addPending(),d.end(this.body)}readStream(){var a=this.res,b=this;function c(a){try{a=JSON.parse(a)}catch(a){var c="Malformed response body from server: "+a.message;P.logAction(b.logger,P.LOG_ERROR,"NodeCometTransport.Request.readStream()",c),b.complete(new V(c,null,400));return}b.emit("data",a)}this.chunks=[],this.streamComplete=!1,a.on("data",this.ondata=function(a){var d=String(a).split("\n"),e=b.chunks;d.length>1&&e.length>0&&(e.push(d.shift()),b.chunks=[],c(e.join("")));var f=d.pop();f.length&&b.chunks.push(f),d.map(c)}),a.on("end",function(){b.streamComplete=!0,process.nextTick(function(){b.complete()})})}readFully(){var a=this.res,b=[],c=this;a.on("data",function(a){b.push(a)}),a.on("end",function(){process.nextTick(function(){var d=Buffer.concat(b),e=a.statusCode;try{d=JSON.parse(String(d))}catch(a){var f="Malformed response body from server: "+a.message;P.logAction(c.logger,P.LOG_ERROR,"NodeCometTransport.Request.readFully()",f),c.complete(new V(f,null,400));return}if(e<400||Array.isArray(d))return void c.complete(null,d);var g=d.error&&U.fromValues(d.error);g||(g=new V("Error response received from server: "+e+", body was: "+dg.default.inspect(d),null,e)),c.complete(g)})})}complete(a,b){!this.requestComplete&&(this.requestComplete=!0,b&&this.emit("data",b),this.emit("complete",a,b),a&&this.ondata&&!this.streamComplete&&this.ondata&&this.res&&this.res.removeListener("data",this.ondata),this.transport&&this.transport.removePending())}abort(){P.logAction(this.logger,P.LOG_MINOR,"NodeCometTransport.Request.abort()","");var a=this.timer;a&&(clearTimeout(a),this.timer=null);var b=this.req;b&&(P.logAction(this.logger,P.LOG_MINOR,"NodeCometTransport.Request.abort()","aborting request"),b.removeListener("error",this.onReqError),b.on("error",dh),b.abort(),this.req=null),this.complete({statusCode:400,code:80003,message:"Cancelled"})}},dl={order:[i.Comet],bundledImplementations:{[i.WebSocket]:cW,[i.Comet]:dj}},dm={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[i.WebSocket],restAgentOptions:{maxSockets:40,keepAlive:!0}},dn=K(),dp=function(a){async function b(a){return c0.default.promisify(c_.default.randomBytes)(a)}function c(a,b){var c=Buffer.alloc(a);return c.fill(b),c}for(var d=[c(16,16)],e=1;e<=16;e++)d.push(c(e,e));class f{constructor(a,b,c,d){this.algorithm=a,this.keyLength=b,this.mode=c,this.key=d,this.iv=null}}class g{static getDefaultParams(b){if(!b.key)throw Error("Crypto.getDefaultParams: a key is required");var c="string"==typeof b.key?a.base64Decode(b.key.replace("_","/").replace("-","+")):b.key instanceof ArrayBuffer?Buffer.from(b.key):b.key,d=new f(b.algorithm||"aes",8*c.length,b.mode||"cbc",c);if(b.keyLength&&b.keyLength!==d.keyLength)throw Error("Crypto.getDefaultParams: a keyLength of "+b.keyLength+" was specified, but the key actually has length "+d.keyLength);if("aes"===d.algorithm&&"cbc"===d.mode&&128!==d.keyLength&&256!==d.keyLength)throw Error("Unsupported key length "+d.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)");return d}static async generateRandomKey(a){try{return b((a||256)/8)}catch(a){throw new U("Failed to generate random key: "+a.message,500,5e4,a)}}static getCipher(a,b){var c,d=a.algorithm&&a.key&&a.keyLength&&a.mode?a:this.getDefaultParams(a);return{cipherParams:d,cipher:new h(d,null!=(c=a.iv)?c:null,b)}}}g.CipherParams=f;class h{constructor(a,b,c){this.logger=c,this.encryptCipher=null,this.algorithm=a.algorithm+"-"+String(a.keyLength)+"-"+a.mode,this.key=a.key,this.iv=b}async encrypt(b){P.logAction(this.logger,P.LOG_MICRO,"CBCCipher.encrypt()","");let c=await this.getIv();this.encryptCipher||(this.encryptCipher=c_.default.createCipheriv(this.algorithm,this.key,c));var e=a.toBuffer(b),f=e.length,g=this.encryptCipher.update(Buffer.concat([e,d[(f+16&-16)-f]]));return Buffer.concat([c,g])}async decrypt(a){var b=c_.default.createDecipheriv(this.algorithm,this.key,a.slice(0,16)),c=b.update(a.slice(16)),d=b.final();return d&&d.length&&(c=Buffer.concat([c,d])),c}async getIv(){if(this.iv){var a=this.iv;return this.iv=null,a}var c=await b(16);return this.encryptCipher?this.encryptCipher.update(c):c}}return g}(c$);for(let a of(L.Crypto=dp,L.BufferUtils=c$,L.Http=c5,L.Config=c9,L.Transports=dl,L.WebStorage=null,[cv,cY]))a.Crypto=dp,a._MsgPack=dn;return P.initLogHandlers(),L.Defaults=Object.assign(aP,dm),L.Config.agent&&(L.Defaults.agent+=" "+L.Config.agent),l.exports={ErrorInfo:U,Rest:cv,Realtime:cY,msgpack:null,makeProtocolMessageFromDeserialized:function(a){return b=>{var c;return cm(b,{PresenceMessage:bO,WirePresenceMessage:bN},{Annotation:cf,WireAnnotation:ce,RealtimeAnnotations:cu,RestAnnotations:ck},null!=(c=null==a?void 0:a.ObjectsPlugin)?c:null)}}},"object"==typeof l.exports&&(l.exports=((a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of Object.getOwnPropertyNames(b))Object.prototype.hasOwnProperty.call(a,e)||e===c||Object.defineProperty(a,e,{get:()=>b[e],enumerable:!(d=Object.getOwnPropertyDescriptor(b,e))||d.enumerable});return a})(l.exports,k)),l.exports})(a.r(74248),a.r(64312))},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},4987,(a,b,c)=>{"use strict";function d({widthInt:a,heightInt:b,blurWidth:c,blurHeight:d,blurDataURL:e,objectFit:f}){let g=c?40*c:a,h=d?40*d:b,i=g&&h?`viewBox='0 0 ${g} ${h}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${i}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${i?"none":"contain"===f?"xMidYMid":"cover"===f?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${e}'/%3E%3C/svg%3E`}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImageBlurSvg",{enumerable:!0,get:function(){return d}})},345,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={VALID_LOADERS:function(){return f},imageConfigDefault:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=["default","imgix","cloudinary","akamai","custom"],g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},94915,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImgProps",{enumerable:!0,get:function(){return i}}),a.r(92434);let d=a.r(4987),e=a.r(345),f=["-moz-initial","fill","none","scale-down",void 0];function g(a){return void 0!==a.default}function h(a){return void 0===a?a:"number"==typeof a?Number.isFinite(a)?a:NaN:"string"==typeof a&&/^[0-9]+$/.test(a)?parseInt(a,10):NaN}function i({src:a,sizes:b,unoptimized:c=!1,priority:i=!1,preload:j=!1,loading:k,className:l,quality:m,width:n,height:o,fill:p=!1,style:q,overrideSrc:r,onLoad:s,onLoadingComplete:t,placeholder:u="empty",blurDataURL:v,fetchPriority:w,decoding:x="async",layout:y,objectFit:z,objectPosition:A,lazyBoundary:B,lazyRoot:C,...D},E){var F;let G,H,I,{imgConf:J,showAltText:K,blurComplete:L,defaultLoader:M}=E,N=J||e.imageConfigDefault;if("allSizes"in N)G=N;else{let a=[...N.deviceSizes,...N.imageSizes].sort((a,b)=>a-b),b=N.deviceSizes.sort((a,b)=>a-b),c=N.qualities?.sort((a,b)=>a-b);G={...N,allSizes:a,deviceSizes:b,qualities:c}}if(void 0===M)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let O=D.loader||M;delete D.loader,delete D.srcSet;let P="__next_img_default"in O;if(P){if("custom"===G.loader)throw Object.defineProperty(Error(`Image with src "${a}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let a=O;O=b=>{let{config:c,...d}=b;return a(d)}}if(y){"fill"===y&&(p=!0);let a={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[y];a&&(q={...q,...a});let c={responsive:"100vw",fill:"100vw"}[y];c&&!b&&(b=c)}let Q="",R=h(n),S=h(o);if((F=a)&&"object"==typeof F&&(g(F)||void 0!==F.src)){let b=g(a)?a.default:a;if(!b.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!b.height||!b.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(H=b.blurWidth,I=b.blurHeight,v=v||b.blurDataURL,Q=b.src,!p)if(R||S){if(R&&!S){let a=R/b.width;S=Math.round(b.height*a)}else if(!R&&S){let a=S/b.height;R=Math.round(b.width*a)}}else R=b.width,S=b.height}let T=!i&&!j&&("lazy"===k||void 0===k);(!(a="string"==typeof a?a:Q)||a.startsWith("data:")||a.startsWith("blob:"))&&(c=!0,T=!1),G.unoptimized&&(c=!0),P&&!G.dangerouslyAllowSVG&&a.split("?",1)[0].endsWith(".svg")&&(c=!0);let U=h(m),V=Object.assign(p?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:z,objectPosition:A}:{},K?{}:{color:"transparent"},q),W=L||"empty"===u?null:"blur"===u?`url("data:image/svg+xml;charset=utf-8,${(0,d.getImageBlurSvg)({widthInt:R,heightInt:S,blurWidth:H,blurHeight:I,blurDataURL:v||"",objectFit:V.objectFit})}")`:`url("${u}")`,X=f.includes(V.objectFit)?"fill"===V.objectFit?"100% 100%":"cover":V.objectFit,Y=W?{backgroundSize:X,backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:W}:{},Z=function({config:a,src:b,unoptimized:c,width:d,quality:e,sizes:f,loader:g}){if(c)return{src:b,srcSet:void 0,sizes:void 0};let{widths:h,kind:i}=function({deviceSizes:a,allSizes:b},c,d){if(d){let c=/(^|\s)(1?\d?\d)vw/g,e=[];for(let a;a=c.exec(d);)e.push(parseInt(a[2]));if(e.length){let c=.01*Math.min(...e);return{widths:b.filter(b=>b>=a[0]*c),kind:"w"}}return{widths:b,kind:"w"}}return"number"!=typeof c?{widths:a,kind:"w"}:{widths:[...new Set([c,2*c].map(a=>b.find(b=>b>=a)||b[b.length-1]))],kind:"x"}}(a,d,f),j=h.length-1;return{sizes:f||"w"!==i?f:"100vw",srcSet:h.map((c,d)=>`${g({config:a,src:b,quality:e,width:c})} ${"w"===i?c:d+1}${i}`).join(", "),src:g({config:a,src:b,quality:e,width:h[j]})}}({config:G,src:a,unoptimized:c,width:R,quality:U,sizes:b,loader:O}),$=T?"lazy":k;return{props:{...D,loading:$,fetchPriority:w,width:R,height:S,decoding:x,className:l,style:{...V,...Y},sizes:Z.sizes,srcSet:Z.srcSet,src:r||Z.src},meta:{unoptimized:c,preload:j||i,placeholder:u,fill:p}}}},94613,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return f}});let d=a.r(72131),e=()=>{};function f(a){let{headManager:b,reduceComponentsToState:c}=a;function f(){if(b&&b.mountedInstances){let a=d.Children.toArray(Array.from(b.mountedInstances).filter(Boolean));b.updateHead(c(a))}}return b?.mountedInstances?.add(a.children),f(),e(()=>(b?.mountedInstances?.add(a.children),()=>{b?.mountedInstances?.delete(a.children)})),e(()=>(b&&(b._pendingUpdate=f),()=>{b&&(b._pendingUpdate=f)})),null}},92966,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HeadManagerContext},58018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return p},defaultHead:function(){return l}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(46058),h=a.r(87924),i=g._(a.r(72131)),j=f._(a.r(94613)),k=a.r(92966);function l(){return[(0,h.jsx)("meta",{charSet:"utf-8"},"charset"),(0,h.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(a,b){return"string"==typeof b||"number"==typeof b?a:b.type===i.default.Fragment?a.concat(i.default.Children.toArray(b.props.children).reduce((a,b)=>"string"==typeof b||"number"==typeof b?a:a.concat(b),[])):a.concat(b)}a.r(92434);let n=["name","httpEquiv","charSet","itemProp"];function o(a){let b,c,d,e;return a.reduce(m,[]).reverse().concat(l().reverse()).filter((b=new Set,c=new Set,d=new Set,e={},a=>{let f=!0,g=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){g=!0;let c=a.key.slice(a.key.indexOf("$")+1);b.has(c)?f=!1:b.add(c)}switch(a.type){case"title":case"base":c.has(a.type)?f=!1:c.add(a.type);break;case"meta":for(let b=0,c=n.length;b<c;b++){let c=n[b];if(a.props.hasOwnProperty(c))if("charSet"===c)d.has(c)?f=!1:d.add(c);else{let b=a.props[c],d=e[c]||new Set;("name"!==c||!g)&&d.has(b)?f=!1:(d.add(b),e[c]=d)}}}return f})).reverse().map((a,b)=>{let c=a.key||b;return i.default.cloneElement(a,{key:c})})}let p=function({children:a}){let b=(0,i.useContext)(k.HeadManagerContext);return(0,h.jsx)(j.default,{reduceComponentsToState:o,headManager:b,children:a})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},4486,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ImageConfigContext},53773,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.RouterContext},35444,(a,b,c)=>{"use strict";function d(a,b){let c=a||75;return b?.qualities?.length?b.qualities.reduce((a,b)=>Math.abs(b-c)<Math.abs(a-c)?b:a,0):c}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findClosestQuality",{enumerable:!0,get:function(){return d}})},2305,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return f}});let d=a.r(35444);function e({config:a,src:b,width:c,quality:e}){if(b.startsWith("/")&&b.includes("?")&&a.localPatterns?.length===1&&"**"===a.localPatterns[0].pathname&&""===a.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${b}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let f=(0,d.findClosestQuality)(e,a);return`${a.path}?url=${encodeURIComponent(b)}&w=${c}&q=${f}${b.startsWith("/_next/static/media/"),""}`}e.__next_img_default=!0;let f=e},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67161,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"Image",{enumerable:!0,get:function(){return u}});let d=a.r(33354),e=a.r(46058),f=a.r(87924),g=e._(a.r(72131)),h=d._(a.r(35112)),i=d._(a.r(58018)),j=a.r(94915),k=a.r(345),l=a.r(4486);a.r(92434);let m=a.r(53773),n=d._(a.r(2305)),o=a.r(8591),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function q(a,b,c,d,e,f,g){let h=a?.src;a&&a["data-loaded-src"]!==h&&(a["data-loaded-src"]=h,("decode"in a?a.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(a.parentElement&&a.isConnected){if("empty"!==b&&e(!0),c?.current){let b=new Event("load");Object.defineProperty(b,"target",{writable:!1,value:a});let d=!1,e=!1;c.current({...b,nativeEvent:b,currentTarget:a,target:a,isDefaultPrevented:()=>d,isPropagationStopped:()=>e,persist:()=>{},preventDefault:()=>{d=!0,b.preventDefault()},stopPropagation:()=>{e=!0,b.stopPropagation()}})}d?.current&&d.current(a)}}))}function r(a){return g.use?{fetchPriority:a}:{fetchpriority:a}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let s=(0,g.forwardRef)(({src:a,srcSet:b,sizes:c,height:d,width:e,decoding:h,className:i,style:j,fetchPriority:k,placeholder:l,loading:m,unoptimized:n,fill:p,onLoadRef:s,onLoadingCompleteRef:t,setBlurComplete:u,setShowAltText:v,sizesInput:w,onLoad:x,onError:y,...z},A)=>{let B=(0,g.useCallback)(a=>{a&&(y&&(a.src=a.src),a.complete&&q(a,l,s,t,u,n,w))},[a,l,s,t,u,y,n,w]),C=(0,o.useMergedRef)(A,B);return(0,f.jsx)("img",{...z,...r(k),loading:m,width:e,height:d,decoding:h,"data-nimg":p?"fill":"1",className:i,style:j,sizes:c,srcSet:b,src:a,ref:C,onLoad:a=>{q(a.currentTarget,l,s,t,u,n,w)},onError:a=>{v(!0),"empty"!==l&&u(!0),y&&y(a)}})});function t({isAppRouter:a,imgAttributes:b}){let c={as:"image",imageSrcSet:b.srcSet,imageSizes:b.sizes,crossOrigin:b.crossOrigin,referrerPolicy:b.referrerPolicy,...r(b.fetchPriority)};return a&&h.default.preload?(h.default.preload(b.src,c),null):(0,f.jsx)(i.default,{children:(0,f.jsx)("link",{rel:"preload",href:b.srcSet?void 0:b.src,...c},"__nimg-"+b.src+b.srcSet+b.sizes)})}let u=(0,g.forwardRef)((a,b)=>{let c=(0,g.useContext)(m.RouterContext),d=(0,g.useContext)(l.ImageConfigContext),e=(0,g.useMemo)(()=>{let a=p||d||k.imageConfigDefault,b=[...a.deviceSizes,...a.imageSizes].sort((a,b)=>a-b),c=a.deviceSizes.sort((a,b)=>a-b),e=a.qualities?.sort((a,b)=>a-b);return{...a,allSizes:b,deviceSizes:c,qualities:e,localPatterns:d?.localPatterns}},[d]),{onLoad:h,onLoadingComplete:i}=a,o=(0,g.useRef)(h);(0,g.useEffect)(()=>{o.current=h},[h]);let q=(0,g.useRef)(i);(0,g.useEffect)(()=>{q.current=i},[i]);let[r,u]=(0,g.useState)(!1),[v,w]=(0,g.useState)(!1),{props:x,meta:y}=(0,j.getImgProps)(a,{defaultLoader:n.default,imgConf:e,blurComplete:r,showAltText:v});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s,{...x,unoptimized:y.unoptimized,placeholder:y.placeholder,fill:y.fill,onLoadRef:o,onLoadingCompleteRef:q,setBlurComplete:u,setShowAltText:w,sizesInput:a.sizes,ref:b}),y.preload?(0,f.jsx)(t,{isAppRouter:!c,imgAttributes:x}):null]})});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},40777,a=>{"use strict";let b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;var x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac=a.i(87924),ad=a.i(72131),ae=a.i(13902),af=a.i(50944);function ag(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function ah(a){var b;let c,d=(b=a,(c=ad.forwardRef((a,b)=>{let{children:c,...d}=a;if(ad.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==ad.Fragment&&(h.ref=b?function(...a){return b=>{let c=!1,d=a.map(a=>{let d=ag(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():ag(a[b],null)}}}}(b,g):g),ad.cloneElement(c,h)}return ad.Children.count(c)>1?ad.Children.only(null):null})).displayName=`${b}.SlotClone`,c),e=ad.forwardRef((a,b)=>{let{children:c,...e}=a,f=ad.Children.toArray(c),g=f.find(ak);if(g){let a=g.props.children,c=f.map(b=>b!==g?b:ad.Children.count(a)>1?ad.Children.only(null):ad.isValidElement(a)?a.props.children:null);return(0,ac.jsx)(d,{...e,ref:b,children:ad.isValidElement(a)?ad.cloneElement(a,void 0,c):null})}return(0,ac.jsx)(d,{...e,ref:b,children:c})});return e.displayName=`${a}.Slot`,e}var ai=ah("Slot"),aj=Symbol("radix.slottable");function ak(a){return ad.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===aj}function al(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}let am=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,an=(a,b)=>c=>{var d;if((null==b?void 0:b.variants)==null)return al(a,null==c?void 0:c.class,null==c?void 0:c.className);let{variants:e,defaultVariants:f}=b,g=Object.keys(e).map(a=>{let b=null==c?void 0:c[a],d=null==f?void 0:f[a];if(null===b)return null;let g=am(b)||am(d);return e[a][g]}),h=c&&Object.entries(c).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return al(a,g,null==b||null==(d=b.compoundVariants)?void 0:d.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...h}[b]):({...f,...h})[b]===c})?[...a,c,d]:a},[]),null==c?void 0:c.class,null==c?void 0:c.className)},ao=(a,b)=>{if(0===a.length)return b.classGroupId;let c=a[0],d=b.nextPart.get(c),e=d?ao(a.slice(1),d):void 0;if(e)return e;if(0===b.validators.length)return;let f=a.join("-");return b.validators.find(({validator:a})=>a(f))?.classGroupId},ap=/^\[(.+)\]$/,aq=(a,b,c,d)=>{a.forEach(a=>{if("string"==typeof a){(""===a?b:ar(b,a)).classGroupId=c;return}"function"==typeof a?as(a)?aq(a(d),b,c,d):b.validators.push({validator:a,classGroupId:c}):Object.entries(a).forEach(([a,e])=>{aq(e,ar(b,a),c,d)})})},ar=(a,b)=>{let c=a;return b.split("-").forEach(a=>{c.nextPart.has(a)||c.nextPart.set(a,{nextPart:new Map,validators:[]}),c=c.nextPart.get(a)}),c},as=a=>a.isThemeGetter,at=/\s+/;function au(){let a,b,c=0,d="";for(;c<arguments.length;)(a=arguments[c++])&&(b=av(a))&&(d&&(d+=" "),d+=b);return d}let av=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=av(a[d]))&&(c&&(c+=" "),c+=b);return c},aw=a=>{let b=b=>b[a]||[];return b.isThemeGetter=!0,b},ax=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ay=/^\((?:(\w[\w-]*):)?(.+)\)$/i,az=/^\d+\/\d+$/,aA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,aD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,aF=a=>az.test(a),aG=a=>!!a&&!Number.isNaN(Number(a)),aH=a=>!!a&&Number.isInteger(Number(a)),aI=a=>a.endsWith("%")&&aG(a.slice(0,-1)),aJ=a=>aA.test(a),aK=()=>!0,aL=a=>aB.test(a)&&!aC.test(a),aM=()=>!1,aN=a=>aD.test(a),aO=a=>aE.test(a),aP=a=>!aR(a)&&!aX(a),aQ=a=>a2(a,a6,aM),aR=a=>ax.test(a),aS=a=>a2(a,a7,aL),aT=a=>a2(a,a8,aG),aU=a=>a2(a,a4,aM),aV=a=>a2(a,a5,aO),aW=a=>a2(a,ba,aN),aX=a=>ay.test(a),aY=a=>a3(a,a7),aZ=a=>a3(a,a9),a$=a=>a3(a,a4),a_=a=>a3(a,a6),a0=a=>a3(a,a5),a1=a=>a3(a,ba,!0),a2=(a,b,c)=>{let d=ax.exec(a);return!!d&&(d[1]?b(d[1]):c(d[2]))},a3=(a,b,c=!1)=>{let d=ay.exec(a);return!!d&&(d[1]?b(d[1]):c)},a4=a=>"position"===a||"percentage"===a,a5=a=>"image"===a||"url"===a,a6=a=>"length"===a||"size"===a||"bg-size"===a,a7=a=>"length"===a,a8=a=>"number"===a,a9=a=>"family-name"===a,ba=a=>"shadow"===a,bb=function(a,...b){let c,d,e,f=function(h){var i;let j;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=new Map,d=new Map,e=(e,f)=>{c.set(e,f),++b>a&&(b=0,d=c,c=new Map)};return{get(a){let b=c.get(a);return void 0!==b?b:void 0!==(b=d.get(a))?(e(a,b),b):void 0},set(a,b){c.has(a)?c.set(a,b):e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{prefix:b,experimentalParseClassName:c}=a,d=a=>{let b,c,d=[],e=0,f=0,g=0;for(let b=0;b<a.length;b++){let h=a[b];if(0===e&&0===f){if(":"===h){d.push(a.slice(g,b)),g=b+1;continue}if("/"===h){c=b;continue}}"["===h?e++:"]"===h?e--:"("===h?f++:")"===h&&f--}let h=0===d.length?a:a.substring(g),i=(b=h).endsWith("!")?b.substring(0,b.length-1):b.startsWith("!")?b.substring(1):b;return{modifiers:d,hasImportantModifier:i!==h,baseClassName:i,maybePostfixModifierPosition:c&&c>g?c-g:void 0}};if(b){let a=b+":",c=d;d=b=>b.startsWith(a)?c(b.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:b,maybePostfixModifierPosition:void 0}}if(c){let a=d;d=b=>c({className:b,parseClassName:a})}return d})(i),sortModifiers:(j=Object.fromEntries(i.orderSensitiveModifiers.map(a=>[a,!0])),a=>{if(a.length<=1)return a;let b=[],c=[];return a.forEach(a=>{"["===a[0]||j[a]?(b.push(...c.sort(),a),c=[]):c.push(a)}),b.push(...c.sort()),b}),...(a=>{let b=(a=>{let{theme:b,classGroups:c}=a,d={nextPart:new Map,validators:[]};for(let a in c)aq(c[a],d,a,b);return d})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{let c=a.split("-");return""===c[0]&&1!==c.length&&c.shift(),ao(c,b)||(a=>{if(ap.test(a)){let b=ap.exec(a)[1],c=b?.substring(0,b.indexOf(":"));if(c)return"arbitrary.."+c}})(a)},getConflictingClassGroupIds:(a,b)=>{let e=c[a]||[];return b&&d[a]?[...e,...d[a]]:e}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)};function g(a){let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e,sortModifiers:f}=b,g=[],h=a.trim().split(at),i="";for(let a=h.length-1;a>=0;a-=1){let b=h[a],{isExternal:j,modifiers:k,hasImportantModifier:l,baseClassName:m,maybePostfixModifierPosition:n}=c(b);if(j){i=b+(i.length>0?" "+i:i);continue}let o=!!n,p=d(o?m.substring(0,n):m);if(!p){if(!o||!(p=d(m))){i=b+(i.length>0?" "+i:i);continue}o=!1}let q=f(k).join(":"),r=l?q+"!":q,s=r+p;if(g.includes(s))continue;g.push(s);let t=e(p,o);for(let a=0;a<t.length;++a){let b=t[a];g.push(r+b)}i=b+(i.length>0?" "+i:i)}return i})(a,c);return e(a,f),f}return function(){return f(au.apply(null,arguments))}}(()=>{let a=aw("color"),b=aw("font"),c=aw("text"),d=aw("font-weight"),e=aw("tracking"),f=aw("leading"),g=aw("breakpoint"),h=aw("container"),i=aw("spacing"),j=aw("radius"),k=aw("shadow"),l=aw("inset-shadow"),m=aw("text-shadow"),n=aw("drop-shadow"),o=aw("blur"),p=aw("perspective"),q=aw("aspect"),r=aw("ease"),s=aw("animate"),t=()=>["auto","avoid","all","avoid-page","page","left","right","column"],u=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...u(),aX,aR],w=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],y=()=>[aX,aR,i],z=()=>[aF,"full","auto",...y()],A=()=>[aH,"none","subgrid",aX,aR],B=()=>["auto",{span:["full",aH,aX,aR]},aH,aX,aR],C=()=>[aH,"auto",aX,aR],D=()=>["auto","min","max","fr",aX,aR],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...y()],H=()=>[aF,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],I=()=>[a,aX,aR],J=()=>[...u(),a$,aU,{position:[aX,aR]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",a_,aQ,{size:[aX,aR]}],M=()=>[aI,aY,aS],N=()=>["","none","full",j,aX,aR],O=()=>["",aG,aY,aS],P=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>[aG,aI,a$,aU],S=()=>["","none",o,aX,aR],T=()=>["none",aG,aX,aR],U=()=>["none",aG,aX,aR],V=()=>[aG,aX,aR],W=()=>[aF,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[aJ],breakpoint:[aJ],color:[aK],container:[aJ],"drop-shadow":[aJ],ease:["in","out","in-out"],font:[aP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[aJ],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[aJ],shadow:[aJ],spacing:["px",aG],text:[aJ],"text-shadow":[aJ],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",aF,aR,aX,q]}],container:["container"],columns:[{columns:[aG,aR,aX,h]}],"break-after":[{"break-after":t()}],"break-before":[{"break-before":t()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[aH,"auto",aX,aR]}],basis:[{basis:[aF,"full","auto",h,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[aG,aF,"auto","initial","none",aR]}],grow:[{grow:["",aG,aX,aR]}],shrink:[{shrink:["",aG,aX,aR]}],order:[{order:[aH,"first","last","none",aX,aR]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[h,"screen",...H()]}],"min-w":[{"min-w":[h,"screen","none",...H()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[g]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",c,aY,aS]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[d,aX,aT]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",aI,aR]}],"font-family":[{font:[aZ,aR,b]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[e,aX,aR]}],"line-clamp":[{"line-clamp":[aG,"none",aX,aT]}],leading:[{leading:[f,...y()]}],"list-image":[{"list-image":["none",aX,aR]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",aX,aR]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...P(),"wavy"]}],"text-decoration-thickness":[{decoration:[aG,"from-font","auto",aX,aS]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[aG,"auto",aX,aR]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",aX,aR]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",aX,aR]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},aH,aX,aR],radial:["",aX,aR],conic:[aH,aX,aR]},a0,aV]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:N()}],"rounded-s":[{"rounded-s":N()}],"rounded-e":[{"rounded-e":N()}],"rounded-t":[{"rounded-t":N()}],"rounded-r":[{"rounded-r":N()}],"rounded-b":[{"rounded-b":N()}],"rounded-l":[{"rounded-l":N()}],"rounded-ss":[{"rounded-ss":N()}],"rounded-se":[{"rounded-se":N()}],"rounded-ee":[{"rounded-ee":N()}],"rounded-es":[{"rounded-es":N()}],"rounded-tl":[{"rounded-tl":N()}],"rounded-tr":[{"rounded-tr":N()}],"rounded-br":[{"rounded-br":N()}],"rounded-bl":[{"rounded-bl":N()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...P(),"hidden","none"]}],"divide-style":[{divide:[...P(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...P(),"none","hidden"]}],"outline-offset":[{"outline-offset":[aG,aX,aR]}],"outline-w":[{outline:["",aG,aY,aS]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",k,a1,aW]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",l,a1,aW]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[aG,aS]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",m,a1,aW]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[aG,aX,aR]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[aG]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[aX,aR]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":u()}],"mask-image-conic-pos":[{"mask-conic":[aG]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",aX,aR]}],filter:[{filter:["","none",aX,aR]}],blur:[{blur:S()}],brightness:[{brightness:[aG,aX,aR]}],contrast:[{contrast:[aG,aX,aR]}],"drop-shadow":[{"drop-shadow":["","none",n,a1,aW]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",aG,aX,aR]}],"hue-rotate":[{"hue-rotate":[aG,aX,aR]}],invert:[{invert:["",aG,aX,aR]}],saturate:[{saturate:[aG,aX,aR]}],sepia:[{sepia:["",aG,aX,aR]}],"backdrop-filter":[{"backdrop-filter":["","none",aX,aR]}],"backdrop-blur":[{"backdrop-blur":S()}],"backdrop-brightness":[{"backdrop-brightness":[aG,aX,aR]}],"backdrop-contrast":[{"backdrop-contrast":[aG,aX,aR]}],"backdrop-grayscale":[{"backdrop-grayscale":["",aG,aX,aR]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[aG,aX,aR]}],"backdrop-invert":[{"backdrop-invert":["",aG,aX,aR]}],"backdrop-opacity":[{"backdrop-opacity":[aG,aX,aR]}],"backdrop-saturate":[{"backdrop-saturate":[aG,aX,aR]}],"backdrop-sepia":[{"backdrop-sepia":["",aG,aX,aR]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",aX,aR]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[aG,"initial",aX,aR]}],ease:[{ease:["linear","initial",r,aX,aR]}],delay:[{delay:[aG,aX,aR]}],animate:[{animate:["none",s,aX,aR]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,aX,aR]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:T()}],"rotate-x":[{"rotate-x":T()}],"rotate-y":[{"rotate-y":T()}],"rotate-z":[{"rotate-z":T()}],scale:[{scale:U()}],"scale-x":[{"scale-x":U()}],"scale-y":[{"scale-y":U()}],"scale-z":[{"scale-z":U()}],"scale-3d":["scale-3d"],skew:[{skew:V()}],"skew-x":[{"skew-x":V()}],"skew-y":[{"skew-y":V()}],transform:[{transform:[aX,aR,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:W()}],"translate-x":[{"translate-x":W()}],"translate-y":[{"translate-y":W()}],"translate-z":[{"translate-z":W()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",aX,aR]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",aX,aR]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[aG,aY,aS,aT]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function bc(...a){return bb(al(a))}let bd=an("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function be({className:a,variant:b,size:c,asChild:d=!1,...e}){return(0,ac.jsx)(d?ai:"button",{"data-slot":"button",className:bc(bd({variant:b,size:c,className:a})),...e})}let bf=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},bg=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var bh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let bi=(0,ad.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,ad.createElement)("svg",{ref:i,...bh,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:bg("lucide",e),...h},[...g.map(([a,b])=>(0,ad.createElement)(a,b)),...Array.isArray(f)?f:[f]])),bj=(a,b)=>{let c=(0,ad.forwardRef)(({className:c,...d},e)=>(0,ad.createElement)(bi,{ref:e,iconNode:b,className:bg(`lucide-${bf(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=bf(a),c},bk=bj("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),bl=bj("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),bm=bj("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),bn=bj("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bo=bj("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),bp=bj("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),bq=bj("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),br=bj("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),bs=bj("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function bt(a){let[b,c]=(0,ad.useState)(!1),{src:d,alt:e,style:f,className:g,...h}=a;return b?(0,ac.jsx)("div",{className:`inline-block bg-gray-100 text-center align-middle ${g??""}`,style:f,children:(0,ac.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,ac.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...h,"data-original-url":d})})}):(0,ac.jsx)("img",{src:d,alt:e,className:g,style:f,...h,onError:()=>{c(!0)}})}function bu({onGetStarted:a,onLogin:b,onViewFeature:c,onViewHelp:d,onViewPrivacy:e,onViewTerms:f,onViewAbout:g,onViewCookies:h}){let[i,j]=(0,ad.useState)(null),k=[{icon:bk,title:"Group Chats",description:"Keep your entire crew in one thread without losing context.",color:"from-pink-500 to-purple-500",id:"group-chats"},{icon:bl,title:"4K Video Calls",description:"Face-to-face chats that actually look like real life.",color:"from-blue-500 to-cyan-500",id:"video-calls"},{icon:bo,title:"8K Screen Share",description:"Crisp screen shares for homework help, beats, or builds.",color:"from-green-500 to-emerald-500",id:"screen-share"},{icon:bq,title:"Stories & Snaps",description:"Post quick moments that disappear before things get messy.",color:"from-yellow-500 to-orange-500",id:"stories"},{icon:bm,title:"Friends Network",description:"Organize friends, teams, and clubs without juggling apps.",color:"from-red-500 to-pink-500",id:"friends"},{icon:br,title:"Gen Z Vibes",description:"Glass, gradients, and motion that feel intentionalnot corporate.",color:"from-purple-500 to-indigo-500",id:"gen-z"}];return(0,ac.jsxs)("div",{className:"min-h-screen overflow-hidden bg-gradient-to-br from-purple-900 via-pink-800 to-orange-700 relative",children:[(0,ac.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,ac.jsx)("div",{className:"absolute -top-40 -left-40 w-96 h-96 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),(0,ac.jsx)("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),(0,ac.jsx)("div",{className:"absolute -bottom-40 left-20 w-96 h-96 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),(0,ac.jsxs)("nav",{className:"relative z-10 flex items-center justify-between p-6 backdrop-blur-md bg-white/5 border-b border-white/10",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-2xl flex items-center justify-center",children:(0,ac.jsx)(bn,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("span",{className:"text-white text-2xl",children:"MoveYSplash"})]}),(0,ac.jsx)(be,{onClick:b,className:"bg-white/10 backdrop-blur-md border border-white/20 text-white hover:bg-white/20",children:"Log In"})]}),(0,ac.jsxs)("div",{className:"relative z-10 container mx-auto px-6 pt-20 pb-32",children:[(0,ac.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,ac.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/20 mb-8",children:[(0,ac.jsx)(br,{className:"w-4 h-4 text-yellow-300"}),(0,ac.jsx)("span",{className:"text-white/90 text-sm",children:"Built for real friends, not bots."})]}),(0,ac.jsx)("h1",{className:"text-6xl md:text-7xl text-white mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white via-pink-200 to-purple-200",children:"One place for the people you actually talk to."}),(0,ac.jsx)("p",{className:"text-xl text-white/80 mb-12 max-w-2xl mx-auto",children:"MoveYSplash combines group chats, zero-lag video calls, and disappearing stories so you do not have to bounce between five different apps."}),(0,ac.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[(0,ac.jsxs)(be,{onClick:a,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 px-8 py-6 text-lg group",children:["Get Started",(0,ac.jsx)(bs,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]}),(0,ac.jsx)(be,{variant:"outline",className:"bg-white/10 backdrop-blur-md border-white/20 text-white hover:bg-white/20 px-8 py-6 text-lg",children:"See it in action"})]})]}),(0,ac.jsx)("div",{className:"mt-24 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:k.map((a,b)=>(0,ac.jsxs)("div",{onMouseEnter:()=>j(b),onMouseLeave:()=>j(null),onClick:()=>c?.(a.id),className:`p-6 backdrop-blur-xl bg-white/10 rounded-3xl border border-white/20 transition-all duration-300 cursor-pointer ${i===b?"transform scale-105 bg-white/15":""}`,children:[(0,ac.jsx)("div",{className:`w-14 h-14 bg-gradient-to-br ${a.color} rounded-2xl flex items-center justify-center mb-4`,children:(0,ac.jsx)(a.icon,{className:"w-7 h-7 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:a.title}),(0,ac.jsx)("p",{className:"text-white/70",children:a.description}),(0,ac.jsxs)("div",{className:"text-white/50 text-sm mt-2 flex items-center gap-1",children:["Learn more ",(0,ac.jsx)(bs,{className:"w-4 h-4"})]})]},b))})]}),(0,ac.jsx)("div",{className:"relative z-10 bg-white/5 backdrop-blur-lg border-y border-white/10 py-16",children:(0,ac.jsx)("div",{className:"container mx-auto px-6",children:(0,ac.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-4xl text-white mb-2",children:"10M+"}),(0,ac.jsx)("div",{className:"text-white/60",children:"Active Users"})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-4xl text-white mb-2",children:"500M+"}),(0,ac.jsx)("div",{className:"text-white/60",children:"Messages Sent"})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-4xl text-white mb-2",children:"50M+"}),(0,ac.jsx)("div",{className:"text-white/60",children:"Video Calls"})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-4xl text-white mb-2",children:"100M+"}),(0,ac.jsx)("div",{className:"text-white/60",children:"Stories Shared"})]})]})})}),(0,ac.jsx)("div",{className:"relative z-10 container mx-auto px-6 py-24",children:(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h2",{className:"text-4xl text-white mb-6",children:"Group chat energy without the chaos."}),(0,ac.jsx)("p",{className:"text-white/80 text-lg mb-6",children:"Twenty-person threads stay organized with inline replies, reactions, and pinned highlights. Everything delivers instantly, so plans do not go stale."}),(0,ac.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,ac.jsx)("div",{className:"px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/20 text-white/90",children:" Inline replies"}),(0,ac.jsx)("div",{className:"px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/20 text-white/90",children:" Custom emoji packs"}),(0,ac.jsx)("div",{className:"px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/20 text-white/90",children:" Drop-anything sharing"})]})]}),(0,ac.jsx)("div",{className:"relative h-96 rounded-3xl overflow-hidden backdrop-blur-xl bg-white/10 border border-white/20 p-6",children:(0,ac.jsx)(bt,{src:"https://images.unsplash.com/photo-1584947113929-2d02f9c06203?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb2Rlcm4lMjB0ZWNobm9sb2d5JTIwc29jaWFsfGVufDF8fHx8MTc2MDcyNzI5Nnww&ixlib=rb-4.1.0&q=80&w=1080",alt:"Chat interface",className:"w-full h-full object-cover rounded-2xl"})})]})}),(0,ac.jsx)("div",{className:"relative z-10 container mx-auto px-6 pb-24",children:(0,ac.jsxs)("div",{className:"max-w-4xl mx-auto text-center p-12 backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 rounded-3xl border border-white/20",children:[(0,ac.jsx)("h2",{className:"text-4xl text-white mb-6",children:"Ready to stop hopping between apps?"}),(0,ac.jsx)("p",{className:"text-white/80 text-lg mb-8",children:"MoveYSplash keeps chats, calls, stories, and plans in one place so you can just hang out."}),(0,ac.jsx)(be,{onClick:a,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 px-8 py-6 text-lg",children:"Create Free Account"})]})}),(0,ac.jsx)("footer",{className:"relative z-10 border-t border-white/10 bg-black/20 backdrop-blur-lg",children:(0,ac.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,ac.jsxs)("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[(0,ac.jsxs)("div",{className:"md:col-span-1",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,ac.jsx)(bn,{className:"w-8 h-8 text-purple-400"}),(0,ac.jsx)("span",{className:"text-2xl text-white",children:"MoveYSplash"})]}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"A calmer social app for real-life friends, side projects, and late-night ideas."})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-4",children:"Features"}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm",children:[(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:()=>c?.("group-chats"),className:"hover:text-white transition-colors",children:"Group Chats"})}),(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:()=>c?.("video-calls"),className:"hover:text-white transition-colors",children:"Video Calls"})}),(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:()=>c?.("screen-share"),className:"hover:text-white transition-colors",children:"Screen Share"})}),(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:()=>c?.("stories"),className:"hover:text-white transition-colors",children:"Stories & Snaps"})}),(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:()=>c?.("friends"),className:"hover:text-white transition-colors",children:"Friends Network"})})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-4",children:"Company"}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm",children:[(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:d,className:"hover:text-white transition-colors",children:"Help Center"})}),(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:g,className:"hover:text-white transition-colors",children:"About Us"})})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-4",children:"Legal"}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm",children:[(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:e,className:"hover:text-white transition-colors",children:"Privacy Policy"})}),(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:f,className:"hover:text-white transition-colors",children:"Terms of Use"})}),(0,ac.jsx)("li",{children:(0,ac.jsx)("button",{onClick:h,className:"hover:text-white transition-colors",children:"Cookie Policy"})})]})]})]}),(0,ac.jsxs)("div",{className:"border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:" 2025 MoveYSplash, Inc. All rights reserved."}),(0,ac.jsxs)("div",{className:"flex gap-6",children:[(0,ac.jsx)("a",{href:"#",className:"text-white/50 hover:text-white transition-colors",children:(0,ac.jsx)(bp,{className:"w-5 h-5"})}),(0,ac.jsx)("a",{href:"#",className:"text-white/50 hover:text-white transition-colors",children:(0,ac.jsx)(bq,{className:"w-5 h-5"})}),(0,ac.jsx)("a",{href:"#",className:"text-white/50 hover:text-white transition-colors",children:(0,ac.jsx)(br,{className:"w-5 h-5"})})]})]})]})}),(0,ac.jsx)("style",{children:`
        @keyframes blob {
          0% { transform: translate(0px, 0px) scale(1); }
          33% { transform: translate(30px, -50px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
          100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]})}class bv extends Error{constructor(a,b="FunctionsError",c){super(a),this.name=b,this.context=c}}class bw extends bv{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class bx extends bv{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class by extends bv{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}(x=P||(P={})).Any="any",x.ApNortheast1="ap-northeast-1",x.ApNortheast2="ap-northeast-2",x.ApSouth1="ap-south-1",x.ApSoutheast1="ap-southeast-1",x.ApSoutheast2="ap-southeast-2",x.CaCentral1="ca-central-1",x.EuCentral1="eu-central-1",x.EuWest1="eu-west-1",x.EuWest2="eu-west-2",x.EuWest3="eu-west-3",x.SaEast1="sa-east-1",x.UsEast1="us-east-1",x.UsWest1="us-west-1",x.UsWest2="us-west-2";class bz{constructor(b,{headers:c={},customFetch:d,region:e=P.Any}={}){this.url=b,this.headers=c,this.region=e,this.fetch=(b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)})(d)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){var b,c,d,e;return b=this,c=arguments,d=void 0,e=function*(a,b={}){var c;try{let d,{headers:e,method:f,body:g,signal:h}=b,i={},{region:j}=b;j||(j=this.region);let k=new URL(`${this.url}/${a}`);j&&"any"!==j&&(i["x-region"]=j,k.searchParams.set("forceFunctionRegion",j)),g&&(e&&!Object.prototype.hasOwnProperty.call(e,"Content-Type")||!e)&&("undefined"!=typeof Blob&&g instanceof Blob||g instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",d=g):"string"==typeof g?(i["Content-Type"]="text/plain",d=g):"undefined"!=typeof FormData&&g instanceof FormData?d=g:(i["Content-Type"]="application/json",d=JSON.stringify(g)));let l=yield this.fetch(k.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),e),body:d,signal:h}).catch(a=>{if("AbortError"===a.name)throw a;throw new bw(a)}),m=l.headers.get("x-relay-error");if(m&&"true"===m)throw new bx(l);if(!l.ok)throw new by(l);let n=(null!=(c=l.headers.get("Content-Type"))?c:"text/plain").split(";")[0].trim();return{data:"application/json"===n?yield l.json():"application/octet-stream"===n?yield l.blob():"text/event-stream"===n?l:"multipart/form-data"===n?yield l.formData():yield l.text(),error:null,response:l}}catch(a){if(a instanceof Error&&"AbortError"===a.name)return{data:null,error:new bw(a)};return{data:null,error:a,response:a instanceof by||a instanceof bx?a.context:void 0}}},new(d||(d=Promise))(function(a,f){function g(a){try{i(e.next(a))}catch(a){f(a)}}function h(a){try{i(e.throw(a))}catch(a){f(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof d?c:new d(function(a){a(c)})).then(g,h)}i((e=e.apply(b,c||[])).next())})}}let{PostgrestClient:bA,PostgrestQueryBuilder:bB,PostgrestFilterBuilder:bC,PostgrestTransformBuilder:bD,PostgrestBuilder:bE,PostgrestError:bF}=a.i(79614).default,bG=class{static detectEnvironment(){var b;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==a.g.WebSocket)return{type:"native",constructor:a.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(b=navigator.userAgent)?void 0:b.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){let a=process.versions;if(a&&a.node){let b=parseInt(a.node.replace(/^v/,"").split(".")[0]);return b>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${b} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${b} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let a=this.detectEnvironment();if(a.constructor)return a.constructor;let b=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(b+=`

Suggested solution: ${a.workaround}`),Error(b)}static createWebSocket(a,b){return new(this.getWebSocketConstructor())(a,b)}static isWebSocketSupported(){try{let a=this.detectEnvironment();return"native"===a.type||"ws"===a.type}catch(a){return!1}}};(y=Q||(Q={}))[y.connecting=0]="connecting",y[y.open=1]="open",y[y.closing=2]="closing",y[y.closed=3]="closed",(z=R||(R={})).closed="closed",z.errored="errored",z.joined="joined",z.joining="joining",z.leaving="leaving",(A=S||(S={})).close="phx_close",A.error="phx_error",A.join="phx_join",A.reply="phx_reply",A.leave="phx_leave",A.access_token="access_token",(T||(T={})).websocket="websocket",(B=U||(U={})).Connecting="connecting",B.Open="open",B.Closing="closing",B.Closed="closed";class bH{constructor(){this.HEADER_LENGTH=1}decode(a,b){return a.constructor===ArrayBuffer?b(this._binaryDecode(a)):"string"==typeof a?b(JSON.parse(a)):b({})}_binaryDecode(a){let b=new DataView(a),c=new TextDecoder;return this._decodeBroadcast(a,b,c)}_decodeBroadcast(a,b,c){let d=b.getUint8(1),e=b.getUint8(2),f=this.HEADER_LENGTH+2,g=c.decode(a.slice(f,f+d));f+=d;let h=c.decode(a.slice(f,f+e));return f+=e,{ref:null,topic:g,event:h,payload:JSON.parse(c.decode(a.slice(f,a.byteLength)))}}}class bI{constructor(a,b){this.callback=a,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(C=V||(V={})).abstime="abstime",C.bool="bool",C.date="date",C.daterange="daterange",C.float4="float4",C.float8="float8",C.int2="int2",C.int4="int4",C.int4range="int4range",C.int8="int8",C.int8range="int8range",C.json="json",C.jsonb="jsonb",C.money="money",C.numeric="numeric",C.oid="oid",C.reltime="reltime",C.text="text",C.time="time",C.timestamp="timestamp",C.timestamptz="timestamptz",C.timetz="timetz",C.tsrange="tsrange",C.tstzrange="tstzrange";let bJ=(a,b,c={})=>{var d;let e=null!=(d=c.skipTypes)?d:[];return b?Object.keys(b).reduce((c,d)=>(c[d]=bK(d,a,b,e),c),{}):{}},bK=(a,b,c,d)=>{let e=b.find(b=>b.name===a),f=null==e?void 0:e.type,g=c[a];return f&&!d.includes(f)?bL(f,g):bM(g)},bL=(a,b)=>{if("_"===a.charAt(0))return bQ(b,a.slice(1,a.length));switch(a){case V.bool:return bN(b);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return bO(b);case V.json:case V.jsonb:return bP(b);case V.timestamp:return bR(b);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:default:return bM(b)}},bM=a=>a,bN=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},bO=a=>{if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return b}return a},bP=a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(a){console.log(`JSON parse error: ${a}`)}return a},bQ=(a,b)=>{if("string"!=typeof a)return a;let c=a.length-1,d=a[c];if("{"===a[0]&&"}"===d){let d,e=a.slice(1,c);try{d=JSON.parse("["+e+"]")}catch(a){d=e?e.split(","):[]}return d.map(a=>bL(b,a))}return a},bR=a=>"string"==typeof a?a.replace(" ","T"):a,bS=a=>{let b=a;return(b=(b=b.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")+"/api/broadcast"};class bT{constructor(a,b,c={},d=1e4){this.channel=a,this.event=b,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,b){var c;return this._hasReceived(a)&&b(null==(c=this.receivedResp)?void 0:c.response),this.recHooks.push({status:a,callback:b}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let a=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:b}){this.recHooks.filter(b=>b.status===a).forEach(a=>a.callback(b))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}(D=W||(W={})).SYNC="sync",D.JOIN="join",D.LEAVE="leave";class bU{constructor(a,b){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(null==b?void 0:b.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bU.syncState(this.state,a,b,c),this.pendingDiffs.forEach(a=>{this.state=bU.syncDiff(this.state,a,b,c)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=bU.syncDiff(this.state,a,b,c),d())}),this.onJoin((a,b,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:b,newPresences:c})}),this.onLeave((a,b,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:b,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,b,c,d){let e=this.cloneDeep(a),f=this.transformState(b),g={},h={};return this.map(e,(a,b)=>{f[a]||(h[a]=b)}),this.map(f,(a,b)=>{let c=e[a];if(c){let d=b.map(a=>a.presence_ref),e=c.map(a=>a.presence_ref),f=b.filter(a=>0>e.indexOf(a.presence_ref)),i=c.filter(a=>0>d.indexOf(a.presence_ref));f.length>0&&(g[a]=f),i.length>0&&(h[a]=i)}else g[a]=b}),this.syncDiff(e,{joins:g,leaves:h},c,d)}static syncDiff(a,b,c,d){let{joins:e,leaves:f}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(e,(b,d)=>{var e;let f=null!=(e=a[b])?e:[];if(a[b]=this.cloneDeep(d),f.length>0){let c=a[b].map(a=>a.presence_ref),d=f.filter(a=>0>c.indexOf(a.presence_ref));a[b].unshift(...d)}c(b,f,d)}),this.map(f,(b,c)=>{let e=a[b];if(!e)return;let f=c.map(a=>a.presence_ref);e=e.filter(a=>0>f.indexOf(a.presence_ref)),a[b]=e,d(b,e,c),0===e.length&&delete a[b]}),a}static map(a,b){return Object.getOwnPropertyNames(a).map(c=>b(c,a[c]))}static transformState(a){return Object.getOwnPropertyNames(a=this.cloneDeep(a)).reduce((b,c)=>{let d=a[c];return"metas"in d?b[c]=d.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):b[c]=d,b},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(E=X||(X={})).ALL="*",E.INSERT="INSERT",E.UPDATE="UPDATE",E.DELETE="DELETE",(F=Y||(Y={})).BROADCAST="broadcast",F.PRESENCE="presence",F.POSTGRES_CHANGES="postgres_changes",F.SYSTEM="system",(G=Z||(Z={})).SUBSCRIBED="SUBSCRIBED",G.TIMED_OUT="TIMED_OUT",G.CLOSED="CLOSED",G.CHANNEL_ERROR="CHANNEL_ERROR";class bV{constructor(a,b={config:{}},c){var d,e;if(this.topic=a,this.params=b,this.socket=c,this.bindings={},this.state=R.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new bT(this,S.join,this.params,this.timeout),this.rejoinTimer=new bI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=R.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=R.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=R.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=R.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=R.errored,this.rejoinTimer.scheduleTimeout())}),this._on(S.reply,{},(a,b)=>{this._trigger(this._replyEventName(b),a)}),this.presence=new bU(this),this.broadcastEndpointURL=bS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(e=null==(d=this.params.config)?void 0:d.broadcast)?void 0:e.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,b=this.timeout){var c,d,e;if(this.socket.isConnected()||this.socket.connect(),this.state==R.closed){let{config:{broadcast:f,presence:g,private:h}}=this.params,i=null!=(d=null==(c=this.bindings.postgres_changes)?void 0:c.map(a=>a.filter))?d:[],j=!!this.bindings[Y.PRESENCE]&&this.bindings[Y.PRESENCE].length>0||(null==(e=this.params.config.presence)?void 0:e.enabled)===!0,k={},l={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:j}),postgres_changes:i,private:h};this.socket.accessTokenValue&&(k.access_token=this.socket.accessTokenValue),this._onError(b=>null==a?void 0:a(Z.CHANNEL_ERROR,b)),this._onClose(()=>null==a?void 0:a(Z.CLOSED)),this.updateJoinPayload(Object.assign({config:l},k)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",async({postgres_changes:b})=>{var c;if(this.socket.setAuth(),void 0===b){null==a||a(Z.SUBSCRIBED);return}{let d=this.bindings.postgres_changes,e=null!=(c=null==d?void 0:d.length)?c:0,f=[];for(let c=0;c<e;c++){let e=d[c],{filter:{event:g,schema:h,table:i,filter:j}}=e,k=b&&b[c];if(k&&k.event===g&&k.schema===h&&k.table===i&&k.filter===j)f.push(Object.assign(Object.assign({},e),{id:k.id}));else{this.unsubscribe(),this.state=R.errored,null==a||a(Z.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,a&&a(Z.SUBSCRIBED);return}}).receive("error",b=>{this.state=R.errored,null==a||a(Z.CHANNEL_ERROR,Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{null==a||a(Z.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,b={}){return await this.send({type:"presence",event:"track",payload:a},b.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,b,c){return this.state===R.joined&&a===Y.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,b,c)}async send(a,b={}){var c,d;if(this._canPush()||"broadcast"!==a.type)return new Promise(c=>{var d,e,f;let g=this._push(a.type,a,b.timeout||this.timeout);"broadcast"!==a.type||(null==(f=null==(e=null==(d=this.params)?void 0:d.config)?void 0:e.broadcast)?void 0:f.ack)||c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))});{let{event:e,payload:f}=a,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:f,private:this.private}]})};try{let a=await this._fetchWithTimeout(this.broadcastEndpointURL,g,null!=(c=b.timeout)?c:this.timeout);return await (null==(d=a.body)?void 0:d.cancel()),a.ok?"ok":"error"}catch(a){if("AbortError"===a.name)return"timed out";return"error"}}}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=R.leaving;let b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(S.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{(c=new bT(this,S.leave,{},a)).receive("ok",()=>{b(),d("ok")}).receive("timeout",()=>{b(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{null==c||c.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=R.closed,this.bindings={}}async _fetchWithTimeout(a,b,c){let d=new AbortController,e=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(a,Object.assign(Object.assign({},b),{signal:d.signal}));return clearTimeout(e),f}_push(a,b,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new bT(this,a,b,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>100){let a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(a,b,c){return b}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,b,c){var d,e;let f=a.toLocaleLowerCase(),{close:g,error:h,leave:i,join:j}=S;if(c&&[g,h,i,j].indexOf(f)>=0&&c!==this._joinRef())return;let k=this._onMessage(f,b,c);if(b&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?null==(d=this.bindings.postgres_changes)||d.filter(a=>{var b,c,d;return(null==(b=a.filter)?void 0:b.event)==="*"||(null==(d=null==(c=a.filter)?void 0:c.event)?void 0:d.toLocaleLowerCase())===f}).map(a=>a.callback(k,c)):null==(e=this.bindings[f])||e.filter(a=>{var c,d,e,g,h,i;if(!["broadcast","presence","postgres_changes"].includes(f))return a.type.toLocaleLowerCase()===f;if("id"in a){let f=a.id,g=null==(c=a.filter)?void 0:c.event;return f&&(null==(d=b.ids)?void 0:d.includes(f))&&("*"===g||(null==g?void 0:g.toLocaleLowerCase())===(null==(e=b.data)?void 0:e.type.toLocaleLowerCase()))}{let c=null==(h=null==(g=null==a?void 0:a.filter)?void 0:g.event)?void 0:h.toLocaleLowerCase();return"*"===c||c===(null==(i=null==b?void 0:b.event)?void 0:i.toLocaleLowerCase())}}).map(a=>{if("object"==typeof k&&"ids"in k){let a=k.data,{schema:b,table:c,commit_timestamp:d,type:e,errors:f}=a;k=Object.assign(Object.assign({},{schema:b,table:c,commit_timestamp:d,eventType:e,new:{},old:{},errors:f}),this._getPayloadRecords(a))}a.callback(k,c)})}_isClosed(){return this.state===R.closed}_isJoined(){return this.state===R.joined}_isJoining(){return this.state===R.joining}_isLeaving(){return this.state===R.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,b,c){let d=a.toLocaleLowerCase(),e={type:d,filter:b,callback:c};return this.bindings[d]?this.bindings[d].push(e):this.bindings[d]=[e],this}_off(a,b){let c=a.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(a=>{var d;return!((null==(d=a.type)?void 0:d.toLocaleLowerCase())===c&&bV.isEqual(a.filter,b))})),this}static isEqual(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(S.close,{},a)}_onError(a){this._on(S.error,{},b=>a(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=R.joining,this.joinPush.resend(a))}_getPayloadRecords(a){let b={new:{},old:{}};return("INSERT"===a.type||"UPDATE"===a.type)&&(b.new=bJ(a.columns,a.record)),("UPDATE"===a.type||"DELETE"===a.type)&&(b.old=bJ(a.columns,a.old_record)),b}}let bW=()=>{},bX=[1e3,2e3,5e3,1e4],bY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bZ{constructor(b,c){var d;if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bW,this.ref=0,this.reconnectTimer=null,this.logger=bW,this.conn=null,this.sendBuffer=[],this.serializer=new bH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)).catch(a=>{throw Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...a)=>c(...a)},!(null==(d=null==c?void 0:c.params)?void 0:d.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=c.params.apikey,this.endPoint=`${b}/${T.websocket}`,this.httpEndpoint=bS(b),this._initializeOptions(c),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==c?void 0:c.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bG.createWebSocket(this.endpointURL())}catch(b){this._setConnectionState("disconnected");let a=b.message;if(a.includes("Node.js"))throw Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(a,b){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},a?this.conn.close(a,null!=b?b:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){let b=await a.unsubscribe();return 0===this.channels.length&&this.disconnect(),b}async removeAllChannels(){let a=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,b,c){this.logger(a,b,c)}connectionState(){switch(this.conn&&this.conn.readyState){case Q.connecting:return U.Connecting;case Q.open:return U.Open;case Q.closing:return U.Closing;default:return U.Closed}}isConnected(){return this.connectionState()===U.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(a,b={config:{}}){let c=`realtime:${a}`,d=this.getChannels().find(a=>a.topic===c);if(d)return d;{let c=new bV(`realtime:${a}`,b,this);return this.channels.push(c),c}}push(a){let{topic:b,event:c,payload:d,ref:e}=a,f=()=>{this.encode(a,a=>{var b;null==(b=this.conn)||b.send(a)})};this.log("push",`${b} ${c} (${e})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,null==(a=this.conn)||a.close(1e3,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||null==(a=this.reconnectTimer)||a.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let b=this.channels.find(b=>b.topic===a&&(b._isJoined()||b._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${a}"`),b.unsubscribe())}_remove(a){this.channels=this.channels.filter(b=>b.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,a=>{if("phoenix"===a.topic&&"phx_reply"===a.event)try{this.heartbeatCallback("ok"===a.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:b,event:c,payload:d,ref:e}=a,f=e?`(${e})`:"",g=d.status||"";this.log("receive",`${g} ${b} ${c} ${f}`.trim(),d),this.channels.filter(a=>a._isMember(b)).forEach(a=>a._trigger(c,d,e)),this._triggerStateCallbacks("message",a)})}_clearTimer(a){var b;"heartbeat"===a&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===a&&(null==(b=this.reconnectTimer)||b.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{"keepAlive"===a.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var b;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(b=this.reconnectTimer)||b.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(S.error))}_appendParams(a,b){if(0===Object.keys(b).length)return a;let c=a.match(/\?/)?"&":"?",d=new URLSearchParams(b);return`${a}${c}${d}`}_workerObjectUrl(a){let b;if(a)b=a;else{let a=new Blob([bY],{type:"application/javascript"});b=URL.createObjectURL(a)}return b}_setConnectionState(a,b=!1){this._connectionState=a,"connecting"===a?this._wasManualDisconnect=!1:"disconnecting"===a&&(this._wasManualDisconnect=b)}async _performAuth(a=null){let b;b=a||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=b&&(this.accessTokenValue=b,this.channels.forEach(a=>{b&&a.updateJoinPayload({access_token:b,version:"realtime-js/2.75.1"}),a.joinedOnce&&a._isJoined()&&a._push(S.access_token,{access_token:b})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(b=>{this.log("error",`error setting auth in ${a}`,b)})}_triggerStateCallbacks(a,b){try{this.stateChangeCallbacks[a].forEach(c=>{try{c(b)}catch(b){this.log("error",`error in ${a} callback`,b)}})}catch(b){this.log("error",`error triggering ${a} callbacks`,b)}}_setupReconnectionTimer(){this.reconnectTimer=new bI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(a){var b,c,d,e,f,g,h,i,j;this.transport=null!=(b=null==a?void 0:a.transport)?b:null,this.timeout=null!=(c=null==a?void 0:a.timeout)?c:1e4,this.heartbeatIntervalMs=null!=(d=null==a?void 0:a.heartbeatIntervalMs)?d:25e3,this.worker=null!=(e=null==a?void 0:a.worker)&&e,this.accessToken=null!=(f=null==a?void 0:a.accessToken)?f:null,this.heartbeatCallback=null!=(g=null==a?void 0:a.heartbeatCallback)?g:bW,(null==a?void 0:a.params)&&(this.params=a.params),(null==a?void 0:a.logger)&&(this.logger=a.logger),((null==a?void 0:a.logLevel)||(null==a?void 0:a.log_level))&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(h=null==a?void 0:a.reconnectAfterMs)?h:a=>bX[a-1]||1e4,this.encode=null!=(i=null==a?void 0:a.encode)?i:(a,b)=>b(JSON.stringify(a)),this.decode=null!=(j=null==a?void 0:a.decode)?j:this.serializer.decode.bind(this.serializer),this.worker&&(this.workerUrl=null==a?void 0:a.workerUrl)}}class b$ extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function b_(a){return"object"==typeof a&&null!==a&&"__isStorageError"in a}class b0 extends b${constructor(a,b,c){super(a),this.name="StorageApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class b1 extends b${constructor(a,b){super(a),this.name="StorageUnknownError",this.originalError=b}}let b2=b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},b3=a=>{if(Array.isArray(a))return a.map(a=>b3(a));if("function"==typeof a||a!==Object(a))return a;let b={};return Object.entries(a).forEach(([a,c])=>{b[a.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""))]=b3(c)}),b};var b4=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};let b5=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a);function b6(b,c,d,e,f,g){return b4(this,void 0,void 0,function*(){return new Promise((h,i)=>{let j;b(d,(j={method:c,headers:(null==e?void 0:e.headers)||{}},"GET"===c||!g?j:((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(g)?(j.headers=Object.assign({"Content-Type":"application/json"},null==e?void 0:e.headers),j.body=JSON.stringify(g)):j.body=g,(null==e?void 0:e.duplex)&&(j.duplex=e.duplex),Object.assign(Object.assign({},j),f)))).then(a=>{if(!a.ok)throw a;return(null==e?void 0:e.noResolveJson)?a:a.json()}).then(a=>h(a)).catch(b=>b4(void 0,void 0,void 0,function*(){var c,d,f,g;let h=yield(c=void 0,d=void 0,f=void 0,g=function*(){return"undefined"==typeof Response?(yield a.A(59789)).Response:Response},new(f||(f=Promise))(function(a,b){function e(a){try{i(g.next(a))}catch(a){b(a)}}function h(a){try{i(g.throw(a))}catch(a){b(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof f?c:new f(function(a){a(c)})).then(e,h)}i((g=g.apply(c,d||[])).next())}));b instanceof h&&!(null==e?void 0:e.noResolveJson)?b.json().then(a=>{let c=b.status||500,d=(null==a?void 0:a.statusCode)||c+"";i(new b0(b5(a),c,d))}).catch(a=>{i(new b1(b5(a),a))}):i(new b1(b5(b),b))}))})})}function b7(a,b,c,d){return b4(this,void 0,void 0,function*(){return b6(a,"GET",b,c,d)})}function b8(a,b,c,d,e){return b4(this,void 0,void 0,function*(){return b6(a,"POST",b,d,e,c)})}function b9(a,b,c,d,e){return b4(this,void 0,void 0,function*(){return b6(a,"PUT",b,d,e,c)})}function ca(a,b,c,d,e){return b4(this,void 0,void 0,function*(){return b6(a,"DELETE",b,d,e,c)})}class cb{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b}then(a,b){return this.execute().then(a,b)}execute(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}}$=Symbol.toStringTag;let cc=class{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b,this[$]="BlobDownloadBuilder",this.promise=null}asStream(){return new cb(this.downloadFn,this.shouldThrowOnError)}then(a,b){return this.getPromise().then(a,b)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function*(){try{let a=yield this.downloadFn();return{data:yield a.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}};var cd=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};let ce={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cg{constructor(a,b={},c,d){this.shouldThrowOnError=!1,this.url=a,this.headers=b,this.bucketId=c,this.fetch=b2(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,b,c,d){return cd(this,void 0,void 0,function*(){try{let e,f=Object.assign(Object.assign({},cf),d),g=Object.assign(Object.assign({},this.headers),"POST"===a&&{"x-upsert":String(f.upsert)}),h=f.metadata;"undefined"!=typeof Blob&&c instanceof Blob?((e=new FormData).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h)),e.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?((e=c).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h))):(e=c,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),(null==d?void 0:d.headers)&&(g=Object.assign(Object.assign({},g),d.headers));let i=this._removeEmptyFolders(b),j=this._getFinalPath(i),k=yield("PUT"==a?b9:b8)(this.fetch,`${this.url}/object/${j}`,e,Object.assign({headers:g},(null==f?void 0:f.duplex)?{duplex:f.duplex}:{}));return{data:{path:i,id:k.Id,fullPath:k.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}upload(a,b,c){return cd(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,b,c)})}uploadToSignedUrl(a,b,c,d){return cd(this,void 0,void 0,function*(){let e=this._removeEmptyFolders(a),f=this._getFinalPath(e),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",b);try{let a,b=Object.assign({upsert:cf.upsert},d),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});"undefined"!=typeof Blob&&c instanceof Blob?((a=new FormData).append("cacheControl",b.cacheControl),a.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?(a=c).append("cacheControl",b.cacheControl):(a=c,f["cache-control"]=`max-age=${b.cacheControl}`,f["content-type"]=b.contentType);let h=yield b9(this.fetch,g.toString(),a,{headers:f});return{data:{path:e,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(a,b){return cd(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),d=Object.assign({},this.headers);(null==b?void 0:b.upsert)&&(d["x-upsert"]="true");let e=yield b8(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(this.url+e.url),g=f.searchParams.get("token");if(!g)throw new b$("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}update(a,b,c){return cd(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,b,c)})}move(a,b,c){return cd(this,void 0,void 0,function*(){try{return{data:yield b8(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}copy(a,b,c){return cd(this,void 0,void 0,function*(){try{return{data:{path:(yield b8(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}createSignedUrl(a,b,c){return cd(this,void 0,void 0,function*(){try{let d=this._getFinalPath(a),e=yield b8(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:b},(null==c?void 0:c.transform)?{transform:c.transform}:{}),{headers:this.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e={signedUrl:encodeURI(`${this.url}${e.signedURL}${f}`)},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}createSignedUrls(a,b,c){return cd(this,void 0,void 0,function*(){try{let d=yield b8(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:b,paths:a},{headers:this.headers}),e=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:d.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${e}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}download(a,b){let c=void 0!==(null==b?void 0:b.transform)?"render/image/authenticated":"object",d=this.transformOptsToQueryString((null==b?void 0:b.transform)||{}),e=d?`?${d}`:"",f=this._getFinalPath(a);return new cc(()=>b7(this.fetch,`${this.url}/${c}/${f}${e}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(a){return cd(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{let a=yield b7(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers});return{data:b3(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}exists(a){return cd(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{return yield function(a,b,c,d){return b4(this,void 0,void 0,function*(){return b6(a,"HEAD",b,Object.assign(Object.assign({},c),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a)&&a instanceof b1){let b=a.originalError;if([400,404].includes(null==b?void 0:b.status))return{data:!1,error:a}}throw a}})}getPublicUrl(a,b){let c=this._getFinalPath(a),d=[],e=(null==b?void 0:b.download)?`download=${!0===b.download?"":b.download}`:"";""!==e&&d.push(e);let f=void 0!==(null==b?void 0:b.transform),g=this.transformOptsToQueryString((null==b?void 0:b.transform)||{});""!==g&&d.push(g);let h=d.join("&");return""!==h&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f?"render/image":"object"}/public/${c}${h}`)}}}remove(a){return cd(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}list(a,b,c){return cd(this,void 0,void 0,function*(){try{let d=Object.assign(Object.assign(Object.assign({},ce),b),{prefix:a||""});return{data:yield b8(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}listV2(a,b){return cd(this,void 0,void 0,function*(){try{let c=Object.assign({},a);return{data:yield b8(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},b),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return"undefined"!=typeof Buffer?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){let b=[];return a.width&&b.push(`width=${a.width}`),a.height&&b.push(`height=${a.height}`),a.resize&&b.push(`resize=${a.resize}`),a.format&&b.push(`format=${a.format}`),a.quality&&b.push(`quality=${a.quality}`),b.join("&")}}let ch={"X-Client-Info":"storage-js/2.75.1"};var ci=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};class cj{constructor(a,b={},c,d){this.shouldThrowOnError=!1;const e=new URL(a);(null==d?void 0:d.useNewHostname)&&/supabase\.(co|in|red)$/.test(e.hostname)&&!e.hostname.includes("storage.supabase.")&&(e.hostname=e.hostname.replace("supabase.","storage.supabase.")),this.url=e.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ch),b),this.fetch=b2(c)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ci(this,void 0,void 0,function*(){try{return{data:yield b7(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}getBucket(a){return ci(this,void 0,void 0,function*(){try{return{data:yield b7(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}createBucket(a){return ci(this,arguments,void 0,function*(a,b={public:!1}){try{return{data:yield b8(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:b.type,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}updateBucket(a,b){return ci(this,void 0,void 0,function*(){try{return{data:yield b9(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}emptyBucket(a){return ci(this,void 0,void 0,function*(){try{return{data:yield b8(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}deleteBucket(a){return ci(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b_(a))return{data:null,error:a};throw a}})}}class ck extends cj{constructor(a,b={},c,d){super(a,b,c,d)}from(a){return new cg(this.url,this.headers,a,this.fetch)}}let cl="";cl="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let cm={headers:{"X-Client-Info":`supabase-js-${cl}/2.75.1`}},cn={schema:"public"},co={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cp={};var cq=a.i(23952);let cr="2.75.1",cs={"X-Client-Info":`gotrue-js/${cr}`},ct="X-Supabase-Api-Version",cu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class cw extends Error{constructor(a,b,c){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=c}}function cx(a){return"object"==typeof a&&null!==a&&"__isAuthError"in a}class cy extends cw{constructor(a,b,c){super(a,b,c),this.name="AuthApiError",this.status=b,this.code=c}}class cz extends cw{constructor(a,b){super(a),this.name="AuthUnknownError",this.originalError=b}}class cA extends cw{constructor(a,b,c,d){super(a,c,d),this.name=b,this.status=c}}class cB extends cA{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class cC extends cA{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cD extends cA{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class cE extends cA{constructor(a,b=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cF extends cA{constructor(a,b){super(a,"AuthRetryableFetchError",b,void 0)}}function cG(a){return cx(a)&&"AuthRetryableFetchError"===a.name}class cH extends cA{constructor(a,b,c){super(a,"AuthWeakPasswordError",b,"weak_password"),this.reasons=c}}class cI extends cA{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}let cJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cK=" 	\n\r=".split(""),cL=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<cK.length;b+=1)a[cK[b].charCodeAt(0)]=-2;for(let b=0;b<cJ.length;b+=1)a[cJ[b].charCodeAt(0)]=b;return a})();function cM(a,b,c){if(null!==a)for(b.queue=b.queue<<8|a,b.queuedBits+=8;b.queuedBits>=6;)c(cJ[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6;else if(b.queuedBits>0)for(b.queue=b.queue<<6-b.queuedBits,b.queuedBits=6;b.queuedBits>=6;)c(cJ[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6}function cN(a,b,c){let d=cL[a];if(d>-1)for(b.queue=b.queue<<6|d,b.queuedBits+=6;b.queuedBits>=8;)c(b.queue>>b.queuedBits-8&255),b.queuedBits-=8;else if(-2===d)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}function cO(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e={queue:0,queuedBits:0},f=a=>{!function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}}(a,d,c)};for(let b=0;b<a.length;b+=1)cN(a.charCodeAt(b),e,f);return b.join("")}function cP(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};for(let b=0;b<a.length;b+=1)cN(a.charCodeAt(b),c,d);return new Uint8Array(b)}function cQ(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};return a.forEach(a=>cM(a,c,d)),cM(null,c,d),b.join("")}let cR=b=>{let c;return c=b||("undefined"==typeof fetch?(...b)=>a.A(59789).then(({default:a})=>a(...b)):fetch),(...a)=>c(...a)},cS=async(a,b,c)=>{await a.setItem(b,JSON.stringify(c))},cT=async(a,b)=>{let c=await a.getItem(b);if(!c)return null;try{return JSON.parse(c)}catch(a){return c}},cU=async(a,b)=>{await a.removeItem(b)};class cV{constructor(){this.promise=new cV.promiseConstructor((a,b)=>{this.resolve=a,this.reject=b})}}function cW(a){let b=a.split(".");if(3!==b.length)throw new cI("Invalid JWT structure");for(let a=0;a<b.length;a++)if(!cv.test(b[a]))throw new cI("JWT not in base64url format");return{header:JSON.parse(cO(b[0])),payload:JSON.parse(cO(b[1])),signature:cP(b[2]),raw:{header:b[0],payload:b[1]}}}async function cX(a){return await new Promise(b=>{setTimeout(()=>b(null),a)})}function cY(a){return("0"+a.toString(16)).substr(-2)}async function cZ(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>String.fromCharCode(a)).join("")}async function c$(a){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a):btoa(await cZ(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function c_(a,b,c=!1){let d=function(){let a=new Uint32Array(56);if("undefined"==typeof crypto){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=a.length,c="";for(let d=0;d<56;d++)c+=a.charAt(Math.floor(Math.random()*b));return c}return crypto.getRandomValues(a),Array.from(a,cY).join("")}(),e=d;c&&(e+="/PASSWORD_RECOVERY"),await cS(a,`${b}-code-verifier`,e);let f=await c$(d),g=d===f?"plain":"s256";return[f,g]}cV.promiseConstructor=Promise;let c0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,c1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function c2(a){if(!c1.test(a))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function c3(){return new Proxy({},{get:(a,b)=>{if("__isUserNotAvailableProxy"===b)return!0;if("symbol"==typeof b){let a=b.toString();if("Symbol(Symbol.toPrimitive)"===a||"Symbol(Symbol.toStringTag)"===a||"Symbol(util.inspect.custom)"===a)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${b}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function c4(a){return JSON.parse(JSON.stringify(a))}var c5=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};let c6=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),c7=[502,503,504];async function c8(a){var b;let c,d;if(!("object"==typeof a&&null!==a&&"status"in a&&"ok"in a&&"json"in a&&"function"==typeof a.json))throw new cF(c6(a),0);if(c7.includes(a.status))throw new cF(c6(a),a.status);try{c=await a.json()}catch(a){throw new cz(c6(a),a)}let e=function(a){let b=a.headers.get(ct);if(!b||!b.match(c0))return null;try{return new Date(`${b}T00:00:00.0Z`)}catch(a){return null}}(a);if(e&&e.getTime()>=cu["2024-01-01"].timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new cH(c6(c),a.status,(null==(b=c.weak_password)?void 0:b.reasons)||[]);else if("session_not_found"===d)throw new cB}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0))throw new cH(c6(c),a.status,c.weak_password.reasons);throw new cy(c6(c),a.status||500,d)}async function c9(a,b,c,d){var e;let f=Object.assign({},null==d?void 0:d.headers);f[ct]||(f[ct]=cu["2024-01-01"].name),(null==d?void 0:d.jwt)&&(f.Authorization=`Bearer ${d.jwt}`);let g=null!=(e=null==d?void 0:d.query)?e:{};(null==d?void 0:d.redirectTo)&&(g.redirect_to=d.redirectTo);let h=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",i=await da(a,b,c+h,{headers:f,noResolveJson:null==d?void 0:d.noResolveJson},{},null==d?void 0:d.body);return(null==d?void 0:d.xform)?null==d?void 0:d.xform(i):{data:Object.assign({},i),error:null}}async function da(a,b,c,d,e,f){let g,h,i=(h={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==d?void 0:d.headers),h.body=JSON.stringify(f),Object.assign(Object.assign({},h),e)));try{g=await a(c,Object.assign({},i))}catch(a){throw console.error(a),new cF(c6(a),0)}if(g.ok||await c8(g),null==d?void 0:d.noResolveJson)return g;try{return await g.json()}catch(a){await c8(a)}}function db(a){var b,c,d;let e=null;(d=a).access_token&&d.refresh_token&&d.expires_in&&(e=Object.assign({},a),a.expires_at||(e.expires_at=(c=a.expires_in,Math.round(Date.now()/1e3)+c)));return{data:{session:e,user:null!=(b=a.user)?b:a},error:null}}function dc(a){let b=db(a);return!b.error&&a.weak_password&&"object"==typeof a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&"string"==typeof a.weak_password.message&&a.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0)&&(b.data.weak_password=a.weak_password),b}function dd(a){var b;return{data:{user:null!=(b=a.user)?b:a},error:null}}function de(a){return{data:a,error:null}}function df(a){let{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f}=a;return{data:{properties:{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f},user:Object.assign({},c5(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function dg(a){return a}let dh=["global","local","others"];var di=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};class dj{constructor({url:a="",headers:b={},fetch:c}){this.url=a,this.headers=b,this.fetch=cR(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,b=dh[0]){if(0>dh.indexOf(b))throw Error(`@supabase/auth-js: Parameter scope must be one of ${dh.join(", ")}`);try{return await c9(this.fetch,"POST",`${this.url}/logout?scope=${b}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(a){if(cx(a))return{data:null,error:a};throw a}}async inviteUserByEmail(a,b={}){try{return await c9(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:b.data},headers:this.headers,redirectTo:b.redirectTo,xform:dd})}catch(a){if(cx(a))return{data:{user:null},error:a};throw a}}async generateLink(a){try{let{options:b}=a,c=di(a,["options"]),d=Object.assign(Object.assign({},c),b);return"newEmail"in c&&(d.new_email=null==c?void 0:c.newEmail,delete d.newEmail),await c9(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:df,redirectTo:null==b?void 0:b.redirectTo})}catch(a){if(cx(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(a){try{return await c9(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:dd})}catch(a){if(cx(a))return{data:{user:null},error:a};throw a}}async listUsers(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await c9(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:dg});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(cx(a))return{data:{users:[]},error:a};throw a}}async getUserById(a){c2(a);try{return await c9(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:dd})}catch(a){if(cx(a))return{data:{user:null},error:a};throw a}}async updateUserById(a,b){c2(a);try{return await c9(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:b,headers:this.headers,xform:dd})}catch(a){if(cx(a))return{data:{user:null},error:a};throw a}}async deleteUser(a,b=!1){c2(a);try{return await c9(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:b},xform:dd})}catch(a){if(cx(a))return{data:{user:null},error:a};throw a}}async _listFactors(a){c2(a.userId);try{let{data:b,error:c}=await c9(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:b,error:c}}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _deleteFactor(a){c2(a.userId),c2(a.id);try{return{data:await c9(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _listOAuthClients(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await c9(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:dg});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(cx(a))return{data:{clients:[]},error:a};throw a}}async _createOAuthClient(a){try{return await c9(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _getOAuthClient(a){try{return await c9(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(a){try{return await c9(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(a){try{return await c9(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cx(a))return{data:null,error:a};throw a}}}function dk(a={}){return{getItem:b=>a[b]||null,setItem:(b,c)=>{a[b]=c},removeItem:b=>{delete a[b]}}}globalThis;class dl extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}function dm(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}class dn extends Error{constructor({message:a,code:b,cause:c,name:d}){var e;super(a,{cause:c}),this.__isWebAuthnError=!0,this.name=null!=(e=null!=d?d:c instanceof Error?c.name:void 0)?e:"Unknown Error",this.code=b}}class dp extends dn{constructor(a,b){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:b,message:a}),this.name="WebAuthnUnknownError",this.originalError=b}}var dq=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};let dr=new class{createNewAbortSignal(){if(this.controller){let a=Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}let a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){let a=Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}};function ds(a){return"localhost"===a||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}async function dt(a){try{let b=await navigator.credentials.create(a);if(!b)return{data:null,error:new dp("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new dp("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){var c,d,e;let{publicKey:f}=b;if(!f)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new dn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("ConstraintError"===a.name){if((null==(c=f.authenticatorSelection)?void 0:c.requireResidentKey)===!0)return new dn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});else if("conditional"===b.mediation&&(null==(d=f.authenticatorSelection)?void 0:d.userVerification)==="required")return new dn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});else if((null==(e=f.authenticatorSelection)?void 0:e.userVerification)==="required")return new dn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else if("InvalidStateError"===a.name)return new dn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});else if("NotAllowedError"===a.name)return new dn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("NotSupportedError"===a.name)return new dn(0===f.pubKeyCredParams.filter(a=>"public-key"===a.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!ds(b))return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(f.rp.id!==b)return new dn({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("TypeError"===a.name){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new dn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if("UnknownError"===a.name)return new dn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}async function du(a){try{let b=await navigator.credentials.get(a);if(!b)return{data:null,error:new dp("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new dp("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){let{publicKey:c}=b;if(!c)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new dn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("NotAllowedError"===a.name)return new dn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!ds(b))return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(c.rpId!==b)return new dn({message:`The RP ID "${c.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("UnknownError"===a.name)return new dn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}let dv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},dw={userVerification:"preferred",hints:["security-key"]};function dx(...a){let b=a=>null!==a&&"object"==typeof a&&!Array.isArray(a),c=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),d={};for(let e of a)if(e)for(let a in e){let f=e[a];if(void 0!==f)if(Array.isArray(f))d[a]=f;else if(c(f))d[a]=f;else if(b(f)){let c=d[a];b(c)?d[a]=dx(c,f):d[a]=dx(f)}else d[a]=f}return d}class dy{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:b,friendlyName:c,signal:d},e){try{var f,g,h,i;let{data:j,error:k}=await this.client.mfa.challenge({factorId:a,webauthn:b});if(!j)return{data:null,error:k};let l=null!=d?d:dr.createNewAbortSignal();if("create"===j.webauthn.type){let{user:a}=j.webauthn.credential_options.publicKey;a.name||(a.name=`${a.id}:${c}`),a.displayName||(a.displayName=a.name)}switch(j.webauthn.type){case"create":{let b=(f=j.webauthn.credential_options.publicKey,g=null==e?void 0:e.create,dx(dv,f,g||{})),{data:c,error:d}=await dt({publicKey:b,signal:l});if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}case"request":{let b=(h=j.webauthn.credential_options.publicKey,i=null==e?void 0:e.request,dx(dw,h,i||{})),{data:c,error:d}=await du(Object.assign(Object.assign({},j.webauthn.credential_options),{publicKey:b,signal:l}));if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}}}catch(a){if(cx(a))return{data:null,error:a};return{data:null,error:new cz("Unexpected error in challenge",a)}}}async _verify({challengeId:a,factorId:b,webauthn:c}){return this.client.mfa.verify({factorId:b,challengeId:a,webauthn:c})}async _authenticate({factorId:a,webauthn:{rpId:b,rpOrigins:c,signal:d}},e){if(!b)return{data:null,error:new cw("rpId is required for WebAuthn authentication")};try{1;return{data:null,error:new cz("Browser does not support WebAuthn",null)}}catch(a){if(cx(a))return{data:null,error:a};return{data:null,error:new cz("Unexpected error in authenticate",a)}}}async _register({friendlyName:a,rpId:b,rpOrigins:c,signal:d},e){if(!b)return{data:null,error:new cw("rpId is required for WebAuthn registration")};try{1;return{data:null,error:new cz("Browser does not support WebAuthn",null)}}catch(a){if(cx(a))return{data:null,error:a};return{data:null,error:new cz("Unexpected error in register",a)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(a){"undefined"!=typeof self&&(self.globalThis=self)}let dz={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cs,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function dA(a,b,c){return await c()}let dB={};class dC{get jwks(){var a,b;return null!=(b=null==(a=dB[this.storageKey])?void 0:a.jwks)?b:{keys:[]}}set jwks(a){dB[this.storageKey]=Object.assign(Object.assign({},dB[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,b;return null!=(b=null==(a=dB[this.storageKey])?void 0:a.cachedAt)?b:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){dB[this.storageKey]=Object.assign(Object.assign({},dB[this.storageKey]),{cachedAt:a})}constructor(a){this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dC.nextInstanceID,dC.nextInstanceID+=1,this.instanceID;const b=Object.assign(Object.assign({},dz),a);this.logDebugMessages=!!b.debug,"function"==typeof b.debug&&(this.logger=b.debug),this.persistSession=b.persistSession,this.storageKey=b.storageKey,this.autoRefreshToken=b.autoRefreshToken,this.admin=new dj({url:b.url,headers:b.headers,fetch:b.fetch}),this.url=b.url,this.headers=b.headers,this.fetch=cR(b.fetch),this.lock=b.lock||dA,this.detectSessionInUrl=b.detectSessionInUrl,this.flowType=b.flowType,this.hasCustomAuthorizationHeader=b.hasCustomAuthorizationHeader,b.lock?this.lock=b.lock:this.lock=dA,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dy(this)},this.persistSession?(b.storage?this.storage=b.storage:(this.memoryStorage={},this.storage=dk(this.memoryStorage)),b.userStorage&&(this.userStorage=b.userStorage)):(this.memoryStorage={},this.storage=dk(this.memoryStorage)),this.initialize()}_debug(...a){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cr}) ${new Date().toISOString()}`,...a),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let a=function(a){let b={},c=new URL(a);if(c.hash&&"#"===c.hash[0])try{new URLSearchParams(c.hash.substring(1)).forEach((a,c)=>{b[c]=a})}catch(a){}return c.searchParams.forEach((a,c)=>{b[c]=a}),b}(window.location.href);return this._isImplicitGrantCallback(a)||await this._isPKCECallback(a),await this._recoverAndRefresh(),{error:null}}catch(a){if(cx(a))return{error:a};return{error:new cz("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var b,c,d;try{let{data:e,error:f}=await c9(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(c=null==(b=null==a?void 0:a.options)?void 0:b.data)?c:{},gotrue_meta_security:{captcha_token:null==(d=null==a?void 0:a.options)?void 0:d.captchaToken}},xform:db});if(f||!e)return{data:{user:null,session:null},error:f};let g=e.session,h=e.user;return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:h,session:g},error:null}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(a){var b,c,d;try{let e;if("email"in a){let{email:c,password:d,options:f}=a,g=null,h=null;"pkce"===this.flowType&&([g,h]=await c_(this.storage,this.storageKey)),e=await c9(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==f?void 0:f.emailRedirectTo,body:{email:c,password:d,data:null!=(b=null==f?void 0:f.data)?b:{},gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken},code_challenge:g,code_challenge_method:h},xform:db})}else if("phone"in a){let{phone:b,password:f,options:g}=a;e=await c9(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:f,data:null!=(c=null==g?void 0:g.data)?c:{},channel:null!=(d=null==g?void 0:g.channel)?d:"sms",gotrue_meta_security:{captcha_token:null==g?void 0:g.captchaToken}},xform:db})}else throw new cD("You must provide either an email or phone number and a password");let{data:f,error:g}=e;if(g||!f)return{data:{user:null,session:null},error:g};let h=f.session,i=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(a){try{let b;if("email"in a){let{email:c,password:d,options:e}=a;b=await c9(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:dc})}else if("phone"in a){let{phone:c,password:d,options:e}=a;b=await c9(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:dc})}else throw new cD("You must provide either an email or phone number and a password");let{data:c,error:d}=b;if(d)return{data:{user:null,session:null},error:d};if(!c||!c.session||!c.user)return{data:{user:null,session:null},error:new cC};return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(a){var b,c,d,e;return await this._handleProviderSignIn(a.provider,{redirectTo:null==(b=a.options)?void 0:b.redirectTo,scopes:null==(c=a.options)?void 0:c.scopes,queryParams:null==(d=a.options)?void 0:d.queryParams,skipBrowserRedirect:null==(e=a.options)?void 0:e.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){let{chain:b}=a;switch(b){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw Error(`@supabase/auth-js: Unsupported chain "${b}"`)}}async signInWithEthereum(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:k,wallet:l,statement:p,options:q}=a;if("object"!=typeof l||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href),s=await l.request({method:"eth_requestAccounts"}).then(a=>a).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!s||0===s.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let t=dm(s[0]),u=null==(c=null==q?void 0:q.signInWithEthereum)?void 0:c.chainId;u||(u=parseInt(await l.request({method:"eth_chainId"}),16)),n=function(a){var b;let{chainId:c,domain:d,expirationTime:e,issuedAt:f=new Date,nonce:g,notBefore:h,requestId:i,resources:j,scheme:k,uri:l,version:m}=a;if(!Number.isInteger(c))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${c}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!l)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==m)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(null==(b=a.statement)?void 0:b.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`);let n=dm(a.address),o=k?`${k}://${d}`:d,p=a.statement?`${a.statement}
`:"",q=`${o} wants you to sign in with your Ethereum account:
${n}

${p}`,r=`URI: ${l}
Version: ${m}
Chain ID: ${c}${g?`
Nonce: ${g}`:""}
Issued At: ${f.toISOString()}`;if(e&&(r+=`
Expiration Time: ${e.toISOString()}`),h&&(r+=`
Not Before: ${h.toISOString()}`),i&&(r+=`
Request ID: ${i}`),j){let a="\nResources:";for(let b of j){if(!b||"string"!=typeof b)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);a+=`
- ${b}`}r+=a}return`${q}
${r}`}({domain:r.host,address:t,statement:p,uri:r.href,version:"1",chainId:u,nonce:null==(d=null==q?void 0:q.signInWithEthereum)?void 0:d.nonce,issuedAt:null!=(f=null==(e=null==q?void 0:q.signInWithEthereum)?void 0:e.issuedAt)?f:new Date,expirationTime:null==(g=null==q?void 0:q.signInWithEthereum)?void 0:g.expirationTime,notBefore:null==(h=null==q?void 0:q.signInWithEthereum)?void 0:h.notBefore,requestId:null==(i=null==q?void 0:q.signInWithEthereum)?void 0:i.requestId,resources:null==(j=null==q?void 0:q.signInWithEthereum)?void 0:j.resources}),o=await l.request({method:"personal_sign",params:[(m=n,"0x"+Array.from(new TextEncoder().encode(m),a=>a.toString(16).padStart(2,"0")).join("")),t]})}try{let{data:b,error:c}=await c9(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:n,signature:o},(null==(k=a.options)?void 0:k.captchaToken)?{gotrue_meta_security:{captcha_token:null==(l=a.options)?void 0:l.captchaToken}}:null),xform:db});if(c)throw c;if(!b||!b.session||!b.user)return{data:{user:null,session:null},error:new cC};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:c}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSolana(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:l,wallet:m,statement:p,options:q}=a;if("object"!=typeof m||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href);if("signIn"in m&&m.signIn){let a,b=await m.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==q?void 0:q.signInWithSolana),{version:"1",domain:r.host,uri:r.href}),p?{statement:p}:null));if(Array.isArray(b)&&b[0]&&"object"==typeof b[0])a=b[0];else if(b&&"object"==typeof b&&"signedMessage"in b&&"signature"in b)a=b;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in a&&"signature"in a&&("string"==typeof a.signedMessage||a.signedMessage instanceof Uint8Array)&&a.signature instanceof Uint8Array)n="string"==typeof a.signedMessage?a.signedMessage:new TextDecoder().decode(a.signedMessage),o=a.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in m)||"function"!=typeof m.signMessage||!("publicKey"in m)||"object"!=typeof m||!m.publicKey||!("toBase58"in m.publicKey)||"function"!=typeof m.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");n=[`${r.host} wants you to sign in with your Solana account:`,m.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${r.href}`,`Issued At: ${null!=(d=null==(c=null==q?void 0:q.signInWithSolana)?void 0:c.issuedAt)?d:new Date().toISOString()}`,...(null==(e=null==q?void 0:q.signInWithSolana)?void 0:e.notBefore)?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...(null==(f=null==q?void 0:q.signInWithSolana)?void 0:f.expirationTime)?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...(null==(g=null==q?void 0:q.signInWithSolana)?void 0:g.chainId)?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...(null==(h=null==q?void 0:q.signInWithSolana)?void 0:h.nonce)?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...(null==(i=null==q?void 0:q.signInWithSolana)?void 0:i.requestId)?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...(null==(k=null==(j=null==q?void 0:q.signInWithSolana)?void 0:j.resources)?void 0:k.length)?["Resources",...q.signInWithSolana.resources.map(a=>`- ${a}`)]:[]].join("\n");let a=await m.signMessage(new TextEncoder().encode(n),"utf8");if(!a||!(a instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");o=a}}try{let{data:b,error:c}=await c9(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:n,signature:cQ(o)},(null==(l=a.options)?void 0:l.captchaToken)?{gotrue_meta_security:{captcha_token:null==(m=a.options)?void 0:m.captchaToken}}:null),xform:db});if(c)throw c;if(!b||!b.session||!b.user)return{data:{user:null,session:null},error:new cC};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:c}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async _exchangeCodeForSession(a){let b=await cT(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(null!=b?b:"").split("/");try{let{data:b,error:e}=await c9(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:c},xform:db});if(await cU(this.storage,`${this.storageKey}-code-verifier`),e)throw e;if(!b||!b.session||!b.user)return{data:{user:null,session:null,redirectType:null},error:new cC};return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign(Object.assign({},b),{redirectType:null!=d?d:null}),error:e}}catch(a){if(cx(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(a){try{let{options:b,provider:c,token:d,access_token:e,nonce:f}=a,{data:g,error:h}=await c9(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:e,nonce:f,gotrue_meta_security:{captcha_token:null==b?void 0:b.captchaToken}},xform:db});if(h)return{data:{user:null,session:null},error:h};if(!g||!g.session||!g.user)return{data:{user:null,session:null},error:new cC};return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:h}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(a){var b,c,d,e,f;try{if("email"in a){let{email:d,options:e}=a,f=null,g=null;"pkce"===this.flowType&&([f,g]=await c_(this.storage,this.storageKey));let{error:h}=await c9(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:null!=(b=null==e?void 0:e.data)?b:{},create_user:null==(c=null==e?void 0:e.shouldCreateUser)||c,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in a){let{phone:b,options:c}=a,{data:g,error:h}=await c9(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:null!=(d=null==c?void 0:c.data)?d:{},create_user:null==(e=null==c?void 0:c.shouldCreateUser)||e,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken},channel:null!=(f=null==c?void 0:c.channel)?f:"sms"}});return{data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:h}}throw new cD("You must provide either an email or phone number.")}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(a){var b,c;try{let d,e;"options"in a&&(d=null==(b=a.options)?void 0:b.redirectTo,e=null==(c=a.options)?void 0:c.captchaToken);let{data:f,error:g}=await c9(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:e}}),redirectTo:d,xform:db});if(g)throw g;if(!f)throw Error("An error occurred on token verification.");let h=f.session,i=f.user;return(null==h?void 0:h.access_token)&&(await this._saveSession(h),await this._notifyAllSubscribers("recovery"==a.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:i,session:h},error:null}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(a){var b,c,d;try{let e=null,f=null;return"pkce"===this.flowType&&([e,f]=await c_(this.storage,this.storageKey)),await c9(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:null!=(c=null==(b=a.options)?void 0:b.redirectTo)?c:void 0}),(null==(d=null==a?void 0:a.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:e,code_challenge_method:f}),headers:this.headers,xform:de})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;if(c)throw c;if(!b)throw new cB;let{error:d}=await c9(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:b.access_token});return{data:{user:null,session:null},error:d}})}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async resend(a){try{let b=`${this.url}/resend`;if("email"in a){let{email:c,type:d,options:e}=a,{error:f}=await c9(this.fetch,"POST",b,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},redirectTo:null==e?void 0:e.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in a){let{phone:c,type:d,options:e}=a,{data:f,error:g}=await c9(this.fetch,"POST",b,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}}});return{data:{user:null,session:null,messageId:null==f?void 0:f.message_id},error:g}}throw new cD("You must provide either an email or phone number and a type")}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(a,b){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){let a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await b()))();return this.pendingInLock.push((async()=>{try{await c}catch(a){}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let a=b();for(this.pendingInLock.push((async()=>{try{await a}catch(a){}})()),await a;this.pendingInLock.length;){let a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{let b=await this.__loadSession();return await a(b)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let a=null,b=await cT(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",b),null!==b&&(this._isValidSession(b)?a=b:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};let c=!!a.expires_at&&1e3*a.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",a.expires_at),!c){if(this.userStorage){let b=await cT(this.userStorage,this.storageKey+"-user");(null==b?void 0:b.user)?a.user=b.user:a.user=c3()}if(this.storage.isServer&&a.user){let b=this.suppressGetSessionWarning;a=new Proxy(a,{get:(a,c,d)=>(b||"user"!==c||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,c,d))})}return{data:{session:a},error:null}}let{data:d,error:e}=await this._callRefreshToken(a.refresh_token);if(e)return{data:{session:null},error:e};return{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{if(a)return await c9(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:dd});return await this._useSession(async a=>{var b,c,d;let{data:e,error:f}=a;if(f)throw f;return(null==(b=e.session)?void 0:b.access_token)||this.hasCustomAuthorizationHeader?await c9(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0,xform:dd}):{data:{user:null},error:new cB}})}catch(a){if(cx(a))return cx(a)&&"AuthSessionMissingError"===a.name&&(await this._removeSession(),await cU(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(a,b={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,b))}async _updateUser(a,b={}){try{return await this._useSession(async c=>{let{data:d,error:e}=c;if(e)throw e;if(!d.session)throw new cB;let f=d.session,g=null,h=null;"pkce"===this.flowType&&null!=a.email&&([g,h]=await c_(this.storage,this.storageKey));let{data:i,error:j}=await c9(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==b?void 0:b.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:h}),jwt:f.access_token,xform:dd});if(j)throw j;return f.user=i.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(a){if(cx(a))return{data:{user:null},error:a};throw a}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new cB;let b=Date.now()/1e3,c=b,d=!0,e=null,{payload:f}=cW(a.access_token);if(f.exp&&(d=(c=f.exp)<=b),d){let{data:b,error:c}=await this._callRefreshToken(a.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!b)return{data:{user:null,session:null},error:null};e=b}else{let{data:d,error:f}=await this._getUser(a.access_token);if(f)throw f;e={access_token:a.access_token,refresh_token:a.refresh_token,user:d.user,token_type:"bearer",expires_in:c-b,expires_at:c},await this._saveSession(e),await this._notifyAllSubscribers("SIGNED_IN",e)}return{data:{user:e.user,session:e},error:null}}catch(a){if(cx(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async b=>{var c;if(!a){let{data:d,error:e}=b;if(e)throw e;a=null!=(c=d.session)?c:void 0}if(!(null==a?void 0:a.refresh_token))throw new cB;let{data:d,error:e}=await this._callRefreshToken(a.refresh_token);return e?{data:{user:null,session:null},error:e}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(a,b){try{throw new cE("No browser detected.")}catch(a){if(cx(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){let b=await cT(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&b)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{error:e};let f=null==(c=d.session)?void 0:c.access_token;if(f){let{error:b}=await this.admin.signOut(f,a);if(b&&!(cx(b)&&"AuthApiError"===b.name&&(404===b.status||401===b.status||403===b.status)))return{error:b}}return"others"!==a&&(await this._removeSession(),await cU(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(a){let b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){let b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)}),c={id:b,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",b),this.stateChangeEmitters.delete(b)}};return this._debug("#onAuthStateChange()","registered callback with id",b),this.stateChangeEmitters.set(b,c),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(b)})})(),{data:{subscription:c}}}async _emitInitialSession(a){return await this._useSession(async b=>{var c,d;try{let{data:{session:d},error:e}=b;if(e)throw e;await (null==(c=this.stateChangeEmitters.get(a))?void 0:c.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(b){await (null==(d=this.stateChangeEmitters.get(a))?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",b),console.error(b)}})}async resetPasswordForEmail(a,b={}){let c=null,d=null;"pkce"===this.flowType&&([c,d]=await c_(this.storage,this.storageKey,!0));try{return await c9(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:b.captchaToken}},headers:this.headers,redirectTo:b.redirectTo})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async getUserIdentities(){var a;try{let{data:b,error:c}=await this.getUser();if(c)throw c;return{data:{identities:null!=(a=b.user.identities)?a:[]},error:null}}catch(a){if(cx(a))return{data:null,error:a};throw a}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){try{let{data:b,error:c}=await this._useSession(async b=>{var c,d,e,f,g;let{data:h,error:i}=b;if(i)throw i;let j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:null==(c=a.options)?void 0:c.redirectTo,scopes:null==(d=a.options)?void 0:d.scopes,queryParams:null==(e=a.options)?void 0:e.queryParams,skipBrowserRedirect:!0});return await c9(this.fetch,"GET",j,{headers:this.headers,jwt:null!=(g=null==(f=h.session)?void 0:f.access_token)?g:void 0})});if(c)throw c;return{data:{provider:a.provider,url:null==b?void 0:b.url},error:null}}catch(b){if(cx(b))return{data:{provider:a.provider,url:null},error:b};throw b}}async linkIdentityIdToken(a){return await this._useSession(async b=>{var c;try{let{error:d,data:{session:e}}=b;if(d)throw d;let{options:f,provider:g,token:h,access_token:i,nonce:j}=a,{data:k,error:l}=await c9(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(c=null==e?void 0:e.access_token)?c:void 0,body:{provider:g,id_token:h,access_token:i,nonce:j,link_identity:!0,gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken}},xform:db});if(l)return{data:{user:null,session:null},error:l};if(!k||!k.session||!k.user)return{data:{user:null,session:null},error:new cC};return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),{data:k,error:l}}catch(a){if(cx(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)throw f;return await c9(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0})})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _refreshAccessToken(a){let b=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(b,"begin");try{var c,d;let e=Date.now();return await (c=async c=>(c>0&&await cX(200*Math.pow(2,c-1)),this._debug(b,"refreshing attempt",c),await c9(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:db})),d=(a,b)=>{let c=200*Math.pow(2,a);return b&&cG(b)&&Date.now()+c-e<3e4},new Promise((a,b)=>{(async()=>{for(let e=0;e<1/0;e++)try{let b=await c(e);if(!d(e,null,b))return void a(b)}catch(a){if(!d(e,a))return void b(a)}})()}))}catch(a){if(this._debug(b,"error",a),cx(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(b,"end")}}_isValidSession(a){return"object"==typeof a&&null!==a&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,b){let c=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:b.redirectTo,scopes:b.scopes,queryParams:b.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",b,"url",c),{data:{provider:a,url:c},error:null}}async _recoverAndRefresh(){var a,b;let c="#_recoverAndRefresh()";this._debug(c,"begin");try{let d=await cT(this.storage,this.storageKey);if(d&&this.userStorage){let b=await cT(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:d.user},await cS(this.userStorage,this.storageKey+"-user",b)),d.user=null!=(a=null==b?void 0:b.user)?a:c3()}else if(d&&!d.user&&!d.user){let a=await cT(this.storage,this.storageKey+"-user");a&&(null==a?void 0:a.user)?(d.user=a.user,await cU(this.storage,this.storageKey+"-user"),await cS(this.storage,this.storageKey,d)):d.user=c3()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),null!==d&&await this._removeSession();return}let e=(null!=(b=d.expires_at)?b:1/0)*1e3-Date.now()<9e4;if(this._debug(c,`session has${e?"":" not"} expired with margin of 90000s`),e){if(this.autoRefreshToken&&d.refresh_token){let{error:a}=await this._callRefreshToken(d.refresh_token);a&&(console.error(a),cG(a)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(d.user&&!0===d.user.__isUserNotAvailableProxy)try{let{data:a,error:b}=await this._getUser(d.access_token);!b&&(null==a?void 0:a.user)?(d.user=a.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(c,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(a){this._debug(c,"error",a),console.error(a);return}finally{this._debug(c,"end")}}async _callRefreshToken(a){var b,c;if(!a)throw new cB;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new cV;let{data:b,error:c}=await this._refreshAccessToken(a);if(c)throw c;if(!b.session)throw new cB;await this._saveSession(b.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",b.session);let d={data:b.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(d,"error",a),cx(a)){let c={data:null,error:a};return cG(a)||await this._removeSession(),null==(b=this.refreshingDeferred)||b.resolve(c),c}throw null==(c=this.refreshingDeferred)||c.reject(a),a}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,b,c=!0){let d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",b,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:a,session:b});let d=[],e=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(a,b)}catch(a){d.push(a)}});if(await Promise.all(e),d.length>0){for(let a=0;a<d.length;a+=1)console.error(d[a]);throw d[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;let b=Object.assign({},a),c=b.user&&!0===b.user.__isUserNotAvailableProxy;if(this.userStorage){!c&&b.user&&await cS(this.userStorage,this.storageKey+"-user",{user:b.user});let a=Object.assign({},b);delete a.user;let d=c4(a);await cS(this.storage,this.storageKey,d)}else{let a=c4(b);await cS(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await cU(this.storage,this.storageKey),await cU(this.storage,this.storageKey+"-code-verifier"),await cU(this.storage,this.storageKey+"-user"),this.userStorage&&await cU(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()"),this.visibilityChangedCallback,this.visibilityChangedCallback=null}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let a=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=a,a&&"object"==typeof a&&"function"==typeof a.unref?a.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let a=Date.now();try{return await this._useSession(async b=>{let{data:{session:c}}=b;if(!c||!c.refresh_token||!c.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let d=Math.floor((1e3*c.expires_at-a)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),d<=3&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof dl)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){return this._debug("#_handleVisibilityChange()"),this.autoRefreshToken&&this.startAutoRefresh(),!1}async _onVisibilityChanged(a){let b=`#_onVisibilityChanged(${a})`;this._debug(b,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(b,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,b,c){let d=[`provider=${encodeURIComponent(b)}`];if((null==c?void 0:c.redirectTo)&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),(null==c?void 0:c.scopes)&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),"pkce"===this.flowType){let[a,b]=await c_(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push(c.toString())}if(null==c?void 0:c.queryParams){let a=new URLSearchParams(c.queryParams);d.push(a.toString())}return(null==c?void 0:c.skipBrowserRedirect)&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?{data:null,error:e}:await c9(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _enroll(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)return{data:null,error:f};let g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},"phone"===a.factorType?{phone:a.phone}:"totp"===a.factorType?{issuer:a.issuer}:{}),{data:h,error:i}=await c9(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:null==(c=null==e?void 0:e.session)?void 0:c.access_token});return i?{data:null,error:i}:("totp"===a.factorType&&"totp"===h.type&&(null==(d=null==h?void 0:h.totp)?void 0:d.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(a){if(cx(a))return{data:null,error:a};throw a}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c,d,e;let{data:f,error:g}=b;if(g)return{data:null,error:g};let h=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:"create"===a.webauthn.type?(d=a.webauthn.credential_response,"toJSON"in d&&"function"==typeof d.toJSON?d.toJSON():{id:d.id,rawId:d.id,response:{attestationObject:cQ(new Uint8Array(d.response.attestationObject)),clientDataJSON:cQ(new Uint8Array(d.response.clientDataJSON))},type:"public-key",clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:null!=(e=d.authenticatorAttachment)?e:void 0}):function(a){var b;if("toJSON"in a&&"function"==typeof a.toJSON)return a.toJSON();let c=a.getClientExtensionResults(),d=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:cQ(new Uint8Array(d.authenticatorData)),clientDataJSON:cQ(new Uint8Array(d.clientDataJSON)),signature:cQ(new Uint8Array(d.signature)),userHandle:d.userHandle?cQ(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:null!=(b=a.authenticatorAttachment)?b:void 0}}(a.webauthn.credential_response)})}:{code:a.code}),{data:i,error:j}=await c9(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:h,headers:this.headers,jwt:null==(c=null==f?void 0:f.session)?void 0:c.access_token});return j?{data:null,error:j}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:j})})}catch(a){if(cx(a))return{data:null,error:a};throw a}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return{data:null,error:e};let f=await c9(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token});if(f.error)return f;let{data:g}=f;if("webauthn"!==g.type)return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(a);let{challenge:b,user:c,excludeCredentials:d}=a,e=dq(a,["challenge","user","excludeCredentials"]),f=cP(b).buffer,g=Object.assign(Object.assign({},c),{id:cP(c.id).buffer}),h=Object.assign(Object.assign({},e),{challenge:f,user:g});if(d&&d.length>0){h.excludeCredentials=Array(d.length);for(let a=0;a<d.length;a++){let b=d[a];h.excludeCredentials[a]=Object.assign(Object.assign({},b),{id:cP(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(a);let{challenge:b,allowCredentials:c}=a,d=dq(a,["challenge","allowCredentials"]),e=cP(b).buffer,f=Object.assign(Object.assign({},d),{challenge:e});if(c&&c.length>0){f.allowCredentials=Array(c.length);for(let a=0;a<c.length;a++){let b=c[a];f.allowCredentials[a]=Object.assign(Object.assign({},b),{id:cP(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return f}(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(cx(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(a){let{data:b,error:c}=await this._challenge({factorId:a.factorId});return c?{data:null,error:c}:await this._verify({factorId:a.factorId,challengeId:b.id,code:a.code})}async _listFactors(){var a;let{data:{user:b},error:c}=await this.getUser();if(c)return{data:null,error:c};let d={all:[],phone:[],totp:[],webauthn:[]};for(let c of null!=(a=null==b?void 0:b.factors)?a:[])d.all.push(c),"verified"===c.status&&d[c.factor_type].push(c);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async a=>{var b,c;let{data:{session:d},error:e}=a;if(e)return{data:null,error:e};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:f}=cW(d.access_token),g=null;f.aal&&(g=f.aal);let h=g;return(null!=(c=null==(b=d.user.factors)?void 0:b.filter(a=>"verified"===a.status))?c:[]).length>0&&(h="aal2"),{data:{currentLevel:g,nextLevel:h,currentAuthenticationMethods:f.amr||[]},error:null}}))}async fetchJwk(a,b={keys:[]}){let c=b.keys.find(b=>b.kid===a);if(c)return c;let d=Date.now();if((c=this.jwks.keys.find(b=>b.kid===a))&&this.jwks_cached_at+6e5>d)return c;let{data:e,error:f}=await c9(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return e.keys&&0!==e.keys.length&&(this.jwks=e,this.jwks_cached_at=d,c=e.keys.find(b=>b.kid===a))?c:null}async getClaims(a,b={}){try{var c;let d,e=a;if(!e){let{data:a,error:b}=await this.getSession();if(b||!a.session)return{data:null,error:b};e=a.session.access_token}let{header:f,payload:g,signature:h,raw:{header:i,payload:j}}=cW(e);(null==b?void 0:b.allowExpired)||function(a){if(!a)throw Error("Missing exp claim");if(a<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(g.exp);let k=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,(null==b?void 0:b.keys)?{keys:b.keys}:null==b?void 0:b.jwks);if(!k){let{error:a}=await this.getUser(e);if(a)throw a;return{data:{claims:g,header:f,signature:h},error:null}}let l=function(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(f.alg),m=await crypto.subtle.importKey("jwk",k,l,!0,["verify"]);if(!await crypto.subtle.verify(l,m,h,(c=`${i}.${j}`,d=[],!function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(c,a=>d.push(a)),new Uint8Array(d))))throw new cI("Invalid JWT signature");return{data:{claims:g,header:f,signature:h},error:null}}catch(a){if(cx(a))return{data:null,error:a};throw a}}}dC.nextInstanceID=0;let dD=dC;class dE extends dD{constructor(a){super(a)}}(function(){if("undefined"==typeof process)return!1;let a=process.version;if(null==a)return!1;let b=a.match(/^v(\d+)\./);return!!b&&18>=parseInt(b[1],10)})()&&console.warn(`  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`);let dF="opmvuhlheenygwbqwljk",dG="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wbXZ1aGxoZWVueWd3YnF3bGprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2OTkxMjMsImV4cCI6MjA3NjI3NTEyM30.teI8M7lSDyunxTtcltbw8duAGnjJ8P8hgZXbRlDFYb4",dH=new class a{constructor(a,b,c){var d,e,f;this.supabaseUrl=a,this.supabaseKey=b;const g=function(a){let b=null==a?void 0:a.trim();if(!b)throw Error("supabaseUrl is required.");if(!b.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b.endsWith("/")?b:b+"/")}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(a);if(!b)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const h=`sb-${g.hostname.split(".")[0]}-auth-token`,i=function(a,b){var c,d;let{db:e,auth:f,realtime:g,global:h}=a,{db:i,auth:j,realtime:k,global:l}=b,m={db:Object.assign(Object.assign({},i),e),auth:Object.assign(Object.assign({},j),f),realtime:Object.assign(Object.assign({},k),g),storage:{},global:Object.assign(Object.assign(Object.assign({},l),h),{headers:Object.assign(Object.assign({},null!=(c=null==l?void 0:l.headers)?c:{}),null!=(d=null==h?void 0:h.headers)?d:{})}),accessToken:()=>{var a,b,c,d;return a=this,b=void 0,d=function*(){return""},new(c=void 0,c=Promise)(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}};return a.accessToken?m.accessToken=a.accessToken:delete m.accessToken,m}(null!=c?c:{},{db:cn,realtime:cp,auth:Object.assign(Object.assign({},co),{storageKey:h}),global:cm});this.storageKey=null!=(d=i.auth.storageKey)?d:"",this.headers=null!=(e=i.global.headers)?e:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(a,b)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(f=i.auth)?f:{},this.headers,i.global.fetch),this.fetch=((a,b,c)=>{let d,e=(d=c||("undefined"==typeof fetch?cq.default:fetch),(...a)=>d(...a)),f="undefined"==typeof Headers?cq.Headers:Headers;return(c,d)=>{var g,h,i,j;return g=void 0,h=void 0,i=void 0,j=function*(){var g;let h=null!=(g=yield b())?g:a,i=new f(null==d?void 0:d.headers);return i.has("apikey")||i.set("apikey",a),i.has("Authorization")||i.set("Authorization",`Bearer ${h}`),e(c,Object.assign(Object.assign({},d),{headers:i}))},new(i||(i=Promise))(function(a,b){function c(a){try{e(j.next(a))}catch(a){b(a)}}function d(a){try{e(j.throw(a))}catch(a){b(a)}}function e(b){var e;b.done?a(b.value):((e=b.value)instanceof i?e:new i(function(a){a(e)})).then(c,d)}e((j=j.apply(g,h||[])).next())})}})(b,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.rest=new bA(new URL("rest/v1",g).href,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),this.storage=new ck(this.storageUrl.href,this.headers,this.fetch,null==c?void 0:c.storage),i.accessToken||this._listenForAuthEvents()}get functions(){return new bz(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,b={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,b,c)}channel(a,b={config:{}}){return this.realtime.channel(a,b)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function*(){var a,b;if(this.accessToken)return yield this.accessToken();let{data:c}=yield this.auth.getSession();return null!=(b=null==(a=c.session)?void 0:a.access_token)?b:this.supabaseKey},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,storageKey:f,flowType:g,lock:h,debug:i},j,k){let l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dE({url:this.authUrl.href,headers:Object.assign(Object.assign({},l),j),storageKey:f,autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,flowType:g,lock:h,debug:i,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(a=>"authorization"===a.toLowerCase())})}_initRealtimeClient(a){return new bZ(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},null==a?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,b)=>{this._handleTokenChanged(a,"CLIENT",null==b?void 0:b.access_token)})}_handleTokenChanged(a,b,c){("TOKEN_REFRESHED"===a||"SIGNED_IN"===a)&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):"SIGNED_OUT"===a&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0)}}("https://opmvuhlheenygwbqwljk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wbXZ1aGxoZWVueWd3YnF3bGprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2OTkxMjMsImV4cCI6MjA3NjI3NTEyM30.teI8M7lSDyunxTtcltbw8duAGnjJ8P8hgZXbRlDFYb4",void 0);function dI({onLogin:a,onBack:b,onSignup:c}){let d=(0,af.useRouter)(),[e,f]=(0,ad.useState)(""),[g,h]=(0,ad.useState)(""),[i,j]=(0,ad.useState)(!1),[k,l]=(0,ad.useState)(null);async function m(b){if(b.preventDefault(),l(null),!e||!g)return void l("Please fill in both email and password.");j(!0);try{if(a)await a(e,g);else{let{data:a,error:b}=await dH.auth.signInWithPassword({email:e,password:g});if(b)return void l(b.message);if(!a.session)return void l("Login failed. Please try again.");d.push("/")}}catch(a){console.error(a),l("Something went wrong while logging in. Please try again.")}finally{j(!1)}}return(0,ac.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50",children:(0,ac.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900/70 p-8 shadow-xl",children:[(0,ac.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Sign in to MoveYSplash"}),(0,ac.jsx)("p",{className:"text-sm text-slate-400 mb-6",children:"Enter your credentials to get back into your workspace."}),(0,ac.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,ac.jsxs)("label",{className:"block text-sm",children:[(0,ac.jsx)("span",{className:"mb-1 block text-slate-200",children:"Email"}),(0,ac.jsx)("input",{type:"email",autoComplete:"email",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-indigo-500",value:e,onChange:a=>f(a.target.value)})]}),(0,ac.jsxs)("label",{className:"block text-sm",children:[(0,ac.jsx)("span",{className:"mb-1 block text-slate-200",children:"Password"}),(0,ac.jsx)("input",{type:"password",autoComplete:"current-password",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-indigo-500",value:g,onChange:a=>h(a.target.value)})]}),k&&(0,ac.jsx)("p",{className:"text-sm text-red-400 border border-red-500/30 rounded-md px-3 py-2 bg-red-950/30",children:k}),(0,ac.jsx)("button",{type:"submit",disabled:i,className:"w-full rounded-lg bg-indigo-500 py-2 text-sm font-medium hover:bg-indigo-400 disabled:opacity-60",children:i?"Signing in":"Sign in"})]}),(0,ac.jsxs)("div",{className:"mt-6 flex items-center justify-between text-sm text-slate-400",children:[(0,ac.jsx)("button",{type:"button",onClick:b,className:"rounded-lg border border-slate-800 px-3 py-2 text-slate-200 hover:border-slate-700",children:"Back"}),(0,ac.jsx)("button",{type:"button",onClick:c,className:"text-indigo-300 hover:text-indigo-200 underline-offset-4 hover:underline",children:"Create account"})]})]})})}function dJ({onSignup:a,onBack:b,onLogin:c}){let d=(0,af.useRouter)(),[e,f]=(0,ad.useState)(""),[g,h]=(0,ad.useState)(""),[i,j]=(0,ad.useState)(""),[k,l]=(0,ad.useState)(""),[m,n]=(0,ad.useState)(!1),[o,p]=(0,ad.useState)(null),[q,r]=(0,ad.useState)(null);async function s(b){if(b.preventDefault(),p(null),r(null),!e||!i||!k||!g)return void p("Please fill in your name, birthdate, email, and password.");if(k.length<8)return void p("Password should be at least 8 characters long.");n(!0);try{if(a)await a(e,i,k,g);else{let{data:a,error:b}=await dH.auth.signUp({email:i,password:k,options:{data:{name:e,birthdate:g},emailRedirectTo:`${window.location.origin}/`}});if(b)return void p(b.message);if(!a.user)return void p("Signup failed. Please try again.");r("Account created. Check your email to confirm your address, then sign in."),setTimeout(()=>d.push("/login"),2500)}}catch(a){console.error(a),p("Something went wrong while signing up. Please try again.")}finally{n(!1)}}return(0,ac.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50",children:(0,ac.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900/70 p-8 shadow-xl",children:[(0,ac.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Create your account"}),(0,ac.jsx)("p",{className:"text-sm text-slate-400 mb-6",children:"We'll send a confirmation link before you can log in."}),(0,ac.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,ac.jsxs)("label",{className:"block text-sm",children:[(0,ac.jsx)("span",{className:"mb-1 block text-slate-200",children:"Full name"}),(0,ac.jsx)("input",{type:"text",autoComplete:"name",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-indigo-500",value:e,onChange:a=>f(a.target.value)})]}),(0,ac.jsxs)("label",{className:"block text-sm",children:[(0,ac.jsx)("span",{className:"mb-1 block text-slate-200",children:"Birthdate"}),(0,ac.jsx)("input",{type:"date",autoComplete:"bday",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-indigo-500",value:g,onChange:a=>h(a.target.value)})]}),(0,ac.jsxs)("label",{className:"block text-sm",children:[(0,ac.jsx)("span",{className:"mb-1 block text-slate-200",children:"Email"}),(0,ac.jsx)("input",{type:"email",autoComplete:"email",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-indigo-500",value:i,onChange:a=>j(a.target.value)})]}),(0,ac.jsxs)("label",{className:"block text-sm",children:[(0,ac.jsx)("span",{className:"mb-1 block text-slate-200",children:"Password"}),(0,ac.jsx)("input",{type:"password",autoComplete:"new-password",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:border-indigo-500",value:k,onChange:a=>l(a.target.value)})]}),o&&(0,ac.jsx)("p",{className:"text-sm text-red-400 border border-red-500/30 rounded-md px-3 py-2 bg-red-950/30",children:o}),q&&(0,ac.jsx)("p",{className:"text-sm text-emerald-400 border border-emerald-500/30 rounded-md px-3 py-2 bg-emerald-950/30",children:q}),(0,ac.jsx)("button",{type:"submit",disabled:m,className:"w-full rounded-lg bg-indigo-500 py-2 text-sm font-medium hover:bg-indigo-400 disabled:opacity-60",children:m?"Creating account":"Sign up"})]}),(0,ac.jsxs)("div",{className:"mt-6 flex items-center justify-between text-sm text-slate-400",children:[(0,ac.jsx)("button",{type:"button",onClick:b,className:"rounded-lg border border-slate-800 px-3 py-2 text-slate-200 hover:border-slate-700",children:"Back"}),(0,ac.jsx)("button",{type:"button",onClick:c,className:"text-indigo-300 hover:text-indigo-200 underline-offset-4 hover:underline",children:"Already have an account?"})]})]})})}var dK=globalThis?.document?ad.useLayoutEffect:()=>{},dL=a.i(35112),dM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),dN=a.i(87610);function dO(){return()=>{}}var dP="Avatar",[dQ,dR]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(dP),[dS,dT]=dQ(dP),dU=ad.forwardRef((a,b)=>{let{__scopeAvatar:c,...d}=a,[e,f]=ad.useState("idle");return(0,ac.jsx)(dS,{scope:c,imageLoadingStatus:e,onImageLoadingStatusChange:f,children:(0,ac.jsx)(dM.span,{...d,ref:b})})});dU.displayName=dP;var dV="AvatarImage",dW=ad.forwardRef((a,b)=>{var c;let d,{__scopeAvatar:e,src:f,onLoadingStatusChange:g=()=>{},...h}=a,i=dT(dV,e),j=function(a,{referrerPolicy:b,crossOrigin:c}){let d=(0,dN.useSyncExternalStore)(dO,()=>!0,()=>!1),e=ad.useRef(null),f=d?(e.current||(e.current=new window.Image),e.current):null,[g,h]=ad.useState(()=>dZ(f,a));return dK(()=>{h(dZ(f,a))},[f,a]),dK(()=>{let a=a=>()=>{h(a)};if(!f)return;let d=a("loaded"),e=a("error");return f.addEventListener("load",d),f.addEventListener("error",e),b&&(f.referrerPolicy=b),"string"==typeof c&&(f.crossOrigin=c),()=>{f.removeEventListener("load",d),f.removeEventListener("error",e)}},[f,c,b]),g}(f,h),k=(c=a=>{g(a),i.onImageLoadingStatusChange(a)},d=ad.useRef(c),ad.useEffect(()=>{d.current=c}),ad.useMemo(()=>(...a)=>d.current?.(...a),[]));return dK(()=>{"idle"!==j&&k(j)},[j,k]),"loaded"===j?(0,ac.jsx)(dM.img,{...h,ref:b,src:f}):null});dW.displayName=dV;var dX="AvatarFallback",dY=ad.forwardRef((a,b)=>{let{__scopeAvatar:c,delayMs:d,...e}=a,f=dT(dX,c),[g,h]=ad.useState(void 0===d);return ad.useEffect(()=>{if(void 0!==d){let a=window.setTimeout(()=>h(!0),d);return()=>window.clearTimeout(a)}},[d]),g&&"loaded"!==f.imageLoadingStatus?(0,ac.jsx)(dM.span,{...e,ref:b}):null});function dZ(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function d$({className:a,...b}){return(0,ac.jsx)(dU,{"data-slot":"avatar",className:bc("relative flex size-10 shrink-0 overflow-hidden rounded-full",a),...b})}function d_({className:a,...b}){return(0,ac.jsx)(dW,{"data-slot":"avatar-image",className:bc("aspect-square size-full",a),...b})}function d0({className:a,...b}){return(0,ac.jsx)(dY,{"data-slot":"avatar-fallback",className:bc("bg-muted flex size-full items-center justify-center rounded-full",a),...b})}dY.displayName=dX;var d1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function d2(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}var d3=globalThis?.document?ad.useLayoutEffect:()=>{},d4=a=>{var b;let c,d,{present:e,children:f}=a,g=function(a){var b,c;let[d,e]=ad.useState(),f=ad.useRef(null),g=ad.useRef(a),h=ad.useRef("none"),[i,j]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},ad.useReducer((a,b)=>c[a][b]??a,b));return ad.useEffect(()=>{let a=d5(f.current);h.current="mounted"===i?a:"none"},[i]),d3(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=d5(b);a?j("MOUNT"):"none"===e||b?.display==="none"?j("UNMOUNT"):c&&d!==e?j("ANIMATION_OUT"):j("UNMOUNT"),g.current=a}},[a,j]),d3(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=d5(f.current).includes(CSS.escape(c.animationName));if(c.target===d&&e&&(j("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=d5(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}j("ANIMATION_END")},[d,j]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:ad.useCallback(a=>{f.current=a?getComputedStyle(a):null,e(a)},[])}}(e),h="function"==typeof f?f({present:g.isPresent}):ad.Children.only(f),i=function(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=d2(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():d2(a[b],null)}}}}(...a),a)}(g.ref,(b=h,(d=(c=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.ref:(d=(c=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof f||g.isPresent?ad.cloneElement(h,{ref:i}):null};function d5(a){return a?.animationName||"none"}function d6(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function d7(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=d6(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():d6(a[b],null)}}}}(...a),a)}function d8(a){let b=ad.useRef(a);return ad.useEffect(()=>{b.current=a}),ad.useMemo(()=>(...a)=>b.current?.(...a),[])}d4.displayName="Presence";var d9=ad.createContext(void 0);function ea(a){let b=ad.useContext(d9);return a||b||"ltr"}var eb=globalThis?.document?ad.useLayoutEffect:()=>{};function ec(a,[b,c]){return Math.min(c,Math.max(b,a))}function ed(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}var ee="ScrollArea",[ef,eg]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(ee),[eh,ei]=ef(ee),ej=ad.forwardRef((a,b)=>{let{__scopeScrollArea:c,type:d="hover",dir:e,scrollHideDelay:f=600,...g}=a,[h,i]=ad.useState(null),[j,k]=ad.useState(null),[l,m]=ad.useState(null),[n,o]=ad.useState(null),[p,q]=ad.useState(null),[r,s]=ad.useState(0),[t,u]=ad.useState(0),[v,w]=ad.useState(!1),[x,y]=ad.useState(!1),z=d7(b,a=>i(a)),A=ea(e);return(0,ac.jsx)(eh,{scope:c,type:d,dir:A,scrollHideDelay:f,scrollArea:h,viewport:j,onViewportChange:k,content:l,onContentChange:m,scrollbarX:n,onScrollbarXChange:o,scrollbarXEnabled:v,onScrollbarXEnabledChange:w,scrollbarY:p,onScrollbarYChange:q,scrollbarYEnabled:x,onScrollbarYEnabledChange:y,onCornerWidthChange:s,onCornerHeightChange:u,children:(0,ac.jsx)(d1.div,{dir:A,...g,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":r+"px","--radix-scroll-area-corner-height":t+"px",...a.style}})})});ej.displayName=ee;var ek="ScrollAreaViewport",el=ad.forwardRef((a,b)=>{let{__scopeScrollArea:c,children:d,nonce:e,...f}=a,g=ei(ek,c),h=d7(b,ad.useRef(null),g.onViewportChange);return(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:e}),(0,ac.jsx)(d1.div,{"data-radix-scroll-area-viewport":"",...f,ref:h,style:{overflowX:g.scrollbarXEnabled?"scroll":"hidden",overflowY:g.scrollbarYEnabled?"scroll":"hidden",...a.style},children:(0,ac.jsx)("div",{ref:g.onContentChange,style:{minWidth:"100%",display:"table"},children:d})})]})});el.displayName=ek;var em="ScrollAreaScrollbar",en=ad.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=ei(em,a.__scopeScrollArea),{onScrollbarXEnabledChange:f,onScrollbarYEnabledChange:g}=e,h="horizontal"===a.orientation;return ad.useEffect(()=>(h?f(!0):g(!0),()=>{h?f(!1):g(!1)}),[h,f,g]),"hover"===e.type?(0,ac.jsx)(eo,{...d,ref:b,forceMount:c}):"scroll"===e.type?(0,ac.jsx)(ep,{...d,ref:b,forceMount:c}):"auto"===e.type?(0,ac.jsx)(eq,{...d,ref:b,forceMount:c}):"always"===e.type?(0,ac.jsx)(er,{...d,ref:b}):null});en.displayName=em;var eo=ad.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=ei(em,a.__scopeScrollArea),[f,g]=ad.useState(!1);return ad.useEffect(()=>{let a=e.scrollArea,b=0;if(a){let c=()=>{window.clearTimeout(b),g(!0)},d=()=>{b=window.setTimeout(()=>g(!1),e.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(b),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[e.scrollArea,e.scrollHideDelay]),(0,ac.jsx)(d4,{present:c||f,children:(0,ac.jsx)(eq,{"data-state":f?"visible":"hidden",...d,ref:b})})}),ep=ad.forwardRef((a,b)=>{var c;let{forceMount:d,...e}=a,f=ei(em,a.__scopeScrollArea),g="horizontal"===a.orientation,h=eJ(()=>j("SCROLL_END"),100),[i,j]=(c={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},ad.useReducer((a,b)=>c[a][b]??a,"hidden"));return ad.useEffect(()=>{if("idle"===i){let a=window.setTimeout(()=>j("HIDE"),f.scrollHideDelay);return()=>window.clearTimeout(a)}},[i,f.scrollHideDelay,j]),ad.useEffect(()=>{let a=f.viewport,b=g?"scrollLeft":"scrollTop";if(a){let c=a[b],d=()=>{let d=a[b];c!==d&&(j("SCROLL"),h()),c=d};return a.addEventListener("scroll",d),()=>a.removeEventListener("scroll",d)}},[f.viewport,g,j,h]),(0,ac.jsx)(d4,{present:d||"hidden"!==i,children:(0,ac.jsx)(er,{"data-state":"hidden"===i?"hidden":"visible",...e,ref:b,onPointerEnter:ed(a.onPointerEnter,()=>j("POINTER_ENTER")),onPointerLeave:ed(a.onPointerLeave,()=>j("POINTER_LEAVE"))})})}),eq=ad.forwardRef((a,b)=>{let c=ei(em,a.__scopeScrollArea),{forceMount:d,...e}=a,[f,g]=ad.useState(!1),h="horizontal"===a.orientation,i=eJ(()=>{if(c.viewport){let a=c.viewport.offsetWidth<c.viewport.scrollWidth,b=c.viewport.offsetHeight<c.viewport.scrollHeight;g(h?a:b)}},10);return eK(c.viewport,i),eK(c.content,i),(0,ac.jsx)(d4,{present:d||f,children:(0,ac.jsx)(er,{"data-state":f?"visible":"hidden",...e,ref:b})})}),er=ad.forwardRef((a,b)=>{let{orientation:c="vertical",...d}=a,e=ei(em,a.__scopeScrollArea),f=ad.useRef(null),g=ad.useRef(0),[h,i]=ad.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),j=eE(h.viewport,h.content),k={...d,sizes:h,onSizesChange:i,hasThumb:!!(j>0&&j<1),onThumbChange:a=>f.current=a,onThumbPointerUp:()=>g.current=0,onThumbPointerDown:a=>g.current=a};function l(a,b){return function(a,b,c,d="ltr"){let e=eF(c),f=b||e/2,g=c.scrollbar.paddingStart+f,h=c.scrollbar.size-c.scrollbar.paddingEnd-(e-f),i=c.content-c.viewport;return eH([g,h],"ltr"===d?[0,i]:[-1*i,0])(a)}(a,g.current,h,b)}return"horizontal"===c?(0,ac.jsx)(es,{...k,ref:b,onThumbPositionChange:()=>{if(e.viewport&&f.current){let a=eG(e.viewport.scrollLeft,h,e.dir);f.current.style.transform=`translate3d(${a}px, 0, 0)`}},onWheelScroll:a=>{e.viewport&&(e.viewport.scrollLeft=a)},onDragScroll:a=>{e.viewport&&(e.viewport.scrollLeft=l(a,e.dir))}}):"vertical"===c?(0,ac.jsx)(et,{...k,ref:b,onThumbPositionChange:()=>{if(e.viewport&&f.current){let a=eG(e.viewport.scrollTop,h);f.current.style.transform=`translate3d(0, ${a}px, 0)`}},onWheelScroll:a=>{e.viewport&&(e.viewport.scrollTop=a)},onDragScroll:a=>{e.viewport&&(e.viewport.scrollTop=l(a))}}):null}),es=ad.forwardRef((a,b)=>{let{sizes:c,onSizesChange:d,...e}=a,f=ei(em,a.__scopeScrollArea),[g,h]=ad.useState(),i=ad.useRef(null),j=d7(b,i,f.onScrollbarXChange);return ad.useEffect(()=>{i.current&&h(getComputedStyle(i.current))},[i]),(0,ac.jsx)(ew,{"data-orientation":"horizontal",...e,ref:j,sizes:c,style:{bottom:0,left:"rtl"===f.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===f.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eF(c)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.x),onDragScroll:b=>a.onDragScroll(b.x),onWheelScroll:(b,c)=>{if(f.viewport){var d,e;let g=f.viewport.scrollLeft+b.deltaX;a.onWheelScroll(g),d=g,e=c,d>0&&d<e&&b.preventDefault()}},onResize:()=>{i.current&&f.viewport&&g&&d({content:f.viewport.scrollWidth,viewport:f.viewport.offsetWidth,scrollbar:{size:i.current.clientWidth,paddingStart:eD(g.paddingLeft),paddingEnd:eD(g.paddingRight)}})}})}),et=ad.forwardRef((a,b)=>{let{sizes:c,onSizesChange:d,...e}=a,f=ei(em,a.__scopeScrollArea),[g,h]=ad.useState(),i=ad.useRef(null),j=d7(b,i,f.onScrollbarYChange);return ad.useEffect(()=>{i.current&&h(getComputedStyle(i.current))},[i]),(0,ac.jsx)(ew,{"data-orientation":"vertical",...e,ref:j,sizes:c,style:{top:0,right:"ltr"===f.dir?0:void 0,left:"rtl"===f.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eF(c)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.y),onDragScroll:b=>a.onDragScroll(b.y),onWheelScroll:(b,c)=>{if(f.viewport){var d,e;let g=f.viewport.scrollTop+b.deltaY;a.onWheelScroll(g),d=g,e=c,d>0&&d<e&&b.preventDefault()}},onResize:()=>{i.current&&f.viewport&&g&&d({content:f.viewport.scrollHeight,viewport:f.viewport.offsetHeight,scrollbar:{size:i.current.clientHeight,paddingStart:eD(g.paddingTop),paddingEnd:eD(g.paddingBottom)}})}})}),[eu,ev]=ef(em),ew=ad.forwardRef((a,b)=>{let{__scopeScrollArea:c,sizes:d,hasThumb:e,onThumbChange:f,onThumbPointerUp:g,onThumbPointerDown:h,onThumbPositionChange:i,onDragScroll:j,onWheelScroll:k,onResize:l,...m}=a,n=ei(em,c),[o,p]=ad.useState(null),q=d7(b,a=>p(a)),r=ad.useRef(null),s=ad.useRef(""),t=n.viewport,u=d.content-d.viewport,v=d8(k),w=d8(i),x=eJ(l,10);function y(a){r.current&&j({x:a.clientX-r.current.left,y:a.clientY-r.current.top})}return ad.useEffect(()=>{let a=a=>{let b=a.target;o?.contains(b)&&v(a,u)};return document.addEventListener("wheel",a,{passive:!1}),()=>document.removeEventListener("wheel",a,{passive:!1})},[t,o,u,v]),ad.useEffect(w,[d,w]),eK(o,x),eK(n.content,x),(0,ac.jsx)(eu,{scope:c,scrollbar:o,hasThumb:e,onThumbChange:d8(f),onThumbPointerUp:d8(g),onThumbPositionChange:w,onThumbPointerDown:d8(h),children:(0,ac.jsx)(d1.div,{...m,ref:q,style:{position:"absolute",...m.style},onPointerDown:ed(a.onPointerDown,a=>{0===a.button&&(a.target.setPointerCapture(a.pointerId),r.current=o.getBoundingClientRect(),s.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",n.viewport&&(n.viewport.style.scrollBehavior="auto"),y(a))}),onPointerMove:ed(a.onPointerMove,y),onPointerUp:ed(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),document.body.style.webkitUserSelect=s.current,n.viewport&&(n.viewport.style.scrollBehavior=""),r.current=null})})})}),ex="ScrollAreaThumb",ey=ad.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=ev(ex,a.__scopeScrollArea);return(0,ac.jsx)(d4,{present:c||e.hasThumb,children:(0,ac.jsx)(ez,{ref:b,...d})})}),ez=ad.forwardRef((a,b)=>{let{__scopeScrollArea:c,style:d,...e}=a,f=ei(ex,c),g=ev(ex,c),{onThumbPositionChange:h}=g,i=d7(b,a=>g.onThumbChange(a)),j=ad.useRef(void 0),k=eJ(()=>{j.current&&(j.current(),j.current=void 0)},100);return ad.useEffect(()=>{let a=f.viewport;if(a){let b=()=>{k(),j.current||(j.current=eI(a,h),h())};return h(),a.addEventListener("scroll",b),()=>a.removeEventListener("scroll",b)}},[f.viewport,k,h]),(0,ac.jsx)(d1.div,{"data-state":g.hasThumb?"visible":"hidden",...e,ref:i,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...d},onPointerDownCapture:ed(a.onPointerDownCapture,a=>{let b=a.target.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top;g.onThumbPointerDown({x:c,y:d})}),onPointerUp:ed(a.onPointerUp,g.onThumbPointerUp)})});ey.displayName=ex;var eA="ScrollAreaCorner",eB=ad.forwardRef((a,b)=>{let c=ei(eA,a.__scopeScrollArea),d=!!(c.scrollbarX&&c.scrollbarY);return"scroll"!==c.type&&d?(0,ac.jsx)(eC,{...a,ref:b}):null});eB.displayName=eA;var eC=ad.forwardRef((a,b)=>{let{__scopeScrollArea:c,...d}=a,e=ei(eA,c),[f,g]=ad.useState(0),[h,i]=ad.useState(0),j=!!(f&&h);return eK(e.scrollbarX,()=>{let a=e.scrollbarX?.offsetHeight||0;e.onCornerHeightChange(a),i(a)}),eK(e.scrollbarY,()=>{let a=e.scrollbarY?.offsetWidth||0;e.onCornerWidthChange(a),g(a)}),j?(0,ac.jsx)(d1.div,{...d,ref:b,style:{width:f,height:h,position:"absolute",right:"ltr"===e.dir?0:void 0,left:"rtl"===e.dir?0:void 0,bottom:0,...a.style}}):null});function eD(a){return a?parseInt(a,10):0}function eE(a,b){let c=a/b;return isNaN(c)?0:c}function eF(a){let b=eE(a.viewport,a.content),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd;return Math.max((a.scrollbar.size-c)*b,18)}function eG(a,b,c="ltr"){let d=eF(b),e=b.scrollbar.paddingStart+b.scrollbar.paddingEnd,f=b.scrollbar.size-e,g=b.content-b.viewport,h=ec(a,"ltr"===c?[0,g]:[-1*g,0]);return eH([0,g],[0,f-d])(h)}function eH(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}var eI=(a,b=()=>{})=>{let c={left:a.scrollLeft,top:a.scrollTop},d=0;return!function e(){let f={left:a.scrollLeft,top:a.scrollTop},g=c.left!==f.left,h=c.top!==f.top;(g||h)&&b(),c=f,d=window.requestAnimationFrame(e)}(),()=>window.cancelAnimationFrame(d)};function eJ(a,b){let c=d8(a),d=ad.useRef(0);return ad.useEffect(()=>()=>window.clearTimeout(d.current),[]),ad.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(c,b)},[c,b])}function eK(a,b){let c=d8(b);eb(()=>{let b=0;if(a){let d=new ResizeObserver(()=>{cancelAnimationFrame(b),b=window.requestAnimationFrame(c)});return d.observe(a),()=>{window.cancelAnimationFrame(b),d.unobserve(a)}}},[a,c])}function eL({className:a,children:b,...c}){return(0,ac.jsxs)(ej,{"data-slot":"scroll-area",className:bc("relative",a),...c,children:[(0,ac.jsx)(el,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:b}),(0,ac.jsx)(eM,{}),(0,ac.jsx)(eB,{})]})}function eM({className:a,orientation:b="vertical",...c}){return(0,ac.jsx)(en,{"data-slot":"scroll-area-scrollbar",orientation:b,className:bc("flex touch-none p-px transition-colors select-none","vertical"===b&&"h-full w-2.5 border-l border-l-transparent","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent",a),...c,children:(0,ac.jsx)(ey,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function eN(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function eO(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function eP(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function eQ(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=eP(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():eP(a[b],null)}}}}(...a),a)}function eR(a){let b=a+"CollectionProvider",[c,d]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=a=>{let{scope:b,children:c}=a,d=ad.default.useRef(null),f=ad.default.useRef(new Map).current;return(0,ac.jsx)(e,{scope:b,itemMap:f,collectionRef:d,children:c})};g.displayName=b;let h=a+"CollectionSlot",i=ah(h),j=ad.default.forwardRef((a,b)=>{let{scope:c,children:d}=a,e=eQ(b,f(h,c).collectionRef);return(0,ac.jsx)(i,{ref:e,children:d})});j.displayName=h;let k=a+"CollectionItemSlot",l="data-radix-collection-item",m=ah(k),n=ad.default.forwardRef((a,b)=>{let{scope:c,children:d,...e}=a,g=ad.default.useRef(null),h=eQ(b,g),i=f(k,c);return ad.default.useEffect(()=>(i.itemMap.set(g,{ref:g,...e}),()=>void i.itemMap.delete(g))),(0,ac.jsx)(m,{...{[l]:""},ref:h,children:d})});return n.displayName=k,[{Provider:g,Slot:j,ItemSlot:n},function(b){let c=f(a+"CollectionConsumer",b);return ad.default.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${l}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},d]}var eS=new WeakMap;function eT(a,b){var c,d;let e,f,g;if("at"in Array.prototype)return Array.prototype.at.call(a,b);let h=(c=a,d=b,e=c.length,(g=(f=eU(d))>=0?f:e+f)<0||g>=e?-1:g);return -1===h?void 0:a[h]}function eU(a){return a!=a||0===a?0:Math.trunc(a)}function eV(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}(class a extends Map{#a;constructor(a){super(a),this.#a=[...super.keys()],eS.set(this,!0)}set(a,b){return eS.get(this)&&(this.has(a)?this.#a[this.#a.indexOf(a)]=a:this.#a.push(a)),super.set(a,b),this}insert(a,b,c){let d,e=this.has(b),f=this.#a.length,g=eU(a),h=g>=0?g:f+g,i=h<0||h>=f?-1:h;if(i===this.size||e&&i===this.size-1||-1===i)return this.set(b,c),this;let j=this.size+ +!e;g<0&&h++;let k=[...this.#a],l=!1;for(let a=h;a<j;a++)if(h===a){let f=k[a];k[a]===b&&(f=k[a+1]),e&&this.delete(b),d=this.get(f),this.set(b,c)}else{l||k[a-1]!==b||(l=!0);let c=k[l?a:a-1],e=d;d=this.get(c),this.delete(c),this.set(c,e)}return this}with(b,c,d){let e=new a(this);return e.insert(b,c,d),e}before(a){let b=this.#a.indexOf(a)-1;if(!(b<0))return this.entryAt(b)}setBefore(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d,b,c)}after(a){let b=this.#a.indexOf(a);if(-1!==(b=-1===b||b===this.size-1?-1:b+1))return this.entryAt(b)}setAfter(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d+1,b,c)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#a=[],super.clear()}delete(a){let b=super.delete(a);return b&&this.#a.splice(this.#a.indexOf(a),1),b}deleteAt(a){let b=this.keyAt(a);return void 0!==b&&this.delete(b)}at(a){let b=eT(this.#a,a);if(void 0!==b)return this.get(b)}entryAt(a){let b=eT(this.#a,a);if(void 0!==b)return[b,this.get(b)]}indexOf(a){return this.#a.indexOf(a)}keyAt(a){return eT(this.#a,a)}from(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.at(d)}keyFrom(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.keyAt(d)}find(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return d;c++}}findIndex(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return c;c++}return -1}filter(b,c){let d=[],e=0;for(let a of this)Reflect.apply(b,c,[a,e,this])&&d.push(a),e++;return new a(d)}map(b,c){let d=[],e=0;for(let a of this)d.push([a[0],Reflect.apply(b,c,[a,e,this])]),e++;return new a(d)}reduce(...a){let[b,c]=a,d=0,e=c??this.at(0);for(let c of this)e=0===d&&1===a.length?c:Reflect.apply(b,this,[e,c,d,this]),d++;return e}reduceRight(...a){let[b,c]=a,d=c??this.at(-1);for(let c=this.size-1;c>=0;c--){let e=this.at(c);d=c===this.size-1&&1===a.length?e:Reflect.apply(b,this,[d,e,c,this])}return d}toSorted(b){return new a([...this.entries()].sort(b))}toReversed(){let b=new a;for(let a=this.size-1;a>=0;a--){let c=this.keyAt(a),d=this.get(c);b.set(c,d)}return b}toSpliced(...b){let c=[...this.entries()];return c.splice(...b),new a(c)}slice(b,c){let d=new a,e=this.size-1;if(void 0===b)return d;b<0&&(b+=this.size),void 0!==c&&c>0&&(e=c-1);for(let a=b;a<=e;a++){let b=this.keyAt(a),c=this.get(b);d.set(b,c)}return d}every(a,b){let c=0;for(let d of this){if(!Reflect.apply(a,b,[d,c,this]))return!1;c++}return!0}some(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return!0;c++}return!1}});var eW=globalThis?.document?ad.useLayoutEffect:()=>{},eX=ad[" useId ".trim().toString()]||(()=>void 0),eY=0;function eZ(a){let[b,c]=ad.useState(eX());return eW(()=>{a||c(a=>a??String(eY++))},[a]),a||(b?`radix-${b}`:"")}var e$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),e_=globalThis?.document?ad.useLayoutEffect:()=>{};globalThis?.document&&ad.useLayoutEffect,ad[" useEffectEvent ".trim().toString()],ad[" useInsertionEffect ".trim().toString()];var e0=ad[" useInsertionEffect ".trim().toString()]||e_;Symbol("RADIX:SYNC_STATE");var e1="rovingFocusGroup.onEntryFocus",e2={bubbles:!1,cancelable:!0},e3="RovingFocusGroup",[e4,e5,e6]=eR(e3),[e7,e8]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(e3,[e6]),[e9,fa]=e7(e3),fb=ad.forwardRef((a,b)=>(0,ac.jsx)(e4.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,ac.jsx)(e4.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,ac.jsx)(fc,{...a,ref:b})})}));fb.displayName=e3;var fc=ad.forwardRef((a,b)=>{let c,{__scopeRovingFocusGroup:d,orientation:e,loop:f=!1,dir:g,currentTabStopId:h,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:j,onEntryFocus:k,preventScrollOnEntryFocus:l=!1,...m}=a,n=ad.useRef(null),o=function(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=eV(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():eV(a[b],null)}}}}(...a),a)}(b,n),p=ea(g),[q,r]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return e0(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:h,defaultProp:i??null,onChange:j,caller:e3}),[s,t]=ad.useState(!1),u=(c=ad.useRef(k),ad.useEffect(()=>{c.current=k}),ad.useMemo(()=>(...a)=>c.current?.(...a),[])),v=e5(d),w=ad.useRef(!1),[x,y]=ad.useState(0);return ad.useEffect(()=>{let a=n.current;if(a)return a.addEventListener(e1,u),()=>a.removeEventListener(e1,u)},[u]),(0,ac.jsx)(e9,{scope:d,orientation:e,dir:p,loop:f,currentTabStopId:q,onItemFocus:ad.useCallback(a=>r(a),[r]),onItemShiftTab:ad.useCallback(()=>t(!0),[]),onFocusableItemAdd:ad.useCallback(()=>y(a=>a+1),[]),onFocusableItemRemove:ad.useCallback(()=>y(a=>a-1),[]),children:(0,ac.jsx)(e$.div,{tabIndex:s||0===x?-1:0,"data-orientation":e,...m,ref:o,style:{outline:"none",...a.style},onMouseDown:eO(a.onMouseDown,()=>{w.current=!0}),onFocus:eO(a.onFocus,a=>{let b=!w.current;if(a.target===a.currentTarget&&b&&!s){let b=new CustomEvent(e1,e2);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=v().filter(a=>a.focusable);fg([a.find(a=>a.active),a.find(a=>a.id===q),...a].filter(Boolean).map(a=>a.ref.current),l)}}w.current=!1}),onBlur:eO(a.onBlur,()=>t(!1))})})}),fd="RovingFocusGroupItem",fe=ad.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,focusable:d=!0,active:e=!1,tabStopId:f,children:g,...h}=a,i=eZ(),j=f||i,k=fa(fd,c),l=k.currentTabStopId===j,m=e5(c),{onFocusableItemAdd:n,onFocusableItemRemove:o,currentTabStopId:p}=k;return ad.useEffect(()=>{if(d)return n(),()=>o()},[d,n,o]),(0,ac.jsx)(e4.ItemSlot,{scope:c,id:j,focusable:d,active:e,children:(0,ac.jsx)(e$.span,{tabIndex:l?0:-1,"data-orientation":k.orientation,...h,ref:b,onMouseDown:eO(a.onMouseDown,a=>{d?k.onItemFocus(j):a.preventDefault()}),onFocus:eO(a.onFocus,()=>k.onItemFocus(j)),onKeyDown:eO(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void k.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return ff[e]}(a,k.orientation,k.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=m().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=k.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>fg(e))}}),children:"function"==typeof g?g({isCurrentTabStop:l,hasTabStop:null!=p}):g})})});fe.displayName=fd;var ff={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fg(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var fh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),fi=globalThis?.document?ad.useLayoutEffect:()=>{},fj=ad[" useInsertionEffect ".trim().toString()]||fi;Symbol("RADIX:SYNC_STATE");var fk="Tabs",[fl,fm]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(fk,[e8]),fn=e8(),[fo,fp]=fl(fk),fq=ad.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,onValueChange:e,defaultValue:f,orientation:g="horizontal",dir:h,activationMode:i="automatic",...j}=a,k=ea(h),[l,m]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return fj(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:d,onChange:e,defaultProp:f??"",caller:fk});return(0,ac.jsx)(fo,{scope:c,baseId:eZ(),value:l,onValueChange:m,orientation:g,dir:k,activationMode:i,children:(0,ac.jsx)(fh.div,{dir:k,"data-orientation":g,...j,ref:b})})});fq.displayName=fk;var fr="TabsList",fs=ad.forwardRef((a,b)=>{let{__scopeTabs:c,loop:d=!0,...e}=a,f=fp(fr,c),g=fn(c);return(0,ac.jsx)(fb,{asChild:!0,...g,orientation:f.orientation,dir:f.dir,loop:d,children:(0,ac.jsx)(fh.div,{role:"tablist","aria-orientation":f.orientation,...e,ref:b})})});fs.displayName=fr;var ft="TabsTrigger",fu=ad.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,disabled:e=!1,...f}=a,g=fp(ft,c),h=fn(c),i=fx(g.baseId,d),j=fy(g.baseId,d),k=d===g.value;return(0,ac.jsx)(fe,{asChild:!0,...h,focusable:!e,active:k,children:(0,ac.jsx)(fh.button,{type:"button",role:"tab","aria-selected":k,"aria-controls":j,"data-state":k?"active":"inactive","data-disabled":e?"":void 0,disabled:e,id:i,...f,ref:b,onMouseDown:eN(a.onMouseDown,a=>{e||0!==a.button||!1!==a.ctrlKey?a.preventDefault():g.onValueChange(d)}),onKeyDown:eN(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&g.onValueChange(d)}),onFocus:eN(a.onFocus,()=>{let a="manual"!==g.activationMode;k||e||!a||g.onValueChange(d)})})})});fu.displayName=ft;var fv="TabsContent",fw=ad.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,forceMount:e,children:f,...g}=a,h=fp(fv,c),i=fx(h.baseId,d),j=fy(h.baseId,d),k=d===h.value,l=ad.useRef(k);return ad.useEffect(()=>{let a=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,ac.jsx)(d4,{present:e||k,children:({present:c})=>(0,ac.jsx)(fh.div,{"data-state":k?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":i,hidden:!c,id:j,tabIndex:0,...g,ref:b,style:{...a.style,animationDuration:l.current?"0s":void 0},children:c&&f})})});function fx(a,b){return`${a}-trigger-${b}`}function fy(a,b){return`${a}-content-${b}`}function fz({className:a,...b}){return(0,ac.jsx)(fq,{"data-slot":"tabs",className:bc("flex flex-col gap-2",a),...b})}function fA({className:a,...b}){return(0,ac.jsx)(fs,{"data-slot":"tabs-list",className:bc("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",a),...b})}function fB({className:a,...b}){return(0,ac.jsx)(fu,{"data-slot":"tabs-trigger",className:bc("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...b})}function fC({className:a,...b}){return(0,ac.jsx)(fw,{"data-slot":"tabs-content",className:bc("flex-1 outline-none",a),...b})}fw.displayName=fv;let fD=an("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function fE({className:a,variant:b,asChild:c=!1,...d}){return(0,ac.jsx)(c?ai:"span",{"data-slot":"badge",className:bc(fD({variant:b}),a),...d})}let fF=bj("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),fG=bj("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),fH=bj("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fI=bj("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),fJ=bj("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),fK=bj("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fL=Array(12).fill(0),fM=({visible:a,className:b})=>ad.default.createElement("div",{className:["sonner-loading-wrapper",b].filter(Boolean).join(" "),"data-visible":a},ad.default.createElement("div",{className:"sonner-spinner"},fL.map((a,b)=>ad.default.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${b}`})))),fN=ad.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ad.default.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),fO=ad.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ad.default.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fP=ad.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ad.default.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fQ=ad.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ad.default.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fR=ad.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ad.default.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ad.default.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),fS=1,fT=new class{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{let b=this.subscribers.indexOf(a);this.subscribers.splice(b,1)}),this.publish=a=>{this.subscribers.forEach(b=>b(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var b;let{message:c,...d}=a,e="number"==typeof(null==a?void 0:a.id)||(null==(b=a.id)?void 0:b.length)>0?a.id:fS++,f=this.toasts.find(a=>a.id===e),g=void 0===a.dismissible||a.dismissible;return this.dismissedToasts.has(e)&&this.dismissedToasts.delete(e),f?this.toasts=this.toasts.map(b=>b.id===e?(this.publish({...b,...a,id:e,title:c}),{...b,...a,id:e,dismissible:g,title:c}):b):this.addToast({title:c,...d,dismissible:g,id:e}),e},this.dismiss=a=>(a?(this.dismissedToasts.add(a),requestAnimationFrame(()=>this.subscribers.forEach(b=>b({id:a,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(b=>b({id:a.id,dismiss:!0}))}),a),this.message=(a,b)=>this.create({...b,message:a}),this.error=(a,b)=>this.create({...b,message:a,type:"error"}),this.success=(a,b)=>this.create({...b,type:"success",message:a}),this.info=(a,b)=>this.create({...b,type:"info",message:a}),this.warning=(a,b)=>this.create({...b,type:"warning",message:a}),this.loading=(a,b)=>this.create({...b,type:"loading",message:a}),this.promise=(a,b)=>{let c,d;if(!b)return;void 0!==b.loading&&(d=this.create({...b,promise:a,type:"loading",message:b.loading,description:"function"!=typeof b.description?b.description:void 0}));let e=Promise.resolve(a instanceof Function?a():a),f=void 0!==d,g=e.then(async a=>{if(c=["resolve",a],ad.default.isValidElement(a))f=!1,this.create({id:d,type:"default",message:a});else if(fU(a)&&!a.ok){f=!1;let c="function"==typeof b.error?await b.error(`HTTP error! status: ${a.status}`):b.error,e="function"==typeof b.description?await b.description(`HTTP error! status: ${a.status}`):b.description,g="object"!=typeof c||ad.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"error",description:e,...g})}else if(a instanceof Error){f=!1;let c="function"==typeof b.error?await b.error(a):b.error,e="function"==typeof b.description?await b.description(a):b.description,g="object"!=typeof c||ad.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"error",description:e,...g})}else if(void 0!==b.success){f=!1;let c="function"==typeof b.success?await b.success(a):b.success,e="function"==typeof b.description?await b.description(a):b.description,g="object"!=typeof c||ad.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"success",description:e,...g})}}).catch(async a=>{if(c=["reject",a],void 0!==b.error){f=!1;let c="function"==typeof b.error?await b.error(a):b.error,e="function"==typeof b.description?await b.description(a):b.description,g="object"!=typeof c||ad.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"error",description:e,...g})}}).finally(()=>{f&&(this.dismiss(d),d=void 0),null==b.finally||b.finally.call(b)}),h=()=>new Promise((a,b)=>g.then(()=>"reject"===c[0]?b(c[1]):a(c[1])).catch(b));return"string"!=typeof d&&"number"!=typeof d?{unwrap:h}:Object.assign(d,{unwrap:h})},this.custom=(a,b)=>{let c=(null==b?void 0:b.id)||fS++;return this.create({jsx:a(c),id:c,...b}),c},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},fU=a=>a&&"object"==typeof a&&"ok"in a&&"boolean"==typeof a.ok&&"status"in a&&"number"==typeof a.status,fV=Object.assign((a,b)=>{let c=(null==b?void 0:b.id)||fS++;return fT.addToast({title:a,...b,id:c}),c},{success:fT.success,info:fT.info,warning:fT.warning,error:fT.error,custom:fT.custom,message:fT.message,promise:fT.promise,dismiss:fT.dismiss,loading:fT.loading},{getHistory:()=>fT.toasts,getToasts:()=>fT.getActiveToasts()});function fW(a){return void 0!==a.label}function fX(...a){return a.filter(Boolean).join(" ")}!function(a){if(!a||"undefined"==typeof document)return;let b=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",b.appendChild(c),c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");let fY=a=>{var b,c,d,e,f,g,h,i,j,k,l,m,n;let{invert:o,toast:p,unstyled:q,interacting:r,setHeights:s,visibleToasts:t,heights:u,index:v,toasts:w,expanded:x,removeToast:y,defaultRichColors:z,closeButton:A,style:B,cancelButtonStyle:C,actionButtonStyle:D,className:E="",descriptionClassName:F="",duration:G,position:H,gap:I,expandByDefault:J,classNames:K,icons:L,closeButtonAriaLabel:M="Close toast"}=a,[N,O]=ad.default.useState(null),[P,Q]=ad.default.useState(null),[R,S]=ad.default.useState(!1),[T,U]=ad.default.useState(!1),[V,W]=ad.default.useState(!1),[X,Y]=ad.default.useState(!1),[Z,$]=ad.default.useState(!1),[_,aa]=ad.default.useState(0),[ab,ac]=ad.default.useState(0),ae=ad.default.useRef(p.duration||G||4e3),af=ad.default.useRef(null),ag=ad.default.useRef(null),ah=0===v,ai=v+1<=t,aj=p.type,ak=!1!==p.dismissible,al=p.className||"",am=p.descriptionClassName||"",an=ad.default.useMemo(()=>u.findIndex(a=>a.toastId===p.id)||0,[u,p.id]),ao=ad.default.useMemo(()=>{var a;return null!=(a=p.closeButton)?a:A},[p.closeButton,A]),ap=ad.default.useMemo(()=>p.duration||G||4e3,[p.duration,G]),aq=ad.default.useRef(0),ar=ad.default.useRef(0),as=ad.default.useRef(0),at=ad.default.useRef(null),[au,av]=H.split("-"),aw=ad.default.useMemo(()=>u.reduce((a,b,c)=>c>=an?a:a+b.height,0),[u,an]),ax=(()=>{let[a,b]=ad.default.useState(document.hidden);return ad.default.useEffect(()=>{let a=()=>{b(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),a})(),ay=p.invert||o,az="loading"===aj;ar.current=ad.default.useMemo(()=>an*I+aw,[an,aw]),ad.default.useEffect(()=>{ae.current=ap},[ap]),ad.default.useEffect(()=>{S(!0)},[]),ad.default.useEffect(()=>{let a=ag.current;if(a){let b=a.getBoundingClientRect().height;return ac(b),s(a=>[{toastId:p.id,height:b,position:p.position},...a]),()=>s(a=>a.filter(a=>a.toastId!==p.id))}},[s,p.id]),ad.default.useLayoutEffect(()=>{if(!R)return;let a=ag.current,b=a.style.height;a.style.height="auto";let c=a.getBoundingClientRect().height;a.style.height=b,ac(c),s(a=>a.find(a=>a.toastId===p.id)?a.map(a=>a.toastId===p.id?{...a,height:c}:a):[{toastId:p.id,height:c,position:p.position},...a])},[R,p.title,p.description,s,p.id,p.jsx,p.action,p.cancel]);let aA=ad.default.useCallback(()=>{U(!0),aa(ar.current),s(a=>a.filter(a=>a.toastId!==p.id)),setTimeout(()=>{y(p)},200)},[p,y,s,ar]);ad.default.useEffect(()=>{let a;if((!p.promise||"loading"!==aj)&&p.duration!==1/0&&"loading"!==p.type){if(x||r||ax){if(as.current<aq.current){let a=new Date().getTime()-aq.current;ae.current=ae.current-a}as.current=new Date().getTime()}else ae.current!==1/0&&(aq.current=new Date().getTime(),a=setTimeout(()=>{null==p.onAutoClose||p.onAutoClose.call(p,p),aA()},ae.current));return()=>clearTimeout(a)}},[x,r,p,aj,ax,aA]),ad.default.useEffect(()=>{p.delete&&(aA(),null==p.onDismiss||p.onDismiss.call(p,p))},[aA,p.delete]);let aB=p.icon||(null==L?void 0:L[aj])||(a=>{switch(a){case"success":return fN;case"info":return fP;case"warning":return fO;case"error":return fQ;default:return null}})(aj);return ad.default.createElement("li",{tabIndex:0,ref:ag,className:fX(E,al,null==K?void 0:K.toast,null==p||null==(b=p.classNames)?void 0:b.toast,null==K?void 0:K.default,null==K?void 0:K[aj],null==p||null==(c=p.classNames)?void 0:c[aj]),"data-sonner-toast":"","data-rich-colors":null!=(k=p.richColors)?k:z,"data-styled":!(p.jsx||p.unstyled||q),"data-mounted":R,"data-promise":!!p.promise,"data-swiped":Z,"data-removed":T,"data-visible":ai,"data-y-position":au,"data-x-position":av,"data-index":v,"data-front":ah,"data-swiping":V,"data-dismissible":ak,"data-type":aj,"data-invert":ay,"data-swipe-out":X,"data-swipe-direction":P,"data-expanded":!!(x||J&&R),"data-testid":p.testId,style:{"--index":v,"--toasts-before":v,"--z-index":w.length-v,"--offset":`${T?_:ar.current}px`,"--initial-height":J?"auto":`${ab}px`,...B,...p.style},onDragEnd:()=>{W(!1),O(null),at.current=null},onPointerDown:a=>{2===a.button||az||!ak||(af.current=new Date,aa(ar.current),a.target.setPointerCapture(a.pointerId),"BUTTON"!==a.target.tagName&&(W(!0),at.current={x:a.clientX,y:a.clientY}))},onPointerUp:()=>{var a,b,c,d,e;if(X||!ak)return;at.current=null;let f=Number((null==(a=ag.current)?void 0:a.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),g=Number((null==(b=ag.current)?void 0:b.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),h=new Date().getTime()-(null==(c=af.current)?void 0:c.getTime()),i="x"===N?f:g,j=Math.abs(i)/h;if(Math.abs(i)>=45||j>.11){aa(ar.current),null==p.onDismiss||p.onDismiss.call(p,p),"x"===N?Q(f>0?"right":"left"):Q(g>0?"down":"up"),aA(),Y(!0);return}null==(d=ag.current)||d.style.setProperty("--swipe-amount-x","0px"),null==(e=ag.current)||e.style.setProperty("--swipe-amount-y","0px"),$(!1),W(!1),O(null)},onPointerMove:b=>{var c,d,e,f;if(!at.current||!ak||(null==(c=window.getSelection())?void 0:c.toString().length)>0)return;let g=b.clientY-at.current.y,h=b.clientX-at.current.x,i=null!=(f=a.swipeDirections)?f:function(a){let[b,c]=a.split("-"),d=[];return b&&d.push(b),c&&d.push(c),d}(H);!N&&(Math.abs(h)>1||Math.abs(g)>1)&&O(Math.abs(h)>Math.abs(g)?"x":"y");let j={x:0,y:0},k=a=>1/(1.5+Math.abs(a)/20);if("y"===N){if(i.includes("top")||i.includes("bottom"))if(i.includes("top")&&g<0||i.includes("bottom")&&g>0)j.y=g;else{let a=g*k(g);j.y=Math.abs(a)<Math.abs(g)?a:g}}else if("x"===N&&(i.includes("left")||i.includes("right")))if(i.includes("left")&&h<0||i.includes("right")&&h>0)j.x=h;else{let a=h*k(h);j.x=Math.abs(a)<Math.abs(h)?a:h}(Math.abs(j.x)>0||Math.abs(j.y)>0)&&$(!0),null==(d=ag.current)||d.style.setProperty("--swipe-amount-x",`${j.x}px`),null==(e=ag.current)||e.style.setProperty("--swipe-amount-y",`${j.y}px`)}},ao&&!p.jsx&&"loading"!==aj?ad.default.createElement("button",{"aria-label":M,"data-disabled":az,"data-close-button":!0,onClick:az||!ak?()=>{}:()=>{aA(),null==p.onDismiss||p.onDismiss.call(p,p)},className:fX(null==K?void 0:K.closeButton,null==p||null==(d=p.classNames)?void 0:d.closeButton)},null!=(l=null==L?void 0:L.close)?l:fR):null,(aj||p.icon||p.promise)&&null!==p.icon&&((null==L?void 0:L[aj])!==null||p.icon)?ad.default.createElement("div",{"data-icon":"",className:fX(null==K?void 0:K.icon,null==p||null==(e=p.classNames)?void 0:e.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||((null==L?void 0:L.loading)?ad.default.createElement("div",{className:fX(null==K?void 0:K.loader,null==p||null==(n=p.classNames)?void 0:n.loader,"sonner-loader"),"data-visible":"loading"===aj},L.loading):ad.default.createElement(fM,{className:fX(null==K?void 0:K.loader,null==p||null==(m=p.classNames)?void 0:m.loader),visible:"loading"===aj})):null,"loading"!==p.type?aB:null):null,ad.default.createElement("div",{"data-content":"",className:fX(null==K?void 0:K.content,null==p||null==(f=p.classNames)?void 0:f.content)},ad.default.createElement("div",{"data-title":"",className:fX(null==K?void 0:K.title,null==p||null==(g=p.classNames)?void 0:g.title)},p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title),p.description?ad.default.createElement("div",{"data-description":"",className:fX(F,am,null==K?void 0:K.description,null==p||null==(h=p.classNames)?void 0:h.description)},"function"==typeof p.description?p.description():p.description):null),ad.default.isValidElement(p.cancel)?p.cancel:p.cancel&&fW(p.cancel)?ad.default.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||C,onClick:a=>{!fW(p.cancel)||ak&&(null==p.cancel.onClick||p.cancel.onClick.call(p.cancel,a),aA())},className:fX(null==K?void 0:K.cancelButton,null==p||null==(i=p.classNames)?void 0:i.cancelButton)},p.cancel.label):null,ad.default.isValidElement(p.action)?p.action:p.action&&fW(p.action)?ad.default.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||D,onClick:a=>{!fW(p.action)||(null==p.action.onClick||p.action.onClick.call(p.action,a),a.defaultPrevented||aA())},className:fX(null==K?void 0:K.actionButton,null==p||null==(j=p.classNames)?void 0:j.actionButton)},p.action.label):null)},fZ=ad.default.forwardRef(function(a,b){let{id:c,invert:d,position:e="bottom-right",hotkey:f=["altKey","KeyT"],expand:g,closeButton:h,className:i,offset:j,mobileOffset:k,theme:l="light",richColors:m,duration:n,style:o,visibleToasts:p=3,toastOptions:q,dir:r="ltr",gap:s=14,icons:t,containerAriaLabel:u="Notifications"}=a,[v,w]=ad.default.useState([]),x=ad.default.useMemo(()=>c?v.filter(a=>a.toasterId===c):v.filter(a=>!a.toasterId),[v,c]),y=ad.default.useMemo(()=>Array.from(new Set([e].concat(x.filter(a=>a.position).map(a=>a.position)))),[x,e]),[z,A]=ad.default.useState([]),[B,C]=ad.default.useState(!1),[D,E]=ad.default.useState(!1),[F,G]=ad.default.useState("system"!==l?l:"light"),H=ad.default.useRef(null),I=f.join("+").replace(/Key/g,"").replace(/Digit/g,""),J=ad.default.useRef(null),K=ad.default.useRef(!1),L=ad.default.useCallback(a=>{w(b=>{var c;return(null==(c=b.find(b=>b.id===a.id))?void 0:c.delete)||fT.dismiss(a.id),b.filter(({id:b})=>b!==a.id)})},[]);return ad.default.useEffect(()=>fT.subscribe(a=>{a.dismiss?requestAnimationFrame(()=>{w(b=>b.map(b=>b.id===a.id?{...b,delete:!0}:b))}):setTimeout(()=>{dL.default.flushSync(()=>{w(b=>{let c=b.findIndex(b=>b.id===a.id);return -1!==c?[...b.slice(0,c),{...b[c],...a},...b.slice(c+1)]:[a,...b]})})})}),[v]),ad.default.useEffect(()=>{"system"!==l?G(l):"system"===l&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light"))},[l]),ad.default.useEffect(()=>{v.length<=1&&C(!1)},[v]),ad.default.useEffect(()=>{let a=a=>{var b,c;f.every(b=>a[b]||a.code===b)&&(C(!0),null==(c=H.current)||c.focus()),"Escape"===a.code&&(document.activeElement===H.current||(null==(b=H.current)?void 0:b.contains(document.activeElement)))&&C(!1)};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[f]),ad.default.useEffect(()=>{if(H.current)return()=>{J.current&&(J.current.focus({preventScroll:!0}),J.current=null,K.current=!1)}},[H.current]),ad.default.createElement("section",{ref:b,"aria-label":`${u} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},y.map((b,c)=>{var e;let f,[l,u]=b.split("-");return x.length?ad.default.createElement("ol",{key:b,dir:"auto"===r?"ltr":r,tabIndex:-1,ref:H,className:i,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":l,"data-x-position":u,style:{"--front-toast-height":`${(null==(e=z[0])?void 0:e.height)||0}px`,"--width":"356px","--gap":`${s}px`,...o,...(f={},[j,k].forEach((a,b)=>{let c=1===b,d=c?"--mobile-offset":"--offset",e=c?"16px":"24px";function g(a){["top","right","bottom","left"].forEach(b=>{f[`${d}-${b}`]="number"==typeof a?`${a}px`:a})}"number"==typeof a||"string"==typeof a?g(a):"object"==typeof a?["top","right","bottom","left"].forEach(b=>{void 0===a[b]?f[`${d}-${b}`]=e:f[`${d}-${b}`]="number"==typeof a[b]?`${a[b]}px`:a[b]}):g(e)}),f)},onBlur:a=>{K.current&&!a.currentTarget.contains(a.relatedTarget)&&(K.current=!1,J.current&&(J.current.focus({preventScroll:!0}),J.current=null))},onFocus:a=>{!(a.target instanceof HTMLElement&&"false"===a.target.dataset.dismissible)&&(K.current||(K.current=!0,J.current=a.relatedTarget))},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{D||C(!1)},onDragEnd:()=>C(!1),onPointerDown:a=>{a.target instanceof HTMLElement&&"false"===a.target.dataset.dismissible||E(!0)},onPointerUp:()=>E(!1)},x.filter(a=>!a.position&&0===c||a.position===b).map((c,e)=>{var f,i;return ad.default.createElement(fY,{key:c.id,icons:t,index:e,toast:c,defaultRichColors:m,duration:null!=(f=null==q?void 0:q.duration)?f:n,className:null==q?void 0:q.className,descriptionClassName:null==q?void 0:q.descriptionClassName,invert:d,visibleToasts:p,closeButton:null!=(i=null==q?void 0:q.closeButton)?i:h,interacting:D,position:b,style:null==q?void 0:q.style,unstyled:null==q?void 0:q.unstyled,classNames:null==q?void 0:q.classNames,cancelButtonStyle:null==q?void 0:q.cancelButtonStyle,actionButtonStyle:null==q?void 0:q.actionButtonStyle,closeButtonAriaLabel:null==q?void 0:q.closeButtonAriaLabel,removeToast:L,toasts:x.filter(a=>a.position==c.position),heights:z.filter(a=>a.position==c.position),setHeights:A,expandByDefault:g,gap:s,expanded:B,swipeDirections:a.swipeDirections})})):null}))}),f$=[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"dynamic",label:"Auto (Day/Night)"}];function f_(a){return"light"===a||"dark"===a?a:"dynamic"===a||"system"===a?"dynamic":"dark"}function f0(a,b=new Date){return"dynamic"===a?!function(a=new Date){let b=a.getHours();return b>=19||b<6}(b)?"light":"dark":a}let f1=`https://${dF}.supabase.co/functions/v1/make-server-a14c7986`,f2=(0,ad.createContext)(void 0);function f3(){let a=(0,ad.useContext)(f2);if(void 0===a)throw Error("useUser must be used within a UserProvider");return a}let f4={profileVisibility:"public",whoCanMessage:"everyone",whoCanCall:"friends",showOnlineStatus:!0,showReadReceipts:!0,allowTagging:!0,pushNotifications:!0,emailNotifications:!0,smsNotifications:!1,notifyLikes:!0,notifyComments:!0,notifyMessages:!0,notifyFriendRequests:!0,notifyStories:!1,soundEnabled:!0,soundVolume:75,theme:"dark",language:"en",fontSize:"medium",autoPlayVideos:!0,reduceAnimations:!1,phoneNumber:""},f5={small:"14px",medium:"16px",large:"18px"},f6=a=>"small"===a?"small":"medium"===a?"medium":"large",f7=a=>{let b={...a};return b.theme&&(b.theme=f_(b.theme)),b.fontSize&&(b.fontSize=f6(b.fontSize)),b.language&&(b.language="en"),b},f8=a=>({...f4,...f7(a??{})}),f9=a=>{let b=a.joinedAt?new Date(a.joinedAt):new Date;return{id:a.id,ablyClientId:a.ablyClientId??a.id,name:a.name,username:a.username,email:a.email,avatar:a.avatar,bio:a.bio??"",location:a.location??"",website:a.website??"",joinedAt:b,friendIds:Array.isArray(a.friendIds)?a.friendIds:[],blockedIds:Array.isArray(a.blockedIds)?a.blockedIds:[],savedPostIds:Array.isArray(a.savedPostIds)?a.savedPostIds.filter(a=>"string"==typeof a):[],posts:[],achievements:[],settings:f8()}},ga=(a,b)=>{let c=f9(a);return{...c,posts:b?.posts??c.posts,achievements:b?.achievements??c.achievements,settings:b?.settings??c.settings}},gb=(a,b)=>{if("object"!=typeof a||null===a)return null;let c=a.id,d=a.postId,e=a.postOwnerId??a.postOwner??b,f=a.authorId;if("string"!=typeof c||0===c.trim().length||"string"!=typeof d||0===d.trim().length||"string"!=typeof e||0===e.trim().length||"string"!=typeof f||0===f.trim().length)return null;let g=a.createdAt,h="string"==typeof g&&g?new Date(g):new Date;return{id:c,postId:d,postOwnerId:e,authorId:f,authorName:"string"==typeof a.authorName&&a.authorName?a.authorName:"Unknown user",authorAvatar:"string"==typeof a.authorAvatar?a.authorAvatar??"":"",content:"string"==typeof a.content?a.content:"",createdAt:h}};function gc({children:a}){let[b,c]=(0,ad.useState)(null),[d,e]=(0,ad.useState)(new Map),[f,g]=(0,ad.useState)(null),[h,i]=(0,ad.useState)(null),{setTheme:j}=(0,ae.useTheme)();(0,ad.useEffect)(()=>{(async()=>{try{let a=await fetch(`${f1}/users`,{headers:{Authorization:`Bearer ${dG}`}});if(!a.ok)return void console.error("Failed to load users from Supabase");let{users:b}=await a.json();e(a=>{let c=new Map(a);return b.forEach(b=>{let d=f9(b),e=a.get(b.id)??(d.ablyClientId?a.get(d.ablyClientId):void 0),f=e?{...d,posts:e.posts,achievements:e.achievements,settings:f8(e.settings)}:d;c.set(f.id,f),f.ablyClientId&&f.ablyClientId!==f.id&&c.set(f.ablyClientId,f)}),c})}catch(a){console.error("Error loading users from Supabase:",a)}})()},[]),(0,ad.useEffect)(()=>{let a=f_(b?.settings?.theme??f4.theme),c=()=>{j(f0(a))};if(c(),"dynamic"===a){let a=setInterval(c,6e5);return()=>clearInterval(a)}},[b?.settings?.theme,j]),(0,ad.useEffect)(()=>{let a=f6(b?.settings?.fontSize??f4.fontSize),c="undefined"!=typeof document?document.documentElement:null;c&&c.style.setProperty("--font-size",f5[a])},[b?.settings?.fontSize]),(0,ad.useEffect)(()=>{if(!b){g(null),i(null);return}f&&f!==b.id||(g(b.id),i(b))},[b,f]);let k=(0,ad.useCallback)(a=>{let b=[],c=new Date,e=c.getTime()-a.joinedAt.getTime();Array.from(d.values()).sort((a,b)=>a.joinedAt.getTime()-b.joinedAt.getTime()).slice(0,100).some(b=>b.id===a.id)&&b.push({id:"early-adopter",name:"Early Adopter",description:"One of the first 100 users on MoveSplash",earnedAt:a.joinedAt,icon:"Award",color:"from-purple-500 to-pink-500"}),a.posts.length>=50&&b.push({id:"top-contributor",name:"Top Contributor",description:"Created over 50 posts",earnedAt:a.posts[49]?.timestamp||c,icon:"TrendingUp",color:"from-orange-500 to-yellow-500"});let f=a.posts.filter(a=>a.media&&a.media.length>0);return f.length>=30&&b.push({id:"story-master",name:"Story Master",description:"Shared 30+ posts with photos or videos",earnedAt:f[29]?.timestamp||c,icon:"Camera",color:"from-blue-500 to-cyan-500"}),a.friendIds.length>=100&&b.push({id:"super-friend",name:"Super Friend",description:"Connected with over 100 friends",earnedAt:c,icon:"Users",color:"from-green-500 to-emerald-500"}),a.posts.reduce((a,b)=>a+b.likes,0)>=1e3&&b.push({id:"rising-star",name:"Rising Star",description:"Received over 1000 likes",earnedAt:c,icon:"Star",color:"from-yellow-500 to-orange-500"}),a.posts.reduce((a,b)=>a+b.comments,0)>=500&&b.push({id:"conversation-starter",name:"Conversation Starter",description:"Generated over 500 comments",earnedAt:c,icon:"MessageCircle",color:"from-cyan-500 to-blue-500"}),a.posts.some(a=>a.likes>=500)&&b.push({id:"viral-creator",name:"Viral Creator",description:"Created a post with 500+ likes",earnedAt:a.posts.find(a=>a.likes>=500)?.timestamp||c,icon:"Zap",color:"from-pink-500 to-purple-500"}),e/864e5>=30&&a.posts.length>=30&&b.push({id:"consistent-creator",name:"Consistent Creator",description:"Posted consistently for 30+ days",earnedAt:c,icon:"Calendar",color:"from-indigo-500 to-purple-500"}),b},[d]);(0,ad.useEffect)(()=>{if(!b)return;let a=k(b),d=b.achievements;d.length===a.length&&d.every((b,c)=>b.id===a[c]?.id)||(c(b=>b?{...b,achievements:a}:null),e(c=>{let d=new Map(c),e=d.get(b.id);if(e){let c={...e,achievements:a};d.set(b.id,c),e.ablyClientId&&e.ablyClientId!==e.id&&d.set(e.ablyClientId,c)}return d}))},[b,k]);let l=async a=>{if(!b)return!1;let d={...b,...a};c(d),e(a=>{let b=new Map(a);return b.set(d.id,d),d.ablyClientId&&d.ablyClientId!==d.id&&b.set(d.ablyClientId,d),b});try{let a=await fetch(`${f1}/users/${d.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({name:d.name,username:d.username,email:d.email,avatar:d.avatar,bio:d.bio,location:d.location,website:d.website,joinedAt:d.joinedAt.toISOString(),friendIds:d.friendIds,blockedIds:d.blockedIds})}),f=await a.json().catch(()=>null);if(!a.ok||!f?.user)return console.error("Failed to sync user data to server"),c(b),e(a=>{let c=new Map(a);return c.set(b.id,b),b.ablyClientId&&b.ablyClientId!==b.id&&c.set(b.ablyClientId,b),c}),!1;let g=f.user,h=f9(g),i={...d,name:h.name,username:h.username,email:h.email,avatar:h.avatar,bio:h.bio,location:h.location,website:h.website,joinedAt:h.joinedAt,friendIds:h.friendIds,blockedIds:h.blockedIds};return c(i),e(a=>{let b=new Map(a);return b.set(i.id,i),i.ablyClientId&&i.ablyClientId!==i.id&&b.set(i.ablyClientId,i),b}),!0}catch(a){return console.error("Error syncing user data:",a),c(b),e(a=>{let c=new Map(a);return c.set(b.id,b),b.ablyClientId&&b.ablyClientId!==b.id&&c.set(b.ablyClientId,b),c}),!1}},m=async a=>{if(b){let d=f7(a),f={...b.settings,...d},g={...b,settings:f};c(g),e(a=>{let b=new Map(a);return b.set(g.id,g),b});try{(await fetch(`${f1}/users/${b.id}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify(f)})).ok||console.error("Failed to sync settings to server")}catch(a){console.error("Error syncing settings:",a)}}},n=async(a,c)=>{if(!b)return{success:!1,error:"No user is signed in"};try{let d=await fetch(`${f1}/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({userId:b.id,oldPassword:a,newPassword:c})}),e=await d.json().catch(()=>({}));if(!d.ok||e?.success!==!0){let a="string"==typeof e?.error&&e.error.trim().length>0?e.error:"Unable to change password right now";return{success:!1,error:a}}return{success:!0}}catch(a){return console.error("Error changing password:",a),{success:!1,error:"Unexpected error while updating password"}}},o=async a=>{if(b){let d={...a,id:`${b.id}-post-${Date.now()}`,userId:b.id,timestamp:new Date,likes:0,comments:0,shares:0,likedBy:[]},f={...b,posts:[d,...b.posts]};c(f),e(a=>{let b=new Map(a);return b.set(f.id,f),b});try{await fetch(`${f1}/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({userId:b.id,text:a.text,media:a.media})})}catch(a){console.error("Error syncing post:",a)}}},p=async a=>{if(b){let d={...b,posts:b.posts.filter(b=>b.id!==a)};c(d),e(a=>{let b=new Map(a);return b.set(d.id,d),b});try{await fetch(`${f1}/posts/${b.id}/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${dG}`}})}catch(a){console.error("Error deleting post:",a)}}},q=async(a,d)=>{let g=null;e(e=>{let h=new Map(e);return h.forEach((e,i)=>{let j=e.posts.findIndex(b=>b.id===a);if(-1!==j){let k=e.posts[j],l=k.likedBy.includes(d),m={...k,likes:l?k.likes-1:k.likes+1,likedBy:l?k.likedBy.filter(a=>a!==d):[...k.likedBy,d]},n=[...e.posts];n[j]=m;let o={...e,posts:n};h.set(i,o),b&&i===b.id&&c(o),f&&(i===f||e.ablyClientId===f)&&(g=o),fetch(`${f1}/posts/${e.id}/${a}/like`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({likerUserId:d})}).catch(a=>console.error("Error syncing like:",a))}}),h}),g&&i(g)},r=async(a,d,g)=>{let h={platform:g.platform,sharerUserId:g.sharerUserId??b?.id??"",message:g.message??""};try{let g=await fetch(`${f1}/posts/${a}/${d}/share`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify(h)}),j=await g.json().catch(()=>null);if(!g.ok||!j?.post){if(404!==g.status){let a=j?.error??`status ${g.status}`;return console.error("Error recording share:",a),null}let b=await fetch(`${f1}/shares`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({...h,postOwnerId:a,postId:d})});if(j=await b.json().catch(()=>null),!b.ok||!j?.post){let a=j?.error??`status ${b.status}`;return console.error("Error recording share (fallback):",a),null}}let k=j.post,l=k?.shares,m="number"==typeof l&&Number.isFinite(l)?l:null,n=m,o=null,p=null;e(b=>{let c=new Map(b),e=c.get(a);if(!e)return b;let g=e.posts.findIndex(a=>a.id===d);if(-1===g)return b;let h=[...e.posts],i=h[g],j=m??i.shares+1;n=j,h[g]={...i,shares:j};let k={...e,posts:h};return o=k,c.set(k.id,k),k.ablyClientId&&k.ablyClientId!==k.id&&c.set(k.ablyClientId,k),f&&(k.id===f||k.ablyClientId===f)&&(p=k),c});let q=o,r=q?q.id:null;return q&&r&&b&&b.id===r&&c(q),p&&i(p),n??m??null}catch(a){return console.error("Error sharing post:",a),null}},s=async(a,d)=>{if(!b)throw console.warn("toggleSavePost requires a logged-in user"),Error("User must be signed in to save posts");let f=b.id,g=`${a}:${d}`,h=Array.isArray(b.savedPostIds)?b.savedPostIds:[],j=h.includes(g)?h.filter(a=>a!==g):[...h,g],k=a=>{c(b=>b&&b.id===f?{...b,savedPostIds:a}:b),e(c=>{let d=new Map(c),e=d.get(f)??(b&&b.id===f?b:null);if(e){let b={...e,savedPostIds:a};d.set(e.id,b),e.ablyClientId&&e.ablyClientId!==e.id&&d.set(e.ablyClientId,b)}return d}),i(b=>b&&(b.id===f||b.ablyClientId===f)?{...b,savedPostIds:a}:b)};k(j);let l=a=>Array.isArray(a)?a.filter(a=>"string"==typeof a):j,m=async(a,b)=>{let c=await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify(b)}),d=await c.json().catch(()=>null);if(!c.ok||!d?.success){let a=Error(d?.error??`status ${c.status}`);throw a.status=c.status,a}return l(d.savedPostIds)},n=async a=>{let b=await fetch(`${f1}/users/${f}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({savedPostIds:a})}),c=await b.json().catch(()=>null);if(!b.ok||!c?.user){let a=Error(c?.error??`status ${b.status}`);throw a.status=b.status,a}return l(c.user.savedPostIds)};try{let b=await m(`${f1}/posts/${a}/${d}/bookmark`,{userId:f});return k(b),b.includes(g)}catch(b){if(404===b.status||405===b.status)try{let b=await m(`${f1}/bookmarks`,{userId:f,postOwnerId:a,postId:d});return k(b),b.includes(g)}catch(a){if(404===a.status||405===a.status)try{let a=await n(j);return k(a),a.includes(g)}catch(a){throw k(h),console.error("Error persisting saved posts via user update:",a),a instanceof Error?a:Error(String(a))}throw k(h),console.error("Error toggling saved post (fallback):",a),a instanceof Error?a:Error(String(a))}throw k(h),console.error("Error toggling saved post:",b),b instanceof Error?b:Error(String(b))}},t=async(a,b)=>{let c={Authorization:`Bearer ${dG}`},d=async b=>{let c=await b.json().catch(()=>null);if(!b.ok)throw Error(c?.error??`status ${b.status}`);return(Array.isArray(c?.comments)?c.comments:[]).map(b=>gb(b,a)).filter(a=>!!a).sort((a,b)=>a.createdAt.getTime()-b.createdAt.getTime())};try{let e=new URLSearchParams({ownerId:a,postId:b}),f=await fetch(`${f1}/comments?${e.toString()}`,{headers:c});try{return await d(f)}catch(g){if(404!==f.status)throw g instanceof Error?g:Error(String(g));let e=await fetch(`${f1}/posts/${a}/${b}/comments`,{headers:c});return await d(e)}}catch(a){return console.error("Error fetching comments:",a),[]}},u=async(a,d,g)=>{if(!b)return console.warn("addComment requires a logged-in user"),null;let h=g.trim();if(!h)return null;try{let g=await fetch(`${f1}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({postOwnerId:a,postId:d,authorId:b.id,content:h})}),j=await g.json().catch(()=>null);if(!g.ok||!j?.comment){if(404!==g.status){let a=j?.error??`status ${g.status}`;return console.error("Error creating comment:",a),null}let c=await fetch(`${f1}/posts/${a}/${d}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({authorId:b.id,content:h})});if(j=await c.json().catch(()=>null),!c.ok||!j?.comment){let a=j?.error??`status ${c.status}`;return console.error("Error creating comment (fallback):",a),null}}let k=gb(j.comment,a);if(!k)return null;let l=j.post,m=l?.comments,n="number"==typeof m&&Number.isFinite(m)?m:null,o=n,p=null,q=null;e(b=>{let c=new Map(b),e=c.get(a);if(!e)return b;let g=e.posts.findIndex(a=>a.id===d);if(-1===g)return b;let h=[...e.posts],i=h[g],j=n??i.comments+1;o=j,h[g]={...i,comments:j};let k={...e,posts:h};return p=k,c.set(k.id,k),k.ablyClientId&&k.ablyClientId!==k.id&&c.set(k.ablyClientId,k),f&&(k.id===f||k.ablyClientId===f)&&(q=k),c});let r=p,s=r?r.id:null;r&&s&&b.id===s&&c(r),q&&i(q);let t=null!=o?o:null!=n?n:1;return{comment:k,totalComments:t}}catch(a){return console.error("Error adding comment:",a),null}},v=async a=>{if(!b||a===b.id)return console.warn("addFriend requires a different logged-in user"),!1;try{let d=await fetch(`${f1}/friends/${b.id}/${a}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({actorName:b.name,actorAvatar:b.avatar})}),f=await d.json().catch(()=>null);if(!d.ok||!f?.currentUser){let a=f?.error??`status ${d.status}`;return console.error("Error adding friend:",a),!1}let g=ga(f.currentUser,b);return c(g),e(a=>{let b=new Map(a);b.set(g.id,g);let c=f.targetUser;if(c){let d=a.get(c.id),e=ga(c,d);b.set(e.id,e)}return b}),C(),!0}catch(a){return console.error("Error adding friend:",a),!1}},w=async a=>{if(!b||a===b.id)return!1;try{let d=await fetch(`${f1}/friends/${b.id}/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${dG}`}}),f=await d.json().catch(()=>null);if(!d.ok||!f?.currentUser){let a=f?.error??`status ${d.status}`;return console.error("Error removing friend:",a),!1}let g=ga(f.currentUser,b);return c(g),e(a=>{let b=new Map(a);b.set(g.id,g);let c=f.targetUser;if(c){let d=a.get(c.id),e=ga(c,d);b.set(e.id,e)}return b}),C(),!0}catch(a){return console.error("Error removing friend:",a),!1}},x=async a=>{if(!b||a===b.id)return!1;try{let d=await fetch(`${f1}/blocks/${b.id}/${a}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({})}),f=await d.json().catch(()=>null);if(!d.ok||!f?.currentUser){let a=f?.error??`status ${d.status}`;return console.error("Error blocking user:",a),!1}let g=ga(f.currentUser,b);return c(g),e(a=>{let b=new Map(a);b.set(g.id,g);let c=f.targetUser;if(c){let d=a.get(c.id),e=ga(c,d);b.set(e.id,e)}return b}),C(),!0}catch(a){return console.error("Error blocking user:",a),!1}},y=async a=>{if(!b||a===b.id)return!1;try{let d=await fetch(`${f1}/blocks/${b.id}/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${dG}`}}),f=await d.json().catch(()=>null);if(!d.ok||!f?.currentUser){let a=f?.error??`status ${d.status}`;return console.error("Error unblocking user:",a),!1}let g=ga(f.currentUser,b);return c(g),e(a=>{let b=new Map(a);return b.set(g.id,g),b}),C(),!0}catch(a){return console.error("Error unblocking user:",a),!1}},z=(0,ad.useCallback)(async a=>{try{let b=await fetch(`${f1}/users/${a}`,{headers:{Authorization:`Bearer ${dG}`}});if(!b.ok)return null;let{user:c}=await b.json(),d=await fetch(`${f1}/users/${a}/settings`,{headers:{Authorization:`Bearer ${dG}`}}),e=f8();if(d.ok){let{settings:a}=await d.json();e=f8(a)}let f=await fetch(`${f1}/users/${a}/posts`,{headers:{Authorization:`Bearer ${dG}`}}),g=[];if(f.ok){let{posts:a}=await f.json();g=a.map(a=>({...a,timestamp:new Date(a.timestamp)}))}return{...c,ablyClientId:c.ablyClientId??c.id,bio:c.bio??"",location:c.location??"",website:c.website??"",joinedAt:new Date(c.joinedAt??new Date().toISOString()),friendIds:Array.isArray(c.friendIds)?c.friendIds:[],blockedIds:Array.isArray(c.blockedIds)?c.blockedIds:[],savedPostIds:Array.isArray(c.savedPostIds)?c.savedPostIds.filter(a=>"string"==typeof a):[],posts:g,settings:e,achievements:[]}}catch(a){return console.error("Error fetching user snapshot:",a),null}},[]),A=async a=>{try{let b=await z(a);if(!b)return!1;return c(b),e(a=>{let c=new Map(a);return c.set(b.id,b),b.ablyClientId&&b.ablyClientId!==b.id&&c.set(b.ablyClientId,b),c}),f&&f!==b.id||(g(b.id),i(b)),!0}catch(a){return console.error("Error loading user data:",a),!1}},B=(0,ad.useCallback)(async a=>{if(!a)return b?(g(b.id),i(b),!0):(g(null),i(null),!1);if(b&&a===b.id)return g(b.id),i(b),!0;let c=await z(a);return!!c&&(g(c.id),i(c),e(a=>{let b=new Map(a);return b.set(c.id,c),c.ablyClientId&&c.ablyClientId!==c.id&&b.set(c.ablyClientId,c),b}),!0)},[b,z]),C=(0,ad.useCallback)(async()=>{try{let a=await fetch(`${f1}/users`,{headers:{Authorization:`Bearer ${dG}`}});if(!a.ok)throw Error(`status ${a.status}`);let b=await a.json().catch(()=>null),d=Array.isArray(b?.users)?b.users:[];e(a=>{let b=new Map;return d.forEach(c=>{if("object"!=typeof c||null===c)return;let d=a.get(c.id),e=ga(c,d);b.set(e.id,e),e.ablyClientId&&e.ablyClientId!==e.id&&b.set(e.ablyClientId,e)}),a.forEach((a,c)=>{b.has(c)||b.set(c,a)}),b}),c(a=>{if(!a)return a;let b=d.find(b=>"object"==typeof b&&null!==b&&b.id===a.id);if(!b)return a;let c=ga(b,a),e=[...a.friendIds].sort(),f=[...c.friendIds].sort(),g=e.length===f.length&&e.every((a,b)=>a===f[b]),h=[...a.blockedIds].sort(),i=[...c.blockedIds].sort(),j=h.length===i.length&&h.every((a,b)=>a===i[b]);return g&&j?a:c})}catch(a){console.error("Error refreshing users:",a)}},[]);(0,ad.useEffect)(()=>{C()},[C]);let D=async(a,b)=>{try{console.log("[Login] Attempting login for:",a);let d=await fetch(`${f1}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({email:a,password:b})}),f=await d.json().catch(()=>null);if(console.log("[Login] Server response status:",d.status),!d.ok||!f?.user){let a=f?.error??`status ${d.status}`;return console.log("[Login]  Server login failed:",a),!1}let g=f.user;if(console.log("[Login]  Server login successful for:",g.name),!await A(g.id)){console.warn("[Login]  Using normalized login payload while Supabase details load");let a=f9(g);c(a),e(b=>{let c=new Map(b);return c.set(a.id,a),a.ablyClientId&&a.ablyClientId!==a.id&&c.set(a.ablyClientId,a),c})}return!0}catch(a){return console.error("[Login] Error during login:",a),!1}},E=async(a,b,d,f)=>{try{let g=await fetch(`${f1}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({name:a,email:b,password:d,birthdate:f})}),h=await g.json().catch(()=>null);if(!g.ok||!h?.user){let a=h?.error??`status ${g.status}`;return console.error("Registration failed:",a),!1}let i=h.user,j=h.settings;if(!await A(i.id)){let a={...f9(i),settings:f8(j)};c(a),e(b=>{let c=new Map(b);return c.set(a.id,a),a.ablyClientId&&a.ablyClientId!==a.id&&c.set(a.ablyClientId,a),c})}return console.log("User registered successfully:",i.email),!0}catch(a){return console.error("Signup error:",a),!1}};return(0,ac.jsx)(f2.Provider,{value:{currentUser:b,profileUser:h,profileUserId:f,allUsers:d,updateUser:l,updateSettings:m,changePassword:n,addPost:o,deletePost:p,likePost:q,sharePost:r,toggleSavePost:s,fetchComments:t,addComment:u,addFriend:v,removeFriend:w,blockUser:x,unblockUser:y,refreshAllUsers:C,getUserStats:()=>{if(!b)return{totalPosts:0,totalFriends:0,totalLikes:0,rank:0};let a=b.posts.length,c=b.friendIds.length;return{totalPosts:a,totalFriends:c,totalLikes:b.posts.reduce((a,b)=>a+b.likes,0),rank:Array.from(d.values()).map(a=>({id:a.id,score:10*a.posts.length+a.posts.reduce((a,b)=>a+b.likes,0)+5*a.friendIds.length})).sort((a,b)=>b.score-a.score).findIndex(a=>a.id===b.id)+1}},getAchievements:()=>b?k(b):[],login:D,signup:E,logout:()=>{c(null)},loadUserData:A,loadProfileUser:B},children:a})}let gd=`https://${dF}.supabase.co/functions/v1/make-server-a14c7986`,ge=a=>({id:a.id,type:a.type,user:{name:a.actorName,avatar:a.actorAvatar},content:a.content,createdAt:a.createdAt,isRead:a.isRead,actionRequired:a.actionRequired}),gf=a=>{let b=new Date(a);if(Number.isNaN(b.getTime()))return"";let c=Math.floor((Date.now()-b.getTime())/6e4);if(c<=0)return"Just now";if(c<60)return`${c}m ago`;let d=Math.floor(c/60);if(d<24)return`${d}h ago`;let e=Math.floor(d/24);return e<7?`${e}d ago`:b.toLocaleDateString()};function gg({onNavigate:a}){let{currentUser:b}=f3(),[c,d]=(0,ad.useState)(!1),e=(0,ad.useRef)(null),f=(0,ad.useRef)(null),g=(0,ad.useRef)(null),[h,i]=(0,ad.useState)([]),[j,k]=(0,ad.useState)(!1),[l,m]=(0,ad.useState)(null),n=(0,ad.useMemo)(()=>b?{"Content-Type":"application/json",Authorization:`Bearer ${dG}`}:null,[b]),o=h.filter(a=>!a.isRead).length,p=!!(b&&n),q=h.length>0,r=o>0,s=(0,ad.useCallback)(async()=>{if(!b||!n){i([]),k(!1);return}g.current&&g.current.abort();let a=new AbortController;g.current=a,k(!0),m(null);try{let c=await fetch(`${gd}/notifications/${b.id}`,{headers:n,signal:a.signal});if(!c.ok)throw Error("Failed to load notifications");let d=await c.json().catch(()=>({})),e=Array.isArray(d?.notifications)?d.notifications:[];i(e.map(ge))}catch(a){if("AbortError"===a.name)return;console.error("Error loading notifications:",a),m("Unable to load notifications right now.")}finally{a.signal.aborted||k(!1)}},[b,n]);(0,ad.useEffect)(()=>{s()},[s]),(0,ad.useEffect)(()=>()=>{g.current?.abort()},[]);let t=(0,ad.useCallback)(()=>{s()},[s]),u=a=>{switch(a){case"like":return(0,ac.jsx)(bp,{className:"w-4 h-4 text-pink-500"});case"comment":return(0,ac.jsx)(bk,{className:"w-4 h-4 text-blue-500"});case"friend_request":return(0,ac.jsx)(fG,{className:"w-4 h-4 text-green-500"});case"message":return(0,ac.jsx)(bk,{className:"w-4 h-4 text-purple-500"});case"video_call":return(0,ac.jsx)(bl,{className:"w-4 h-4 text-orange-500"});case"story":return(0,ac.jsx)(bq,{className:"w-4 h-4 text-yellow-500"});case"share":return(0,ac.jsx)(bo,{className:"w-4 h-4 text-cyan-500"});default:return(0,ac.jsx)(fF,{className:"w-4 h-4 text-white"})}},v=(0,ad.useCallback)(async a=>{if(i(b=>b.map(b=>b.id===a?{...b,isRead:!0}:b)),b&&n)try{await fetch(`${gd}/notifications/${b.id}/${a}`,{method:"PUT",headers:n,body:JSON.stringify({isRead:!0})})}catch(a){console.error("Error marking notification as read:",a)}},[n,b]),w=(0,ad.useCallback)(async()=>{if(!r)return void fV.info("No unread notifications.");if(i(a=>a.map(a=>({...a,isRead:!0}))),!b||!n)return void fV.info("Sign in to sync notification status.");try{await fetch(`${gd}/notifications/${b.id}/mark-all-read`,{method:"POST",headers:n}),fV.success("All notifications marked as read")}catch(a){console.error("Error marking all as read:",a),fV.error("Unable to update notifications right now.")}},[n,b,r]),x=(0,ad.useCallback)(async()=>{if(!q)return void fV.info("No notifications to clear.");if(i([]),!b||!n)return void fV.info("Sign in to clear notifications.");try{await fetch(`${gd}/notifications/${b.id}`,{method:"DELETE",headers:n}),fV.success("All notifications cleared")}catch(a){console.error("Error clearing notifications:",a),fV.error("Unable to clear notifications at the moment.")}},[n,b,q]),y=(0,ad.useCallback)(async a=>{await v(a),fV.success("Friend request accepted! ")},[v]),z=(0,ad.useCallback)(async a=>{if(i(b=>b.filter(b=>b.id!==a)),b&&n)try{await fetch(`${gd}/notifications/${b.id}/${a}`,{method:"DELETE",headers:n})}catch(a){console.error("Error deleting friend request notification:",a)}fV.success("Friend request declined")},[n,b]),A=(0,ad.useCallback)(b=>{v(b.id),"message"===b.type&&a?(a("messages"),d(!1)):"video_call"===b.type&&a?(a("video"),d(!1)):"story"===b.type&&a?(a("stories"),d(!1)):"friend_request"===b.type&&a&&(a("friends"),d(!1))},[v,a]),B=h.filter(a=>!a.isRead);return(0,ad.useEffect)(()=>{let a=a=>{e.current&&!e.current.contains(a.target)&&f.current&&!f.current.contains(a.target)&&d(!1)};return c&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[c]),(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsxs)(be,{ref:f,variant:"ghost",size:"sm",onClick:()=>d(!c),className:"relative text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(fF,{className:"w-5 h-5"}),o>0&&(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-pink-500 rounded-full animate-pulse"}),(0,ac.jsx)(fE,{className:"absolute -top-2 -right-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0 text-xs h-5 min-w-5 flex items-center justify-center",children:o})]})]}),c&&(0,ac.jsxs)("div",{ref:e,className:"fixed right-6 top-16 w-96 p-0 backdrop-blur-xl bg-gradient-to-br from-purple-900/95 to-pink-900/95 border-white/20 border rounded-lg shadow-2xl z-[9999] animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,ac.jsx)("div",{className:"p-4 border-b border-white/20",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ac.jsx)("h3",{className:"text-white text-lg",children:"Notifications"}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:t,disabled:j,className:"text-xs text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-50",children:"Refresh"}),r&&(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:w,disabled:!p||j,className:"text-xs text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-50",children:"Mark all read"}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:x,disabled:!p||!q||j,className:"text-xs text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-50",children:"Clear all"})]})]})}),(0,ac.jsxs)(fz,{defaultValue:"all",className:"w-full",children:[(0,ac.jsxs)(fA,{className:"w-full bg-white/10 border-white/20 mx-4 my-2 w-[calc(100%-2rem)]",children:[(0,ac.jsxs)(fB,{value:"all",className:"flex-1 data-[state=active]:bg-white/20 text-white",children:["All (",h.length,")"]}),(0,ac.jsxs)(fB,{value:"unread",className:"flex-1 data-[state=active]:bg-white/20 text-white",children:["Unread (",o,")"]})]}),(0,ac.jsx)(fC,{value:"all",className:"mt-0",children:j?(0,ac.jsxs)("div",{className:"h-[400px] flex items-center justify-center text-white/70 gap-2",children:[(0,ac.jsx)(fK,{className:"w-4 h-4 animate-spin"}),"Syncing notifications..."]}):l?(0,ac.jsxs)("div",{className:"h-[400px] flex flex-col items-center justify-center text-center px-6 gap-3",children:[(0,ac.jsx)("p",{className:"text-white/80",children:l}),(0,ac.jsx)(be,{size:"sm",variant:"outline",onClick:()=>s(),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:"Retry"})]}):b?(0,ac.jsx)(eL,{className:"h-[400px]",children:(0,ac.jsx)("div",{className:"space-y-1 py-2",children:0===h.length?(0,ac.jsxs)("div",{className:"text-center py-12",children:[(0,ac.jsx)(fF,{className:"w-12 h-12 text-white/30 mx-auto mb-3"}),(0,ac.jsx)("p",{className:"text-white/50",children:"No notifications"})]}):h.map(a=>(0,ac.jsx)("div",{onClick:()=>A(a),className:`p-3 cursor-pointer transition-all hover:bg-white/10 ${!a.isRead?"bg-white/5":""}`,children:(0,ac.jsxs)("div",{className:"flex gap-3",children:[(0,ac.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:a.user.avatar}),(0,ac.jsx)(d0,{children:a.user.name[0]})]}),(0,ac.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gradient-to-br from-purple-900 to-pink-900 rounded-full flex items-center justify-center border border-white/20",children:u(a.type)})]}),(0,ac.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ac.jsxs)("p",{className:"text-white text-sm",children:[(0,ac.jsx)("span",{className:"font-medium",children:a.user.name})," ",(0,ac.jsx)("span",{className:"text-white/70",children:a.content})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,ac.jsx)(fJ,{className:"w-3 h-3 text-white/40"}),(0,ac.jsx)("span",{className:"text-white/50 text-xs",children:gf(a.createdAt)}),!a.isRead&&(0,ac.jsx)("div",{className:"w-2 h-2 bg-pink-500 rounded-full"})]}),a.actionRequired&&"friend_request"===a.type&&(0,ac.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,ac.jsxs)(be,{size:"sm",onClick:b=>{b.stopPropagation(),y(a.id)},className:"flex-1 bg-green-500 hover:bg-green-600 text-white border-0",children:[(0,ac.jsx)(fI,{className:"w-3 h-3 mr-1"}),"Accept"]}),(0,ac.jsxs)(be,{size:"sm",variant:"ghost",onClick:b=>{b.stopPropagation(),z(a.id)},className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(fH,{className:"w-3 h-3 mr-1"}),"Decline"]})]})]})]})},a.id))})}):(0,ac.jsx)("div",{className:"h-[400px] flex flex-col items-center justify-center text-center px-6 gap-3 text-white/70",children:(0,ac.jsx)("p",{children:"Sign in to view your notifications."})})}),(0,ac.jsx)(fC,{value:"unread",className:"mt-0",children:j?(0,ac.jsxs)("div",{className:"h-[400px] flex items-center justify-center text-white/70 gap-2",children:[(0,ac.jsx)(fK,{className:"w-4 h-4 animate-spin"}),"Syncing notifications..."]}):l?(0,ac.jsxs)("div",{className:"h-[400px] flex flex-col items-center justify-center text-center px-6 gap-3",children:[(0,ac.jsx)("p",{className:"text-white/80",children:l}),(0,ac.jsx)(be,{size:"sm",variant:"outline",onClick:()=>s(),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:"Retry"})]}):b?(0,ac.jsx)(eL,{className:"h-[400px]",children:(0,ac.jsx)("div",{className:"space-y-1 py-2",children:0===B.length?(0,ac.jsxs)("div",{className:"text-center py-12",children:[(0,ac.jsx)(fI,{className:"w-12 h-12 text-white/30 mx-auto mb-3"}),(0,ac.jsx)("p",{className:"text-white/50",children:"All caught up!"})]}):B.map(a=>(0,ac.jsx)("div",{onClick:()=>A(a),className:"p-3 cursor-pointer transition-all hover:bg-white/10 bg-white/5",children:(0,ac.jsxs)("div",{className:"flex gap-3",children:[(0,ac.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:a.user.avatar}),(0,ac.jsx)(d0,{children:a.user.name[0]})]}),(0,ac.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gradient-to-br from-purple-900 to-pink-900 rounded-full flex items-center justify-center border border-white/20",children:u(a.type)})]}),(0,ac.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ac.jsxs)("p",{className:"text-white text-sm",children:[(0,ac.jsx)("span",{className:"font-medium",children:a.user.name})," ",(0,ac.jsx)("span",{className:"text-white/70",children:a.content})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,ac.jsx)(fJ,{className:"w-3 h-3 text-white/40"}),(0,ac.jsx)("span",{className:"text-white/50 text-xs",children:gf(a.createdAt)}),(0,ac.jsx)("div",{className:"w-2 h-2 bg-pink-500 rounded-full"})]}),a.actionRequired&&"friend_request"===a.type&&(0,ac.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,ac.jsxs)(be,{size:"sm",onClick:b=>{b.stopPropagation(),y(a.id)},className:"flex-1 bg-green-500 hover:bg-green-600 text-white border-0",children:[(0,ac.jsx)(fI,{className:"w-3 h-3 mr-1"}),"Accept"]}),(0,ac.jsxs)(be,{size:"sm",variant:"ghost",onClick:b=>{b.stopPropagation(),z(a.id)},className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(fH,{className:"w-3 h-3 mr-1"}),"Decline"]})]})]})]})},a.id))})}):(0,ac.jsx)("div",{className:"h-[400px] flex flex-col items-center justify-center text-center px-6 gap-3 text-white/70",children:(0,ac.jsx)("p",{children:"Sign in to view your notifications."})})})]})]})]})}let gh=bj("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),gi=bj("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gj=bj("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function gk({currentView:a,onNavigate:b,onLogout:c,onOpenSettings:d}){let{resolvedTheme:e}=(0,ae.useTheme)(),f="light"===e,g=[{id:"feed",icon:gh,label:"Feed"},{id:"messages",icon:bk,label:"Messages",badge:5},{id:"video",icon:bl,label:"Video"},{id:"friends",icon:bm,label:"Friends"},{id:"stories",icon:bq,label:"Stories",badge:3}],h=f?"bg-white/90 text-slate-900 shadow-sm":"bg-white/20 text-white",i=f?"text-slate-600 hover:text-slate-900 hover:bg-white/70":"text-white/60 hover:text-white hover:bg-white/10",j=f?"text-slate-600 hover:text-slate-900 hover:bg-white/70 transition-colors duration-200":"text-white/70 hover:text-white hover:bg-white/10 transition-colors duration-200",k=f?"text-slate-800":"text-white";return(0,ac.jsx)("nav",{className:bc("backdrop-blur-xl border-b sticky top-0 z-50 transition-colors duration-300",f?"bg-white/80 border-slate-200":"bg-white/10 border-white/20"),children:(0,ac.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-2xl flex items-center justify-center",children:(0,ac.jsx)(bn,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("span",{className:bc("text-xl hidden md:block font-semibold transition-colors",k),children:"MoveYSplash"})]}),(0,ac.jsx)("div",{className:"flex items-center gap-2",children:g.map(c=>(0,ac.jsxs)("button",{onClick:()=>b(c.id),className:bc("relative px-4 py-2 rounded-xl flex items-center gap-2 transition-all",a===c.id?h:i),children:[(0,ac.jsx)(c.icon,{className:"w-5 h-5"}),(0,ac.jsx)("span",{className:"hidden md:inline",children:c.label}),c.badge&&c.badge>0&&(0,ac.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs",children:c.badge})]},c.id))}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(gg,{onNavigate:b}),(0,ac.jsx)(be,{variant:"ghost",size:"sm",onClick:d,className:j,children:(0,ac.jsx)(gi,{className:"w-5 h-5"})}),(0,ac.jsx)("div",{className:bc("w-px h-6 mx-2 transition-colors duration-300",f?"bg-slate-200":"bg-white/20")}),(0,ac.jsxs)("button",{onClick:()=>b("profile"),className:bc("flex items-center gap-2 rounded-xl px-2 py-1 transition-colors",f?"hover:bg-white/70":"hover:bg-white/10"),children:[(0,ac.jsxs)(d$,{className:bc("w-8 h-8 border-2",f?"border-slate-200":"border-white/20"),children:[(0,ac.jsx)(d_,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=You"}),(0,ac.jsx)(d0,{children:"You"})]}),(0,ac.jsx)("span",{className:bc("hidden md:inline transition-colors",k),children:"You"})]}),(0,ac.jsx)(be,{variant:"ghost",size:"sm",onClick:c,className:j,children:(0,ac.jsx)(gj,{className:"w-5 h-5"})})]})]})})})}function gl({className:a,...b}){return(0,ac.jsx)("div",{"data-slot":"card",className:bc("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...b})}function gm({className:a,...b}){return(0,ac.jsx)("textarea",{"data-slot":"textarea",className:bc("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...b})}let gn=bj("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),go=bj("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),gp=bj("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),gq=bj("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),gr=bj("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),gs={"Smileys & Emotion":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Gestures & Hands":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Hearts & Love":["","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Celebration & Party":["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Activities & Sports":["","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Food & Drink":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Nature & Animals":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Travel & Places":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"Objects & Symbols":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]};function gt({onSelect:a}){return(0,ac.jsx)("div",{className:"w-80 backdrop-blur-xl bg-gradient-to-br from-purple-900/90 to-pink-900/90 border border-white/20 rounded-2xl p-0",children:(0,ac.jsx)(eL,{className:"h-96",children:(0,ac.jsx)("div",{className:"p-4 space-y-4",children:Object.entries(gs).map(([b,c])=>(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white/70 text-sm mb-2 px-1",children:b}),(0,ac.jsx)("div",{className:"grid grid-cols-8 gap-1",children:c.map((b,c)=>(0,ac.jsx)("button",{onClick:()=>a(b),className:"text-2xl hover:scale-125 transition-transform p-2 hover:bg-white/10 rounded-lg",children:b},c))})]},b))})})})}function gu(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function gv(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function gw(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=gv(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():gv(a[b],null)}}}}(...a),a)}var gx=globalThis?.document?ad.useLayoutEffect:()=>{},gy=ad[" useInsertionEffect ".trim().toString()]||gx;function gz(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}Symbol("RADIX:SYNC_STATE");var gA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function gB(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function gC(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=gB(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():gB(a[b],null)}}}}(...a),a)}function gD(a){let b=ad.useRef(a);return ad.useEffect(()=>{b.current=a}),ad.useMemo(()=>(...a)=>b.current?.(...a),[])}var gE="dismissableLayer.update",gF=ad.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gG=ad.forwardRef((a,b)=>{let{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:e,onFocusOutside:f,onInteractOutside:g,onDismiss:h,...i}=a,j=ad.useContext(gF),[k,l]=ad.useState(null),m=k?.ownerDocument??globalThis?.document,[,n]=ad.useState({}),o=gC(b,a=>l(a)),p=Array.from(j.layers),[q]=[...j.layersWithOutsidePointerEventsDisabled].slice(-1),r=p.indexOf(q),s=k?p.indexOf(k):-1,t=j.layersWithOutsidePointerEventsDisabled.size>0,u=s>=r,v=function(a,b=globalThis?.document){let c=gD(a),d=ad.useRef(!1),e=ad.useRef(()=>{});return ad.useEffect(()=>{let a=a=>{if(a.target&&!d.current){let d=function(){gI("dismissableLayer.pointerDownOutside",c,f,{discrete:!0})},f={originalEvent:a};"touch"===a.pointerType?(b.removeEventListener("click",e.current),e.current=d,b.addEventListener("click",e.current,{once:!0})):d()}else b.removeEventListener("click",e.current);d.current=!1},f=window.setTimeout(()=>{b.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(f),b.removeEventListener("pointerdown",a),b.removeEventListener("click",e.current)}},[b,c]),{onPointerDownCapture:()=>d.current=!0}}(a=>{let b=a.target,c=[...j.branches].some(a=>a.contains(b));u&&!c&&(e?.(a),g?.(a),a.defaultPrevented||h?.())},m),w=function(a,b=globalThis?.document){let c=gD(a),d=ad.useRef(!1);return ad.useEffect(()=>{let a=a=>{a.target&&!d.current&&gI("dismissableLayer.focusOutside",c,{originalEvent:a},{discrete:!1})};return b.addEventListener("focusin",a),()=>b.removeEventListener("focusin",a)},[b,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}(a=>{let b=a.target;![...j.branches].some(a=>a.contains(b))&&(f?.(a),g?.(a),a.defaultPrevented||h?.())},m);return!function(a,b=globalThis?.document){let c,d=(c=ad.useRef(a),ad.useEffect(()=>{c.current=a}),ad.useMemo(()=>(...a)=>c.current?.(...a),[]));ad.useEffect(()=>{let a=a=>{"Escape"===a.key&&d(a)};return b.addEventListener("keydown",a,{capture:!0}),()=>b.removeEventListener("keydown",a,{capture:!0})},[d,b])}(a=>{s===j.layers.size-1&&(d?.(a),!a.defaultPrevented&&h&&(a.preventDefault(),h()))},m),ad.useEffect(()=>{if(k)return c&&(0===j.layersWithOutsidePointerEventsDisabled.size&&(_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),j.layersWithOutsidePointerEventsDisabled.add(k)),j.layers.add(k),gH(),()=>{c&&1===j.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=_)}},[k,m,c,j]),ad.useEffect(()=>()=>{k&&(j.layers.delete(k),j.layersWithOutsidePointerEventsDisabled.delete(k),gH())},[k,j]),ad.useEffect(()=>{let a=()=>n({});return document.addEventListener(gE,a),()=>document.removeEventListener(gE,a)},[]),(0,ac.jsx)(gA.div,{...i,ref:o,style:{pointerEvents:t?u?"auto":"none":void 0,...a.style},onFocusCapture:gz(a.onFocusCapture,w.onFocusCapture),onBlurCapture:gz(a.onBlurCapture,w.onBlurCapture),onPointerDownCapture:gz(a.onPointerDownCapture,v.onPointerDownCapture)})});function gH(){let a=new CustomEvent(gE);document.dispatchEvent(a)}function gI(a,b,c,{discrete:d}){let e=c.originalEvent.target,f=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});if(b&&e.addEventListener(a,b,{once:!0}),d)e&&dL.flushSync(()=>e.dispatchEvent(f));else e.dispatchEvent(f)}function gJ(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}gG.displayName="DismissableLayer",ad.forwardRef((a,b)=>{let c=ad.useContext(gF),d=ad.useRef(null),e=gC(b,d);return ad.useEffect(()=>{let a=d.current;if(a)return c.branches.add(a),()=>{c.branches.delete(a)}},[c.branches]),(0,ac.jsx)(gA.div,{...a,ref:e})}).displayName="DismissableLayerBranch";var gK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function gL(a){let b=ad.useRef(a);return ad.useEffect(()=>{b.current=a}),ad.useMemo(()=>(...a)=>b.current?.(...a),[])}var gM="focusScope.autoFocusOnMount",gN="focusScope.autoFocusOnUnmount",gO={bubbles:!1,cancelable:!0},gP=ad.forwardRef((a,b)=>{let{loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f,...g}=a,[h,i]=ad.useState(null),j=gL(e),k=gL(f),l=ad.useRef(null),m=function(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=gJ(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():gJ(a[b],null)}}}}(...a),a)}(b,a=>i(a)),n=ad.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ad.useEffect(()=>{if(d){let a=function(a){if(n.paused||!h)return;let b=a.target;h.contains(b)?l.current=b:gS(l.current,{select:!0})},b=function(a){if(n.paused||!h)return;let b=a.relatedTarget;null!==b&&(h.contains(b)||gS(l.current,{select:!0}))};document.addEventListener("focusin",a),document.addEventListener("focusout",b);let c=new MutationObserver(function(a){if(document.activeElement===document.body)for(let b of a)b.removedNodes.length>0&&gS(h)});return h&&c.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",b),c.disconnect()}}},[d,h,n.paused]),ad.useEffect(()=>{if(h){gT.add(n);let a=document.activeElement;if(!h.contains(a)){let b=new CustomEvent(gM,gO);h.addEventListener(gM,j),h.dispatchEvent(b),b.defaultPrevented||(function(a,{select:b=!1}={}){let c=document.activeElement;for(let d of a)if(gS(d,{select:b}),document.activeElement!==c)return}(gQ(h).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&gS(h))}return()=>{h.removeEventListener(gM,j),setTimeout(()=>{let b=new CustomEvent(gN,gO);h.addEventListener(gN,k),h.dispatchEvent(b),b.defaultPrevented||gS(a??document.body,{select:!0}),h.removeEventListener(gN,k),gT.remove(n)},0)}}},[h,j,k,n]);let o=ad.useCallback(a=>{if(!c&&!d||n.paused)return;let b="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,e=document.activeElement;if(b&&e){var f;let b,d=a.currentTarget,[g,h]=[gR(b=gQ(f=d),f),gR(b.reverse(),f)];g&&h?a.shiftKey||e!==h?a.shiftKey&&e===g&&(a.preventDefault(),c&&gS(h,{select:!0})):(a.preventDefault(),c&&gS(g,{select:!0})):e===d&&a.preventDefault()}},[c,d,n.paused]);return(0,ac.jsx)(gK.div,{tabIndex:-1,...g,ref:m,onKeyDown:o})});function gQ(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}function gR(a,b){for(let c of a)if(!function(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(c,{upTo:b}))return c}function gS(a,{select:b=!1}={}){if(a&&a.focus){var c;let d=document.activeElement;a.focus({preventScroll:!0}),a!==d&&(c=a)instanceof HTMLInputElement&&"select"in c&&b&&a.select()}}gP.displayName="FocusScope";var gT=(w=[],{add(a){let b=w[0];a!==b&&b?.pause(),(w=gU(w,a)).unshift(a)},remove(a){w=gU(w,a),w[0]?.resume()}});function gU(a,b){let c=[...a],d=c.indexOf(b);return -1!==d&&c.splice(d,1),c}var gV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),gW=globalThis?.document?ad.useLayoutEffect:()=>{},gX=ad.forwardRef((a,b)=>{let{container:c,...d}=a,[e,f]=ad.useState(!1);gW(()=>f(!0),[]);let g=c||e&&globalThis?.document?.body;return g?dL.default.createPortal((0,ac.jsx)(gV.div,{...d,ref:b}),g):null});gX.displayName="Portal";var gY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),gZ=0;function g$(){ad.useEffect(()=>{let a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??g_()),document.body.insertAdjacentElement("beforeend",a[1]??g_()),gZ++,()=>{1===gZ&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),gZ--}},[])}function g_(){let a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var g0=function(){return(g0=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function g1(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}var g2=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),g3="width-before-scroll-bar";function g4(a,b){return"function"==typeof a?a(b):a&&(a.current=b),a}var g5=ad.useEffect,g6=new WeakMap,g7=(void 0===H&&(H={}),(void 0===I&&(I=function(a){return a}),J=[],K=!1,L={read:function(){if(K)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return J.length?J[J.length-1]:null},useMedium:function(a){var b=I(a,K);return J.push(b),function(){J=J.filter(function(a){return a!==b})}},assignSyncMedium:function(a){for(K=!0;J.length;){var b=J;J=[],b.forEach(a)}J={push:function(b){return a(b)},filter:function(){return J}}},assignMedium:function(a){K=!0;var b=[];if(J.length){var c=J;J=[],c.forEach(a),b=J}var d=function(){var c=b;b=[],c.forEach(a)},e=function(){return Promise.resolve().then(d)};e(),J={push:function(a){b.push(a),e()},filter:function(a){return b=b.filter(a),J}}}}).options=g0({async:!0,ssr:!1},H),L),g8=function(){},g9=ad.forwardRef(function(a,b){var c,d,e,f,g=ad.useRef(null),h=ad.useState({onScrollCapture:g8,onWheelCapture:g8,onTouchMoveCapture:g8}),i=h[0],j=h[1],k=a.forwardProps,l=a.children,m=a.className,n=a.removeScrollBar,o=a.enabled,p=a.shards,q=a.sideCar,r=a.noRelative,s=a.noIsolation,t=a.inert,u=a.allowPinchZoom,v=a.as,w=a.gapMode,x=g1(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),y=(c=[g,b],d=function(a){return c.forEach(function(b){return g4(b,a)})},(e=(0,ad.useState)(function(){return{value:null,callback:d,facade:{get current(){return e.value},set current(value){var a=e.value;a!==value&&(e.value=value,e.callback(value,a))}}}})[0]).callback=d,f=e.facade,g5(function(){var a=g6.get(f);if(a){var b=new Set(a),d=new Set(c),e=f.current;b.forEach(function(a){d.has(a)||g4(a,null)}),d.forEach(function(a){b.has(a)||g4(a,e)})}g6.set(f,c)},[c]),f),z=g0(g0({},x),i);return ad.createElement(ad.Fragment,null,o&&ad.createElement(q,{sideCar:g7,removeScrollBar:n,shards:p,noRelative:r,noIsolation:s,inert:t,setCallbacks:j,allowPinchZoom:!!u,lockRef:g,gapMode:w}),k?ad.cloneElement(ad.Children.only(l),g0(g0({},z),{ref:y})):ad.createElement(void 0===v?"div":v,g0({},z,{className:m,ref:y}),l))});g9.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},g9.classNames={fullWidth:g3,zeroRight:g2};var ha=function(a){var b=a.sideCar,c=g1(a,["sideCar"]);if(!b)throw Error("Sidecar: please provide `sideCar` property to import the right car");var d=b.read();if(!d)throw Error("Sidecar medium not found");return ad.createElement(d,g0({},c))};ha.isSideCarExport=!0;var hb=function(){var a=0,b=null;return{add:function(c){if(0==a&&(b=function(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var b=aa||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return b&&a.setAttribute("nonce",b),a}())){var d,e;(d=b).styleSheet?d.styleSheet.cssText=c:d.appendChild(document.createTextNode(c)),e=b,(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}a++},remove:function(){--a||!b||(b.parentNode&&b.parentNode.removeChild(b),b=null)}}},hc=function(){var a=hb();return function(b,c){ad.useEffect(function(){return a.add(b),function(){a.remove()}},[b&&c])}},hd=function(){var a=hc();return function(b){return a(b.styles,b.dynamic),null}},he={left:0,top:0,right:0,gap:0},hf=hd(),hg="data-scroll-locked",hh=function(a,b,c,d){var e=a.left,f=a.top,g=a.right,h=a.gap;return void 0===c&&(c="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(d,";\n   padding-right: ").concat(h,"px ").concat(d,";\n  }\n  body[").concat(hg,"] {\n    overflow: hidden ").concat(d,";\n    overscroll-behavior: contain;\n    ").concat([b&&"position: relative ".concat(d,";"),"margin"===c&&"\n    padding-left: ".concat(e,"px;\n    padding-top: ").concat(f,"px;\n    padding-right: ").concat(g,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(h,"px ").concat(d,";\n    "),"padding"===c&&"padding-right: ".concat(h,"px ").concat(d,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(g2," {\n    right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(g3," {\n    margin-right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(g2," .").concat(g2," {\n    right: 0 ").concat(d,";\n  }\n  \n  .").concat(g3," .").concat(g3," {\n    margin-right: 0 ").concat(d,";\n  }\n  \n  body[").concat(hg,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(h,"px;\n  }\n")},hi=function(){var a=parseInt(document.body.getAttribute(hg)||"0",10);return isFinite(a)?a:0},hj=function(){ad.useEffect(function(){return document.body.setAttribute(hg,(hi()+1).toString()),function(){var a=hi()-1;a<=0?document.body.removeAttribute(hg):document.body.setAttribute(hg,a.toString())}},[])},hk=function(a){var b=a.noRelative,c=a.noImportant,d=a.gapMode,e=void 0===d?"margin":d;hj();var f=ad.useMemo(function(){return void 0===e,he},[e]);return ad.createElement(hf,{styles:hh(f,!b,e,c?"":"!important")})},hl=function(a,b){if(!(a instanceof Element))return!1;var c=window.getComputedStyle(a);return"hidden"!==c[b]&&(c.overflowY!==c.overflowX||"TEXTAREA"===a.tagName||"visible"!==c[b])},hm=function(a,b){var c=b.ownerDocument,d=b;do{if("undefined"!=typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host),hn(a,d)){var e=ho(a,d);if(e[1]>e[2])return!0}d=d.parentNode}while(d&&d!==c.body)return!1},hn=function(a,b){return"v"===a?hl(b,"overflowY"):hl(b,"overflowX")},ho=function(a,b){return"v"===a?[b.scrollTop,b.scrollHeight,b.clientHeight]:[b.scrollLeft,b.scrollWidth,b.clientWidth]},hp=function(a,b,c,d,e){var f,g=(f=window.getComputedStyle(b).direction,"h"===a&&"rtl"===f?-1:1),h=g*d,i=c.target,j=b.contains(i),k=!1,l=h>0,m=0,n=0;do{if(!i)break;var o=ho(a,i),p=o[0],q=o[1]-o[2]-g*p;(p||q)&&hn(a,i)&&(m+=q,n+=p);var r=i.parentNode;i=r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.host:r}while(!j&&i!==document.body||j&&(b.contains(i)||b===i))return l&&(e&&1>Math.abs(m)||!e&&h>m)?k=!0:!l&&(e&&1>Math.abs(n)||!e&&-h>n)&&(k=!0),k},hq=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},hr=function(a){return[a.deltaX,a.deltaY]},hs=function(a){return a&&"current"in a?a.current:a},ht=0,hu=[];let hv=(M=function(a){var b=ad.useRef([]),c=ad.useRef([0,0]),d=ad.useRef(),e=ad.useState(ht++)[0],f=ad.useState(hd)[0],g=ad.useRef(a);ad.useEffect(function(){g.current=a},[a]),ad.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(e));var b=(function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))})([a.lockRef.current],(a.shards||[]).map(hs),!0).filter(Boolean);return b.forEach(function(a){return a.classList.add("allow-interactivity-".concat(e))}),function(){document.body.classList.remove("block-interactivity-".concat(e)),b.forEach(function(a){return a.classList.remove("allow-interactivity-".concat(e))})}}},[a.inert,a.lockRef.current,a.shards]);var h=ad.useCallback(function(a,b){if("touches"in a&&2===a.touches.length||"wheel"===a.type&&a.ctrlKey)return!g.current.allowPinchZoom;var e,f=hq(a),h=c.current,i="deltaX"in a?a.deltaX:h[0]-f[0],j="deltaY"in a?a.deltaY:h[1]-f[1],k=a.target,l=Math.abs(i)>Math.abs(j)?"h":"v";if("touches"in a&&"h"===l&&"range"===k.type)return!1;var m=hm(l,k);if(!m)return!0;if(m?e=l:(e="v"===l?"h":"v",m=hm(l,k)),!m)return!1;if(!d.current&&"changedTouches"in a&&(i||j)&&(d.current=e),!e)return!0;var n=d.current||e;return hp(n,b,a,"h"===n?i:j,!0)},[]),i=ad.useCallback(function(a){if(hu.length&&hu[hu.length-1]===f){var c="deltaY"in a?hr(a):hq(a),d=b.current.filter(function(b){var d;return b.name===a.type&&(b.target===a.target||a.target===b.shadowParent)&&(d=b.delta,d[0]===c[0]&&d[1]===c[1])})[0];if(d&&d.should){a.cancelable&&a.preventDefault();return}if(!d){var e=(g.current.shards||[]).map(hs).filter(Boolean).filter(function(b){return b.contains(a.target)});(e.length>0?h(a,e[0]):!g.current.noIsolation)&&a.cancelable&&a.preventDefault()}}},[]),j=ad.useCallback(function(a,c,d,e){var f={name:a,delta:c,target:d,should:e,shadowParent:function(a){for(var b=null;null!==a;)a instanceof ShadowRoot&&(b=a.host,a=a.host),a=a.parentNode;return b}(d)};b.current.push(f),setTimeout(function(){b.current=b.current.filter(function(a){return a!==f})},1)},[]),k=ad.useCallback(function(a){c.current=hq(a),d.current=void 0},[]),l=ad.useCallback(function(b){j(b.type,hr(b),b.target,h(b,a.lockRef.current))},[]),m=ad.useCallback(function(b){j(b.type,hq(b),b.target,h(b,a.lockRef.current))},[]);ad.useEffect(function(){return hu.push(f),a.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:m}),document.addEventListener("wheel",i,!1),document.addEventListener("touchmove",i,!1),document.addEventListener("touchstart",k,!1),function(){hu=hu.filter(function(a){return a!==f}),document.removeEventListener("wheel",i,!1),document.removeEventListener("touchmove",i,!1),document.removeEventListener("touchstart",k,!1)}},[]);var n=a.removeScrollBar,o=a.inert;return ad.createElement(ad.Fragment,null,o?ad.createElement(f,{styles:"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")}):null,n?ad.createElement(hk,{noRelative:a.noRelative,gapMode:a.gapMode}):null)},g7.useMedium(M),ha);var hw=ad.forwardRef(function(a,b){return ad.createElement(g9,g0({},a,{ref:b,sideCar:hv}))});hw.classNames=g9.classNames;var hx=new WeakMap,hy=new WeakMap,hz={},hA=0,hB=function(a){return a&&(a.host||hB(a.parentNode))},hC=function(a,b,c,d){var e=(Array.isArray(a)?a:[a]).map(function(a){if(b.contains(a))return a;var c=hB(a);return c&&b.contains(c)?c:(console.error("aria-hidden",a,"in not contained inside",b,". Doing nothing"),null)}).filter(function(a){return!!a});hz[c]||(hz[c]=new WeakMap);var f=hz[c],g=[],h=new Set,i=new Set(e),j=function(a){!a||h.has(a)||(h.add(a),j(a.parentNode))};e.forEach(j);var k=function(a){!a||i.has(a)||Array.prototype.forEach.call(a.children,function(a){if(h.has(a))k(a);else try{var b=a.getAttribute(d),e=null!==b&&"false"!==b,i=(hx.get(a)||0)+1,j=(f.get(a)||0)+1;hx.set(a,i),f.set(a,j),g.push(a),1===i&&e&&hy.set(a,!0),1===j&&a.setAttribute(c,"true"),e||a.setAttribute(d,"true")}catch(b){console.error("aria-hidden: cannot operate on ",a,b)}})};return k(b),h.clear(),hA++,function(){g.forEach(function(a){var b=hx.get(a)-1,e=f.get(a)-1;hx.set(a,b),f.set(a,e),b||(hy.has(a)||a.removeAttribute(d),hy.delete(a)),e||a.removeAttribute(c)}),--hA||(hx=new WeakMap,hx=new WeakMap,hy=new WeakMap,hz={})}},hD=function(a,b,c){void 0===c&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),e=b||("undefined"==typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return e?(d.push.apply(d,Array.from(e.querySelectorAll("[aria-live], script"))),hC(d,e,c,"aria-hidden")):function(){return null}},hE="Dialog",[hF,hG]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(hE),[hH,hI]=hF(hE),hJ=a=>{let{__scopeDialog:b,children:c,open:d,defaultOpen:e,onOpenChange:f,modal:g=!0}=a,h=ad.useRef(null),i=ad.useRef(null),[j,k]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return gy(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:d,defaultProp:e??!1,onChange:f,caller:hE});return(0,ac.jsx)(hH,{scope:b,triggerRef:h,contentRef:i,contentId:eZ(),titleId:eZ(),descriptionId:eZ(),open:j,onOpenChange:k,onOpenToggle:ad.useCallback(()=>k(a=>!a),[k]),modal:g,children:c})};hJ.displayName=hE;var hK="DialogTrigger",hL=ad.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=hI(hK,c),f=gw(b,e.triggerRef);return(0,ac.jsx)(gY.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":h3(e.open),...d,ref:f,onClick:gu(a.onClick,e.onOpenToggle)})});hL.displayName=hK;var hM="DialogPortal",[hN,hO]=hF(hM,{forceMount:void 0}),hP=a=>{let{__scopeDialog:b,forceMount:c,children:d,container:e}=a,f=hI(hM,b);return(0,ac.jsx)(hN,{scope:b,forceMount:c,children:ad.Children.map(d,a=>(0,ac.jsx)(d4,{present:c||f.open,children:(0,ac.jsx)(gX,{asChild:!0,container:e,children:a})}))})};hP.displayName=hM;var hQ="DialogOverlay",hR=ad.forwardRef((a,b)=>{let c=hO(hQ,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=hI(hQ,a.__scopeDialog);return f.modal?(0,ac.jsx)(d4,{present:d||f.open,children:(0,ac.jsx)(hT,{...e,ref:b})}):null});hR.displayName=hQ;var hS=ah("DialogOverlay.RemoveScroll"),hT=ad.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=hI(hQ,c);return(0,ac.jsx)(hw,{as:hS,allowPinchZoom:!0,shards:[e.contentRef],children:(0,ac.jsx)(gY.div,{"data-state":h3(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),hU="DialogContent",hV=ad.forwardRef((a,b)=>{let c=hO(hU,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=hI(hU,a.__scopeDialog);return(0,ac.jsx)(d4,{present:d||f.open,children:f.modal?(0,ac.jsx)(hW,{...e,ref:b}):(0,ac.jsx)(hX,{...e,ref:b})})});hV.displayName=hU;var hW=ad.forwardRef((a,b)=>{let c=hI(hU,a.__scopeDialog),d=ad.useRef(null),e=gw(b,c.contentRef,d);return ad.useEffect(()=>{let a=d.current;if(a)return hD(a)},[]),(0,ac.jsx)(hY,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gu(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:gu(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:gu(a.onFocusOutside,a=>a.preventDefault())})}),hX=ad.forwardRef((a,b)=>{let c=hI(hU,a.__scopeDialog),d=ad.useRef(!1),e=ad.useRef(!1);return(0,ac.jsx)(hY,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,e.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(e.current=!0));let f=b.target;c.triggerRef.current?.contains(f)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&e.current&&b.preventDefault()}})}),hY=ad.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:e,onCloseAutoFocus:f,...g}=a,h=hI(hU,c),i=ad.useRef(null),j=gw(b,i);return g$(),(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(gP,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:e,onUnmountAutoFocus:f,children:(0,ac.jsx)(gG,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":h3(h.open),...g,ref:j,onDismiss:()=>h.onOpenChange(!1)})}),(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(h7,{titleId:h.titleId}),(0,ac.jsx)(h8,{contentRef:i,descriptionId:h.descriptionId})]})]})}),hZ="DialogTitle",h$=ad.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=hI(hZ,c);return(0,ac.jsx)(gY.h2,{id:e.titleId,...d,ref:b})});h$.displayName=hZ;var h_="DialogDescription",h0=ad.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=hI(h_,c);return(0,ac.jsx)(gY.p,{id:e.descriptionId,...d,ref:b})});h0.displayName=h_;var h1="DialogClose",h2=ad.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=hI(h1,c);return(0,ac.jsx)(gY.button,{type:"button",...d,ref:b,onClick:gu(a.onClick,()=>e.onOpenChange(!1))})});function h3(a){return a?"open":"closed"}h2.displayName=h1;var h4="DialogTitleWarning",[h5,h6]=(N={contentName:hU,titleName:hZ,docsSlug:"dialog"},b=ad.createContext(N),(c=a=>{let{children:c,...d}=a,e=ad.useMemo(()=>d,Object.values(d));return(0,ac.jsx)(b.Provider,{value:e,children:c})}).displayName=h4+"Provider",[c,function(a){let c=ad.useContext(b);if(c)return c;if(void 0!==N)return N;throw Error(`\`${a}\` must be used within \`${h4}\``)}]),h7=({titleId:a})=>{let b=h6(h4),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return ad.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},h8=({contentRef:a,descriptionId:b})=>{let c=h6("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return ad.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null};function h9({...a}){return(0,ac.jsx)(hJ,{"data-slot":"dialog",...a})}function ia({...a}){return(0,ac.jsx)(hL,{"data-slot":"dialog-trigger",...a})}function ib({...a}){return(0,ac.jsx)(hP,{"data-slot":"dialog-portal",...a})}function ic({...a}){return(0,ac.jsx)(h2,{"data-slot":"dialog-close",...a})}function id({className:a,...b}){return(0,ac.jsx)(hR,{"data-slot":"dialog-overlay",className:bc("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function ie({className:a,children:b,...c}){return(0,ac.jsxs)(ib,{"data-slot":"dialog-portal",children:[(0,ac.jsx)(id,{}),(0,ac.jsxs)(hV,{"data-slot":"dialog-content",className:bc("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c,children:[b,(0,ac.jsxs)(h2,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,ac.jsx)(fH,{}),(0,ac.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ig({className:a,...b}){return(0,ac.jsx)("div",{"data-slot":"dialog-header",className:bc("flex flex-col gap-2 text-center sm:text-left",a),...b})}function ih({className:a,...b}){return(0,ac.jsx)("div",{"data-slot":"dialog-footer",className:bc("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function ii({className:a,...b}){return(0,ac.jsx)(h$,{"data-slot":"dialog-title",className:bc("text-lg leading-none font-semibold",a),...b})}function ij({className:a,...b}){return(0,ac.jsx)(h0,{"data-slot":"dialog-description",className:bc("text-muted-foreground text-sm",a),...b})}let ik=bj("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),il=bj("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),im=bj("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),io=bj("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),ip=["web","copy","facebook","twitter","whatsapp","telegram","email","movesplash"],iq={web:{label:"Share with device",description:"Use your device share sheet",icon:bo,highlight:!0},copy:{label:"Copy link",description:"Copy post link to clipboard",icon:il},facebook:{label:"Facebook",description:"Share to your Facebook feed",icon:ik},twitter:{label:"X (Twitter)",description:"Post to X with a prefilled tweet",icon:io},whatsapp:{label:"WhatsApp",description:"Share with your WhatsApp contacts",icon:bk},telegram:{label:"Telegram",description:"Share via Telegram",icon:gq},email:{label:"Email",description:"Send by email",icon:im},movesplash:{label:"MoveYSplash Messages",description:"Drop this post into a MoveYSplash conversation",icon:bm,highlight:!0}};function ir({open:a,post:b,onClose:c,onSelect:d}){let[e,f]=(0,ad.useState)(!1);(0,ad.useEffect)(()=>{f("undefined"!=typeof navigator&&"function"==typeof navigator.share)},[]);let g=(0,ad.useMemo)(()=>ip.filter(a=>"web"!==a||!!e),[e]),h=(0,ad.useMemo)(()=>{let a=b?.text?.trim();return a?a.length<=180?a:`${a.slice(0,177)}`:""},[b]);return(0,ac.jsx)(h9,{open:a,onOpenChange:a=>!a&&c(),children:(0,ac.jsxs)(ie,{className:"max-w-lg bg-gradient-to-br from-slate-900/90 to-purple-900/80 text-white border-white/10",children:[(0,ac.jsx)(ig,{children:(0,ac.jsxs)(ii,{className:"flex items-center gap-2 text-white",children:[(0,ac.jsx)(bo,{className:"w-5 h-5"}),"Share post"]})}),b&&(0,ac.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 space-y-3",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10 border border-white/20",children:[(0,ac.jsx)(d_,{src:b.authorAvatar}),(0,ac.jsx)(d0,{children:b.authorName[0]??"U"})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white font-medium",children:b.authorName}),b.authorUsername&&(0,ac.jsx)("div",{className:"text-white/60 text-sm",children:b.authorUsername})]})]}),h?(0,ac.jsx)("p",{className:"text-white/80 text-sm whitespace-pre-wrap leading-relaxed",children:h}):(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"No caption  share the vibes!"})]}),(0,ac.jsx)("div",{className:"grid grid-cols-1 gap-2",children:g.map(a=>{let b=iq[a];return(0,ac.jsxs)(be,{type:"button",variant:"ghost",className:bc("justify-start bg-white/5 hover:bg-white/15 border border-white/10 text-left flex items-center gap-3",b.highlight&&"border-white/20 bg-white/10"),onClick:()=>d(a),children:[(0,ac.jsx)(b.icon,{className:"w-5 h-5 text-white"}),(0,ac.jsxs)("div",{className:"flex flex-col items-start",children:[(0,ac.jsx)("span",{className:"text-white font-medium",children:b.label}),(0,ac.jsx)("span",{className:"text-white/60 text-xs",children:b.description})]})]},a)})}),(0,ac.jsxs)("div",{className:"mt-2 text-xs text-white/40 flex items-center gap-2",children:[(0,ac.jsx)(br,{className:"w-4 h-4"}),"Sharing boosts your post reach and inspires more connections."]})]})})}let is=(a,b)=>`https://movesplash.app/posts/${encodeURIComponent(a)}/${encodeURIComponent(b)}`,it=(a,b)=>{let c=b?.trim();return c&&c.length>0?c.length>280?`${c.slice(0,277)}`:c:`Check out this MoveYSplash post from ${a}!`},iu=a=>{let b=is(a.memberId,a.userpostId),c=it(a.authorName,a.text);return`${a.authorName} on MoveYSplash:
${c}

${b}`},iv=`https://${dF}.supabase.co/functions/v1/make-server-a14c7986`,iw=a=>`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(a||"user")}`;function ix({onShareToMessages:a}={}){let{currentUser:b,allUsers:c,addPost:d,fetchComments:e,addComment:f,sharePost:g,toggleSavePost:h}=f3(),[i,j]=(0,ad.useState)(""),[k,l]=(0,ad.useState)(!1),[m,n]=(0,ad.useState)([]),o=(0,ad.useRef)(null),p=(0,ad.useRef)(null),[q,r]=(0,ad.useState)([]),[s,t]=(0,ad.useState)(!1),[u,v]=(0,ad.useState)(!1),[w,x]=(0,ad.useState)({}),[y,z]=(0,ad.useState)(null),[A,B]=(0,ad.useState)(!1),[C,D]=(0,ad.useState)(null),E=(0,ad.useCallback)(async()=>{t(!0);try{let a=await fetch(`${iv}/posts`,{headers:{Authorization:`Bearer ${dG}`}});if(!a.ok)throw Error(`status ${a.status}`);let b=await a.json().catch(()=>null),c=(Array.isArray(b?.posts)?b.posts:[]).map(a=>{if("object"!=typeof a||null===a)return null;let b=a.id,c=a.userId;if("string"!=typeof b||"string"!=typeof c)return null;let d="string"==typeof a.text?a.text:"string"==typeof a.content?a.content:"",e="string"==typeof a.timestamp&&a.timestamp?a.timestamp:new Date().toISOString(),f="number"==typeof a.likes&&Number.isFinite(a.likes)?a.likes:0,g="number"==typeof a.comments&&Number.isFinite(a.comments)?a.comments:0,h="number"==typeof a.shares&&Number.isFinite(a.shares)?a.shares:0,i=Array.isArray(a.likedBy)?a.likedBy.filter(a=>"string"==typeof a):[],j=(Array.isArray(a.media)?a.media:[]).map((a,c)=>{if("object"!=typeof a||null===a)return null;let d="string"==typeof a.url?a.url:"";if(!d)return null;let e="video"===a.type?"video":"image";return{id:`${b}-media-${c}`,type:e,url:d}}).filter(a=>!!a);return{id:b,userId:c,text:d,media:j,likes:f,comments:g,shares:h,timestamp:e,likedBy:i}}).filter(a=>!!a).sort((a,b)=>Date.parse(b.timestamp)-Date.parse(a.timestamp));r(c),x({})}catch(a){console.error("Error loading feed posts:",a),fV.error("Unable to load feed right now.")}finally{t(!1)}},[]);(0,ad.useEffect)(()=>{E()},[E]);let F=async()=>{if(!b)return void fV.info("Sign in to share whats on your mind.");if(!i.trim()&&0===m.length)return void fV.error("Please write something or add media");v(!0);try{await d({text:i,media:m.length>0?m.map(a=>({type:a.type,url:a.url})):void 0}),j(""),n([]),l(!1),fV.success("Posted! "),await E()}catch(a){console.error("Error creating post:",a),fV.error("Unable to post right now.")}finally{v(!1)}},G=async c=>{if(!y||A)return;let d=is(y.memberId,y.userpostId),e=it(y.authorName,y.text),f=`${e}

${d}`,h=iu(y),i=!1,j=a=>{};switch(c){case"copy":try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(f);else{let a=document.createElement("textarea");a.value=f,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.focus(),a.select(),document.execCommand("copy"),document.body.removeChild(a)}fV.success("Post link copied to clipboard!"),i=!0}catch(a){console.error("Unable to copy link:",a),fV.error("Unable to copy the link. Please try again.")}break;case"facebook":j(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(d)}`),fV.info("Opening Facebook share"),i=!0;break;case"twitter":j(`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${e} ${d}`)}`),fV.info("Opening X (Twitter)"),i=!0;break;case"whatsapp":j(`https://wa.me/?text=${encodeURIComponent(f)}`),fV.info("Launching WhatsApp"),i=!0;break;case"telegram":j(`https://t.me/share/url?url=${encodeURIComponent(d)}&text=${encodeURIComponent(e)}`),fV.info("Opening Telegram"),i=!0;break;case"email":encodeURIComponent("Check this MoveYSplash post"),encodeURIComponent(f),fV.info("Composing email"),i=!0;break;case"movesplash":a?.({message:h,postId:y.userpostId,postOwnerId:y.memberId}),fV.success("Draft ready in MoveYSplash Messages "),i=!0;break;case"web":if(navigator.share)try{await navigator.share({title:`${y.authorName} on MoveYSplash`,text:e,url:d}),fV.success("Shared successfully! "),i=!0}catch(a){a instanceof DOMException&&"AbortError"===a.name?fV.info("Share cancelled."):(console.error("Web share failed:",a),fV.error("Unable to share via your device."))}else fV.info("Device share sheet is not available.")}if(i){B(!0);try{let a=await g(y.memberId,y.userpostId,{platform:c,sharerUserId:b?.id??void 0,message:h});r(b=>b.map(b=>b.id===y.userpostId?{...b,shares:a??b.shares+1}:b))}catch(a){console.error("Error syncing share count:",a),r(a=>a.map(a=>a.id===y.userpostId?{...a,shares:a.shares+1}:a))}finally{B(!1),z(null)}}},H=(0,ad.useCallback)(async a=>{let b=w[a.id],c=!b?.isOpen,d=b?.hasLoaded??!1;if(x(b=>{let e=b[a.id],f=e?{...e,isOpen:!e.isOpen,isLoading:c&&!d,error:null}:{isOpen:!0,isLoading:!0,isSubmitting:!1,hasLoaded:!1,comments:[],input:"",error:null};return{...b,[a.id]:f}}),c&&!d)try{let b=await e(a.userId,a.id);x(c=>{let d=c[a.id];return d?{...c,[a.id]:{...d,isLoading:!1,hasLoaded:!0,comments:b}}:c})}catch(b){console.error("Error loading comments:",b),x(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isLoading:!1,hasLoaded:!0,error:"Unable to load comments right now."}}:b})}},[w,e]),I=(0,ad.useCallback)(async(a,c)=>{if(!b)return void fV.info("Sign in to save posts.");let d=`${a.userId}:${a.id}`;D(d);try{await h(a.userId,a.id)?fV.success(`Saved ${c}'s post.`):fV.success("Removed from saved posts.")}catch(b){console.error("Error updating bookmark state:",b);let a=b instanceof Error&&b.message?b.message:"Unable to update saved posts right now.";fV.error(a)}finally{D(a=>a===d?null:a)}},[b,h]),J=async a=>{let c=w[a.id];if(!c||c.isSubmitting)return;if(!b)return void fV.info("Sign in to join the conversation.");let d=c.input.trim();if(!d)return void x(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,error:"Please enter a comment before posting."}}:b});x(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isSubmitting:!0,error:null}}:b});let e=await f(a.userId,a.id,d);e?(x(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isSubmitting:!1,hasLoaded:!0,comments:[...c.comments,e.comment],input:"",error:null}}:b}),r(b=>b.map(b=>b.id===a.id?{...b,comments:e.totalComments}:b))):x(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isSubmitting:!1,error:"Unable to post your comment right now."}}:b})},K=async a=>{if(!b)return void fV.info("Sign in to like posts.");let c=a.likedBy.includes(b.id);r(d=>d.map(d=>d.id===a.id?{...d,likes:c?Math.max(d.likes-1,0):d.likes+1,likedBy:c?d.likedBy.filter(a=>a!==b.id):[...d.likedBy,b.id]}:d));try{await fetch(`${iv}/posts/${a.userId}/${a.id}/like`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${dG}`},body:JSON.stringify({likerUserId:b.id})})}catch(a){console.error("Error updating like:",a),fV.error("Unable to update like right now."),r(q)}};return(0,ac.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,ac.jsx)(gl,{className:"p-6 backdrop-blur-xl bg-white/10 border-white/20",children:(0,ac.jsxs)("div",{className:"flex gap-4",children:[(0,ac.jsxs)(d$,{className:"w-12 h-12 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:b?.avatar??iw(b?.id??"guest")}),(0,ac.jsx)(d0,{children:b?.name?.[0]??"U"})]}),(0,ac.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,ac.jsx)(gm,{placeholder:"What's on your mind? Share with your squad...",value:i,onChange:a=>j(a.target.value),className:"bg-white/5 border-white/20 text-white placeholder:text-white/50 resize-none min-h-[100px]"}),m.length>0&&(0,ac.jsx)("div",{className:"grid grid-cols-2 gap-2",children:m.map(a=>(0,ac.jsxs)("div",{className:"relative group",children:["image"===a.type?(0,ac.jsx)(bt,{src:a.url,alt:"Upload preview",className:"w-full h-40 object-cover rounded-lg"}):(0,ac.jsx)("video",{src:a.url,className:"w-full h-40 object-cover rounded-lg",controls:!0}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>{var b;return b=a.id,void n(a=>a.filter(a=>a.id!==b))},className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:(0,ac.jsx)(fH,{className:"w-4 h-4"})})]},a.id))}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex gap-2",children:[(0,ac.jsx)("input",{ref:o,type:"file",accept:"image/*",multiple:!0,onChange:a=>{let b=a.target.files;b&&Array.from(b).forEach(a=>{let b=new FileReader;b.onload=b=>{let c=b.target?.result;c&&n(b=>[...b,{id:`${a.name}-${Date.now()}`,type:"image",url:c}])},b.readAsDataURL(a)})},className:"hidden"}),(0,ac.jsx)("input",{ref:p,type:"file",accept:"video/*",onChange:a=>{let b=a.target.files;b&&Array.from(b).forEach(a=>{let b=new FileReader;b.onload=b=>{let c=b.target?.result;c&&n(b=>[...b,{id:`${a.name}-${Date.now()}`,type:"video",url:c}])},b.readAsDataURL(a)})},className:"hidden"}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>o.current?.click(),className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(go,{className:"w-5 h-5 mr-2"}),"Photo"]}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>p.current?.click(),className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(bl,{className:"w-5 h-5 mr-2"}),"Video"]}),(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>l(!k),className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(gp,{className:"w-5 h-5 mr-2"}),"Emoji"]}),k&&(0,ac.jsx)("div",{className:"absolute bottom-full left-0 mb-2 z-50",children:(0,ac.jsx)(gt,{onSelect:a=>{j(b=>b+a),l(!1)}})})]})]}),(0,ac.jsx)(be,{onClick:F,disabled:u||!i.trim()&&0===m.length,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(fK,{className:"w-4 h-4 mr-2 animate-spin"}),"Posting"]}):(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(gq,{className:"w-4 h-4 mr-2"}),"Post"]})})]})]})]})}),s&&(0,ac.jsx)(gl,{className:"p-6 backdrop-blur-xl bg-white/10 border-white/20",children:(0,ac.jsxs)("div",{className:"flex items-center gap-3 text-white/80 text-sm",children:[(0,ac.jsx)(fK,{className:"w-5 h-5 animate-spin"}),(0,ac.jsx)("span",{children:"Loading feed..."})]})}),!s&&0===q.length&&(0,ac.jsx)(gl,{className:"p-6 backdrop-blur-xl bg-white/10 border-white/20 text-center",children:(0,ac.jsx)("p",{className:"text-white/70",children:"No posts yet. Share something to get the conversation started!"})}),q.map(a=>{let d=c.get(a.userId),e=d?.name??"MoveSplash user",f=d?.username??"",g=f?f.startsWith("@")?f:`@${f}`:"@movesplash-user",h=d?.avatar??iw(a.userId),i=!!b&&a.likedBy.includes(b.id),j=w[a.id],k=`${a.userId}:${a.id}`,l=!!b?.savedPostIds?.includes(k),m=C===k;return(0,ac.jsxs)(gl,{className:"overflow-hidden backdrop-blur-xl bg-white/10 border-white/20",children:[(0,ac.jsx)("div",{className:"p-6 pb-4",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)(d$,{className:"w-12 h-12 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:h}),(0,ac.jsx)(d0,{children:e[0]??"U"})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white",children:e}),(0,ac.jsxs)("div",{className:"text-white/50 text-sm",children:[g,"  ",(a=>{let b=new Date(a);if(Number.isNaN(b.getTime()))return"";let c=Math.floor((Date.now()-b.getTime())/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;let d=Math.floor(c/60);if(d<24)return`${d}h ago`;let e=Math.floor(d/24);return e<7?`${e}d ago`:b.toLocaleDateString()})(a.timestamp)]})]})]}),(0,ac.jsx)(be,{variant:"ghost",size:"sm",className:"text-white/70 hover:text-white hover:bg-white/10",children:(0,ac.jsx)(gn,{className:"w-5 h-5"})})]})}),(0,ac.jsx)("div",{className:"px-6 pb-4",children:(0,ac.jsx)("p",{className:"text-white/90 whitespace-pre-line",children:a.text})}),a.media.length>0&&(0,ac.jsx)("div",{className:`grid gap-2 px-6 pb-4 ${1===a.media.length?"grid-cols-1":"grid-cols-2"}`,children:a.media.map(b=>(0,ac.jsx)("div",{className:"rounded-lg overflow-hidden",children:"image"===b.type?(0,ac.jsx)(bt,{src:b.url,alt:"Post media",className:`w-full ${1===a.media.length?"max-h-96":"h-64"} object-cover`}):(0,ac.jsx)("video",{src:b.url,className:`w-full ${1===a.media.length?"max-h-96":"h-64"} object-cover`,controls:!0})},b.id))}),(0,ac.jsxs)("div",{className:"p-6 pt-4",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-6 text-white/60 text-sm",children:[(0,ac.jsxs)("span",{children:[a.likes," likes"]}),(0,ac.jsxs)("span",{children:[a.comments," comments"]}),(0,ac.jsxs)("span",{children:[a.shares," shares"]})]}),(0,ac.jsx)(be,{variant:"ghost",size:"sm",className:`text-white/70 hover:bg-white/10 ${l?"text-amber-300 hover:text-amber-200":"hover:text-white"}`,onClick:()=>I(a,e),disabled:m,"aria-pressed":l,"aria-label":l?"Remove from saved posts":"Save post",children:m?(0,ac.jsx)(fK,{className:"w-4 h-4 animate-spin"}):(0,ac.jsx)(gr,{className:`w-4 h-4 transition-colors ${l?"fill-current":""}`})})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/10",children:[(0,ac.jsxs)(be,{variant:"ghost",className:`flex-1 ${i?"text-pink-400":"text-white/70"} hover:text-pink-400 hover:bg-white/10`,onClick:()=>K(a),children:[(0,ac.jsx)(bp,{className:`w-5 h-5 mr-2 ${i?"fill-current":""}`}),"Like"]}),(0,ac.jsxs)(be,{variant:"ghost",className:"flex-1 text-white/70 hover:text-blue-400 hover:bg-white/10",onClick:()=>H(a),children:[(0,ac.jsx)(bk,{className:"w-5 h-5 mr-2"}),"Comment"]}),(0,ac.jsxs)(be,{variant:"ghost",className:"flex-1 text-white/70 hover:text-green-400 hover:bg-white/10 disabled:opacity-50",disabled:A&&y?.userpostId===a.id,onClick:()=>{z({userpostId:a.id,memberId:a.userId,authorName:e,authorUsername:g,authorAvatar:h,text:a.text})},children:[(0,ac.jsx)(bo,{className:"w-5 h-5 mr-2"}),"Share"]})]}),j?.isOpen&&(0,ac.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 space-y-4",children:[j.isLoading?(0,ac.jsxs)("div",{className:"flex items-center gap-3 text-white/70 text-sm",children:[(0,ac.jsx)(fK,{className:"w-4 h-4 animate-spin"}),(0,ac.jsx)("span",{children:"Loading comments..."})]}):(0,ac.jsxs)(ac.Fragment,{children:[0===j.comments.length&&!j.error&&(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Be the first to comment."}),j.comments.map(a=>(0,ac.jsxs)("div",{className:"flex gap-3",children:[(0,ac.jsxs)(d$,{className:"w-9 h-9 border border-white/10",children:[(0,ac.jsx)(d_,{src:a.authorAvatar||iw(a.authorId)}),(0,ac.jsx)(d0,{children:a.authorName[0]??"U"})]}),(0,ac.jsxs)("div",{className:"flex-1",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-white text-sm",children:a.authorName}),(0,ac.jsx)("span",{className:"text-white/40 text-xs",children:(a=>{let b=Math.floor((Date.now()-a.getTime())/6e4);if(b<1)return"Just now";if(b<60)return`${b}m ago`;let c=Math.floor(b/60);if(c<24)return`${c}h ago`;let d=Math.floor(c/24);return d<7?`${d}d ago`:a.toLocaleDateString()})(a.createdAt)})]}),(0,ac.jsx)("p",{className:"text-white/80 text-sm whitespace-pre-line",children:a.content})]})]},a.id)),j.error&&(0,ac.jsx)("p",{className:"text-red-300 text-sm",children:j.error})]}),(0,ac.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,ac.jsx)(gm,{value:j.input,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void x(a=>{let b=a[c];return b?{...a,[c]:{...b,input:d,error:null}}:a})},placeholder:"Write a comment...",rows:2,className:"flex-1 bg-white/5 border-white/20 text-white placeholder:text-white/50"}),(0,ac.jsx)(be,{onClick:()=>void J(a),disabled:j.isSubmitting||0===j.input.trim().length,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 self-center disabled:opacity-50",children:j.isSubmitting?(0,ac.jsx)(fK,{className:"w-4 h-4 animate-spin"}):(0,ac.jsx)(gq,{className:"w-4 h-4"})})]})]})]})]},a.id)}),(0,ac.jsx)(ir,{open:!!y,post:y,onClose:()=>{A||z(null)},onSelect:a=>{G(a)}})]})}var iy=a.i(81133),iz=((d=iz||{}).Trace="trace",d.Debug="debug",d.Info="info",d.Warn="warn",d.Error="error",d.Silent="silent",d);let iA=(a,b,c)=>{let d=c?`, context: ${JSON.stringify(c)}`:"",e=`[${new Date().toISOString()}] ${b.valueOf().toUpperCase()} ably-chat: ${a}${d}`;switch(b){case"trace":case"debug":console.log(e);break;case"info":console.info(e);break;case"warn":console.warn(e);break;case"error":console.error(e)}},iB=new Map([["trace",0],["debug",1],["info",2],["warn",3],["error",4],["silent",5]]);class iC{constructor(a,b,c){this._handler=a,this._context=c;const d=iB.get(b);if(void 0===d)throw new iy.ErrorInfo(`Invalid log level: ${b}`,5e4,500);this._levelNumber=d}trace(a,b){this._write(a,"trace",0,b)}debug(a,b){this._write(a,"debug",1,b)}info(a,b){this._write(a,"info",2,b)}warn(a,b){this._write(a,"warn",3,b)}error(a,b){this._write(a,"error",4,b)}withContext(a){let b=[...iB.entries()].find(([,a])=>a===this._levelNumber)?.[0]??"error";return new iC(this._handler,b,this._mergeContext(a))}_write(a,b,c,d){c>=this._levelNumber&&this._handler(a,b,this._mergeContext(d))}_mergeContext(a){return this._context?a?{...this._context,...a}:this._context:a??void 0}}let iD={logLevel:iz.Error};function iE(a,b,c){if((Array.isArray(b)||"string"==typeof b)&&c)return a.on(b,c),()=>{a.off(c)};if("function"==typeof b)return a.on(b),()=>{a.off(b)};throw TypeError("Invalid arguments passed to on()")}function iF(a,b,c){if((Array.isArray(b)||"string"==typeof b)&&c){let d=a.subscribe(b,c);return()=>{d.then(()=>{a.unsubscribe(c)}).catch(a=>{console.error("Error subscribing to events:",a)})}}if("function"==typeof b){let c=a.subscribe(b);return()=>{c.then(()=>{a.unsubscribe(b)}).catch(a=>{console.error("Error subscribing to events:",a)})}}throw TypeError("Invalid arguments passed to subscribe()")}let iG=iy.Realtime.EventEmitter;class iH extends iG{}let iI=a=>(...b)=>a(...b),iJ=a=>{let b=Object.values(a.events).flat().length+a.any.length+Object.values(a.eventsOnce).flat().length+a.anyOnce.length;return!!b&&b>0};var iK=((e=iK||{}).Initialized="initialized",e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e.Suspended="suspended",e.Failed="failed",e);class iL{constructor(a,b){this._status="initialized",this._emitter=new iH,this._logger=b,this._status=this._mapAblyStatusToChat(a.connection.state),this._error=a.connection.errorReason;const c=a=>{let b=this._mapAblyStatusToChat(a.current);if(b===this._status)return;let c={current:b,previous:this._status,error:a.reason,retryIn:a.retryIn};this._applyStatusChange(c)};this._clearAblyConnectionListener=iE(a.connection,c)}get status(){return this._status}get error(){return this._error}onStatusChange(a){let b=iI(a);return this._emitter.on(b),{off:()=>{this._emitter.off(b)}}}dispose(){this._logger.trace("DefaultConnection.dispose();"),this._clearAblyConnectionListener(),this._emitter.off()}hasListeners(){return iJ(this._emitter)}_applyStatusChange(a){this._status=a.current,this._error=a.error,this._logger.info("Connection state changed",a),this._emitter.emit(a.current,a)}_mapAblyStatusToChat(a){switch(a){case"closing":case"closed":return"failed";default:return a}}}let iM=()=>Math.random().toString(36).slice(2);var iN=Object.prototype.hasOwnProperty;function iO(a,b,c){for(c of a.keys())if(iP(c,b))return c}function iP(a,b){var c,d,e;if(a===b)return!0;if(a&&b&&(c=a.constructor)===b.constructor){if(c===Date)return a.getTime()===b.getTime();if(c===RegExp)return a.toString()===b.toString();if(c===Array){if((d=a.length)===b.length)for(;d--&&iP(a[d],b[d]););return -1===d}if(c===Set){if(a.size!==b.size)return!1;for(d of a)if((e=d)&&"object"==typeof e&&!(e=iO(b,e))||!b.has(e))return!1;return!0}if(c===Map){if(a.size!==b.size)return!1;for(d of a)if((e=d[0])&&"object"==typeof e&&!(e=iO(b,e))||!iP(d[1],b.get(e)))return!1;return!0}if(c===ArrayBuffer)a=new Uint8Array(a),b=new Uint8Array(b);else if(c===DataView){if((d=a.byteLength)===b.byteLength)for(;d--&&a.getInt8(d)===b.getInt8(d););return -1===d}if(ArrayBuffer.isView(a)){if((d=a.byteLength)===b.byteLength)for(;d--&&a[d]===b[d];);return -1===d}if(!c||"object"==typeof a){for(c in d=0,a)if(iN.call(a,c)&&++d&&!iN.call(b,c)||!(c in b)||!iP(a[c],b[c]))return!1;return Object.keys(b).length===d}}return a!=a&&b!=b}var iQ=((f=iQ||{}).Created="message.created",f.Updated="message.updated",f.Deleted="message.deleted",f),iR=((g=iR||{}).ChatMessage="chat.message",g),iS=((h=iS||{}).Occupancy="[meta]occupancy",h),iT=((i=iT||{}).MessageCreate="message.create",i.MessageUpdate="message.update",i.MessageDelete="message.delete",i.MessageAnnotationSummary="message.summary",i.MessageMetaOccupancy="meta.occupancy",i),iU=((j=iU||{}).Enter="enter",j.Leave="leave",j.Update="update",j.Present="present",j),iV=((k=iV||{}).Started="typing.started",k.Stopped="typing.stopped",k),iW=((l=iW||{}).SetChanged="typing.set.changed",l),iX=((m=iX||{}).Reaction="roomReaction",m),iY=((n=iY||{}).Reaction="reaction",n),iZ=((o=iZ||{}).Unique="unique",o.Distinct="distinct",o.Multiple="multiple",o),i$=((p=i$||{}).Unique="reaction:unique.v1",p.Distinct="reaction:distinct.v1",p.Multiple="reaction:multiple.v1",p);let i_={"reaction:unique.v1":"unique","reaction:distinct.v1":"distinct","reaction:multiple.v1":"multiple"};var i0=((q=i0||{}).Create="reaction.create",q.Delete="reaction.delete",q.Summary="reaction.summary",q),i1=((r=i1||{}).Updated="occupancy.updated",r),i2=((s=i2||{}).Discontinuity="room.discontinuity",s),i3="u">typeof globalThis?globalThis:a.g,i4={exports:{}};i4.exports;let i5=(ab||(ab=1,function(a,b){var c,d="__lodash_hash_undefined__",e="[object Arguments]",f="[object Boolean]",g="[object Date]",h="[object Function]",i="[object GeneratorFunction]",j="[object Map]",k="[object Number]",l="[object Object]",m="[object Promise]",n="[object RegExp]",o="[object Set]",p="[object String]",q="[object Symbol]",r="[object WeakMap]",s="[object ArrayBuffer]",t="[object DataView]",u="[object Float32Array]",v="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",z="[object Uint8Array]",A="[object Uint8ClampedArray]",B="[object Uint16Array]",C="[object Uint32Array]",D=/\w*$/,E=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,G={};G[e]=G["[object Array]"]=G[s]=G[t]=G[f]=G[g]=G[u]=G[v]=G[w]=G[x]=G[y]=G[j]=G[k]=G[l]=G[n]=G[o]=G[p]=G[q]=G[z]=G[A]=G[B]=G[C]=!0,G["[object Error]"]=G[h]=G[r]=!1;var H="object"==typeof i3&&i3&&i3.Object===Object&&i3,I="object"==typeof self&&self&&self.Object===Object&&self,J=H||I||Function("return this")(),K=b&&!b.nodeType&&b,L=K&&a&&!a.nodeType&&a,M=L&&L.exports===K;function N(a,b){return a.set(b[0],b[1]),a}function O(a,b){return a.add(b),a}function P(a,b,c,d){for(var e=-1,f=a?a.length:0;++e<f;)c=b(c,a[e],e,a);return c}function Q(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch{}return b}function R(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function S(a,b){return function(c){return a(b(c))}}function T(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}var U=Array.prototype,V=Function.prototype,W=Object.prototype,X=J["__core-js_shared__"],Y=(c=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"",Z=V.toString,$=W.hasOwnProperty,_=W.toString,aa=RegExp("^"+Z.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ab=M?J.Buffer:void 0,ac=J.Symbol,ad=J.Uint8Array,ae=S(Object.getPrototypeOf,Object),af=Object.create,ag=W.propertyIsEnumerable,ah=U.splice,ai=Object.getOwnPropertySymbols,aj=ab?ab.isBuffer:void 0,ak=S(Object.keys,Object),al=aH(J,"DataView"),am=aH(J,"Map"),an=aH(J,"Promise"),ao=aH(J,"Set"),ap=aH(J,"WeakMap"),aq=aH(Object,"create"),ar=aL(al),as=aL(am),at=aL(an),au=aL(ao),av=aL(ap),aw=ac?ac.prototype:void 0,ax=aw?aw.valueOf:void 0;function ay(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function az(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function aA(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function aB(a){this.__data__=new az(a)}function aC(a,b,c){var d=a[b];$.call(a,b)&&aM(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function aD(a,b){for(var c=a.length;c--;)if(aM(a[c][0],b))return c;return -1}function aE(a){var b=new a.constructor(a.byteLength);return new ad(b).set(new ad(a)),b}function aF(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e];aC(c,g,a[g])}return c}function aG(a,b){var c,d,e=a.__data__;return("string"==(d=typeof(c=b))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==c:null===c)?e["string"==typeof b?"string":"hash"]:e.map}function aH(a,b){var c,d=a?.[b];return!(!aR(d)||(c=d,Y&&Y in c))&&(aQ(d)||Q(d)?aa:E).test(aL(d))?d:void 0}ay.prototype.clear=function(){this.__data__=aq?aq(null):{}},ay.prototype.delete=function(a){return this.has(a)&&delete this.__data__[a]},ay.prototype.get=function(a){var b=this.__data__;if(aq){var c=b[a];return c===d?void 0:c}return $.call(b,a)?b[a]:void 0},ay.prototype.has=function(a){var b=this.__data__;return aq?void 0!==b[a]:$.call(b,a)},ay.prototype.set=function(a,b){return this.__data__[a]=aq&&void 0===b?d:b,this},az.prototype.clear=function(){this.__data__=[]},az.prototype.delete=function(a){var b=this.__data__,c=aD(b,a);return!(c<0)&&(c==b.length-1?b.pop():ah.call(b,c,1),!0)},az.prototype.get=function(a){var b=this.__data__,c=aD(b,a);return c<0?void 0:b[c][1]},az.prototype.has=function(a){return aD(this.__data__,a)>-1},az.prototype.set=function(a,b){var c=this.__data__,d=aD(c,a);return d<0?c.push([a,b]):c[d][1]=b,this},aA.prototype.clear=function(){this.__data__={hash:new ay,map:new(am||az),string:new ay}},aA.prototype.delete=function(a){return aG(this,a).delete(a)},aA.prototype.get=function(a){return aG(this,a).get(a)},aA.prototype.has=function(a){return aG(this,a).has(a)},aA.prototype.set=function(a,b){return aG(this,a).set(a,b),this},aB.prototype.clear=function(){this.__data__=new az},aB.prototype.delete=function(a){return this.__data__.delete(a)},aB.prototype.get=function(a){return this.__data__.get(a)},aB.prototype.has=function(a){return this.__data__.has(a)},aB.prototype.set=function(a,b){var c=this.__data__;if(c instanceof az){var d=c.__data__;if(!am||d.length<199)return d.push([a,b]),this;c=this.__data__=new aA(d)}return c.set(a,b),this};var aI=ai?S(ai,Object):function(){return[]},aJ=function(a){return _.call(a)};function aK(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||W)}function aL(a){if(null!=a){try{return Z.call(a)}catch{}try{return a+""}catch{}}return""}function aM(a,b){return a===b||a!=a&&b!=b}(al&&aJ(new al(new ArrayBuffer(1)))!=t||am&&aJ(new am)!=j||an&&aJ(an.resolve())!=m||ao&&aJ(new ao)!=o||ap&&aJ(new ap)!=r)&&(aJ=function(a){var b=_.call(a),c=b==l?a.constructor:void 0,d=c?aL(c):void 0;if(d)switch(d){case ar:return t;case as:return j;case at:return m;case au:return o;case av:return r}return b});var aN=Array.isArray;function aO(a){var b;return null!=a&&"number"==typeof(b=a.length)&&b>-1&&b%1==0&&b<=0x1fffffffffffff&&!aQ(a)}var aP=aj||function(){return!1};function aQ(a){var b=aR(a)?_.call(a):"";return b==h||b==i}function aR(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function aS(a){return aO(a)?function(a,b){var c,d,f,g,h,i=aN(a)||(f=d=c=a)&&"object"==typeof f&&aO(d)&&$.call(c,"callee")&&(!ag.call(c,"callee")||_.call(c)==e)?function(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}(a.length,String):[],j=i.length,k=!!j;for(var l in a){$.call(a,l)&&!(k&&("length"==l||(g=l,(h=(h=j)??0x1fffffffffffff)&&("number"==typeof g||F.test(g))&&g>-1&&g%1==0&&g<h)))&&i.push(l)}return i}(a):function(a){if(!aK(a))return ak(a);var b=[];for(var c in Object(a))$.call(a,c)&&"constructor"!=c&&b.push(c);return b}(a)}a.exports=function(a){return function a(b,c,d,m,r,E,F){if(m&&(H=E?m(b,r,E,F):m(b)),void 0!==H)return H;if(!aR(b))return b;var H,I=aN(b);if(I){if(K=(J=b).length,L=J.constructor(K),K&&"string"==typeof J[0]&&$.call(J,"index")&&(L.index=J.index,L.input=J.input),H=L,!c){var J,K,L,M=b,S=H,U=-1,V=M.length;for(S||(S=Array(V));++U<V;)S[U]=M[U];return S}}else{var W,X,Y,Z,_,aa=aJ(b),ab=aa==h||aa==i;if(aP(b)){var ac=b,ad=c;if(ad)return ac.slice();var ag=new ac.constructor(ac.length);return ac.copy(ag),ag}if(aa==l||aa==e||ab&&!E){if(Q(b))return E?b:{};if(H="function"!=typeof(W=ab?{}:b).constructor||aK(W)?{}:aR(X=ae(W))?af(X):{},!c){return Y=b,Z=(_=H)&&aF(b,aS(b),_),aF(Y,aI(Y),Z)}}else{if(!G[aa])return E?b:{};H=function(a,b,c,d){var e,h,i,l=a.constructor;switch(b){case s:return aE(a);case f:case g:return new l(+a);case t:return e=d?aE(a.buffer):a.buffer,new a.constructor(e,a.byteOffset,a.byteLength);case u:case v:case w:case x:case y:case z:case A:case B:case C:return h=d?aE(a.buffer):a.buffer,new a.constructor(h,a.byteOffset,a.length);case j:return P(d?c(R(a),!0):R(a),N,new a.constructor);case k:case p:return new l(a);case n:return(i=new a.constructor(a.source,D.exec(a))).lastIndex=a.lastIndex,i;case o:return P(d?c(T(a),!0):T(a),O,new a.constructor);case q:return ax?Object(ax.call(a)):{}}}(b,aa,a,c)}}F||(F=new aB);var ah=F.get(b);if(ah)return ah;if(F.set(b,H),!I)var ai=d?function(a){var b;return b=aS(a),aN(a)?b:function(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}(b,aI(a))}(b):aS(b);return function(a,b){for(var c=-1,d=a?a.length:0;++c<d&&!1!==b(a[c],c,a););}(ai||b,function(e,f){ai&&(e=b[f=e]),aC(H,f,a(e,c,d,m,f,b,F))}),H}(a,!0,!0)}}(i4,i4.exports)),(O=i4.exports)&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default"))?O.default:O;class i6{constructor({serial:a,clientId:b,text:c,metadata:d,headers:e,action:f,version:g,timestamp:h,reactions:i}){this.serial=a,this.clientId=b,this.text=c,this.metadata=d,this.headers=e,this.action=f,this.version=g,this.timestamp=h,this.reactions=i,Object.freeze(this.version),Object.freeze(this.reactions),Object.freeze(this.reactions.multiple),Object.freeze(this.reactions.distinct),Object.freeze(this.reactions.unique),Object.freeze(this)}get isUpdated(){return this.action===iT.MessageUpdate}get isDeleted(){return this.action===iT.MessageDelete}get updatedBy(){return this.isUpdated?this.version.clientId:void 0}get deletedBy(){return this.isDeleted?this.version.clientId:void 0}get updatedAt(){return this.isUpdated?this.version.timestamp:void 0}get deletedAt(){return this.isDeleted?this.version.timestamp:void 0}isOlderVersionOf(a){return this._compareVersions(this,a,(a,b)=>a.serial<b.serial)}isNewerVersionOf(a){return this._compareVersions(this,a,(a,b)=>a.serial>b.serial)}isSameVersionAs(a){return this._compareVersions(this,a,(a,b)=>a.serial===b.serial)}_isNewerOrSameVersionOf(a){return this._compareVersions(this,a,(a,b)=>a.serial>=b.serial)}before(a){return this.serial<a.serial}after(a){return this.serial>a.serial}equal(a){return this.serial===a.serial}isSameAs(a){return this.equal(a)}with(a){if("serial"in a)return this._getLatestMessageVersion(a);if(a.type===iQ.Created)throw new iy.ErrorInfo("cannot apply a created event to a message",4e4,400);if(a.type===i0.Summary){if(a.summary.messageSerial!==this.serial)throw new iy.ErrorInfo("cannot apply event for a different message",4e4,400);let b={unique:i5(a.summary.unique),distinct:i5(a.summary.distinct),multiple:i5(a.summary.multiple)};return i6._clone(this,{reactions:b})}return this._getLatestMessageVersion(a.message)}_compareVersions(a,b,c){return!!a.equal(b)&&a.equal(b)&&c(a.version,b.version)}_getLatestMessageVersion(a){if(a.serial!==this.serial)throw new iy.ErrorInfo("cannot apply event for a different message",4e4,400);return this._isNewerOrSameVersionOf(a)?this:i6._clone(a,{reactions:this.reactions})}static _clone(a,b){return new i6({serial:b?.serial??a.serial,clientId:b?.clientId??a.clientId,text:b?.text??a.text,metadata:b?.metadata??i5(a.metadata),headers:b?.headers??i5(a.headers),action:b?.action??a.action,version:b?.version??i5(a.version),timestamp:b?.timestamp??a.timestamp,reactions:b?.reactions??i5(a.reactions)})}copy(a={}){return i6._clone(this,a)}}let i7=()=>({unique:{},distinct:{},multiple:{}}),i8=a=>{let b="";if("string"==typeof a)b=a;else try{"serial"in a&&(b=a.serial)}catch{}if(""===b)throw new iy.ErrorInfo("invalid serial; must be string or object with serial property",4e4,400);return b},i9={"annotation.create":i0.Create,"annotation.delete":i0.Delete};class ja{constructor(a,b,c,d,e){this._logger=a,this._options=b,this._api=c,this._roomName=d,this._channel=e,this._emitter=new iH,this._unsubscribeMessageEvents=iF(e,this._processMessageEvent.bind(this)),this._options?.rawMessageReactions&&(this._unsubscribeAnnotationEvents=iF(e.annotations,this._processAnnotationEvent.bind(this))),this._defaultType=this._options?.defaultMessageReactionType??iZ.Distinct}_processAnnotationEvent(a){this._logger.trace("MessagesReactions._processAnnotationEvent();",{event:a});let b=i_[a.type];if(!b)return void this._logger.info("MessagesReactions._processAnnotationEvent(); ignoring unknown reaction type",{event:a});let c=i9[a.action];if(!c)return void this._logger.info("MessagesReactions._processAnnotationEvent(); ignoring unknown reaction event type",{event:a});let d=a.name??"",e={type:c,timestamp:new Date(a.timestamp),reaction:{messageSerial:a.messageSerial,type:b,name:d,clientId:a.clientId??""}};a.count?e.reaction.count=a.count:c===i0.Create&&b===iZ.Multiple&&(e.reaction.count=1),this._emitter.emit(c,e)}_processMessageEvent(a){if(this._logger.trace("MessagesReactions._processMessageEvent();",{event:a}),a.action!==iT.MessageAnnotationSummary.valueOf())return;let b=a.serial,c=a.annotations.summary,d=c[i$.Unique]??{},e=c[i$.Distinct]??{},f=c[i$.Multiple]??{};this._emitter.emit(i0.Summary,{type:i0.Summary,summary:{messageSerial:b,unique:d,distinct:e,multiple:f}})}send(a,b){this._logger.trace("MessagesReactions.send();",{messageSerial:a,params:b});let c=i8(a),{type:d,count:e}=b;d||(d=this._defaultType),d!==iZ.Multiple||e||(e=1);let f={type:d,name:b.name};return e&&(f.count=e),this._api.sendMessageReaction(this._roomName,c,f)}delete(a,b){this._logger.trace("MessagesReactions.delete();",{messageSerial:a,params:b});let c=i8(a),d=b?.type;if(d||(d=this._defaultType),d!==iZ.Unique&&!b?.name)throw new iy.ErrorInfo(`cannot delete reaction of type ${d} without a name`,40001,400);let e={type:d};return d!==iZ.Unique&&(e.name=b?.name),this._api.deleteMessageReaction(this._roomName,c,e)}subscribe(a){this._logger.trace("MessagesReactions.subscribe();");let b=iI(a);return this._emitter.on(i0.Summary,b),{unsubscribe:()=>{this._emitter.off(b)}}}subscribeRaw(a){if(this._logger.trace("MessagesReactions.subscribeRaw();"),!this._options?.rawMessageReactions)throw new iy.ErrorInfo("Raw message reactions are not enabled",40001,400);let b=iI(a);return this._emitter.on([i0.Create,i0.Delete],b),{unsubscribe:()=>{this._emitter.off(b)}}}static channelOptionMerger(a){return b=>(b.modes.includes("ANNOTATION_PUBLISH")||b.modes.push("ANNOTATION_PUBLISH"),a.messages.rawMessageReactions&&!b.modes.includes("ANNOTATION_SUBSCRIBE")&&b.modes.push("ANNOTATION_SUBSCRIBE"),b)}clientReactions(a,b){this._logger.trace("MessagesReactions.clientReactions();",{messageSerial:a,clientId:b});let c=i8(a);return this._api.getClientReactions(this._roomName,c,b)}dispose(){this._logger.trace("DefaultMessageReactions.dispose();"),this._emitter.off(),this._unsubscribeMessageEvents(),this._unsubscribeAnnotationEvents?.(),this._logger.debug("DefaultMessageReactions.dispose(); disposed successfully")}hasListeners(){return iJ(this._emitter)}}let jb=a=>{let b={...i7(),...a.reactions},c=Object.values(iT).includes(a.action)?a.action:iT.MessageCreate,d={serial:a.version.serial,timestamp:new Date(a.version.timestamp),clientId:a.version.clientId,description:a.version.description,metadata:a.version.metadata};return new i6({serial:a.serial,clientId:a.clientId,text:a.text,metadata:a.metadata,headers:a.headers,action:c,version:d,timestamp:new Date(a.timestamp),reactions:b})},jc=new Map([[iT.MessageCreate,iQ.Created],[iT.MessageUpdate,iQ.Updated],[iT.MessageDelete,iQ.Deleted]]);var jd=((t=jd||{}).OldestFirst="oldestFirst",t.NewestFirst="newestFirst",t);class je{constructor(a,b,c,d,e,f){this._pendingPromiseRejecters=new Set,this._pendingAttachListeners=new Set,this._emitter=new iH,this._roomName=a,this._options=b,this._channel=c,this._chatApi=d,this._clientId=e,this._logger=f,this._listenerSubscriptionPoints=new Map,this._reactions=new ja(this._logger,b,this._chatApi,this._roomName,this._channel);const g=this._processEvent.bind(this),h=a=>{this._handleAttach(a.resumed)},i=a=>{"attached"===a.current&&"attached"===a.previous&&this._handleAttach(a.resumed)};this._unsubscribeMessageEvents=iF(this._channel,[iR.ChatMessage],g),this._offChannelAttached=iE(this._channel,"attached",h),this._offChannelUpdate=iE(this._channel,"update",i)}get reactions(){return this._reactions}async _getBeforeSubscriptionStart(a,b){this._logger.trace("DefaultSubscriptionManager.getBeforeSubscriptionStart();");let c=this._listenerSubscriptionPoints.get(a);if(void 0===c)throw this._logger.error("DefaultSubscriptionManager.getBeforeSubscriptionStart(); listener has not been subscribed yet"),new iy.ErrorInfo("cannot query history; listener has not been subscribed yet",4e4,400);let d=await c;return this._chatApi.history(this._roomName,{...b,orderBy:"newestFirst",...d})}_handleAttach(a){if(this._logger.trace("DefaultSubscriptionManager.handleAttach();"),a)return;let b=this._subscribeAtChannelAttach();for(let[a]of this._listenerSubscriptionPoints.entries())this._listenerSubscriptionPoints.set(a,b)}async _resolveSubscriptionStart(){let a=this._getChannelProperties();if("attached"===a.state){if(a.properties.channelSerial)return{fromSerial:a.properties.channelSerial};throw this._logger.error("DefaultSubscriptionManager.handleAttach(); channelSerial is undefined"),new iy.ErrorInfo("channel is attached, but channelSerial is not defined",4e4,400)}return this._subscribeAtChannelAttach()}_getChannelProperties(){return this._channel}async _subscribeAtChannelAttach(){let a=this._getChannelProperties();return new Promise((b,c)=>{this._pendingPromiseRejecters.add(c);let d=()=>{this._pendingPromiseRejecters.delete(c)};if("attached"===a.state){this._logger.debug("Messages._subscribeAtChannelAttach(); channel is attached already, using attachSerial",{attachSerial:a.properties.attachSerial}),d(),a.properties.attachSerial?b({fromSerial:a.properties.attachSerial}):(this._logger.error("DefaultSubscriptionManager.handleAttach(); attachSerial is undefined"),d(),c(new iy.ErrorInfo("channel is attached, but attachSerial is not defined",4e4,400)));return}let e=function(a,b,c){if(c)return a.once(b,c),()=>{a.off(c)};throw TypeError("Invalid arguments passed to once()")}(a,"attached",()=>{this._logger.debug("Messages._subscribeAtChannelAttach(); channel is now attached, using attachSerial",{attachSerial:a.properties.attachSerial}),d(),this._pendingAttachListeners.delete(e),a.properties.attachSerial?b({fromSerial:a.properties.attachSerial}):(this._logger.error("DefaultSubscriptionManager.handleAttach(); attachSerial is undefined"),c(new iy.ErrorInfo("channel is attached, but attachSerial is not defined",4e4,400)))});this._pendingAttachListeners.add(e)})}async history(a){return this._logger.trace("Messages.query();"),this._chatApi.history(this._roomName,a)}get(a){return this._logger.trace("Messages.get();",{serial:a}),this._chatApi.getMessage(this._roomName,i8(a))}async send(a){this._logger.trace("Messages.send();",{params:a});let{text:b,metadata:c,headers:d}=a,e=await this._chatApi.sendMessage(this._roomName,{text:b,headers:d,metadata:c}),f=new Date(e.timestamp);return new i6({serial:e.serial,clientId:this._clientId,text:b,metadata:c??{},headers:d??{},action:iT.MessageCreate,version:{serial:e.serial,timestamp:f},timestamp:f,reactions:i7()})}async delete(a,b){return this._logger.trace("Messages.delete();",{params:b}),a=i8(a),this._logger.debug("Messages.delete(); serial",{serial:a}),jb(await this._chatApi.deleteMessage(this._roomName,a,b))}async update(a,b,c){this._logger.trace("Messages.update();",{updateParams:b,details:c}),a=i8(a),this._logger.debug("Messages.update(); serial",{serial:a});let d=await this._chatApi.updateMessage(this._roomName,a,{message:{text:b.text,metadata:b.metadata,headers:b.headers},...c});return this._logger.debug("Messages.update(); message update successfully",{updateParams:b}),jb(d)}subscribe(a){this._logger.trace("Messages.subscribe();");let b=iI(a);this._emitter.on([iQ.Created,iQ.Updated,iQ.Deleted],b);let c=this._resolveSubscriptionStart();return c.catch(()=>{this._logger.debug("Messages.subscribe(); subscription point was not resolved before the room was released")}),this._listenerSubscriptionPoints.set(b,c),{unsubscribe:()=>{this._listenerSubscriptionPoints.delete(b),this._logger.trace("Messages.unsubscribe();"),this._emitter.off(b)},historyBeforeSubscribe:a=>this._getBeforeSubscriptionStart(b,a)}}_processEvent(a){let b,c,d,e,f,g,h,i,j;this._logger.trace("Messages._processEvent();",{channelEventMessage:a});let{action:k}=a,l=jc.get(k);if(!l)return void this._logger.debug("Messages._processEvent(); received unknown message action",{action:k});let m=(b=a.data&&"object"==typeof a.data?a.data:{},c=a.extras&&"object"==typeof a.extras?a.extras:{},d=a.clientId||"",e=b.text||"",f=new Date(a.timestamp||0),g=a.serial||"",h=b.metadata&&"object"==typeof b.metadata?b.metadata:{},i=c.headers||{},j={...a.version,serial:a.version.serial||g,timestamp:new Date(a.version.timestamp||f)},new i6({serial:g,clientId:d,text:e,metadata:h,headers:i,action:Object.values(iT).includes(a.action)?a.action:iT.MessageCreate,version:j,timestamp:f,reactions:i7()}));this._emitter.emit(l,{type:l,message:m})}dispose(){this._logger.trace("DefaultMessages.dispose();"),this._emitter.off();let a=new iy.ErrorInfo("room has been disposed",4e4,400);for(let b of this._pendingPromiseRejecters)try{b(a)}catch{}for(let a of(this._pendingPromiseRejecters.clear(),this._listenerSubscriptionPoints.clear(),this._pendingAttachListeners))a();this._pendingAttachListeners.clear(),this._unsubscribeMessageEvents(),this._offChannelAttached(),this._offChannelUpdate(),this._reactions.dispose(),this._logger.debug("DefaultMessages.dispose(); disposed successfully")}hasListeners(){return iJ(this._emitter)}}class jf{constructor(a,b){this._apiProtocolVersion=4,this._realtime=a,this._logger=b}async history(a,b){let c={...b};if(b.orderBy)switch(b.orderBy){case jd.NewestFirst:c.direction="backwards";break;case jd.OldestFirst:c.direction="forwards";break;default:throw new iy.ErrorInfo(`invalid orderBy value: ${b.orderBy}`,4e4,400)}let d=await this._makeAuthorizedPaginatedRequest(this._roomUrl(a,"/messages"),c);return this._recursivePaginateMessages(d)}_recursivePaginateMessages(a){let b={};return b.items=a.items.map(a=>jb(a)),b.next=()=>a.next().then(a=>a?this._recursivePaginateMessages(a):null),b.first=()=>a.first().then(a=>this._recursivePaginateMessages(a)),b.current=()=>a.current().then(a=>this._recursivePaginateMessages(a)),b.hasNext=()=>a.hasNext(),b.isLast=()=>a.isLast(),{...a,...b}}async getMessage(a,b){return jb(await this._makeAuthorizedRequest(this._messageUrl(a,b),"GET"))}deleteMessage(a,b,c){let d={...c?.description&&{description:c.description},...c?.metadata&&{metadata:c.metadata}};return this._makeAuthorizedRequest(this._messageUrl(a,b,"/delete"),"POST",d,{})}sendMessage(a,b){let c={text:b.text,...b.metadata&&{metadata:b.metadata},...b.headers&&{headers:b.headers}};return this._makeAuthorizedRequest(this._roomUrl(a,"/messages"),"POST",c)}updateMessage(a,b,c){return this._makeAuthorizedRequest(this._messageUrl(a,b),"PUT",c)}sendMessageReaction(a,b,c){return this._makeAuthorizedRequest(this._messageUrl(a,b,"/reactions"),"POST",c)}deleteMessageReaction(a,b,c){return this._makeAuthorizedRequest(this._messageUrl(a,b,"/reactions"),"DELETE",void 0,c)}getClientReactions(a,b,c){return this._makeAuthorizedRequest(this._messageUrl(a,b,"/client-reactions"),"GET",void 0,c?{forClientId:c}:{})}getOccupancy(a){return this._makeAuthorizedRequest(this._roomUrl(a,"/occupancy"),"GET")}async _makeAuthorizedRequest(a,b,c,d){return(await this._doRequest(a,b,d,c)).items[0]}async _makeAuthorizedPaginatedRequest(a,b,c){return this._doRequest(a,"GET",b,c)}async _doRequest(a,b,c,d){let e=await this._realtime.request(b,a,this._apiProtocolVersion,c,d);if(!e.success)throw this._logger.error("ChatApi._doRequest(); failed to make request",{url:a,method:b,statusCode:e.statusCode,errorCode:e.errorCode,errorMessage:e.errorMessage}),new iy.ErrorInfo(e.errorMessage,e.errorCode,e.statusCode);return e}_roomUrl(a,b=""){return`/chat/v4/rooms/${encodeURIComponent(a)}${b}`}_messageUrl(a,b,c=""){return`${this._roomUrl(a,"/messages")}/${encodeURIComponent(b)}${c}`}}var jg=((u=jg||{})[u.BadRequest=4e4]="BadRequest",u[u.MessageRejectedByBeforePublishRule=42211]="MessageRejectedByBeforePublishRule",u[u.MessageRejectedByModeration=42213]="MessageRejectedByModeration",u[u.PresenceAutoReentryFailed=91004]="PresenceAutoReentryFailed",u[u.RoomDiscontinuity=102100]="RoomDiscontinuity",u[u.RoomInFailedState=102101]="RoomInFailedState",u[u.RoomIsReleasing=102102]="RoomIsReleasing",u[u.RoomIsReleased=102103]="RoomIsReleased",u[u.RoomReleasedBeforeOperationCompleted=102106]="RoomReleasedBeforeOperationCompleted",u);let jh="0.14.1",ji=`chat-js/${jh}`,jj=`chat-react/${jh}`,jk=["PUBLISH","SUBSCRIBE"],jl={params:{agent:ji},attachOnSubscribe:!1,modes:jk},jm={params:{agent:`${ji} ${jj}`},attachOnSubscribe:!1,modes:jk};class jn{constructor(a,b,c,d){c.trace("ChannelManager();",{isReact:d}),this._realtime=b,this._logger=c,this._isReact=d,this._registeredOptions=this._defaultChannelOptions(),this._channelId=`${a}::$chat`}mergeOptions(a){if(this._logger.trace("ChannelManager.mergeOptions();"),this._resolvedChannel)throw this._logger.error("channel options cannot be modified after the channel has been requested"),new iy.ErrorInfo("channel options cannot be modified after the channel has been requested",4e4,400);this._registeredOptions=a(this._registeredOptions)}get(){return this._logger.trace("ChannelManager.get();"),this._resolvedChannel??=this._realtime.channels.get(this._channelId,this._registeredOptions),this._resolvedChannel}release(){this._logger.trace("ChannelManager.release();",{channelId:this._channelId}),this._resolvedChannel&&this._realtime.channels.release(this._channelId)}_defaultChannelOptions(){this._logger.trace("ChannelManager._defaultChannelOptions();");let a=this._isReact?jm:jl;return this._logger.trace(this._isReact?"using react channel options":"using default channel options"),{...a,modes:[...a.modes??[]]}}}class jo{constructor(a,b,c,d,e){this._emitter=new iH,this._roomName=a,this._channel=b,this._chatApi=c,this._logger=d,this._roomOptions=e;const f=this._internalOccupancyListener.bind(this);this._roomOptions.occupancy.enableEvents?(this._logger.debug("DefaultOccupancy(); subscribing to occupancy events"),this._unsubscribeOccupancyEvents=iF(this._channel,[iS.Occupancy],f)):this._unsubscribeOccupancyEvents=()=>{}}subscribe(a){if(this._logger.trace("Occupancy.subscribe();"),!this._roomOptions.occupancy.enableEvents)throw new iy.ErrorInfo("cannot subscribe to occupancy; occupancy events are not enabled in room options",4e4,400);let b=iI(a);return this._emitter.on(b),{unsubscribe:()=>{this._logger.trace("Occupancy.unsubscribe();"),this._emitter.off(b)}}}async get(){return this._logger.trace("Occupancy.get();"),this._chatApi.getOccupancy(this._roomName)}current(){if(this._logger.trace("Occupancy.current();"),!this._roomOptions.occupancy.enableEvents)throw new iy.ErrorInfo("cannot get current occupancy; occupancy events are not enabled in room options",4e4,400);return this._latestOccupancyData}_internalOccupancyListener(a){this._logger.trace("Occupancy._internalOccupancyListener();",a),this._latestOccupancyData=(a=>{let b=0,c=0;if(!a.data||"object"!=typeof a.data)return{connections:b,presenceMembers:c};let{metrics:d}=a.data;return d&&"object"==typeof d&&("number"==typeof d.connections&&Number.isInteger(d.connections)&&(b=d.connections),"number"==typeof d.presenceMembers&&Number.isInteger(d.presenceMembers)&&(c=d.presenceMembers)),{connections:b,presenceMembers:c}})(a),this._emitter.emit(i1.Updated,{type:i1.Updated,occupancy:this._latestOccupancyData})}static channelOptionMerger(a){return b=>a.occupancy.enableEvents?{...b,params:{...b.params,occupancy:"metrics"}}:b}dispose(){this._logger.trace("DefaultOccupancy.dispose();"),this._unsubscribeOccupancyEvents(),this._emitter.off(),this._logger.debug("DefaultOccupancy.dispose(); disposed successfully")}hasListeners(){return iJ(this._emitter)}}class jp{constructor(a,b,c,d){this._emitter=new iH,this._stateEmitter=new iH,this._presenceState={present:!1},this.subscribeToEvents=a=>{this._emitter.emit(a.action,{type:a.action,member:this._realtimeMemberToPresenceMember(a)})},this._channel=a,this._clientId=b,this._logger=c,this._options=d;const e=this.subscribeToEvents.bind(this),f=a=>{if(a.reason?.code===91004){this._logger.debug("Presence auto-reentry failed",{reason:a.reason}),this._emitPresenceStateChange(!1,a.reason);return}if("detached"===a.current)return void this._emitPresenceStateChange(!1)},g=a=>{this._emitPresenceStateChange(!1,a.reason)};this._offChannelUpdate=iE(this._channel,"update",f),this._offChannelDetach=iE(this._channel,["detached","failed"],g),this._unsubscribePresenceEvents=iF(this._channel.presence,e)}async get(a){return this._logger.trace("Presence.get()",{params:a}),this._assertChannelState(),(await this._channel.presence.get(a)).map(a=>this._realtimeMemberToPresenceMember(a))}async isUserPresent(a){return this._logger.trace("Presence.isUserPresent()",{clientId:a}),this._assertChannelState(),(await this._channel.presence.get({clientId:a})).length>0}async enter(a){this._logger.trace("Presence.enter()",{data:a}),this._assertChannelState();try{await this._channel.presence.enterClient(this._clientId,a),this._emitPresenceStateChange(!0)}catch(a){throw this._emitPresenceStateChange(!1,a),a}}async update(a){this._logger.trace("Presence.update()",{data:a}),this._assertChannelState();try{await this._channel.presence.updateClient(this._clientId,a),this._emitPresenceStateChange(!0)}catch(a){throw this._emitPresenceStateChange(!1,a),a}}async leave(a){this._logger.trace("Presence.leave()",{data:a}),this._assertChannelState();try{await this._channel.presence.leaveClient(this._clientId,a),this._emitPresenceStateChange(!1)}catch(a){throw this._emitPresenceStateChange(!1,a),a}}subscribe(a,b){if(this._logger.trace("Presence.subscribe(); listenerOrEvents",{listenerOrEvents:a}),!this._options.presence.enableEvents)throw this._logger.error("could not subscribe to presence; presence events are not enabled"),new iy.ErrorInfo("could not subscribe to presence; presence events are not enabled",4e4,400);if(!a&&!b)throw this._logger.error("could not subscribe to presence; invalid arguments"),new iy.ErrorInfo("could not subscribe listener: invalid arguments",4e4,400);if(b){let c=iI(b);return this._emitter.on(a,c),{unsubscribe:()=>{this._logger.trace("Presence.unsubscribe();",{events:a}),this._emitter.off(c)}}}{let b=iI(a);return this._emitter.on(b),{unsubscribe:()=>{this._logger.trace("Presence.unsubscribe();"),this._emitter.off(b)}}}}static channelOptionMerger(a){return b=>(b.modes.includes("PRESENCE")||b.modes.push("PRESENCE"),a.presence.enableEvents&&!b.modes.includes("PRESENCE_SUBSCRIBE")&&b.modes.push("PRESENCE_SUBSCRIBE"),b)}dispose(){this._logger.trace("DefaultPresence.dispose();"),this._emitter.off(),this._unsubscribePresenceEvents(),this._offChannelUpdate(),this._offChannelDetach(),this._logger.debug("DefaultPresence.dispose(); disposed successfully")}hasListeners(){return iJ(this._emitter)}_realtimeMemberToPresenceMember(a){return{...a,data:a.data,updatedAt:new Date(a.timestamp)}}_assertChannelState(){if("attaching"!==this._channel.state&&"attached"!==this._channel.state)throw this._logger.error("could not perform presence operation; room is not attached"),new iy.ErrorInfo("could not perform presence operation; room is not attached",4e4,400)}_emitPresenceStateChange(a,b){this._logger.trace("Presence._emitPresenceStateChange()",{present:a,error:b});let c={...this._presenceState};this._presenceState={present:a};let d={previous:c,current:this._presenceState,error:b};this._stateEmitter.emit("presence.state.change",d)}onPresenceStateChange(a){this._logger.trace("Presence.onPresenceStateChange()");let b=iI(a);return this._stateEmitter.on("presence.state.change",b),{unsubscribe:()=>{this._logger.trace("Presence.unsubscribeFromPresenceStateChanges()"),this._stateEmitter.off(b)}}}}let jq=Error("request for lock canceled");class jr{constructor(a,b=jq){this._value=a,this._cancelError=b,this._queue=[],this._weightedWaiters=[]}acquire(a=1,b=0){if(a<=0)throw Error(`invalid weight ${a}: must be positive`);return new Promise((c,d)=>{let e={resolve:c,reject:d,weight:a,priority:b},f=js(this._queue,a=>b<=a.priority);-1===f&&a<=this._value?this._dispatchItem(e):this._queue.splice(f+1,0,e)})}runExclusive(a){var b,c,d,e;return b=this,c=arguments,d=void 0,e=function*(a,b=1,c=0){let[d,e]=yield this.acquire(b,c);try{return yield a(d)}finally{e()}},new(d||(d=Promise))(function(a,f){function g(a){try{i(e.next(a))}catch(a){f(a)}}function h(a){try{i(e.throw(a))}catch(a){f(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof d?c:new d(function(a){a(c)})).then(g,h)}i((e=e.apply(b,c||[])).next())})}waitForUnlock(a=1,b=0){if(a<=0)throw Error(`invalid weight ${a}: must be positive`);return this._couldLockImmediately(a,b)?Promise.resolve():new Promise(c=>{var d,e;let f;this._weightedWaiters[a-1]||(this._weightedWaiters[a-1]=[]),d=this._weightedWaiters[a-1],e={resolve:c,priority:b},f=js(d,a=>e.priority<=a.priority),d.splice(f+1,0,e)})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(a){this._value=a,this._dispatchQueue()}release(a=1){if(a<=0)throw Error(`invalid weight ${a}: must be positive`);this._value+=a,this._dispatchQueue()}cancel(){this._queue.forEach(a=>a.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(a){let b=this._value;this._value-=a.weight,a.resolve([b,this._newReleaser(a.weight)])}_newReleaser(a){let b=!1;return()=>{b||(b=!0,this.release(a))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let a=this._value;a>0;a--){let b=this._weightedWaiters[a-1];b&&(b.forEach(a=>a.resolve()),this._weightedWaiters[a-1]=[])}else{let a=this._queue[0].priority;for(let b=this._value;b>0;b--){let c=this._weightedWaiters[b-1];if(!c)continue;let d=c.findIndex(b=>b.priority<=a);(-1===d?c:c.splice(0,d)).forEach(a=>a.resolve())}}}_couldLockImmediately(a,b){return(0===this._queue.length||this._queue[0].priority<b)&&a<=this._value}}function js(a,b){for(let c=a.length-1;c>=0;c--)if(b(a[c]))return c;return -1}class jt{constructor(a){this._semaphore=new jr(1,a)}acquire(){var a,b,c,d;return a=this,b=arguments,c=void 0,d=function*(a=0){let[,b]=yield this._semaphore.acquire(1,a);return b},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}runExclusive(a,b=0){return this._semaphore.runExclusive(()=>a(),1,b)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(a=0){return this._semaphore.waitForUnlock(1,a)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var ju=((v=ju||{}).Initializing="initializing",v.Initialized="initialized",v.Attaching="attaching",v.Attached="attached",v.Detaching="detaching",v.Detached="detached",v.Suspended="suspended",v.Failed="failed",v.Releasing="releasing",v.Released="released",v);class jv{constructor(a){this._status="initialized",this._emitter=new iH,this._logger=a}get status(){return this._status}get error(){return this._error}onChange(a){let b=iI(a);return this._emitter.on(b),{off:()=>{this._emitter.off(b)}}}setStatus(a){let b={current:a.status,error:a.error,previous:this._status};this._status=b.current,this._error=b.error,this._logger.info("room status changed",{...b}),this._emitter.emit(b.current,b)}dispose(){this._logger.trace("DefaultRoomLifecycle.dispose();"),this._emitter.off(),this._logger.debug("DefaultRoomLifecycle.dispose(); disposed successfully")}hasListeners(){return iJ(this._emitter)}}class jw{constructor(a,b,c){this._channelManager=a,this._roomLifecycle=b,this._logger=c,this._eventEmitter=new iH,this._hasAttachedOnce=!1,this._isExplicitlyDetached=!1,this._mutex=new jt;const d=this._channelStateListener.bind(this),e=this._discontinuityOnAttachedListener.bind(this),f=this._discontinuityOnUpdateListener.bind(this),g=this._channelManager.get();this._unsubscribeChannelStateListener=iE(g,d),this._offDiscontinuityAttached=iE(g,"attached",e),this._offDiscontinuityUpdate=iE(g,"update",f)}onDiscontinuity(a){this._logger.trace("RoomLifecycleManager.onDiscontinuity()");let b=iI(a);return this._eventEmitter.on(i2.Discontinuity,b),{off:()=>{this._eventEmitter.off(i2.Discontinuity,b)}}}async attach(){await this._mutex.runExclusive(async()=>{if(this._logger.trace("RoomLifecycleManager.attach();"),this._checkRoomNotReleasing("attach"),this._roomStatusIs(ju.Attached))return void this._logger.debug("RoomLifecycleManager.attach(); room already attached, no-op");let a=this._channelManager.get();this._logger.debug("RoomLifecycleManager.attach(); attaching room",{channelState:a.state});try{this._setStatus(ju.Attaching),await a.attach(),this._setStatus(ju.Attached),this._isExplicitlyDetached=!1,this._hasAttachedOnce=!0,this._logger.debug("RoomLifecycleManager.attach(); room attached successfully")}catch(d){let b=new iy.ErrorInfo(`failed to attach room: ${d.message}`,d.code,d.statusCode,d),c=this._mapChannelStateToRoomStatus(a.state);throw this._setStatus(c,b),b}},1)}async detach(){await this._mutex.runExclusive(async()=>{if(this._logger.trace("RoomLifecycleManager.detach();"),this._roomStatusIs(ju.Failed))throw new iy.ErrorInfo("cannot detach room, room is in failed state",jg.RoomInFailedState,400);if(this._checkRoomNotReleasing("detach"),this._roomStatusIs(ju.Detached))return void this._logger.debug("RoomLifecycleManager.detach(); room already detached, no-op");let a=this._channelManager.get();this._logger.debug("RoomLifecycleManager.detach(); detaching room",{channelState:a.state});try{this._setStatus(ju.Detaching),await a.detach(),this._isExplicitlyDetached=!0,this._setStatus(ju.Detached),this._logger.debug("RoomLifecycleManager.detach(); room detached successfully")}catch(d){let b=new iy.ErrorInfo(`failed to detach room: ${d.message}`,d.code,d.statusCode,d),c=this._mapChannelStateToRoomStatus(a.state);throw this._setStatus(c,b),b}},1)}async release(){await this._mutex.runExclusive(async()=>{if(this._logger.trace("RoomLifecycleManager.release();"),this._roomStatusIs(ju.Released))return void this._logger.debug("RoomLifecycleManager.release(); room already released, no-op");if(this._roomStatusIs(ju.Initialized)||this._roomStatusIs(ju.Detached)){this._logger.debug("RoomLifecycleManager.release(); room is initialized or detached, releasing immediately",{status:this._roomLifecycle.status}),this._releaseChannel();return}this._setStatus(ju.Releasing);let a=this._channelManager.get();this._logger.debug("RoomLifecycleManager.release(); attempting channel detach before release",{channelState:a.state}),await this._channelDetachLoop(a),this._releaseChannel()},0)}_mapChannelStateToRoomStatus(a){switch(a){case"initialized":return ju.Initialized;case"attaching":return ju.Attaching;case"attached":return ju.Attached;case"detaching":return ju.Detaching;case"detached":return ju.Detached;case"suspended":return ju.Suspended;case"failed":return ju.Failed;default:return this._logger.error("RoomLifecycleManager._mapChannelStateToRoomStatus(); unknown channel state",{channelState:a}),ju.Failed}}_checkRoomNotReleasing(a){switch(this._roomLifecycle.status){case ju.Released:throw new iy.ErrorInfo(`cannot ${a} room, room is released`,jg.RoomIsReleased,400);case ju.Releasing:throw new iy.ErrorInfo(`cannot ${a} room, room is currently releasing`,jg.RoomIsReleasing,400)}}_roomStatusIs(a){return this._roomLifecycle.status===a}dispose(){this._unsubscribeChannelStateListener(),this._offDiscontinuityAttached(),this._offDiscontinuityUpdate(),this._eventEmitter.off()}hasListeners(){return iJ(this._eventEmitter)}_channelStateListener(a){if(this._logger.debug("RoomLifecycleManager.channel state changed",{oldState:a.previous,newState:a.current,reason:a.reason,resumed:a.resumed}),this._operationInProgress())return void this._logger.debug("RoomLifecycleManager._startMonitoringChannelState(); ignoring channel state change - operation in progress",{status:this._roomLifecycle.status});let b=this._mapChannelStateToRoomStatus(a.current);this._setStatus(b,a.reason)}_discontinuityOnAttachedListener(a){if(!a.resumed&&this._hasAttachedOnce&&!this._isExplicitlyDetached){let b=new iy.ErrorInfo("discontinuity detected",jg.RoomDiscontinuity,a.reason?.statusCode??0,a.reason);this._logger.warn("RoomLifecycleManager._startMonitoringDiscontinuity(); discontinuity detected",{error:b}),this._eventEmitter.emit(i2.Discontinuity,b)}}_discontinuityOnUpdateListener(a){if(!a.resumed&&this._hasAttachedOnce&&!this._isExplicitlyDetached&&"attached"===a.current&&"attached"===a.previous){let b=new iy.ErrorInfo("discontinuity detected",jg.RoomDiscontinuity,a.reason?.statusCode??0,a.reason);this._logger.warn("RoomLifecycleManager._startMonitoringDiscontinuity(); discontinuity detected",{error:b}),this._eventEmitter.emit(i2.Discontinuity,b)}}async _channelDetachLoop(a){for(;;){if("failed"===a.state){this._logger.debug("RoomLifecycleManager._channelDetachLoop(); channel is failed, skipping detach");break}try{await a.detach();break}catch(a){this._logger.error("RoomLifecycleManager._channelDetachLoop(); failed to detach channel during release",{error:a}),await new Promise(a=>setTimeout(a,250))}}}_setStatus(a,b){this._logger.debug("RoomLifecycleManager._setStatus(); updating room status",{oldStatus:this._roomLifecycle.status,newStatus:a,hasError:!!b}),this._roomLifecycle.setStatus({status:a,error:b})}_releaseChannel(){this._channelManager.release(),this._setStatus(ju.Released),this._logger.debug("RoomLifecycleManager._releaseChannel(); room released successfully")}_operationInProgress(){return this._mutex.isLocked()}testForceHasAttachedOnce(a){this._logger.trace("RoomLifecycleManager.testForceHasAttachedOnce();",{firstAttach:a}),this._hasAttachedOnce=a}}let jx={typing:{heartbeatThrottleMs:1e4},occupancy:{enableEvents:!1},presence:{enableEvents:!0},messages:{rawMessageReactions:!1,defaultMessageReactionType:iZ.Distinct}},jy=(a,b)=>({name:a,data:b,extras:{ephemeral:!0}});class jz{constructor(a,b,c,d,e,f){this.name=a,this.clientId=b,this.createdAt=c,this.isSelf=d,this.metadata=e,this.headers=f,Object.freeze(this)}}class jA{constructor(a,b,c,d){this._emitter=new iH,this._forwarder=a=>{var b;let c,d,e=(b=this._clientId,c=a.data?.name&&"string"==typeof a.data.name?a.data.name:"",new jz(c,d=a.clientId??"",a.timestamp?new Date(a.timestamp):new Date,!!b&&b===d,a.data?.metadata??{},a.extras?.headers??{}));this._emitter.emit(iY.Reaction,{type:iY.Reaction,reaction:e})},this._channel=a,this._connection=b,this._clientId=c,this._logger=d;const e=this._forwarder.bind(this);this._unsubscribeRoomReactionEvents=iF(this._channel,[iX.Reaction],e)}send(a){let b;this._logger.trace("RoomReactions.send();",a);let{name:c,metadata:d,headers:e}=a;if(!c)return Promise.reject(new iy.ErrorInfo("unable to send reaction; name not set and it is required",40001,400));if("connected"!==this._connection.state)return Promise.reject(new iy.ErrorInfo("unable to send reaction; not connected to Ably",4e4,400));let f={name:iX.Reaction,data:{name:c,metadata:d??{}},extras:{headers:e??{}}};return this._channel.publish((b=f.extras?f.extras:{},{...f,extras:{...b,ephemeral:!0}}))}subscribe(a){this._logger.trace("RoomReactions.subscribe();");let b=iI(a);return this._emitter.on(b),{unsubscribe:()=>{this._logger.trace("RoomReactions.unsubscribe();"),this._emitter.off(b)}}}dispose(){this._unsubscribeRoomReactionEvents(),this._emitter.off()}hasListeners(){return iJ(this._emitter)}}class jB extends iH{constructor(a,b,c,d,e){super(),this._timeoutMs=2e3,this._mutex=new jt,this._internalSubscribeToEvents=a=>{let{name:b,clientId:c}=a;(this._logger.trace("DefaultTyping._internalSubscribeToEvents(); received event",{name:b,clientId:c}),c)?b===iV.Started||b===iV.Stopped?this._updateCurrentlyTyping(c,b):this._logger.warn("DefaultTyping._internalSubscribeToEvents(); unrecognized event",{name:b}):this._logger.error("DefaultTyping._internalSubscribeToEvents(); invalid clientId in received event",{inbound:a})},this._clientId=d,this._channel=c,this._connection=b,this._heartbeatThrottleMs=a.heartbeatThrottleMs,this._currentlyTyping=new Map,this._logger=e,this._unsubscribeTypingEvents=iF(this._channel,[iV.Started,iV.Stopped],this._internalSubscribeToEvents.bind(this))}_clearAllTypingStates(){this._logger.debug("DefaultTyping._clearAllTypingStates(); clearing all typing states"),this._clearHeartbeatTimer(),this._clearCurrentlyTyping()}_clearHeartbeatTimer(){this._logger.trace("DefaultTyping._clearHeartbeatTimer(); clearing heartbeat timer"),this._heartbeatTimerId&&(clearTimeout(this._heartbeatTimerId),this._heartbeatTimerId=void 0)}_clearCurrentlyTyping(){for(let[,a]of(this._logger.trace("DefaultTyping._clearCurrentlyTyping(); clearing current store and timeouts"),this._currentlyTyping.entries()))clearTimeout(a);this._currentlyTyping.clear()}current(){return this._logger.trace("DefaultTyping.current();"),new Set(this._currentlyTyping.keys())}get channel(){return this._channel}_startHeartbeatTimer(){if(!this._heartbeatTimerId){this._logger.trace("DefaultTyping.startHeartbeatTimer();");let a=this._heartbeatTimerId=setTimeout(()=>{this._logger.debug("DefaultTyping.startHeartbeatTimer(); heartbeat timer expired"),a===this._heartbeatTimerId&&(this._heartbeatTimerId=void 0)},this._heartbeatThrottleMs)}}async keystroke(){this._logger.trace("DefaultTyping.keystroke();"),this._mutex.cancel();try{await this._mutex.acquire()}catch(a){if(a===jq)return void this._logger.debug("DefaultTyping.keystroke(); mutex was canceled by a later operation");throw new iy.ErrorInfo("mutex acquisition failed",5e4,500)}try{if("connected"!==this._connection.state)throw this._logger.error("DefaultTyping.keystroke(); connection is not connected",{status:this._connection.state}),new iy.ErrorInfo("cannot type, connection is not connected",4e4,400);if(this._heartbeatTimerId)return void this._logger.debug("DefaultTyping.keystroke(); no-op, already typing and heartbeat timer has not expired");await this._channel.publish(jy(iV.Started)),this._startHeartbeatTimer(),this._logger.trace("DefaultTyping.keystroke(); starting timers")}finally{this._logger.trace("DefaultTyping.keystroke(); releasing mutex"),this._mutex.release()}}async stop(){this._logger.trace("DefaultTyping.stop();"),this._mutex.cancel();try{await this._mutex.acquire()}catch(a){if(a===jq)return void this._logger.debug("DefaultTyping.stop(); mutex was canceled by a later operation");throw new iy.ErrorInfo("mutex acquisition failed",5e4,500)}try{if("connected"!==this._connection.state)throw this._logger.error("DefaultTyping.stop(); connection is not connected",{status:this._connection.state}),new iy.ErrorInfo("cannot stop typing, connection is not connected",4e4,400);if(!this._heartbeatTimerId)return void this._logger.debug("DefaultTyping.stop(); no-op, not currently typing");await this._channel.publish(jy(iV.Stopped)),this._logger.trace("DefaultTyping.stop(); clearing timers"),clearTimeout(this._heartbeatTimerId),this._heartbeatTimerId=void 0}finally{this._logger.trace("DefaultTyping.stop(); releasing mutex"),this._mutex.release()}}subscribe(a){this._logger.trace("DefaultTyping.subscribe();");let b=iI(a);return this.on(b),{unsubscribe:()=>{this._logger.trace("DefaultTyping.unsubscribe();"),this.off(b)}}}async dispose(){for(this._logger.trace("DefaultTyping.dispose();");;)try{this._mutex.cancel(),await this._mutex.acquire();break}catch(a){if(a!==jq)return void this._logger.error("DefaultTyping.dispose(); failed to acquire mutex; could not complete resource disposal",{error:a});this._logger.debug("DefaultTyping.dispose(); mutex was canceled"),await new Promise(a=>setTimeout(a,200)),this._logger.debug("DefaultTyping.dispose(); retrying mutex acquisition")}this._clearAllTypingStates(),this._unsubscribeTypingEvents(),this.off(),this._mutex.release()}_updateCurrentlyTyping(a,b){this._logger.trace("DefaultTyping._updateCurrentlyTyping();",{clientId:a,event:b}),b===iV.Started?this._handleTypingStart(a):this._handleTypingStop(a)}_startNewClientInactivityTimer(a){this._logger.trace("DefaultTyping._startNewClientInactivityTimer(); starting new inactivity timer",{clientId:a});let b=setTimeout(()=>{(this._logger.trace("DefaultTyping._startNewClientInactivityTimer(); client typing timeout expired",{clientId:a}),this._currentlyTyping.get(a)!==b)?this._logger.debug("DefaultTyping._startNewClientInactivityTimer(); timeout already cleared; ignoring",{clientId:a}):(this._currentlyTyping.delete(a),this.emit(iW.SetChanged,{type:iW.SetChanged,currentlyTyping:new Set(this._currentlyTyping.keys()),change:{clientId:a,type:iV.Stopped}}))},this._heartbeatThrottleMs+this._timeoutMs);return b}_handleTypingStart(a){this._logger.debug("DefaultTyping._handleTypingStart();",{clientId:a});let b=this._startNewClientInactivityTimer(a),c=this._currentlyTyping.get(a);this._currentlyTyping.set(a,b),c?(this._logger.debug("DefaultTyping._handleTypingStart(); received heartbeat for currently typing client",{clientId:a}),clearTimeout(c)):(this._logger.debug("DefaultTyping._handleTypingStart(); new client started typing",{clientId:a}),this.emit(iW.SetChanged,{type:iW.SetChanged,currentlyTyping:new Set(this._currentlyTyping.keys()),change:{clientId:a,type:iV.Started}}))}_handleTypingStop(a){let b=this._currentlyTyping.get(a);b?(this._logger.debug("DefaultTyping._handleTypingStop(); client stopped typing",{clientId:a}),clearTimeout(b),this._currentlyTyping.delete(a),this.emit(iW.SetChanged,{type:iW.SetChanged,currentlyTyping:new Set(this._currentlyTyping.keys()),change:{clientId:a,type:iV.Stopped}})):this._logger.trace('DefaultTyping._handleTypingStop(); received "Stop" event for client not in currentlyTyping list',{clientId:a})}get heartbeatThrottleMs(){return this._heartbeatThrottleMs}get hasHeartbeatTimer(){return!!this._heartbeatTimerId}}class jC{constructor(a,b,c,d,e,f){(a=>{if(a.heartbeatThrottleMs<=0)throw new iy.ErrorInfo("invalid room configuration: typing heartbeat interval must be greater than 0",40001,400)})(c.typing),this._nonce=b,this._logger=f.withContext({roomName:a,roomNonce:b}),this._logger.debug("Room();",{options:c}),this._name=a,this._options=c,this._chatApi=e,this._lifecycle=new jv(this._logger);const g=this._channelManager=this._getChannelManager(c,d,this._logger),h=g.get();this._messages=new je(a,c.messages,h,this._chatApi,d.auth.clientId,this._logger),this._presence=new jp(h,d.auth.clientId,this._logger,c),this._typing=new jB(c.typing,d.connection,h,d.auth.clientId,this._logger),this._reactions=new jA(h,d.connection,d.auth.clientId,this._logger),this._occupancy=new jo(a,h,this._chatApi,this._logger,c),this._lifecycleManager=new jw(g,this._lifecycle,this._logger);let i=!1;this._finalizer=async()=>{i?this._logger.debug("Room.finalizer(); already finalized"):(await this._lifecycleManager.release(),this._lifecycleManager.dispose(),this._messages.dispose(),this._presence.dispose(),this._reactions.dispose(),this._occupancy.dispose(),await this._typing.dispose(),this._lifecycle.dispose(),i=!0)}}_getChannelManager(a,b,c){let d=new jn(this._name,b,c,a.isReactClient);return d.mergeOptions(jo.channelOptionMerger(a)),d.mergeOptions(jp.channelOptionMerger(a)),d.mergeOptions(ja.channelOptionMerger(a)),d}get name(){return this._name}options(){return i5(this._options)}get messages(){return this._messages}get presence(){return this._presence}get reactions(){return this._reactions}get typing(){return this._typing}get occupancy(){return this._occupancy}get status(){return this._lifecycle.status}get error(){return this._lifecycle.error}onStatusChange(a){return this._lifecycle.onChange(a)}async attach(){return this._logger.trace("Room.attach();"),this._lifecycleManager.attach()}async detach(){return this._logger.trace("Room.detach();"),this._lifecycleManager.detach()}release(){return this._logger.trace("Room.release();"),this._finalizer()}get nonce(){return this._nonce}get lifecycle(){return this._lifecycle}get lifecycleManager(){return this._lifecycleManager}onDiscontinuity(a){return this._logger.trace("Room.onDiscontinuity();"),this._lifecycleManager.onDiscontinuity(a)}get channel(){return this._channelManager.get()}}class jD{constructor(a,b,c){this._rooms=new Map,this._releasing=new Map,this._isReact=!1,this._disposed=!1,this._realtime=a,this._chatApi=new jf(a,c),this._clientOptions=b,this._logger=c}async get(a,b){this._logger.trace("Rooms.get();",{roomName:a}),this._ensureNotDisposed();let c=this._rooms.get(a);if(c)return this._handleExistingRoom(c,a,b);let d=this._releasing.get(a),e=iM();return d?this._waitForReleaseAndCreateRoom(a,e,b,d):this._createNewRoom(a,e,b)}async release(a){this._logger.trace("Rooms.release();",{roomName:a});let b=this._rooms.get(a),c=this._releasing.get(a);return b?c?this._handleConcurrentRelease(a,b,c):this._performRoomRelease(a,b):this._handleNonExistentRoomRelease(a,c)}async dispose(){this._logger.trace("Rooms.dispose();"),this._disposed=!0;let a=[...this._rooms.keys()];if(0===a.length)return void this._logger.debug("Rooms.dispose(); no rooms to release");let b=[...a.map(a=>this.release(a)),...this._releasing.values()];this._logger.debug("Rooms.dispose(); releasing rooms",{roomCount:a.length,roomNames:a}),await Promise.all(b),this._logger.debug("Rooms.dispose(); all rooms released successfully")}get clientOptions(){return this._clientOptions}get count(){return this._rooms.size}_ensureNotDisposed(){if(this._disposed)throw new iy.ErrorInfo("cannot get room, rooms instance has been disposed",4e4,400)}async _handleExistingRoom(a,b,c){if(!iP(a.options,c))throw new iy.ErrorInfo("room already exists with different options",4e4,400);return this._logger.debug("Rooms.get(); returning existing room",{roomName:b,nonce:a.nonce,options:c}),await a.promise}_createNewRoom(a,b,c){let d=this._makeRoom(a,b,c),e={promise:Promise.resolve(d),nonce:b,options:c};return this._rooms.set(a,e),this._logger.debug("Rooms.get(); returning new room",{roomName:a,nonce:d.nonce}),d}async _waitForReleaseAndCreateRoom(a,b,c,d){let e=new AbortController,f=this._createAbortableRoomPromise(a,b,c,d,e);return this._rooms.set(a,{promise:f,options:c,nonce:b,abort:e}),this._logger.debug("Rooms.get(); creating new promise dependent on previous release",{roomName:a}),await f}_createAbortableRoomPromise(a,b,c,d,e){return new Promise((f,g)=>{let h=()=>{this._logger.debug("Rooms.get(); aborted before init",{roomName:a}),g(new iy.ErrorInfo("room released before get operation could complete",jg.RoomReleasedBeforeOperationCompleted,400))};e.signal.addEventListener("abort",h),d.then(()=>{if(e.signal.aborted)return void this._logger.debug("Rooms.get(); aborted before releasing promise resolved",{roomName:a});this._logger.debug("Rooms.get(); releasing finished",{roomName:a});let d=this._makeRoom(a,b,c);e.signal.removeEventListener("abort",h),f(d)}).catch(a=>{e.signal.removeEventListener("abort",h),g(a)})})}async _handleNonExistentRoomRelease(a,b){if(b){this._logger.debug("Rooms.release(); waiting for previous release call",{roomName:a}),await b;return}this._logger.debug("Rooms.release(); room does not exist",{roomName:a})}async _handleConcurrentRelease(a,b,c){b.abort&&(this._logger.debug("Rooms.release(); aborting get call",{roomName:a,existingNonce:b.nonce}),b.abort.abort(),this._rooms.delete(a)),await c}async _performRoomRelease(a,b){this._rooms.delete(a);let c=this._executeRoomRelease(a,b);this._releasing.set(a,c),this._logger.debug("Rooms.release(); creating new release promise",{roomName:a,nonce:b.nonce}),await c}async _executeRoomRelease(a,b){let c=await b.promise;this._logger.debug("Rooms.release(); releasing room",{roomName:a,nonce:b.nonce}),await c.release(),this._logger.debug("Rooms.release(); room released",{roomName:a,nonce:b.nonce}),this._releasing.delete(a)}_makeRoom(a,b,c){var d;return new jC(a,b,(d=this._isReact,{typing:{...jx.typing,...c?.typing},occupancy:{...jx.occupancy,...c?.occupancy},presence:{...jx.presence,...c?.presence},messages:{...jx.messages,...c?.messages},isReactClient:d}),this._realtime,this._chatApi,this._logger)}useReact(){this._logger.trace("Rooms.useReact();"),this._isReact=!0}}class jE{constructor(a,b){this._realtime=a,this._clientOptions=(a=>({...a=a??{},logLevel:a.logLevel??iD.logLevel}))(b),this._nonce=iM(),this._logger=(a=>new iC(a.logHandler??iA,a.logLevel))(this._clientOptions).withContext({chatClientNonce:this._nonce}),this._connection=new iL(a,this._logger),this._rooms=new jD(a,this._clientOptions,this._logger),this._addAgent("chat-js"),this._logger.trace(`ably chat client version ${jh}; initialized`)}get rooms(){return this._rooms}get connection(){return this._connection}get clientId(){return this._realtime.auth.clientId}get realtime(){return this._realtime}get clientOptions(){return this._clientOptions}get logger(){return this._logger}addReactAgent(){this._addAgent("chat-react"),this._rooms.useReact()}addAgentWithVersion(a,b){this._addAgent(a,b),this._logger.trace(`Added agent ${a} with version ${b}`)}async dispose(){this._logger.trace("ChatClient.dispose();"),await this._rooms.dispose(),this._connection.dispose(),this._logger.debug("ChatClient.dispose(); client disposed successfully")}_addAgent(a,b){let c=this._realtime;c.options.agents={...c.options.agents??c.options.agents,[a]:b??jh}}}function jF({className:a,type:b,...c}){return(0,ac.jsx)("input",{type:b,"data-slot":"input",className:bc("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}function jG(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function jH(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function jI(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=jH(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():jH(a[b],null)}}}}(...a),a)}let jJ=["top","right","bottom","left"],jK=Math.min,jL=Math.max,jM=Math.round,jN=Math.floor,jO=a=>({x:a,y:a}),jP={left:"right",right:"left",bottom:"top",top:"bottom"},jQ={start:"end",end:"start"};function jR(a,b){return"function"==typeof a?a(b):a}function jS(a){return a.split("-")[0]}function jT(a){return a.split("-")[1]}function jU(a){return"x"===a?"y":"x"}function jV(a){return"y"===a?"height":"width"}let jW=new Set(["top","bottom"]);function jX(a){return jW.has(jS(a))?"y":"x"}function jY(a){return a.replace(/start|end/g,a=>jQ[a])}let jZ=["left","right"],j$=["right","left"],j_=["top","bottom"],j0=["bottom","top"];function j1(a){return a.replace(/left|right|bottom|top/g,a=>jP[a])}function j2(a){return"number"!=typeof a?{top:0,right:0,bottom:0,left:0,...a}:{top:a,right:a,bottom:a,left:a}}function j3(a){let{x:b,y:c,width:d,height:e}=a;return{width:d,height:e,top:c,left:b,right:b+d,bottom:c+e,x:b,y:c}}function j4(a,b,c){let d,{reference:e,floating:f}=a,g=jX(b),h=jU(jX(b)),i=jV(h),j=jS(b),k="y"===g,l=e.x+e.width/2-f.width/2,m=e.y+e.height/2-f.height/2,n=e[i]/2-f[i]/2;switch(j){case"top":d={x:l,y:e.y-f.height};break;case"bottom":d={x:l,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:m};break;case"left":d={x:e.x-f.width,y:m};break;default:d={x:e.x,y:e.y}}switch(jT(b)){case"start":d[h]-=n*(c&&k?-1:1);break;case"end":d[h]+=n*(c&&k?-1:1)}return d}let j5=async(a,b,c)=>{let{placement:d="bottom",strategy:e="absolute",middleware:f=[],platform:g}=c,h=f.filter(Boolean),i=await (null==g.isRTL?void 0:g.isRTL(b)),j=await g.getElementRects({reference:a,floating:b,strategy:e}),{x:k,y:l}=j4(j,d,i),m=d,n={},o=0;for(let c=0;c<h.length;c++){let{name:f,fn:p}=h[c],{x:q,y:r,data:s,reset:t}=await p({x:k,y:l,initialPlacement:d,placement:m,strategy:e,middlewareData:n,rects:j,platform:g,elements:{reference:a,floating:b}});k=null!=q?q:k,l=null!=r?r:l,n={...n,[f]:{...n[f],...s}},t&&o<=50&&(o++,"object"==typeof t&&(t.placement&&(m=t.placement),t.rects&&(j=!0===t.rects?await g.getElementRects({reference:a,floating:b,strategy:e}):t.rects),{x:k,y:l}=j4(j,m,i)),c=-1)}return{x:k,y:l,placement:m,strategy:e,middlewareData:n}};async function j6(a,b){var c;void 0===b&&(b={});let{x:d,y:e,platform:f,rects:g,elements:h,strategy:i}=a,{boundary:j="clippingAncestors",rootBoundary:k="viewport",elementContext:l="floating",altBoundary:m=!1,padding:n=0}=jR(b,a),o=j2(n),p=h[m?"floating"===l?"reference":"floating":l],q=j3(await f.getClippingRect({element:null==(c=await (null==f.isElement?void 0:f.isElement(p)))||c?p:p.contextElement||await (null==f.getDocumentElement?void 0:f.getDocumentElement(h.floating)),boundary:j,rootBoundary:k,strategy:i})),r="floating"===l?{x:d,y:e,width:g.floating.width,height:g.floating.height}:g.reference,s=await (null==f.getOffsetParent?void 0:f.getOffsetParent(h.floating)),t=await (null==f.isElement?void 0:f.isElement(s))&&await (null==f.getScale?void 0:f.getScale(s))||{x:1,y:1},u=j3(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:r,offsetParent:s,strategy:i}):r);return{top:(q.top-u.top+o.top)/t.y,bottom:(u.bottom-q.bottom+o.bottom)/t.y,left:(q.left-u.left+o.left)/t.x,right:(u.right-q.right+o.right)/t.x}}function j7(a,b){return{top:a.top-b.height,right:a.right-b.width,bottom:a.bottom-b.height,left:a.left-b.width}}function j8(a){return jJ.some(b=>a[b]>=0)}let j9=new Set(["left","top"]);async function ka(a,b){let{placement:c,platform:d,elements:e}=a,f=await (null==d.isRTL?void 0:d.isRTL(e.floating)),g=jS(c),h=jT(c),i="y"===jX(c),j=j9.has(g)?-1:1,k=f&&i?-1:1,l=jR(b,a),{mainAxis:m,crossAxis:n,alignmentAxis:o}="number"==typeof l?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:l.mainAxis||0,crossAxis:l.crossAxis||0,alignmentAxis:l.alignmentAxis};return h&&"number"==typeof o&&(n="end"===h?-1*o:o),i?{x:n*k,y:m*j}:{x:m*j,y:n*k}}function kb(a){return function(a){return!1}(a)?(a.nodeName||"").toLowerCase():"#document"}function kc(a){var b;return(null==a||null==(b=a.ownerDocument)?void 0:b.defaultView)||window}function kd(a){var b;return null==(b=(function(a){return!1}(a)?a.ownerDocument:a.document)||window.document)?void 0:b.documentElement}function ke(a){return!1}let kf=new Set(["inline","contents"]);function kg(a){let{overflow:b,overflowX:c,overflowY:d,display:e}=kr(a);return/auto|scroll|overlay|hidden|clip/.test(b+d+c)&&!kf.has(e)}let kh=new Set(["table","td","th"]),ki=[":popover-open",":modal"];function kj(a){return ki.some(b=>{try{return a.matches(b)}catch(a){return!1}})}let kk=["transform","translate","scale","rotate","perspective"],kl=["transform","translate","scale","rotate","perspective","filter"],km=["paint","layout","strict","content"];function kn(a){let b=ko(),c=a;return kk.some(a=>!!c[a]&&"none"!==c[a])||!!c.containerType&&"normal"!==c.containerType||!b&&!!c.backdropFilter&&"none"!==c.backdropFilter||!b&&!!c.filter&&"none"!==c.filter||kl.some(a=>(c.willChange||"").includes(a))||km.some(a=>(c.contain||"").includes(a))}function ko(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let kp=new Set(["html","body","#document"]);function kq(a){return kp.has(kb(a))}function kr(a){return kc(a).getComputedStyle(a)}function ks(a){return{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function kt(a){if("html"===kb(a))return a;let b=a.assignedSlot||a.parentNode||!1||kd(a);return b}function ku(a,b,c){var d;void 0===b&&(b=[]),void 0===c&&(c=!0);let e=function a(b){let c=kt(b);return kq(c)?b.ownerDocument?b.ownerDocument.body:b.body:a(c)}(a),f=e===(null==(d=a.ownerDocument)?void 0:d.body),g=kc(e);if(f){let a=kv(g);return b.concat(g,g.visualViewport||[],kg(e)?e:[],a&&c?ku(a):[])}return b.concat(e,ku(e,[],c))}function kv(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function kw(a){let b=kr(a),c=parseFloat(b.width)||0,d=parseFloat(b.height)||0,e=!1,f=e?a.offsetWidth:c,g=e?a.offsetHeight:d,h=jM(c)!==f||jM(d)!==g;return h&&(c=f,d=g),{width:c,height:d,$:h}}function kx(a){return 0,a.contextElement}function ky(a){let b=kx(a);1;return jO(1)}let kz=jO(0);function kA(a){let b=kc(a);return ko()&&b.visualViewport?{x:b.visualViewport.offsetLeft,y:b.visualViewport.offsetTop}:kz}function kB(a,b,c,d){var e;void 0===b&&(b=!1),void 0===c&&(c=!1);let f=a.getBoundingClientRect(),g=kx(a),h=jO(1);b&&(d||(h=ky(a)));let i=(void 0===(e=c)&&(e=!1),d&&(!e||d===kc(g))&&e)?kA(g):jO(0),j=(f.left+i.x)/h.x,k=(f.top+i.y)/h.y,l=f.width/h.x,m=f.height/h.y;if(g){let a=kc(g),b=d,c=a,e=kv(c);for(;e&&d&&b!==c;){let a=ky(e),b=e.getBoundingClientRect(),d=kr(e),f=b.left+(e.clientLeft+parseFloat(d.paddingLeft))*a.x,g=b.top+(e.clientTop+parseFloat(d.paddingTop))*a.y;j*=a.x,k*=a.y,l*=a.x,m*=a.y,j+=f,k+=g,e=kv(c=kc(e))}}return j3({width:l,height:m,x:j,y:k})}function kC(a,b){let c=ks(a).scrollLeft;return b?b.left+c:kB(kd(a)).left+c}function kD(a,b){let c=a.getBoundingClientRect();return{x:c.left+b.scrollLeft-kC(a,c),y:c.top+b.scrollTop}}function kE(a,b,c){var d;let e;if("viewport"===b)e=function(a,b){let c=kc(a),d=kd(a),e=c.visualViewport,f=d.clientWidth,g=d.clientHeight,h=0,i=0;if(e){f=e.width,g=e.height;let a=ko();(!a||a&&"fixed"===b)&&(h=e.offsetLeft,i=e.offsetTop)}let j=kC(d);if(j<=0){let a=d.ownerDocument,b=a.body,c=getComputedStyle(b),e="CSS1Compat"===a.compatMode&&parseFloat(c.marginLeft)+parseFloat(c.marginRight)||0,g=Math.abs(d.clientWidth-b.clientWidth-e);g<=25&&(f-=g)}else j<=25&&(f+=j);return{width:f,height:g,x:h,y:i}}(a,c);else if("document"===b){let b,c,f,g,h,i,j;d=kd(a),b=kd(d),c=ks(d),f=d.ownerDocument.body,g=jL(b.scrollWidth,b.clientWidth,f.scrollWidth,f.clientWidth),h=jL(b.scrollHeight,b.clientHeight,f.scrollHeight,f.clientHeight),i=-c.scrollLeft+kC(d),j=-c.scrollTop,"rtl"===kr(f).direction&&(i+=jL(b.clientWidth,f.clientWidth)-g),e={width:g,height:h,x:i,y:j}}else{1;{let c=kA(a);e={x:b.x-c.x,y:b.y-c.y,width:b.width,height:b.height}}}return j3(e)}function kF(a){return"static"===kr(a).position}function kG(a,b){1;return null}function kH(a,b){var c;let d=kc(a);if(kj(a))return d;1;{let b=kt(a);for(;b&&!kq(b);){0;b=kt(b)}return d}}let kI=async function(a){let b=this.getOffsetParent||kH,c=this.getDimensions,d=await c(a.floating);return{reference:function(a,b,c){var d;let e=(d=0,!1),f=kd(b),g="fixed"===c,h=kB(a,!0,g,b),i={scrollLeft:0,scrollTop:0},j=jO(0);if(e||!e&&!g)if(("body"!==kb(b)||kg(f))&&(i=ks(b)),e){let a=kB(b,!0,g,b);j.x=a.x+b.clientLeft,j.y=a.y+b.clientTop}else f&&(j.x=kC(f));g&&!e&&f&&(j.x=kC(f));let k=!f||e||g?jO(0):kD(f,i);return{x:h.left+i.scrollLeft-j.x-k.x,y:h.top+i.scrollTop-j.y-k.y,width:h.width,height:h.height}}(a.reference,await b(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}},kJ={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){var b,c;let{elements:d,rect:e,offsetParent:f,strategy:g}=a,h="fixed"===g,i=kd(f),j=!!d&&kj(d.floating);if(f===i||j&&h)return e;let k={scrollLeft:0,scrollTop:0},l=jO(1),m=jO(0),n=(b=0,!1);(n||!n&&!h)&&(("body"!==kb(f)||kg(i))&&(k=ks(f)),c=0,0);let o=!i||n||h?jO(0):kD(i,k);return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-k.scrollLeft*l.x+m.x+o.x,y:e.y*l.y-k.scrollTop*l.y+m.y+o.y}},getDocumentElement:kd,getClippingRect:function(a){let{element:b,boundary:c,rootBoundary:d,strategy:e}=a,f=[..."clippingAncestors"===c?kj(b)?[]:function(a,b){var c;let d=b.get(a);if(d)return d;let e=ku(a,[],!1).filter(a=>{var b;return b=0,!1}),f="fixed"===kr(a).position,g=f?kt(a):a;return c=0,b.set(a,e),e}(b,this._c):[].concat(c),d],g=f[0],h=f.reduce((a,c)=>{let d=kE(b,c,e);return a.top=jL(d.top,a.top),a.right=jK(d.right,a.right),a.bottom=jK(d.bottom,a.bottom),a.left=jL(d.left,a.left),a},kE(b,g,e));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}},getOffsetParent:kH,getElementRects:kI,getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){let{width:b,height:c}=kw(a);return{width:b,height:c}},getScale:ky,isElement:ke,isRTL:function(a){return"rtl"===kr(a).direction}};function kK(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height}let kL=a=>({name:"arrow",options:a,async fn(b){let{x:c,y:d,placement:e,rects:f,platform:g,elements:h,middlewareData:i}=b,{element:j,padding:k=0}=jR(a,b)||{};if(null==j)return{};let l=j2(k),m={x:c,y:d},n=jU(jX(e)),o=jV(n),p=await g.getDimensions(j),q="y"===n,r=q?"clientHeight":"clientWidth",s=f.reference[o]+f.reference[n]-m[n]-f.floating[o],t=m[n]-f.reference[n],u=await (null==g.getOffsetParent?void 0:g.getOffsetParent(j)),v=u?u[r]:0;v&&await (null==g.isElement?void 0:g.isElement(u))||(v=h.floating[r]||f.floating[o]);let w=v/2-p[o]/2-1,x=jK(l[q?"top":"left"],w),y=jK(l[q?"bottom":"right"],w),z=v-p[o]-y,A=v/2-p[o]/2+(s/2-t/2),B=jL(x,jK(A,z)),C=!i.arrow&&null!=jT(e)&&A!==B&&f.reference[o]/2-(A<x?x:y)-p[o]/2<0,D=C?A<x?A-x:A-z:0;return{[n]:m[n]+D,data:{[n]:B,centerOffset:A-B-D,...C&&{alignmentOffset:D}},reset:C}}});var kM="undefined"!=typeof document?ad.useLayoutEffect:function(){};function kN(a,b){let c,d,e;if(a===b)return!0;if(typeof a!=typeof b)return!1;if("function"==typeof a&&a.toString()===b.toString())return!0;if(a&&b&&"object"==typeof a){if(Array.isArray(a)){if((c=a.length)!==b.length)return!1;for(d=c;0!=d--;)if(!kN(a[d],b[d]))return!1;return!0}if((c=(e=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(d=c;0!=d--;)if(!({}).hasOwnProperty.call(b,e[d]))return!1;for(d=c;0!=d--;){let c=e[d];if(("_owner"!==c||!a.$$typeof)&&!kN(a[c],b[c]))return!1}return!0}return a!=a&&b!=b}function kO(a,b){let c=1;return Math.round(b*c)/c}function kP(a){let b=ad.useRef(a);return kM(()=>{b.current=a}),b}var kQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),kR=ad.forwardRef((a,b)=>{let{children:c,width:d=10,height:e=5,...f}=a;return(0,ac.jsx)(kQ.svg,{...f,ref:b,width:d,height:e,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:(0,ac.jsx)("polygon",{points:"0,0 30,0 15,10"})})});function kS(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function kT(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=kS(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():kS(a[b],null)}}}}(...a),a)}kR.displayName="Arrow";var kU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),kV=globalThis?.document?ad.useLayoutEffect:()=>{},kW="Popper",[kX,kY]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(kW),[kZ,k$]=kX(kW),k_=a=>{let{__scopePopper:b,children:c}=a,[d,e]=ad.useState(null);return(0,ac.jsx)(kZ,{scope:b,anchor:d,onAnchorChange:e,children:c})};k_.displayName=kW;var k0="PopperAnchor",k1=ad.forwardRef((a,b)=>{let{__scopePopper:c,virtualRef:d,...e}=a,f=k$(k0,c),g=ad.useRef(null),h=kT(b,g),i=ad.useRef(null);return ad.useEffect(()=>{let a=i.current;i.current=d?.current||g.current,a!==i.current&&f.onAnchorChange(i.current)}),d?null:(0,ac.jsx)(kU.div,{...e,ref:h})});k1.displayName=k0;var k2="PopperContent",[k3,k4]=kX(k2),k5=ad.forwardRef((a,b)=>{var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;let x,{__scopePopper:y,side:z="bottom",sideOffset:A=0,align:B="center",alignOffset:C=0,arrowPadding:D=0,avoidCollisions:E=!0,collisionBoundary:F=[],collisionPadding:G=0,sticky:H="partial",hideWhenDetached:I=!1,updatePositionStrategy:J="optimized",onPlaced:K,...L}=a,M=k$(k2,y),[N,O]=ad.useState(null),P=kT(b,a=>O(a)),[Q,R]=ad.useState(null),S=function(a){let[b,c]=ad.useState(void 0);return kV(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(Q),T=S?.width??0,U=S?.height??0,V="number"==typeof G?G:{top:0,right:0,bottom:0,left:0,...G},W=Array.isArray(F)?F:[F],X=W.length>0,Y={padding:V,boundary:W.filter(k9),altBoundary:X},{refs:Z,floatingStyles:$,placement:_,isPositioned:aa,middlewareData:ab}=function(a){void 0===a&&(a={});let{placement:b="bottom",strategy:c="absolute",middleware:d=[],platform:e,elements:{reference:f,floating:g}={},transform:h=!0,whileElementsMounted:i,open:j}=a,[k,l]=ad.useState({x:0,y:0,strategy:c,placement:b,middlewareData:{},isPositioned:!1}),[m,n]=ad.useState(d);kN(m,d)||n(d);let[o,p]=ad.useState(null),[q,r]=ad.useState(null),s=ad.useCallback(a=>{a!==w.current&&(w.current=a,p(a))},[]),t=ad.useCallback(a=>{a!==x.current&&(x.current=a,r(a))},[]),u=f||o,v=g||q,w=ad.useRef(null),x=ad.useRef(null),y=ad.useRef(k),z=null!=i,A=kP(i),B=kP(e),C=kP(j),D=ad.useCallback(()=>{var a,d;let e,f,g;if(!w.current||!x.current)return;let h={placement:b,strategy:c,middleware:m};B.current&&(h.platform=B.current),(a=w.current,d=x.current,e=new Map,g={...(f={platform:kJ,...h}).platform,_c:e},j5(a,d,{...f,platform:g})).then(a=>{let b={...a,isPositioned:!1!==C.current};E.current&&!kN(y.current,b)&&(y.current=b,dL.flushSync(()=>{l(b)}))})},[m,b,c,B,C]);kM(()=>{!1===j&&y.current.isPositioned&&(y.current.isPositioned=!1,l(a=>({...a,isPositioned:!1})))},[j]);let E=ad.useRef(!1);kM(()=>(E.current=!0,()=>{E.current=!1}),[]),kM(()=>{if(u&&(w.current=u),v&&(x.current=v),u&&v){if(A.current)return A.current(u,v,D);D()}},[u,v,D,A,z]);let F=ad.useMemo(()=>({reference:w,floating:x,setReference:s,setFloating:t}),[s,t]),G=ad.useMemo(()=>({reference:u,floating:v}),[u,v]),H=ad.useMemo(()=>{let a={position:c,left:0,top:0};if(!G.floating)return a;let b=kO(G.floating,k.x),d=kO(G.floating,k.y);if(h)return{...a,transform:"translate("+b+"px, "+d+"px)",...(G.floating,false)};return{position:c,left:b,top:d}},[c,h,G.floating,k.x,k.y]);return ad.useMemo(()=>({...k,update:D,refs:F,elements:G,floatingStyles:H}),[k,D,F,G,H])}({strategy:"fixed",placement:z+("center"!==B?"-"+B:""),whileElementsMounted:(...a)=>(function(a,b,c,d){let e;void 0===d&&(d={});let{ancestorScroll:f=!0,ancestorResize:g=!0,elementResize:h="function"==typeof ResizeObserver,layoutShift:i="function"==typeof IntersectionObserver,animationFrame:j=!1}=d,k=kx(a),l=f||g?[...k?ku(k):[],...ku(b)]:[];l.forEach(a=>{f&&a.addEventListener("scroll",c,{passive:!0}),g&&a.addEventListener("resize",c)});let m=k&&i?function(a,b){let c,d=null,e=kd(a);function f(){var a;clearTimeout(c),null==(a=d)||a.disconnect(),d=null}return!function g(h,i){void 0===h&&(h=!1),void 0===i&&(i=1),f();let j=a.getBoundingClientRect(),{left:k,top:l,width:m,height:n}=j;if(h||b(),!m||!n)return;let o={rootMargin:-jN(l)+"px "+-jN(e.clientWidth-(k+m))+"px "+-jN(e.clientHeight-(l+n))+"px "+-jN(k)+"px",threshold:jL(0,jK(1,i))||1},p=!0;function q(b){let d=b[0].intersectionRatio;if(d!==i){if(!p)return g();d?g(!1,d):c=setTimeout(()=>{g(!1,1e-7)},1e3)}1!==d||kK(j,a.getBoundingClientRect())||g(),p=!1}try{d=new IntersectionObserver(q,{...o,root:e.ownerDocument})}catch(a){d=new IntersectionObserver(q,o)}d.observe(a)}(!0),f}(k,c):null,n=-1,o=null;h&&(o=new ResizeObserver(a=>{let[d]=a;d&&d.target===k&&o&&(o.unobserve(b),cancelAnimationFrame(n),n=requestAnimationFrame(()=>{var a;null==(a=o)||a.observe(b)})),c()}),k&&!j&&o.observe(k),o.observe(b));let p=j?kB(a):null;return j&&function b(){let d=kB(a);p&&!kK(p,d)&&c(),p=d,e=requestAnimationFrame(b)}(),c(),()=>{var a;l.forEach(a=>{f&&a.removeEventListener("scroll",c),g&&a.removeEventListener("resize",c)}),null==m||m(),null==(a=o)||a.disconnect(),o=null,j&&cancelAnimationFrame(e)}})(...a,{animationFrame:"always"===J}),elements:{reference:M.anchor},middleware:[{...{name:"offset",options:e=c={mainAxis:A+U,alignmentAxis:C},async fn(a){var b,c;let{x:d,y:f,placement:g,middlewareData:h}=a,i=await ka(a,e);return g===(null==(b=h.offset)?void 0:b.placement)&&null!=(c=h.arrow)&&c.alignmentOffset?{}:{x:d+i.x,y:f+i.y,data:{...i,placement:g}}}},options:[c,d]},E&&{...{name:"shift",options:k=i={mainAxis:!0,crossAxis:!1,limiter:"partial"===H?{...(void 0===(h=f)&&(h={}),{options:h,fn(a){let{x:b,y:c,placement:d,rects:e,middlewareData:f}=a,{offset:g=0,mainAxis:i=!0,crossAxis:j=!0}=jR(h,a),k={x:b,y:c},l=jX(d),m=jU(l),n=k[m],o=k[l],p=jR(g,a),q="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(i){let a="y"===m?"height":"width",b=e.reference[m]-e.floating[a]+q.mainAxis,c=e.reference[m]+e.reference[a]-q.mainAxis;n<b?n=b:n>c&&(n=c)}if(j){var r,s;let a="y"===m?"width":"height",b=j9.has(jS(d)),c=e.reference[l]-e.floating[a]+(b&&(null==(r=f.offset)?void 0:r[l])||0)+(b?0:q.crossAxis),g=e.reference[l]+e.reference[a]+(b?0:(null==(s=f.offset)?void 0:s[l])||0)-(b?q.crossAxis:0);o<c?o=c:o>g&&(o=g)}return{[m]:n,[l]:o}}}),options:[f,g]}:void 0,...Y},async fn(a){let{x:b,y:c,placement:d}=a,{mainAxis:e=!0,crossAxis:f=!1,limiter:g={fn:a=>{let{x:b,y:c}=a;return{x:b,y:c}}},...h}=jR(k,a),i={x:b,y:c},j=await j6(a,h),l=jX(jS(d)),m=jU(l),n=i[m],o=i[l];if(e){let a="y"===m?"top":"left",b="y"===m?"bottom":"right",c=n+j[a],d=n-j[b];n=jL(c,jK(n,d))}if(f){let a="y"===l?"top":"left",b="y"===l?"bottom":"right",c=o+j[a],d=o-j[b];o=jL(c,jK(o,d))}let p=g.fn({...a,[m]:n,[l]:o});return{...p,data:{x:p.x-b,y:p.y-c,enabled:{[m]:e,[l]:f}}}}},options:[i,j]},E&&{...{name:"flip",options:n=l={...Y},async fn(a){var b,c,d,e,f,g,h,i;let j,k,l,{placement:m,middlewareData:o,rects:p,initialPlacement:q,platform:r,elements:s}=a,{mainAxis:t=!0,crossAxis:u=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...z}=jR(n,a);if(null!=(b=o.arrow)&&b.alignmentOffset)return{};let A=jS(m),B=jX(q),C=jS(q)===q,D=await (null==r.isRTL?void 0:r.isRTL(s.floating)),E=v||(C||!y?[j1(q)]:(j=j1(q),[jY(q),j,jY(j)])),F="none"!==x;!v&&F&&E.push(...(k=jT(q),l=function(a,b,c){switch(a){case"top":case"bottom":if(c)return b?j$:jZ;return b?jZ:j$;case"left":case"right":return b?j_:j0;default:return[]}}(jS(q),"start"===x,D),k&&(l=l.map(a=>a+"-"+k),y&&(l=l.concat(l.map(jY)))),l));let G=[q,...E],H=await j6(a,z),I=[],J=(null==(c=o.flip)?void 0:c.overflows)||[];if(t&&I.push(H[A]),u){let a,b,c,d,e=(g=m,h=p,void 0===(i=D)&&(i=!1),a=jT(g),c=jV(b=jU(jX(g))),d="x"===b?a===(i?"end":"start")?"right":"left":"start"===a?"bottom":"top",h.reference[c]>h.floating[c]&&(d=j1(d)),[d,j1(d)]);I.push(H[e[0]],H[e[1]])}if(J=[...J,{placement:m,overflows:I}],!I.every(a=>a<=0)){let a=((null==(d=o.flip)?void 0:d.index)||0)+1,b=G[a];if(b&&("alignment"!==u||B===jX(b)||J.every(a=>jX(a.placement)!==B||a.overflows[0]>0)))return{data:{index:a,overflows:J},reset:{placement:b}};let c=null==(e=J.filter(a=>a.overflows[0]<=0).sort((a,b)=>a.overflows[1]-b.overflows[1])[0])?void 0:e.placement;if(!c)switch(w){case"bestFit":{let a=null==(f=J.filter(a=>{if(F){let b=jX(a.placement);return b===B||"y"===b}return!0}).map(a=>[a.placement,a.overflows.filter(a=>a>0).reduce((a,b)=>a+b,0)]).sort((a,b)=>a[1]-b[1])[0])?void 0:f[0];a&&(c=a);break}case"initialPlacement":c=q}if(m!==c)return{reset:{placement:c}}}return{}}},options:[l,m]},{...{name:"size",options:q=o={...Y,apply:({elements:a,rects:b,availableWidth:c,availableHeight:d})=>{let{width:e,height:f}=b.reference,g=a.floating.style;g.setProperty("--radix-popper-available-width",`${c}px`),g.setProperty("--radix-popper-available-height",`${d}px`),g.setProperty("--radix-popper-anchor-width",`${e}px`),g.setProperty("--radix-popper-anchor-height",`${f}px`)}},async fn(a){var b,c;let d,e,{placement:f,rects:g,platform:h,elements:i}=a,{apply:j=()=>{},...k}=jR(q,a),l=await j6(a,k),m=jS(f),n=jT(f),o="y"===jX(f),{width:p,height:r}=g.floating;"top"===m||"bottom"===m?(d=m,e=n===(await (null==h.isRTL?void 0:h.isRTL(i.floating))?"start":"end")?"left":"right"):(e=m,d="end"===n?"top":"bottom");let s=r-l.top-l.bottom,t=p-l.left-l.right,u=jK(r-l[d],s),v=jK(p-l[e],t),w=!a.middlewareData.shift,x=u,y=v;if(null!=(b=a.middlewareData.shift)&&b.enabled.x&&(y=t),null!=(c=a.middlewareData.shift)&&c.enabled.y&&(x=s),w&&!n){let a=jL(l.left,0),b=jL(l.right,0),c=jL(l.top,0),d=jL(l.bottom,0);o?y=p-2*(0!==a||0!==b?a+b:jL(l.left,l.right)):x=r-2*(0!==c||0!==d?c+d:jL(l.top,l.bottom))}await j({...a,availableWidth:y,availableHeight:x});let z=await h.getDimensions(i.floating);return p!==z.width||r!==z.height?{reset:{rects:!0}}:{}}},options:[o,p]},Q&&{...{name:"arrow",options:t=r={element:Q,padding:D},fn(a){let{element:b,padding:c}="function"==typeof t?t(a):t;return b&&({}).hasOwnProperty.call(b,"current")?null!=b.current?kL({element:b.current,padding:c}).fn(a):{}:b?kL({element:b,padding:c}).fn(a):{}}},options:[r,s]},la({arrowWidth:T,arrowHeight:U}),I&&{...{name:"hide",options:w=u={strategy:"referenceHidden",...Y},async fn(a){let{rects:b}=a,{strategy:c="referenceHidden",...d}=jR(w,a);switch(c){case"referenceHidden":{let c=j7(await j6(a,{...d,elementContext:"reference"}),b.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:j8(c)}}}case"escaped":{let c=j7(await j6(a,{...d,altBoundary:!0}),b.floating);return{data:{escapedOffsets:c,escaped:j8(c)}}}default:return{}}}},options:[u,v]}]}),[ae,af]=lb(_),ag=(x=ad.useRef(K),ad.useEffect(()=>{x.current=K}),ad.useMemo(()=>(...a)=>x.current?.(...a),[]));kV(()=>{aa&&ag?.()},[aa,ag]);let ah=ab.arrow?.x,ai=ab.arrow?.y,aj=ab.arrow?.centerOffset!==0,[ak,al]=ad.useState();return kV(()=>{N&&al(window.getComputedStyle(N).zIndex)},[N]),(0,ac.jsx)("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:aa?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ak,"--radix-popper-transform-origin":[ab.transformOrigin?.x,ab.transformOrigin?.y].join(" "),...ab.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:(0,ac.jsx)(k3,{scope:y,placedSide:ae,onArrowChange:R,arrowX:ah,arrowY:ai,shouldHideArrow:aj,children:(0,ac.jsx)(kU.div,{"data-side":ae,"data-align":af,...L,ref:P,style:{...L.style,animation:aa?void 0:"none"}})})})});k5.displayName=k2;var k6="PopperArrow",k7={top:"bottom",right:"left",bottom:"top",left:"right"},k8=ad.forwardRef(function(a,b){let{__scopePopper:c,...d}=a,e=k4(k6,c),f=k7[e.placedSide];return(0,ac.jsx)("span",{ref:e.onArrowChange,style:{position:"absolute",left:e.arrowX,top:e.arrowY,[f]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[e.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[e.placedSide],visibility:e.shouldHideArrow?"hidden":void 0},children:(0,ac.jsx)(kR,{...d,ref:b,style:{...d.style,display:"block"}})})});function k9(a){return null!==a}k8.displayName=k6;var la=a=>({name:"transformOrigin",options:a,fn(b){let{placement:c,rects:d,middlewareData:e}=b,f=e.arrow?.centerOffset!==0,g=f?0:a.arrowWidth,h=f?0:a.arrowHeight,[i,j]=lb(c),k={start:"0%",center:"50%",end:"100%"}[j],l=(e.arrow?.x??0)+g/2,m=(e.arrow?.y??0)+h/2,n="",o="";return"bottom"===i?(n=f?k:`${l}px`,o=`${-h}px`):"top"===i?(n=f?k:`${l}px`,o=`${d.floating.height+h}px`):"right"===i?(n=`${-h}px`,o=f?k:`${m}px`):"left"===i&&(n=`${d.floating.width+h}px`,o=f?k:`${m}px`),{data:{x:n,y:o}}}});function lb(a){let[b,c="center"]=a.split("-");return[b,c]}var lc=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),ld=globalThis?.document?ad.useLayoutEffect:()=>{},le=ad[" useInsertionEffect ".trim().toString()]||ld;Symbol("RADIX:SYNC_STATE");var lf="Popover",[lg,lh]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(lf,[kY]),li=kY(),[lj,lk]=lg(lf),ll=a=>{let{__scopePopover:b,children:c,open:d,defaultOpen:e,onOpenChange:f,modal:g=!1}=a,h=li(b),i=ad.useRef(null),[j,k]=ad.useState(!1),[l,m]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return le(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:d,defaultProp:e??!1,onChange:f,caller:lf});return(0,ac.jsx)(k_,{...h,children:(0,ac.jsx)(lj,{scope:b,contentId:eZ(),triggerRef:i,open:l,onOpenChange:m,onOpenToggle:ad.useCallback(()=>m(a=>!a),[m]),hasCustomAnchor:j,onCustomAnchorAdd:ad.useCallback(()=>k(!0),[]),onCustomAnchorRemove:ad.useCallback(()=>k(!1),[]),modal:g,children:c})})};ll.displayName=lf;var lm="PopoverAnchor";ad.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,e=lk(lm,c),f=li(c),{onCustomAnchorAdd:g,onCustomAnchorRemove:h}=e;return ad.useEffect(()=>(g(),()=>h()),[g,h]),(0,ac.jsx)(k1,{...f,...d,ref:b})}).displayName=lm;var ln="PopoverTrigger",lo=ad.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,e=lk(ln,c),f=li(c),g=jI(b,e.triggerRef),h=(0,ac.jsx)(lc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":lA(e.open),...d,ref:g,onClick:jG(a.onClick,e.onOpenToggle)});return e.hasCustomAnchor?h:(0,ac.jsx)(k1,{asChild:!0,...f,children:h})});lo.displayName=ln;var lp="PopoverPortal",[lq,lr]=lg(lp,{forceMount:void 0}),ls=a=>{let{__scopePopover:b,forceMount:c,children:d,container:e}=a,f=lk(lp,b);return(0,ac.jsx)(lq,{scope:b,forceMount:c,children:(0,ac.jsx)(d4,{present:c||f.open,children:(0,ac.jsx)(gX,{asChild:!0,container:e,children:d})})})};ls.displayName=lp;var lt="PopoverContent",lu=ad.forwardRef((a,b)=>{let c=lr(lt,a.__scopePopover),{forceMount:d=c.forceMount,...e}=a,f=lk(lt,a.__scopePopover);return(0,ac.jsx)(d4,{present:d||f.open,children:f.modal?(0,ac.jsx)(lw,{...e,ref:b}):(0,ac.jsx)(lx,{...e,ref:b})})});lu.displayName=lt;var lv=ah("PopoverContent.RemoveScroll"),lw=ad.forwardRef((a,b)=>{let c=lk(lt,a.__scopePopover),d=ad.useRef(null),e=jI(b,d),f=ad.useRef(!1);return ad.useEffect(()=>{let a=d.current;if(a)return hD(a)},[]),(0,ac.jsx)(hw,{as:lv,allowPinchZoom:!0,children:(0,ac.jsx)(ly,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jG(a.onCloseAutoFocus,a=>{a.preventDefault(),f.current||c.triggerRef.current?.focus()}),onPointerDownOutside:jG(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;f.current=2===b.button||c},{checkForDefaultPrevented:!1}),onFocusOutside:jG(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),lx=ad.forwardRef((a,b)=>{let c=lk(lt,a.__scopePopover),d=ad.useRef(!1),e=ad.useRef(!1);return(0,ac.jsx)(ly,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,e.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(e.current=!0));let f=b.target;c.triggerRef.current?.contains(f)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&e.current&&b.preventDefault()}})}),ly=ad.forwardRef((a,b)=>{let{__scopePopover:c,trapFocus:d,onOpenAutoFocus:e,onCloseAutoFocus:f,disableOutsidePointerEvents:g,onEscapeKeyDown:h,onPointerDownOutside:i,onFocusOutside:j,onInteractOutside:k,...l}=a,m=lk(lt,c),n=li(c);return g$(),(0,ac.jsx)(gP,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:e,onUnmountAutoFocus:f,children:(0,ac.jsx)(gG,{asChild:!0,disableOutsidePointerEvents:g,onInteractOutside:k,onEscapeKeyDown:h,onPointerDownOutside:i,onFocusOutside:j,onDismiss:()=>m.onOpenChange(!1),children:(0,ac.jsx)(k5,{"data-state":lA(m.open),role:"dialog",id:m.contentId,...n,...l,ref:b,style:{...l.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),lz="PopoverClose";function lA(a){return a?"open":"closed"}function lB({...a}){return(0,ac.jsx)(ll,{"data-slot":"popover",...a})}function lC({...a}){return(0,ac.jsx)(lo,{"data-slot":"popover-trigger",...a})}function lD({className:a,align:b="center",sideOffset:c=4,...d}){return(0,ac.jsx)(ls,{children:(0,ac.jsx)(lu,{"data-slot":"popover-content",align:b,sideOffset:c,className:bc("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",a),...d})})}ad.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,e=lk(lz,c);return(0,ac.jsx)(lc.button,{type:"button",...d,ref:b,onClick:jG(a.onClick,()=>e.onOpenChange(!1))})}).displayName=lz,ad.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,e=li(c);return(0,ac.jsx)(k8,{...e,...d,ref:b})}).displayName="PopoverArrow";let lE=bj("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),lF=bj("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),lG=bj("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lH=bj("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),lI=bj("paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]),lJ=bj("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),lK=bj("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),lL=bj("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),lM=bj("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),lN=bj("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),lO=bj("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),lP=bj("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),lQ=bj("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),lR=bj("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function lS({onInsertMessage:a}){let[b,c]=(0,ad.useState)(!1),[d,e]=(0,ad.useState)(""),[f,g]=(0,ad.useState)(""),[h,i]=(0,ad.useState)(!1),[j,k]=(0,ad.useState)(!1),l=async()=>{if(!d.trim())return void fV.error("Please enter a prompt");i(!0),await new Promise(a=>setTimeout(a,1500));let a=d.toLowerCase();g(a.includes("congratulate")||a.includes("congrats")?`Congratulations!  That's absolutely amazing news! I'm so proud of you and all the hard work you've put in. You totally deserve this!`:a.includes("apologize")||a.includes("sorry")?"Hey, I wanted to reach out and sincerely apologize for what happened. I really didn't mean for things to go that way, and I feel terrible about it. Can we talk about this?":a.includes("thank")?`Thank you so much!  I really appreciate your help and support. It means the world to me, and I couldn't have done it without you!`:a.includes("invite")||a.includes("hang out")?`Hey! I was wondering if you'd like to hang out this weekend? We could grab coffee, catch a movie, or just chill. Let me know what works for you! `:a.includes("busy")||a.includes("can't make it")?"Hey, I'm really sorry but I won't be able to make it today. Something came up that I need to take care of. Can we reschedule for another time? I promise I'll make it up to you!":a.includes("birthday")||a.includes("bday")?`Happy Birthday!  Hope you have the most amazing day filled with joy, laughter, and all your favorite things. You deserve the best! `:a.includes("good morning")||a.includes("morning")?`Good morning!  Hope you slept well and are ready to crush this day! Let me know if you want to grab breakfast or coffee later. Have an awesome day! `:a.includes("good night")||a.includes("night")?`Good night!  Sleep well and sweet dreams! Tomorrow's going to be another great day. Rest up! `:a.includes("meeting")||a.includes("schedule")?"Hi! I wanted to check if we could schedule a meeting to discuss this further. I'm available most of this week. What time works best for you? Looking forward to connecting!":a.includes("miss you")?`I miss you too!  It's been way too long since we last hung out. We definitely need to catch up soon. When are you free?`:a.includes("love")?`You mean the world to me!  I'm so grateful to have you in my life. Thank you for always being there and being amazing!`:a.includes("funny")||a.includes("joke")?`Haha, you won't believe what just happened!  I was literally just thinking about that and it happened again. The universe has a weird sense of humor lol`:a.includes("excited")?`OMG I'm SO excited!  This is literally the best thing ever! I can't wait to tell you all about it! When can we meet up?`:a.includes("help")||a.includes("support")?`I'm here for you!  Whatever you need, just let me know. We'll figure this out together. You're not alone in this!`:a.includes("work")||a.includes("project")?"Hey! Just wanted to check in on the project. How's everything going on your end? Let me know if you need any help or if there's anything I can do to support you!":`Hey! ${d} I'd love to hear your thoughts on this. What do you think? Let's chat about it soon! `),i(!1),fV.success("Message generated! ")};return(0,ac.jsxs)(lB,{open:b,onOpenChange:c,children:[(0,ac.jsx)(lC,{asChild:!0,children:(0,ac.jsxs)(be,{size:"sm",variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10 relative group",children:[(0,ac.jsx)(br,{className:"w-5 h-5"}),(0,ac.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full animate-pulse"})]})}),(0,ac.jsx)(lD,{className:"w-[500px] p-0 backdrop-blur-xl bg-gradient-to-br from-purple-900/95 to-pink-900/95 border-white/20",align:"end",side:"top",children:(0,ac.jsxs)("div",{className:"p-4",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center",children:(0,ac.jsx)(lP,{className:"w-5 h-5 text-white"})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white",children:"Message Jumpstart"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Stuck on words? Try a quick suggestion."})]})]}),(0,ac.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,ac.jsxs)("div",{className:"flex gap-2",children:[(0,ac.jsx)(jF,{placeholder:"Describe what you want to say...",value:d,onChange:a=>e(a.target.value),onKeyPress:a=>"Enter"===a.key&&l(),className:"flex-1 bg-white/5 border-white/20 text-white placeholder:text-white/50"}),(0,ac.jsx)(be,{onClick:l,disabled:h||!d.trim(),className:"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white border-0",children:h?(0,ac.jsx)(lR,{className:"w-4 h-4 animate-spin"}):(0,ac.jsx)(br,{className:"w-4 h-4"})})]}),(0,ac.jsx)(eL,{className:"h-24",children:(0,ac.jsx)("div",{className:"flex flex-wrap gap-2",children:["Congratulate someone on their achievement","Apologize for missing an event","Thank someone for their help","Invite friends to hang out","Say good morning cheerfully","Wish someone happy birthday","Ask to reschedule a meeting","Express that you miss someone"].map((a,b)=>(0,ac.jsx)("button",{onClick:()=>e(a),className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 text-white/70 hover:text-white rounded-full text-xs transition-all",children:a},b))})})]}),f&&(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-4 mb-4",children:[(0,ac.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,ac.jsx)(br,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),(0,ac.jsx)("div",{className:"flex-1",children:(0,ac.jsx)("p",{className:"text-white text-sm leading-relaxed",children:f})})]}),(0,ac.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>{f&&(navigator.clipboard.writeText(f),k(!0),fV.success("Copied to clipboard! "),setTimeout(()=>k(!1),2e3))},className:"text-white/70 hover:text-white hover:bg-white/10",children:j?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(fI,{className:"w-4 h-4 mr-1"}),"Copied"]}):(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(lQ,{className:"w-4 h-4 mr-1"}),"Copy"]})}),(0,ac.jsxs)(be,{size:"sm",variant:"ghost",onClick:()=>{l()},disabled:h,className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(lR,{className:`w-4 h-4 mr-1 ${h?"animate-spin":""}`}),"Regenerate"]}),(0,ac.jsxs)(be,{size:"sm",onClick:()=>{f&&(a(f),c(!1),e(""),g(""),fV.success("Message inserted! "))},className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0",children:[(0,ac.jsx)(gq,{className:"w-4 h-4 mr-1"}),"Insert"]})]})]}),h&&(0,ac.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,ac.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)("div",{className:"w-12 h-12 border-4 border-white/20 border-t-yellow-400 rounded-full animate-spin"}),(0,ac.jsx)(br,{className:"w-6 h-6 text-yellow-400 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),(0,ac.jsx)("p",{className:"text-white/70 text-sm",children:"Generating message..."})]})}),!f&&!h&&(0,ac.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[(0,ac.jsx)("p",{className:"text-white/60 text-xs mb-2",children:" Tips:"}),(0,ac.jsxs)("ul",{className:"text-white/50 text-xs space-y-1",children:[(0,ac.jsx)("li",{children:" Be specific about the tone (friendly, formal, casual)"}),(0,ac.jsx)("li",{children:" Mention the context (birthday, apology, invitation)"}),(0,ac.jsx)("li",{children:" Include any specific details you want in the message"})]})]})]})})]})}let lT=bj("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),lU=bj("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),lV=bj("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lW=bj("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function lX({onSendVoice:a}){let b,[c,d]=(0,ad.useState)(!1),[e,f]=(0,ad.useState)(!1),[g,h]=(0,ad.useState)(!1),[i,j]=(0,ad.useState)(!1),[k,l]=(0,ad.useState)(0),[m,n]=(0,ad.useState)(null),[o,p]=(0,ad.useState)(null),[q,r]=(0,ad.useState)(void 0),s=(0,ad.useRef)(null),t=(0,ad.useRef)([]),u=(0,ad.useRef)(null),v=(0,ad.useRef)(null);(0,ad.useEffect)(()=>()=>{u.current&&clearInterval(u.current),o&&URL.revokeObjectURL(o)},[o]);let w=async()=>{try{let a=await navigator.mediaDevices.getUserMedia({audio:!0}),b,c=b?new MediaRecorder(a,{mimeType:b}):new MediaRecorder(a),d=c.mimeType||b;r(d),s.current=c,t.current=[],c.ondataavailable=a=>{a.data.size>0&&t.current.push(a.data)},c.onstop=()=>{let b=d||t.current[0]?.type||"audio/webm",c=new Blob(t.current,{type:b});n(c);let e=URL.createObjectURL(c);p(e),a.getTracks().forEach(a=>a.stop())},c.start(),f(!0),l(0),u.current=window.setInterval(()=>{l(a=>a+1)},1e3),fV.success("Recording started! ")}catch(a){console.error("Error accessing microphone:",a),fV.error("Could not access microphone")}},x=()=>{s.current&&e&&(s.current.stop(),f(!1),h(!1),u.current&&clearInterval(u.current),fV.success("Recording saved! "))},y=()=>{n(null),o&&URL.revokeObjectURL(o),p(null),l(0),j(!1),r(void 0),fV.success("Recording deleted")},z=async()=>{if(m){let b=new FileReader;b.onloadend=()=>{a(b.result,k,q||m.type),d(!1),y(),fV.success("Voice message sent! ")},b.readAsDataURL(m)}};return(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsxs)(lB,{open:c,onOpenChange:a=>{!a&&e&&x(),d(a)},children:[(0,ac.jsx)(lC,{asChild:!0,children:(0,ac.jsxs)(be,{size:"sm",variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10 h-9",children:[(0,ac.jsx)(lT,{className:"w-5 h-5 mr-1"}),(0,ac.jsx)("span",{className:"text-sm",children:"Voice"})]})}),(0,ac.jsx)(lD,{className:"w-80 p-0 backdrop-blur-xl bg-gradient-to-br from-purple-900/95 to-pink-900/95 border-white/20",align:"end",side:"top",children:(0,ac.jsxs)("div",{className:"p-4",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-xl flex items-center justify-center",children:(0,ac.jsx)(lT,{className:"w-5 h-5 text-white"})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white",children:"Voice Message"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Record a voice note"})]})]}),(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6 mb-4",children:(0,ac.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[e&&(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)("div",{className:`w-24 h-24 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center ${g?"":"animate-pulse"}`,children:(0,ac.jsx)(lW,{className:`w-12 h-12 text-white ${g?"":"fill-current"}`})}),!g&&(0,ac.jsx)("div",{className:"absolute -inset-2 rounded-full border-4 border-pink-500/50 animate-ping"})]}),!e&&o&&(0,ac.jsx)("div",{className:"w-full h-24 flex items-center justify-center gap-1",children:Array.from({length:20}).map((a,b)=>(0,ac.jsx)("div",{className:`w-1 bg-gradient-to-t from-pink-500 to-purple-500 rounded-full ${i?"animate-pulse":""}`,style:{height:`${60*Math.random()+20}%`,animationDelay:`${50*b}ms`}},b))}),!e&&!o&&(0,ac.jsx)(be,{size:"lg",onClick:w,className:"w-24 h-24 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 p-0",children:(0,ac.jsx)(lT,{className:"w-10 h-10"})}),(0,ac.jsx)("div",{className:"text-white text-2xl font-mono",children:(b=Math.floor(k/60),`${b}:${(k%60).toString().padStart(2,"0")}`)}),e&&(0,ac.jsxs)("div",{className:"flex gap-3",children:[(0,ac.jsx)(be,{size:"sm",onClick:()=>{s.current&&e&&(g?(s.current.resume(),h(!1),u.current=window.setInterval(()=>{l(a=>a+1)},1e3)):(s.current.pause(),h(!0),u.current&&clearInterval(u.current)))},variant:"ghost",className:"text-white hover:bg-white/10",children:g?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(lN,{className:"w-4 h-4 mr-1"}),"Resume"]}):(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(lO,{className:"w-4 h-4 mr-1"}),"Pause"]})}),(0,ac.jsxs)(be,{size:"sm",onClick:x,className:"bg-red-500 hover:bg-red-600 text-white",children:[(0,ac.jsx)(lU,{className:"w-4 h-4 mr-1"}),"Stop"]})]}),!e&&o&&(0,ac.jsxs)("div",{className:"flex gap-3",children:[(0,ac.jsx)(be,{size:"sm",onClick:()=>{o&&v.current&&(i?(v.current.pause(),j(!1)):(v.current.play(),j(!0)))},variant:"ghost",className:"text-white hover:bg-white/10",children:i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(lO,{className:"w-4 h-4 mr-1"}),"Pause"]}):(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(lN,{className:"w-4 h-4 mr-1"}),"Play"]})}),(0,ac.jsxs)(be,{size:"sm",onClick:y,variant:"ghost",className:"text-red-400 hover:text-red-300 hover:bg-white/10",children:[(0,ac.jsx)(lV,{className:"w-4 h-4 mr-1"}),"Delete"]}),(0,ac.jsxs)(be,{size:"sm",onClick:z,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:[(0,ac.jsx)(gq,{className:"w-4 h-4 mr-1"}),"Send"]})]})]})}),(0,ac.jsx)("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:(0,ac.jsx)("p",{className:"text-white/60 text-xs",children:" Tip: Keep it short and sweet! Voice messages under 30 seconds work best."})})]})})]}),o&&(0,ac.jsx)("audio",{ref:v,src:o,onEnded:()=>j(!1),className:"hidden"})]})}let lY="getting-started",lZ=`https://${dF}.supabase.co/functions/v1/make-server-a14c7986`,l$=`Bearer ${dG}`,l_={"Content-Type":"application/json",Authorization:l$},l0=a=>`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(a||"user")}`,l1=a=>{let[b,c]=a.split(",");if(!c)throw Error("Error: cannot load data");let d=b.match(/^data:(.*?)(;base64)?$/),e=d?.[1]??"application/octet-stream",f=atob(c),g=new Uint8Array(f.length);for(let a=0;a<f.length;a+=1)g[a]=f.charCodeAt(a);return new Blob([g],{type:e})};function l2({onStartCall:a,shareDraft:b,onShareDraftConsumed:c,focusUserId:d=null,onFocusUserConsumed:e}){let{currentUser:f,allUsers:g}=f3(),h=(0,ad.useRef)("");h.current||(h.current=`guest-${Math.random().toString(36).slice(2,10)}`);let i=h.current,j=f?.ablyClientId??i,k=f?.id??j,l=(0,ad.useRef)(null),m=(0,ad.useRef)(null),n=(0,ad.useRef)(null),o=(0,ad.useRef)(null),p=(0,ad.useRef)(null),q=(0,ad.useRef)(null),r=(0,ad.useRef)(new Map),s=(0,ad.useRef)(new Set),t=(0,ad.useCallback)(()=>{r.current.forEach(a=>clearTimeout(a)),r.current.clear()},[]),u=(0,ad.useCallback)(a=>{let b="object"==typeof a&&null!==a?a:{},c=b.id,d="string"==typeof c&&c.trim().length>0?c:lY,e=b.name,f=b.avatar,g=b.lastMessage,h=b.lastMessageTime,i=b.members,j=b.isGroup;return{identity:d,chatName:"string"==typeof e&&e.trim().length>0?e:"Chat",avatar:"string"==typeof f&&f.trim().length>0?f:l0(d),lastMessage:"string"==typeof g?g:"",lastMessageTime:"string"==typeof h?h:"",members:Array.isArray(i)?i.filter(a=>"string"==typeof a):[],isGroup:!!j}},[]),v=(0,ad.useCallback)((a,b)=>{let c,d="object"==typeof a&&null!==a?a:{},e=d.identity,f=d.timestamp,g=d.senderId,h=d.senderName,i=d.senderAvatar,j=d.content,k=d.image,l=d.file,m=d.voice,n=d.isSnapStyle,o=d.expiresIn,p=d.isStarred,q="string"==typeof e&&e.trim().length>0?e:`${b}-${f??Date.now()}`;if("number"==typeof o)c=o;else if("string"==typeof o&&o.trim().length>0){let a=Number(o);Number.isNaN(a)||(c=a)}let r="string"==typeof f&&f?f:new Date().toISOString(),s="string"==typeof k&&k.trim().length>0?k:void 0,t=l&&"object"==typeof l&&null!==l?{name:"string"==typeof l.name?l.name:"file",url:"string"==typeof l.url?l.url:"",type:"string"==typeof l.type?l.type:"",size:Number(l.size??0)}:void 0,u=m&&"object"==typeof m&&null!==m?{url:"string"==typeof m.url?m.url:"",duration:Number(m.duration??0),mimeType:"string"==typeof m.mimeType?m.mimeType:void 0,id:"string"==typeof m.id?m.id:void 0}:void 0;return{id:q,chatId:b,senderId:"string"==typeof g&&g.trim().length>0?g:"unknown",senderName:"string"==typeof h&&h.trim().length>0?h:void 0,senderAvatar:"string"==typeof i&&i.trim().length>0?i:void 0,content:"string"==typeof j?j:"",timestamp:r,image:s,file:t,voice:u,isSnapStyle:!!n,expiresIn:c,isStarred:!!p}},[]),w=(0,ad.useMemo)(()=>{let a=new Map;return g.forEach(b=>{let c=b.ablyClientId??b.id;a.set(c,b)}),a},[g]),x=(0,ad.useMemo)(()=>({identity:lY,chatName:"Getting Started",avatar:l0(lY),lastMessage:"",lastMessageTime:"",members:[j],isGroup:!0}),[j]),y=(0,ad.useCallback)(a=>a.content&&a.content.trim().length>0?a.content.trim():a.image?" Photo":a.file?` ${a.file.name}`:a.voice?" Voice message":"",[]),[z,A]=(0,ad.useState)(x.identity),[B,C]=(0,ad.useState)(""),[D,E]=(0,ad.useState)(""),[F,G]=(0,ad.useState)(!1),[H,I]=(0,ad.useState)(!1),[J,K]=(0,ad.useState)(10),[L,M]=(0,ad.useState)(!1),[N,O]=(0,ad.useState)(""),[P,Q]=(0,ad.useState)(""),[R,S]=(0,ad.useState)(!1),T=(0,ad.useRef)(null),U=(0,ad.useRef)(null),V=(0,ad.useRef)(null),W=(0,ad.useRef)(null),X=(0,ad.useRef)({}),[Y,Z]=(0,ad.useState)(null),[$,_]=(0,ad.useState)(new Set),[aa,ab]=(0,ad.useState)([]),[ae,af]=(0,ad.useState)([x]),ag=(0,ad.useRef)(ae);(0,ad.useEffect)(()=>{ag.current=ae},[ae]);let[ah,ai]=(0,ad.useState)(!0),[aj,ak]=(0,ad.useState)(!1),[al,am]=(0,ad.useState)(null),[an,ao]=(0,ad.useState)(!1),[ap,aq]=(0,ad.useState)("connecting"),[ar,as]=(0,ad.useState)("idle"),at=(0,ad.useCallback)(async a=>{let b=g.get(a)??null,c=b?.ablyClientId??a;if(!c)return fV.error("Unable to open conversation for that user."),null;let d=Array.from(new Set([j,c].filter(Boolean))),e=ag.current.find(a=>!a.isGroup&&d.every(b=>a.members.includes(b)));if(e)return e.identity;let f=b?.name??b?.username??`Chat with ${a.slice(0,6)}`,h=null,i=!1;try{let a=await fetch(`${lZ}/chats`,{method:"POST",headers:{...l_},body:JSON.stringify({name:f,members:d,isGroup:!1,createdBy:k??j})});if(a.ok){let b=(await a.json()).chat;b&&(h=u(b),i=!0)}else if(409!==a.status)throw Error(`Failed to persist chat (status ${a.status})`)}catch(a){console.warn("Unable to persist direct chat",a)}if(!h){let a=d.slice().sort().join("-");h={identity:ag.current.some(b=>b.identity===a)?`${a}-${Date.now().toString(36)}`:a,chatName:f,avatar:b?.avatar??l0(c),lastMessage:"",lastMessageTime:"",members:d,isGroup:!1}}af(a=>{let b=new Map(a.map(a=>[a.identity,a]));b.set(h.identity,h);let c=Array.from(b.values());return c.sort((a,b)=>{let c=a.lastMessageTime?new Date(a.lastMessageTime).getTime():0;return(b.lastMessageTime?new Date(b.lastMessageTime).getTime():0)-c}),c});let l=m.current;return l&&l.rooms.get(h.identity).catch(a=>{console.warn("Unable to ensure Ably room exists",a)}),i&&fV.success(`Chat created with ${b?.name??"friend"}!`),h.identity},[g,j,k,u]),au=(0,ad.useRef)(at);(0,ad.useEffect)(()=>{au.current=at},[at]),(0,ad.useEffect)(()=>{if(!d||!an)return;let a=!1;return(async()=>{try{let b=await au.current?.(d);if(!b||a)return;A(b),e?.()}catch(a){console.error("Error:",a),fV.error("Unable to connect, try again later.")}})(),()=>{a=!0}},[d,an,e]);let av=(0,ad.useCallback)(()=>({id:j??"guest",name:f?.name??f?.username??k??"Guest",username:f?.username,avatar:f?.avatar??(j?l0(j):void 0)}),[j,k,f?.name,f?.username,f?.avatar]),aw=(0,ad.useCallback)((a={})=>{let b=av(),c={...a,sender:{id:b.id,name:b.name,username:b.username,avatar:b.avatar}};return H&&(c.isSnapStyle=!0,c.expiresIn=J),c},[av,H,J]),ax=(0,ad.useCallback)(async(a,b,c)=>{try{let d=await fetch("/api/voice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:a,mimeType:b,duration:c})});if(!d.ok){let a=await d.text();throw Error(`Cannot upload audio: (${d.status}): ${a}`)}return await d.json()}catch(a){return console.error("Error uploading voice clip:",a),fV.error("Failed to upload voice message"),null}},[]);(0,ad.useEffect)(()=>{b&&(C(b),G(!1),c?.(),V.current?.focus())},[b,c]),(0,ad.useEffect)(()=>{af(a=>a.some(a=>a.identity===x.identity)?a.map(a=>a.identity===x.identity?{...a,members:x.members}:a):[x,...a])},[x]),(0,ad.useEffect)(()=>{let a=!1;return(async()=>{if(k)try{let b=await fetch(`${lZ}/chats/${encodeURIComponent(k)}`,{headers:{Authorization:l$}});if(!b.ok)throw Error(`Failed to load chats (${b.status})`);let c=(await b.json()).chats;if(a)return;let d=Array.isArray(c)?c:[];if(0===d.length)return;af(a=>{let b=new Map(a.map(a=>[a.identity,a]));return d.forEach(a=>{let c=u(a);b.set(c.identity,c)}),b.has(x.identity)||b.set(x.identity,x),Array.from(b.values()).sort((a,b)=>{let c=a.lastMessageTime?new Date(a.lastMessageTime).getTime():0;return(b.lastMessageTime?new Date(b.lastMessageTime).getTime():0)-c})})}catch(a){console.warn("Failed to load saved chats",a)}})(),()=>{a=!0}},[k,x,u]);let ay=(0,ad.useCallback)((a,b)=>{let c=a.metadata??{},d=c.image,e=c.file,f=e&&"object"==typeof e?{name:"string"==typeof e.name?e.name:"file",url:"string"==typeof e.url?e.url:"",type:"string"==typeof e.type?e.type:"",size:Number(e.size??0)}:void 0,g=c.voice,h=g&&"object"==typeof g?{url:"string"==typeof g.url?g.url:"",duration:Number(g.duration??0),mimeType:"string"==typeof g.mimeType?g.mimeType:void 0,id:"string"==typeof g.id?g.id:void 0}:void 0,i=c.expiresIn,j="number"==typeof i?i:"string"==typeof i?Number(i):void 0,k=c.sender,l=k&&"object"==typeof k?k.name:void 0,m=k&&"object"==typeof k?k.avatar:void 0,n=w.get(a.clientId);return{id:a.serial,chatId:b,senderId:a.clientId,content:a.text,timestamp:a.timestamp.toISOString(),image:"string"==typeof d?d:void 0,file:f,voice:h,isSnapStyle:!!c.isSnapStyle,expiresIn:j&&Number.isFinite(j)?j:void 0,isStarred:!!c.isStarred,senderName:("string"==typeof l&&l.trim().length>0?l:n?.name??n?.username??a.clientId)??a.clientId,senderAvatar:("string"==typeof m&&m.trim().length>0?m:n?.avatar)??void 0}},[w]),az=(0,ad.useCallback)(async(a,b)=>{let c=a.id;if(c&&(!s.current.has(c)||b?.force)){s.current.add(c);try{await fetch(`${lZ}/messages`,{method:"POST",headers:{...l_},body:JSON.stringify({id:c,chatId:a.chatId,senderId:a.senderId,senderName:a.senderName??null,senderAvatar:a.senderAvatar??null,content:a.content??"",image:a.image??null,file:a.file??null,voice:a.voice??null,timestamp:a.timestamp,isSnapStyle:a.isSnapStyle??!1,expiresIn:"number"==typeof a.expiresIn&&Number.isFinite(a.expiresIn)?a.expiresIn:null,isStarred:a.isStarred??!1})})}catch(a){console.warn("Failed to persist message",a),s.current.delete(c)}}},[]),aA=(0,ad.useCallback)(async(a,b)=>{if(b)try{await fetch(`${lZ}/messages/${encodeURIComponent(a)}/${encodeURIComponent(b)}`,{method:"DELETE",headers:{Authorization:l$}})}catch(a){console.warn("Failed to delete persisted message",a)}finally{s.current.delete(b)}},[]),aB=(0,ad.useCallback)((a,b)=>{if(a.type===iQ.Deleted){let c=r.current.get(a.message.serial);c&&(clearTimeout(c),r.current.delete(a.message.serial)),ab(b=>b.filter(b=>b.id!==a.message.serial)),aA(b,a.message.serial);return}let c=ay(a.message,b);if(c.isSnapStyle&&c.expiresIn){let b=r.current.get(c.id);b&&clearTimeout(b);let d=setTimeout(async()=>{let b=n.current;if(b)try{await b.messages.delete(a.message.serial)}catch(a){console.warn("Failed to auto-delete snap message",a)}finally{r.current.delete(c.id)}},1e3*c.expiresIn);r.current.set(c.id,d)}ab(a=>{let b=[...a.filter(a=>a.id!==c.id),c];return b.sort((a,b)=>new Date(a.timestamp).getTime()-new Date(b.timestamp).getTime()),b});let d=y(c),e=d?(c.senderName?`${c.senderName}: `:"")+d:c.senderName??"";af(c=>c.map(c=>c.identity===b?{...c,lastMessage:e,lastMessageTime:a.message.timestamp.toISOString()}:c)),az(c)},[ay,y,az,aA]);(0,ad.useEffect)(()=>{ao(!1),am(null);let a=new iy.Realtime({key:"TWe31g.j0F01A:-j8adkUcs-AeusvKPMgSFCJKlMb8zCh1pGbt5Zo3CxI",clientId:j});l.current=a;let b=new jE(a);m.current=b,ao(!0);let{off:c}=b.connection.onStatusChange(a=>{aq(a.current)});return p.current=c,()=>{p.current?.(),p.current=null,o.current?.(),o.current=null,q.current?.(),q.current=null,(async()=>{t();try{n.current&&(await b.rooms.release(n.current.name),n.current=null)}catch(a){console.warn("Failed to release Ably room",a)}try{await a.close()}catch(a){console.warn("Failed to close Ably Realtime client",a)}l.current===a&&(l.current=null),m.current===b&&(m.current=null)})()}},[j,t]),(0,ad.useEffect)(()=>{if(!an||!z)return;let a=!1;return(async()=>{let b=m.current;if(b){if(ai(!0),am(null),ab([]),s.current=new Set,o.current?.(),o.current=null,q.current?.(),q.current=null,n.current&&n.current.name!==z){try{await b.rooms.release(n.current.name)}catch(a){console.warn("Failed to release previous Ably room",a)}n.current=null,t()}try{let c=await b.rooms.get(z);n.current=c,t();let{off:d}=c.onStatusChange(a=>{as(a.current)});q.current=d;let e=new Map;try{let a=await fetch(`${lZ}/messages/${encodeURIComponent(z)}`,{headers:{Authorization:l$}});if(a.ok){let b=(await a.json()).messages;(Array.isArray(b)?b:[]).map(a=>v(a,z)).forEach(a=>e.set(a.id,a))}}catch(a){console.warn("Failed to load stored messages",a)}let f=await c.messages.history({orderBy:jd.OldestFirst,limit:50}),g=[];f.items.filter(a=>!a.isDeleted).map(a=>ay(a,z)).forEach(a=>{let b=e.get(a.id);b?e.set(a.id,{...b,...a}):(e.set(a.id,a),g.push(a))});let h=Array.from(e.values()).sort((a,b)=>new Date(a.timestamp).getTime()-new Date(b.timestamp).getTime());if(s.current=new Set(e.keys()),!a&&(ab(h),h.length>0)){let a=h[h.length-1],b=y(a),c=b?(a.senderName?`${a.senderName}: `:"")+b:a.senderName??"";af(b=>b.map(b=>b.identity===z?{...b,lastMessage:c,lastMessageTime:a.timestamp}:b))}g.forEach(a=>{az(a,{force:!0})});let{unsubscribe:i}=c.messages.subscribe(a=>{aB(a,z)});o.current=i,await c.attach(),a||ai(!1)}catch(b){console.error("Failed to join Ably room",b),a||(am("Failed to join chat room. Please try again."),ai(!1))}}})(),()=>{a=!0}},[an,z,aB,ay,y,t,v,az]),(0,ad.useEffect)(()=>()=>{Object.values(X.current).forEach(({audio:a,objectUrl:b})=>{a.pause(),b&&URL.revokeObjectURL(b)}),X.current={},t()},[t]),(0,ad.useEffect)(()=>{W.current?.scrollIntoView({behavior:"smooth"})},[aa]),(0,ad.useEffect)(()=>{al&&fV.error(al)},[al]),(0,ad.useEffect)(()=>{let a=!1;return(async()=>{let b=aa.filter(a=>a.voice?.url),c=new Set(b.map(a=>a.id));for(let d of(Object.entries(X.current).forEach(([a,b])=>{c.has(a)||(b.audio.pause(),b.audio.onended=null,b.audio.onerror=null,b.objectUrl&&URL.revokeObjectURL(b.objectUrl),delete X.current[a])}),b)){if(a||!d.voice?.url)continue;let b=X.current[d.id];if(!b||b.source!==d.voice.url){b&&(b.audio.pause(),b.audio.onended=null,b.audio.onerror=null,b.objectUrl&&URL.revokeObjectURL(b.objectUrl),delete X.current[d.id]);try{let b=null;if(d.voice.url.startsWith("data:"))b=l1(d.voice.url);else{let a=await fetch(d.voice.url);if(!a.ok)throw Error(`Failed to load voice audio (${a.status})`);if((a.headers.get("content-type")??"").includes("application/json")){let c=await a.json();if(c?.dataUrl)b=l1(c.dataUrl);else throw Error("Voice payload missing dataUrl")}else b=await a.blob()}if(!b)throw Error("Unable to resolve voice blob");if(a)return;let c=URL.createObjectURL(b);if(a)return void URL.revokeObjectURL(c);let e=new Audio(c);if(e.preload="auto",e.volume=1,e.onended=()=>{Z(a=>a===d.id?null:a)},e.onerror=a=>{console.warn("Unable to play voice message",a)},X.current[d.id]={audio:e,source:d.voice.url,objectUrl:c},Y===d.id){e.currentTime=0;let a=e.play();a&&"function"==typeof a.catch&&a.catch(a=>{console.warn("Audio playback prevented:",a)})}}catch(b){if(a)continue;console.error("Failed to prepare voice message audio",b)}}}})(),()=>{a=!0}},[aa,Y]),(0,ad.useEffect)(()=>{if(Object.entries(X.current).forEach(([a,b])=>{let{audio:c}=b;a!==Y&&(c.pause(),c.currentTime=0)}),!Y)return;let a=X.current[Y];if(!a)return;let{audio:b}=a;b.paused&&(b.currentTime=0);let c=()=>{let a=b.play();a&&"function"==typeof a.catch&&a.catch(a=>{console.warn("Audio playback prevented:",a)})};if(b.readyState>=2)c();else{let a=()=>{b.removeEventListener("canplay",a),c()};b.addEventListener("canplay",a,{once:!0}),b.load()}return()=>{b.pause()}},[Y]);let aC=async()=>{if(!B.trim()||!z||aj)return;let a=n.current;if(!a)return void fV.error("Chat is still connecting. Please try again.");ak(!0);try{let b=aw();await a.messages.send({text:B,metadata:b}),C(""),H?fV.success(`Snap sent! Disappears in ${J}s `):fV.success("Message sent! ")}catch(a){console.error("Error sending message via Ably:",a),fV.error("Failed to send message")}finally{ak(!1)}},aD=a=>{C(B+a)},aE=async a=>{if(!z||aj)return;let b=a.target.files?.[0],c=n.current;if(!b)return;if(!c)return void fV.error("Chat is still connecting. Please try again.");ak(!0);let d=new FileReader;d.onload=async a=>{try{let b=aw({image:a.target?.result});await c.messages.send({text:"",metadata:b}),fV.success("Photo sent! ")}catch(a){console.error("Error sending image via Ably:",a),fV.error("Failed to send image")}finally{ak(!1),T.current&&(T.current.value="")}},d.onerror=()=>{fV.error("Failed to read image file"),ak(!1)},d.readAsDataURL(b)},aF=async()=>{let a=N.trim();if(!a)return void fV.error("Please enter a chat name");try{let b=P.split(",").map(a=>a.trim()).filter(a=>a.length>0),c=Array.from(new Set([j,...b].filter(Boolean))),d=k??j,e=null,f=!1,g=!1;if(d)try{let b=await fetch(`${lZ}/chats`,{method:"POST",headers:{...l_},body:JSON.stringify({name:a,members:c,isGroup:R||c.length>2,createdBy:d})});if(b.ok){let a=await b.json(),c=a.chat;void 0!==c&&(e=u(c),f=!!a.isDuplicate,g=!0)}else throw Error(`Failed to persist chat (${b.status})`)}catch(a){console.warn("Unable to persist chat, falling back to local state",a)}if(!e){let b=a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),d=`${b||"chat"}-${Date.now().toString(36)}`,f=ae.some(a=>a.identity===d)?`${d}-${Math.random().toString(36).slice(2,8)}`:d;e={identity:f,chatName:a,avatar:l0(f),lastMessage:"",lastMessageTime:"",members:c,isGroup:R||c.length>2}}af(a=>{let b=new Map(a.map(a=>[a.identity,a]));return b.set(e.identity,e),Array.from(b.values()).sort((a,b)=>{let c=a.lastMessageTime?new Date(a.lastMessageTime).getTime():0;return(b.lastMessageTime?new Date(b.lastMessageTime).getTime():0)-c})}),A(e.identity),M(!1),O(""),Q(""),S(!1),f?fV.success("Chat already exists. Opening it now!"):g?fV.success("Chat created and saved! "):fV.success("Chat created! ");let h=m.current;h&&h.rooms.get(e.identity).catch(a=>{console.warn("Unable to start chat room",a)})}catch(a){console.error("Error creating chat:",a),fV.error("Chat has not been created")}},aG=b=>{let c=ae.find(a=>a.identity===z);fV.success(`Starting ${b} call with ${c?.chatName}...`),a&&a(b)},aH=async a=>{if(!z||aj)return;let b=a.target.files?.[0],c=n.current;if(!b)return;if(!c)return void fV.error("Chat is still connecting. Please try again.");ak(!0);let d=new FileReader;d.onload=async a=>{try{let d=aw({file:{name:b.name,url:a.target?.result,type:b.type,size:b.size}});await c.messages.send({text:"",metadata:d}),fV.success("File sent! ")}catch(a){console.error("Error sending file via Ably:",a),fV.error("Failed to send file")}finally{ak(!1),U.current&&(U.current.value="")}},d.onerror=()=>{fV.error("Failed to read file"),ak(!1)},d.readAsDataURL(b)},aI=async(a,b,c)=>{if(!z||aj)return;let d=n.current;if(!d)return void fV.error("Chat is still connecting. Please try again.");ak(!0);try{let e=await ax(a,c,b);if(!e)return;let f={url:e.url,duration:b};(e.mimeType||c)&&(f.mimeType=e.mimeType??c),e.id&&(f.id=e.id);let g=aw({voice:f});await d.messages.send({text:"",metadata:g}),fV.success("Voice message sent! ")}catch(a){console.error("Error sending voice message via Ably:",a),fV.error("Failed to send voice message")}finally{ak(!1)}},aJ=async a=>{let b=aa.find(b=>b.id===a);if(!b)return;let c=new Set($),d=!c.has(a);d?(c.add(a),fV.success("Message starred! ")):(c.delete(a),fV.success("Message unstarred")),_(c),ab(b=>b.map(b=>b.id===a?{...b,isStarred:d}:b));try{await fetch(`${lZ}/messages/${encodeURIComponent(b.chatId)}/${encodeURIComponent(a)}/star`,{method:"PUT",headers:{...l_},body:JSON.stringify({isStarred:d})})}catch(a){console.warn("Failed to persist starring change",a)}},aK="connected"===ap&&"attached"===ar,aL=aK?"Live":`Status: ${ap} / ${ar}`,aM=ae.find(a=>a.identity===z),aN=ae.filter(a=>a.chatName.toLowerCase().includes(D.toLowerCase()));return ah?(0,ac.jsx)("div",{className:"h-[calc(100vh-80px)] flex items-center justify-center",children:(0,ac.jsx)("div",{className:"text-white text-xl",children:"Loading messages... "})}):(0,ac.jsxs)("div",{className:"h-[calc(100vh-80px)] min-h-0 flex gap-6 max-w-7xl mx-auto",children:[(0,ac.jsxs)(gl,{className:"w-96 min-h-0 backdrop-blur-xl bg-white/10 border-white/20 flex flex-col overflow-hidden",children:[(0,ac.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ac.jsx)("h2",{className:"text-white text-xl",children:"Messages"}),(0,ac.jsx)(be,{size:"sm",onClick:()=>M(!L),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0",children:(0,ac.jsx)(lH,{className:"w-4 h-4"})})]}),L&&(0,ac.jsxs)("div",{className:"mb-4 p-4 bg-white/10 rounded-lg space-y-3",children:[(0,ac.jsx)(jF,{placeholder:"Chat name...",value:N,onChange:a=>O(a.target.value),className:"bg-white/5 border-white/20 text-white placeholder:text-white/50"}),(0,ac.jsx)(jF,{placeholder:"Member IDs (comma separated)...",value:P,onChange:a=>Q(a.target.value),className:"bg-white/5 border-white/20 text-white placeholder:text-white/50"}),(0,ac.jsxs)("div",{className:"flex gap-2",children:[(0,ac.jsx)(be,{size:"sm",onClick:aF,className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0",children:"Create"}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>M(!1),className:"text-white/70 hover:text-white hover:bg-white/10",children:"Cancel"})]})]}),(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)(lG,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50"}),(0,ac.jsx)(jF,{placeholder:"Search messages...",value:D,onChange:a=>E(a.target.value),className:"pl-10 bg-white/5 border-white/20 text-white placeholder:text-white/50"})]})]}),(0,ac.jsx)(eL,{className:"flex-1 h-full overflow-y-auto",children:0===aN.length?(0,ac.jsxs)("div",{className:"p-8 text-center text-white/50",children:[(0,ac.jsx)("p",{className:"mb-2",children:"No chats yet"}),(0,ac.jsx)("p",{className:"text-sm",children:"Click + to start a new conversation"})]}):(0,ac.jsx)("div",{className:"p-2",children:aN.map(a=>(0,ac.jsx)("button",{onClick:()=>A(a.identity),className:`w-full p-3 rounded-xl mb-2 transition-all ${z===a.identity?"bg-gradient-to-r from-pink-500/30 to-purple-500/30 backdrop-blur-xl":"hover:bg-white/10"}`,children:(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)(d$,{className:"w-12 h-12 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.chatName[0]})]}),(0,ac.jsxs)("div",{className:"flex-1 text-left overflow-hidden",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsx)("h3",{className:"text-white truncate",children:a.chatName}),(0,ac.jsx)("span",{className:"text-white/40 text-xs",children:a.lastMessageTime?new Date(a.lastMessageTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})]}),(0,ac.jsx)("p",{className:"text-white/60 text-sm truncate",children:a.lastMessage||"No messages yet"})]})]})},a.identity))})})]}),(0,ac.jsx)(gl,{className:"flex-1 min-h-0 backdrop-blur-xl bg-white/10 border-white/20 flex flex-col overflow-hidden",children:z&&aM?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsxs)("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:aM.avatar}),(0,ac.jsx)(d0,{children:aM.chatName[0]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white",children:aM.chatName}),aM.isGroup&&(0,ac.jsxs)("p",{className:"text-white/60 text-sm",children:[aM.members.length," members"]}),(0,ac.jsx)("p",{className:`text-sm ${aK?"text-emerald-300":"text-white/60"}`,children:aL})]})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>aG("audio"),className:"text-white/70 hover:text-white hover:bg-white/10",children:(0,ac.jsx)(lF,{className:"w-5 h-5"})}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>aG("video"),className:"text-white/70 hover:text-white hover:bg-white/10",children:(0,ac.jsx)(bl,{className:"w-5 h-5"})}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10",children:(0,ac.jsx)(lE,{className:"w-5 h-5"})})]})]}),(0,ac.jsx)(eL,{className:"flex-1 h-full overflow-y-auto p-6",children:(0,ac.jsxs)("div",{className:"space-y-4",children:[0===aa.length?(0,ac.jsx)("div",{className:"text-center text-white/50 py-8",children:(0,ac.jsx)("p",{children:"No messages yet. Start the conversation! "})}):aa.map(a=>{let b=a.senderId===j,c=$.has(a.id)||a.isStarred;return(0,ac.jsxs)("div",{className:`flex gap-3 ${b?"flex-row-reverse":"flex-row"} group`,children:[!b&&(0,ac.jsxs)(d$,{className:"w-8 h-8 border-2 border-white/20 flex-shrink-0",children:[(0,ac.jsx)(d_,{src:a.senderAvatar??l0(a.senderId)}),(0,ac.jsx)(d0,{children:(a.senderName??a.senderId??"U")[0]??"U"})]}),(0,ac.jsxs)("div",{className:`flex-1 max-w-[70%] ${b?"flex flex-col items-end":""}`,children:[!b&&a.senderName&&(0,ac.jsx)("p",{className:"text-xs text-white/50 mb-1",children:a.senderName}),a.image&&(0,ac.jsxs)("div",{className:`rounded-2xl overflow-hidden mb-2 relative ${a.isSnapStyle?"border-4 border-yellow-400":""}`,children:[(0,ac.jsx)(bt,{src:a.image,alt:"Shared image",className:"w-full max-w-md rounded-xl"}),a.isSnapStyle&&a.expiresIn&&(0,ac.jsxs)("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-black px-2 py-0.5 rounded-full text-xs flex items-center gap-1",children:[(0,ac.jsx)(lJ,{className:"w-3 h-3"}),a.expiresIn,"s"]})]}),a.file&&(0,ac.jsx)("div",{className:`rounded-2xl px-4 py-3 mb-2 ${b?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"bg-white/10 backdrop-blur-xl text-white"}`,children:(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,ac.jsx)(lL,{className:"w-5 h-5"})}),(0,ac.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ac.jsx)("p",{className:"truncate",children:a.file.name}),(0,ac.jsxs)("p",{className:"text-xs opacity-70",children:[(a.file.size/1024).toFixed(2)," KB"]})]}),(0,ac.jsx)("a",{href:a.file.url,download:a.file.name,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:(0,ac.jsx)(lM,{className:"w-4 h-4"})})]})}),a.voice&&(0,ac.jsx)("div",{className:`rounded-2xl px-4 py-3 mb-2 min-w-[200px] ${b?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"bg-white/10 backdrop-blur-xl text-white"}`,children:(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("button",{onClick:()=>(a=>{if(Y===a)return void Z(null);let b=X.current[a];if(!b)return void Z(a);Object.entries(X.current).forEach(([b,c])=>{b!==a&&(c.audio.pause(),c.audio.currentTime=0)}),b.audio.currentTime=0;let c=b.audio.play();c&&"function"==typeof c.catch&&c.catch(a=>{console.warn("Audio playback prevented:",a)}),Z(a)})(a.id),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-colors",children:Y===a.id?(0,ac.jsx)(lO,{className:"w-5 h-5"}):(0,ac.jsx)(lN,{className:"w-5 h-5 ml-0.5"})}),(0,ac.jsxs)("div",{className:"flex-1",children:[(0,ac.jsx)("div",{className:"flex items-center gap-1 h-6",children:Array.from({length:20}).map((b,c)=>(0,ac.jsx)("div",{className:`w-1 bg-white/50 rounded-full ${Y===a.id?"animate-pulse":""}`,style:{height:`${60*Math.random()+40}%`,animationDelay:`${50*c}ms`}},c))}),(0,ac.jsxs)("p",{className:"text-xs opacity-70 mt-1",children:[Math.floor(a.voice.duration/60),":",(a.voice.duration%60).toString().padStart(2,"0")]})]})]})}),a.content&&(0,ac.jsxs)("div",{className:`rounded-2xl px-4 py-3 relative ${b?a.isSnapStyle?"bg-yellow-400 text-black":"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"bg-white/10 backdrop-blur-xl text-white"} ${a.isSnapStyle?"border-2 border-yellow-400":""}`,children:[(0,ac.jsx)("p",{className:"break-words",children:a.content}),a.isSnapStyle&&a.expiresIn&&(0,ac.jsxs)("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-black px-2 py-0.5 rounded-full text-xs flex items-center gap-1",children:[(0,ac.jsx)(lJ,{className:"w-3 h-3"}),a.expiresIn,"s"]})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,ac.jsx)("div",{className:"text-white/40 text-xs",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,ac.jsx)("button",{onClick:()=>aJ(a.id),className:`opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:scale-125 ${c?"opacity-100":""}`,children:(0,ac.jsx)(lK,{className:`w-4 h-4 ${c?"fill-yellow-400 text-yellow-400":"text-white/40 hover:text-white/60"}`})})]})]})]},a.id)}),(0,ac.jsx)("div",{ref:W})]})}),(0,ac.jsx)("div",{className:"px-6 py-2 border-t border-white/10",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)("button",{onClick:()=>I(!H),className:`flex items-center gap-2 px-3 py-1.5 rounded-full transition-all ${H?"bg-yellow-400 text-black":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[(0,ac.jsx)(bq,{className:"w-4 h-4"}),(0,ac.jsx)("span",{className:"text-sm",children:"Snap Mode"}),H&&(0,ac.jsx)(lJ,{className:"w-4 h-4"})]}),H&&(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-white/70 text-sm",children:"Timer:"}),[5,10,15,30].map(a=>(0,ac.jsxs)("button",{onClick:()=>K(a),className:`px-2 py-1 rounded-lg text-xs ${J===a?"bg-yellow-400 text-black":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[a,"s"]},a))]})]}),(0,ac.jsx)("div",{className:"flex gap-2",children:["","","","","","","",""].map((a,b)=>(0,ac.jsx)("button",{onClick:()=>aD(a),className:"text-xl hover:scale-125 transition-transform",children:a},b))})]})}),(0,ac.jsx)("div",{className:"p-4",children:(0,ac.jsxs)("div",{className:"backdrop-blur-xl bg-white/10 border-2 border-white/20 rounded-2xl p-3",children:[(0,ac.jsx)("input",{ref:T,type:"file",accept:"image/*",onChange:aE,className:"hidden"}),(0,ac.jsx)("input",{ref:U,type:"file",accept:".pdf,.doc,.docx,.txt,.zip,.rar",onChange:aH,className:"hidden"}),(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,ac.jsx)(jF,{ref:V,placeholder:H?"Send a disappearing message...":"Type a message...",value:B,onChange:a=>C(a.target.value),onKeyPress:a=>"Enter"===a.key&&aC(),disabled:aj,className:`flex-1 bg-white/5 border-white/20 text-white placeholder:text-white/50 h-12 text-base ${H?"border-yellow-400 border-2":""}`}),(0,ac.jsx)(be,{onClick:aC,disabled:aj||!B.trim(),className:`h-12 px-6 ${H?"bg-yellow-400 hover:bg-yellow-500 text-black":"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white"} border-0`,children:(0,ac.jsx)(gq,{className:"w-5 h-5"})})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsxs)(be,{size:"sm",variant:"ghost",onClick:()=>T.current?.click(),disabled:aj,className:"text-white/70 hover:text-white hover:bg-white/10 h-9",children:[(0,ac.jsx)(go,{className:"w-5 h-5 mr-1"}),(0,ac.jsx)("span",{className:"text-sm",children:"Photo"})]}),(0,ac.jsxs)(be,{size:"sm",variant:"ghost",onClick:()=>U.current?.click(),disabled:aj,className:"text-white/70 hover:text-white hover:bg-white/10 h-9",children:[(0,ac.jsx)(lI,{className:"w-5 h-5 mr-1"}),(0,ac.jsx)("span",{className:"text-sm",children:"File"})]}),(0,ac.jsxs)(lB,{open:F,onOpenChange:G,children:[(0,ac.jsx)(lC,{asChild:!0,children:(0,ac.jsxs)(be,{size:"sm",variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10 h-9",children:[(0,ac.jsx)(gp,{className:"w-5 h-5 mr-1"}),(0,ac.jsx)("span",{className:"text-sm",children:"Emoji"})]})}),(0,ac.jsx)(lD,{className:"w-80 backdrop-blur-xl bg-white/10 border-white/20 p-0",children:(0,ac.jsx)(eL,{className:"h-80",children:(0,ac.jsx)("div",{className:"p-4",children:Object.entries({Smileys:["","","","","","","","","","","","","","","","","","","",""],Gestures:["","","","","","","","","","","","","","","","","","","",""],Hearts:["","","","","","","","","","","","","","","","","","","",""],Celebration:["","","","","","","","","","","","","","","","","","","",""],Activities:["","","","","","","","","","","","","","","","","","","",""]}).map(([a,b])=>(0,ac.jsxs)("div",{className:"mb-4",children:[(0,ac.jsx)("div",{className:"text-white/70 text-sm mb-2",children:a}),(0,ac.jsx)("div",{className:"grid grid-cols-8 gap-2",children:b.map((a,b)=>(0,ac.jsx)("button",{onClick:()=>{aD(a),G(!1)},className:"text-2xl hover:scale-125 transition-transform p-1 hover:bg-white/10 rounded",children:a},b))})]},a))})})})]}),(0,ac.jsx)(lX,{onSendVoice:aI})]}),(0,ac.jsx)(lS,{onInsertMessage:a=>C(a)})]})]})})]}):(0,ac.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,ac.jsxs)("div",{className:"text-center",children:[(0,ac.jsx)("h3",{className:"text-white text-2xl mb-2",children:"Select a chat to start messaging"}),(0,ac.jsx)("p",{className:"text-white/60",children:"Choose a conversation or create a new one"})]})})})]})}var l3=a.i(71987);function l4(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function l5(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}var l6=globalThis?.document?ad.useLayoutEffect:()=>{},l7=ad[" useInsertionEffect ".trim().toString()]||l6;Symbol("RADIX:SYNC_STATE");var l8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function l9(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function ma(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function mb(...a){return b=>{let c=!1,d=a.map(a=>{let d=ma(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():ma(a[b],null)}}}}function mc(...a){return ad.useCallback(mb(...a),a)}var md=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function me(a){let b=ad.useRef(a);return ad.useEffect(()=>{b.current=a}),ad.useMemo(()=>(...a)=>b.current?.(...a),[])}var mf=["Enter"," "],mg=["ArrowUp","PageDown","End"],mh=["ArrowDown","PageUp","Home",...mg],mi={ltr:[...mf,"ArrowRight"],rtl:[...mf,"ArrowLeft"]},mj={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mk="Menu",[ml,mm,mn]=eR(mk),[mo,mp]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(mk,[mn,kY,e8]),mq=kY(),mr=e8(),[ms,mt]=mo(mk),[mu,mv]=mo(mk),mw=a=>{let{__scopeMenu:b,open:c=!1,children:d,dir:e,onOpenChange:f,modal:g=!0}=a,h=mq(b),[i,j]=ad.useState(null),k=ad.useRef(!1),l=me(f),m=ea(e);return ad.useEffect(()=>{let a=()=>{k.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>k.current=!1;return document.addEventListener("keydown",a,{capture:!0}),()=>{document.removeEventListener("keydown",a,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),(0,ac.jsx)(k_,{...h,children:(0,ac.jsx)(ms,{scope:b,open:c,onOpenChange:l,content:i,onContentChange:j,children:(0,ac.jsx)(mu,{scope:b,onClose:ad.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:k,dir:m,modal:g,children:d})})})};mw.displayName=mk;var mx=ad.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=mq(c);return(0,ac.jsx)(k1,{...e,...d,ref:b})});mx.displayName="MenuAnchor";var my="MenuPortal",[mz,mA]=mo(my,{forceMount:void 0}),mB=a=>{let{__scopeMenu:b,forceMount:c,children:d,container:e}=a,f=mt(my,b);return(0,ac.jsx)(mz,{scope:b,forceMount:c,children:(0,ac.jsx)(d4,{present:c||f.open,children:(0,ac.jsx)(gX,{asChild:!0,container:e,children:d})})})};mB.displayName=my;var mC="MenuContent",[mD,mE]=mo(mC),mF=ad.forwardRef((a,b)=>{let c=mA(mC,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=mt(mC,a.__scopeMenu),g=mv(mC,a.__scopeMenu);return(0,ac.jsx)(ml.Provider,{scope:a.__scopeMenu,children:(0,ac.jsx)(d4,{present:d||f.open,children:(0,ac.jsx)(ml.Slot,{scope:a.__scopeMenu,children:g.modal?(0,ac.jsx)(mG,{...e,ref:b}):(0,ac.jsx)(mH,{...e,ref:b})})})})}),mG=ad.forwardRef((a,b)=>{let c=mt(mC,a.__scopeMenu),d=ad.useRef(null),e=mc(b,d);return ad.useEffect(()=>{let a=d.current;if(a)return hD(a)},[]),(0,ac.jsx)(mJ,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:l9(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),mH=ad.forwardRef((a,b)=>{let c=mt(mC,a.__scopeMenu);return(0,ac.jsx)(mJ,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),mI=ah("MenuContent.ScrollLock"),mJ=ad.forwardRef((a,b)=>{let{__scopeMenu:c,loop:d=!1,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEntryFocus:i,onEscapeKeyDown:j,onPointerDownOutside:k,onFocusOutside:l,onInteractOutside:m,onDismiss:n,disableOutsideScroll:o,...p}=a,q=mt(mC,c),r=mv(mC,c),s=mq(c),t=mr(c),u=mm(c),[v,w]=ad.useState(null),x=ad.useRef(null),y=mc(b,x,q.onContentChange),z=ad.useRef(0),A=ad.useRef(""),B=ad.useRef(0),C=ad.useRef(null),D=ad.useRef("right"),E=ad.useRef(0),F=o?hw:ad.Fragment;ad.useEffect(()=>()=>window.clearTimeout(z.current),[]),g$();let G=ad.useCallback(a=>{var b,c;return D.current===C.current?.side&&(b=a,!!(c=C.current?.area)&&function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}({x:b.clientX,y:b.clientY},c))},[]);return(0,ac.jsx)(mD,{scope:c,searchRef:A,onItemEnter:ad.useCallback(a=>{G(a)&&a.preventDefault()},[G]),onItemLeave:ad.useCallback(a=>{G(a)||(x.current?.focus(),w(null))},[G]),onTriggerLeave:ad.useCallback(a=>{G(a)&&a.preventDefault()},[G]),pointerGraceTimerRef:B,onPointerGraceIntentChange:ad.useCallback(a=>{C.current=a},[]),children:(0,ac.jsx)(F,{...o?{as:mI,allowPinchZoom:!0}:void 0,children:(0,ac.jsx)(gP,{asChild:!0,trapped:e,onMountAutoFocus:l9(f,a=>{a.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:g,children:(0,ac.jsx)(gG,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:j,onPointerDownOutside:k,onFocusOutside:l,onInteractOutside:m,onDismiss:n,children:(0,ac.jsx)(fb,{asChild:!0,...t,dir:r.dir,orientation:"vertical",loop:d,currentTabStopId:v,onCurrentTabStopIdChange:w,onEntryFocus:l9(i,a=>{r.isUsingKeyboardRef.current||a.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,ac.jsx)(k5,{role:"menu","aria-orientation":"vertical","data-state":m7(q.open),"data-radix-menu-content":"",dir:r.dir,...s,...p,ref:y,style:{outline:"none",...p.style},onKeyDown:l9(p.onKeyDown,a=>{let b=a.target.closest("[data-radix-menu-content]")===a.currentTarget,c=a.ctrlKey||a.altKey||a.metaKey,d=1===a.key.length;if(b){var e;let b,f,g,h,i,j;"Tab"===a.key&&a.preventDefault(),!c&&d&&(e=a.key,b=A.current+e,f=u().filter(a=>!a.disabled),g=document.activeElement,h=f.find(a=>a.ref.current===g)?.textValue,i=function(a,b,c){var d;let e=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,f=c?a.indexOf(c):-1,g=(d=Math.max(f,0),a.map((b,c)=>a[(d+c)%a.length]));1===e.length&&(g=g.filter(a=>a!==c));let h=g.find(a=>a.toLowerCase().startsWith(e.toLowerCase()));return h!==c?h:void 0}(f.map(a=>a.textValue),b,h),j=f.find(a=>a.textValue===i)?.ref.current,function a(b){A.current=b,window.clearTimeout(z.current),""!==b&&(z.current=window.setTimeout(()=>a(""),1e3))}(b),j&&setTimeout(()=>j.focus()))}let f=x.current;if(a.target!==f||!mh.includes(a.key))return;a.preventDefault();let g=u().filter(a=>!a.disabled).map(a=>a.ref.current);mg.includes(a.key)&&g.reverse(),function(a){let b=document.activeElement;for(let c of a)if(c===b||(c.focus(),document.activeElement!==b))return}(g)}),onBlur:l9(a.onBlur,a=>{a.currentTarget.contains(a.target)||(window.clearTimeout(z.current),A.current="")}),onPointerMove:l9(a.onPointerMove,na(a=>{let b=a.target,c=E.current!==a.clientX;a.currentTarget.contains(b)&&c&&(D.current=a.clientX>E.current?"right":"left",E.current=a.clientX)}))})})})})})})});mF.displayName=mC;var mK=ad.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,ac.jsx)(md.div,{role:"group",...d,ref:b})});mK.displayName="MenuGroup";var mL=ad.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,ac.jsx)(md.div,{...d,ref:b})});mL.displayName="MenuLabel";var mM="MenuItem",mN="menu.itemSelect",mO=ad.forwardRef((a,b)=>{let{disabled:c=!1,onSelect:d,...e}=a,f=ad.useRef(null),g=mv(mM,a.__scopeMenu),h=mE(mM,a.__scopeMenu),i=mc(b,f),j=ad.useRef(!1);return(0,ac.jsx)(mP,{...e,ref:i,disabled:c,onClick:l9(a.onClick,()=>{let a=f.current;if(!c&&a){let b=new CustomEvent(mN,{bubbles:!0,cancelable:!0});a.addEventListener(mN,a=>d?.(a),{once:!0}),a&&dL.flushSync(()=>a.dispatchEvent(b)),b.defaultPrevented?j.current=!1:g.onClose()}}),onPointerDown:b=>{a.onPointerDown?.(b),j.current=!0},onPointerUp:l9(a.onPointerUp,a=>{j.current||a.currentTarget?.click()}),onKeyDown:l9(a.onKeyDown,a=>{let b=""!==h.searchRef.current;c||b&&" "===a.key||mf.includes(a.key)&&(a.currentTarget.click(),a.preventDefault())})})});mO.displayName=mM;var mP=ad.forwardRef((a,b)=>{let{__scopeMenu:c,disabled:d=!1,textValue:e,...f}=a,g=mE(mM,c),h=mr(c),i=ad.useRef(null),j=mc(b,i),[k,l]=ad.useState(!1),[m,n]=ad.useState("");return ad.useEffect(()=>{let a=i.current;a&&n((a.textContent??"").trim())},[f.children]),(0,ac.jsx)(ml.ItemSlot,{scope:c,disabled:d,textValue:e??m,children:(0,ac.jsx)(fe,{asChild:!0,...h,focusable:!d,children:(0,ac.jsx)(md.div,{role:"menuitem","data-highlighted":k?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...f,ref:j,onPointerMove:l9(a.onPointerMove,na(a=>{d?g.onItemLeave(a):(g.onItemEnter(a),a.defaultPrevented||a.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:l9(a.onPointerLeave,na(a=>g.onItemLeave(a))),onFocus:l9(a.onFocus,()=>l(!0)),onBlur:l9(a.onBlur,()=>l(!1))})})})}),mQ=ad.forwardRef((a,b)=>{let{checked:c=!1,onCheckedChange:d,...e}=a;return(0,ac.jsx)(mY,{scope:a.__scopeMenu,checked:c,children:(0,ac.jsx)(mO,{role:"menuitemcheckbox","aria-checked":m8(c)?"mixed":c,...e,ref:b,"data-state":m9(c),onSelect:l9(e.onSelect,()=>d?.(!!m8(c)||!c),{checkForDefaultPrevented:!1})})})});mQ.displayName="MenuCheckboxItem";var mR="MenuRadioGroup",[mS,mT]=mo(mR,{value:void 0,onValueChange:()=>{}}),mU=ad.forwardRef((a,b)=>{let{value:c,onValueChange:d,...e}=a,f=me(d);return(0,ac.jsx)(mS,{scope:a.__scopeMenu,value:c,onValueChange:f,children:(0,ac.jsx)(mK,{...e,ref:b})})});mU.displayName=mR;var mV="MenuRadioItem",mW=ad.forwardRef((a,b)=>{let{value:c,...d}=a,e=mT(mV,a.__scopeMenu),f=c===e.value;return(0,ac.jsx)(mY,{scope:a.__scopeMenu,checked:f,children:(0,ac.jsx)(mO,{role:"menuitemradio","aria-checked":f,...d,ref:b,"data-state":m9(f),onSelect:l9(d.onSelect,()=>e.onValueChange?.(c),{checkForDefaultPrevented:!1})})})});mW.displayName=mV;var mX="MenuItemIndicator",[mY,mZ]=mo(mX,{checked:!1}),m$=ad.forwardRef((a,b)=>{let{__scopeMenu:c,forceMount:d,...e}=a,f=mZ(mX,c);return(0,ac.jsx)(d4,{present:d||m8(f.checked)||!0===f.checked,children:(0,ac.jsx)(md.span,{...e,ref:b,"data-state":m9(f.checked)})})});m$.displayName=mX;var m_=ad.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,ac.jsx)(md.div,{role:"separator","aria-orientation":"horizontal",...d,ref:b})});m_.displayName="MenuSeparator";var m0=ad.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=mq(c);return(0,ac.jsx)(k8,{...e,...d,ref:b})});m0.displayName="MenuArrow";var[m1,m2]=mo("MenuSub"),m3="MenuSubTrigger",m4=ad.forwardRef((a,b)=>{let c=mt(m3,a.__scopeMenu),d=mv(m3,a.__scopeMenu),e=m2(m3,a.__scopeMenu),f=mE(m3,a.__scopeMenu),g=ad.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:i}=f,j={__scopeMenu:a.__scopeMenu},k=ad.useCallback(()=>{g.current&&window.clearTimeout(g.current),g.current=null},[]);return ad.useEffect(()=>k,[k]),ad.useEffect(()=>{let a=h.current;return()=>{window.clearTimeout(a),i(null)}},[h,i]),(0,ac.jsx)(mx,{asChild:!0,...j,children:(0,ac.jsx)(mP,{id:e.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":e.contentId,"data-state":m7(c.open),...a,ref:mb(b,e.onTriggerChange),onClick:b=>{a.onClick?.(b),a.disabled||b.defaultPrevented||(b.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:l9(a.onPointerMove,na(b=>{f.onItemEnter(b),!b.defaultPrevented&&(a.disabled||c.open||g.current||(f.onPointerGraceIntentChange(null),g.current=window.setTimeout(()=>{c.onOpenChange(!0),k()},100)))})),onPointerLeave:l9(a.onPointerLeave,na(a=>{k();let b=c.content?.getBoundingClientRect();if(b){let d=c.content?.dataset.side,e="right"===d,g=b[e?"left":"right"],i=b[e?"right":"left"];f.onPointerGraceIntentChange({area:[{x:a.clientX+(e?-5:5),y:a.clientY},{x:g,y:b.top},{x:i,y:b.top},{x:i,y:b.bottom},{x:g,y:b.bottom}],side:d}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>f.onPointerGraceIntentChange(null),300)}else{if(f.onTriggerLeave(a),a.defaultPrevented)return;f.onPointerGraceIntentChange(null)}})),onKeyDown:l9(a.onKeyDown,b=>{let e=""!==f.searchRef.current;a.disabled||e&&" "===b.key||mi[d.dir].includes(b.key)&&(c.onOpenChange(!0),c.content?.focus(),b.preventDefault())})})})});m4.displayName=m3;var m5="MenuSubContent",m6=ad.forwardRef((a,b)=>{let c=mA(mC,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=mt(mC,a.__scopeMenu),g=mv(mC,a.__scopeMenu),h=m2(m5,a.__scopeMenu),i=ad.useRef(null),j=mc(b,i);return(0,ac.jsx)(ml.Provider,{scope:a.__scopeMenu,children:(0,ac.jsx)(d4,{present:d||f.open,children:(0,ac.jsx)(ml.Slot,{scope:a.__scopeMenu,children:(0,ac.jsx)(mJ,{id:h.contentId,"aria-labelledby":h.triggerId,...e,ref:j,align:"start",side:"rtl"===g.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{g.isUsingKeyboardRef.current&&i.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:l9(a.onFocusOutside,a=>{a.target!==h.trigger&&f.onOpenChange(!1)}),onEscapeKeyDown:l9(a.onEscapeKeyDown,a=>{g.onClose(),a.preventDefault()}),onKeyDown:l9(a.onKeyDown,a=>{let b=a.currentTarget.contains(a.target),c=mj[g.dir].includes(a.key);b&&c&&(f.onOpenChange(!1),h.trigger?.focus(),a.preventDefault())})})})})})});function m7(a){return a?"open":"closed"}function m8(a){return"indeterminate"===a}function m9(a){return m8(a)?"indeterminate":a?"checked":"unchecked"}function na(a){return b=>"mouse"===b.pointerType?a(b):void 0}m6.displayName=m5;var nb="DropdownMenu",[nc,nd]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(nb,[mp]),ne=mp(),[nf,ng]=nc(nb),nh=a=>{let{__scopeDropdownMenu:b,children:c,dir:d,open:e,defaultOpen:f,onOpenChange:g,modal:h=!0}=a,i=ne(b),j=ad.useRef(null),[k,l]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return l7(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:e,defaultProp:f??!1,onChange:g,caller:nb});return(0,ac.jsx)(nf,{scope:b,triggerId:eZ(),triggerRef:j,contentId:eZ(),open:k,onOpenChange:l,onOpenToggle:ad.useCallback(()=>l(a=>!a),[l]),modal:h,children:(0,ac.jsx)(mw,{...i,open:k,onOpenChange:l,dir:d,modal:h,children:c})})};nh.displayName=nb;var ni="DropdownMenuTrigger",nj=ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,disabled:d=!1,...e}=a,f=ng(ni,c),g=ne(c);return(0,ac.jsx)(mx,{asChild:!0,...g,children:(0,ac.jsx)(l8.button,{type:"button",id:f.triggerId,"aria-haspopup":"menu","aria-expanded":f.open,"aria-controls":f.open?f.contentId:void 0,"data-state":f.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...e,ref:function(...a){return b=>{let c=!1,d=a.map(a=>{let d=l5(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():l5(a[b],null)}}}}(b,f.triggerRef),onPointerDown:l4(a.onPointerDown,a=>{!d&&0===a.button&&!1===a.ctrlKey&&(f.onOpenToggle(),f.open||a.preventDefault())}),onKeyDown:l4(a.onKeyDown,a=>{!d&&(["Enter"," "].includes(a.key)&&f.onOpenToggle(),"ArrowDown"===a.key&&f.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});nj.displayName=ni;var nk=a=>{let{__scopeDropdownMenu:b,...c}=a,d=ne(b);return(0,ac.jsx)(mB,{...d,...c})};nk.displayName="DropdownMenuPortal";var nl="DropdownMenuContent",nm=ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ng(nl,c),f=ne(c),g=ad.useRef(!1);return(0,ac.jsx)(mF,{id:e.contentId,"aria-labelledby":e.triggerId,...f,...d,ref:b,onCloseAutoFocus:l4(a.onCloseAutoFocus,a=>{g.current||e.triggerRef.current?.focus(),g.current=!1,a.preventDefault()}),onInteractOutside:l4(a.onInteractOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey,d=2===b.button||c;(!e.modal||d)&&(g.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nm.displayName=nl,ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(mK,{...e,...d,ref:b})}).displayName="DropdownMenuGroup",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(mL,{...e,...d,ref:b})}).displayName="DropdownMenuLabel";var nn=ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(mO,{...e,...d,ref:b})});nn.displayName="DropdownMenuItem",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(mQ,{...e,...d,ref:b})}).displayName="DropdownMenuCheckboxItem",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(mU,{...e,...d,ref:b})}).displayName="DropdownMenuRadioGroup",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(mW,{...e,...d,ref:b})}).displayName="DropdownMenuRadioItem",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(m$,{...e,...d,ref:b})}).displayName="DropdownMenuItemIndicator",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(m_,{...e,...d,ref:b})}).displayName="DropdownMenuSeparator",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(m0,{...e,...d,ref:b})}).displayName="DropdownMenuArrow",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(m4,{...e,...d,ref:b})}).displayName="DropdownMenuSubTrigger",ad.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ne(c);return(0,ac.jsx)(m6,{...e,...d,ref:b,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent";let no=bj("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function np({...a}){return(0,ac.jsx)(nh,{"data-slot":"dropdown-menu",...a})}function nq({...a}){return(0,ac.jsx)(nj,{"data-slot":"dropdown-menu-trigger",...a})}function nr({className:a,sideOffset:b=4,...c}){return(0,ac.jsx)(nk,{children:(0,ac.jsx)(nm,{"data-slot":"dropdown-menu-content",sideOffset:b,className:bc("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...c})})}function ns({className:a,inset:b,variant:c="default",...d}){return(0,ac.jsx)(nn,{"data-slot":"dropdown-menu-item","data-inset":b,"data-variant":c,className:bc("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...d})}let nt=bj("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),nu=bj("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),nv=bj("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),nw=bj("monitor-off",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),nx=bj("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ny=bj("phone-off",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),nz=bj("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),nA=a=>a instanceof Error?{name:a.name,message:a.message}:"object"==typeof a&&null!==a?{name:"string"==typeof a.name?a.name:"",message:"string"==typeof a.message?a.message:""}:{name:"",message:""},nB={echoCancellation:{ideal:!0},noiseSuppression:{ideal:!0},autoGainControl:{ideal:!0}},nC=[{label:"4K UHD",constraints:{width:{ideal:3840},height:{ideal:2160},frameRate:{ideal:30}}},{label:"Full HD",constraints:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}}},{label:"HD",constraints:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}},{label:"SD",constraints:{width:{ideal:960},height:{ideal:540},frameRate:{ideal:24}}},{label:"Compatibility",constraints:!0}],nD=a=>{let{name:b,message:c}=nA(a),d=b.toLowerCase(),e=c.toLowerCase();return"notreadableerror"===d||"aborterror"===d||e.includes("already in use")||e.includes("busy")||e.includes("could not start video source")},nE=async(a="user")=>{if("undefined"==typeof navigator||!navigator.mediaDevices?.getUserMedia)throw Error("Media devices are not supported in this environment");let b=null,c=!1;for(let d=0;d<nC.length;d+=1){let e=nC[d];try{let b=!0===e.constraints?e.constraints:{facingMode:{ideal:a},...e.constraints};return{stream:await navigator.mediaDevices.getUserMedia({video:b,audio:nB}),profileLabel:e.label,profileIndex:d,sharedCameraDetected:c}}catch(g){b=g;let{name:a,message:d}=nA(g),e=a.toLowerCase(),f=d.toLowerCase();if("notallowederror"===e||"securityerror"===e||f.includes("permission denied")||"notfounderror"===e)throw g;if(nD(g)){c=!0;continue}if("overconstrainederror"===e)continue;throw g}}if(b&&nD(b)){let a=Error("Camera already in use by another app");throw a.name="CameraConflictError",a}throw b??Error("Unable to access camera")},nF=a=>`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(a||"video")}`,nG=`https://${dF}.supabase.co/functions/v1/make-server-a14c7986/video/rooms`,nH={"Content-Type":"application/json",Authorization:`Bearer ${dG}`},nI={Authorization:`Bearer ${dG}`};function nJ({callType:a="video",onEndCall:b,isIncoming:c=!1,callerName:d="The Squad ",demoMode:e=!1}){let f,[{initialDemoState:g,initialSafeStart:h,autoSafeReason:i}]=(0,ad.useState)(()=>({initialDemoState:e,initialSafeStart:!1,autoSafeReason:null})),[j,k]=(0,ad.useState)(h),[l,m]=(0,ad.useState)(!1),[n,o]=(0,ad.useState)("audio"===a),[p,q]=(0,ad.useState)(!1),[r,s]=(0,ad.useState)("grid"),[t,u]=(0,ad.useState)(c?"ringing":"connecting"),[v,w]=(0,ad.useState)(0),[x,y]=(0,ad.useState)(null),z=(0,ad.useRef)(null),A=(0,ad.useRef)(null),B=(0,ad.useRef)(null),C=(0,ad.useRef)(null),D=(0,ad.useRef)(null),[E,F]=(0,ad.useState)(null),[G,H]=(0,ad.useState)(g),[I,J]=(0,ad.useState)(g),[K,L]=(0,ad.useState)(!1),[M,N]=(0,ad.useState)(!0),[O,P]=(0,ad.useState)(null),[Q,R]=(0,ad.useState)(null),[S,T]=(0,ad.useState)(null),[U,V]=(0,ad.useState)([]),[W,X]=(0,ad.useState)("auto"),[Y,Z]=(0,ad.useState)(null),[$,_]=(0,ad.useState)(!1),[aa,ab]=(0,ad.useState)(!1),[ae,af]=(0,ad.useState)(!1),[ag,ah]=(0,ad.useState)(null),[ai,aj]=(0,ad.useState)(!0),[ak,al]=(0,ad.useState)(!1),am=(0,ad.useRef)(null),[an,ao]=(0,ad.useState)(0),[ap,aq]=(0,ad.useState)("user"),ar=(0,ad.useRef)(!1),as=(0,ad.useRef)(null),at=(0,ad.useRef)(!1),au=(0,ad.useRef)(null),{currentUser:av,allUsers:aw}=f3(),ax=av?.id??null,[ay,az]=(0,ad.useState)([]),aA="global-stage",aB=(0,ad.useRef)(null),aC=(0,ad.useRef)(null),aD=(0,ad.useRef)(ax),aE=(0,ad.useRef)(l),aF=(0,ad.useRef)(n),aG=(0,ad.useRef)($),[aH,aI]=(0,ad.useState)(!1),[aJ,aK]=(0,ad.useState)(!1),[aL,aM]=(0,ad.useState)(!1),[aN,aO]=(0,ad.useState)(!1),[aP,aQ]=(0,ad.useState)(""),[aR,aS]=(0,ad.useState)(()=>{let a=av?.name&&av.name.trim()||av?.username&&av.username.trim()||"You";return[{id:"welcome",author:"Host",text:"Welcome to the room! Use chat to coordinate or share links.",isSelf:!1,timestamp:new Date().toISOString()},{id:"self-intro",author:a,text:"Hey team, I just joined the call.",isSelf:!0,timestamp:new Date().toISOString()}]}),aT=(0,ad.useRef)(null);(0,ad.useEffect)(()=>{aE.current=l},[l]),(0,ad.useEffect)(()=>{aF.current=n},[n]),(0,ad.useEffect)(()=>{aG.current=$},[$]),(0,ad.useEffect)(()=>{if("undefined"==typeof navigator)return void N(!1);let a=navigator.userAgent||navigator.vendor||"",b=/iPad|iPhone|iPod/.test(a)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,c="function"==typeof navigator.mediaDevices?.getDisplayMedia;L(b),N(c),c?b?P('Tap "Start Broadcast" in the iOS Screen Broadcast sheet to begin sharing.'):P(null):P(b?"Screen sharing on iOS/iPadOS needs Safari 17.4+ with Screen Broadcast support.":"Update to a modern browser (Chrome/Edge/Safari 17+) to enable screen sharing.")},[]);let aU=a=>{aK("participants"===a&&(a=>!a)),aM("chat"===a&&(a=>!a)),aO("settings"===a&&(a=>!a))};(0,ad.useEffect)(()=>{aL&&aT.current&&(aT.current.scrollTop=aT.current.scrollHeight)},[aR,aL]),(0,ad.useEffect)(()=>{let a,b=!0,c=null,d=()=>{},e=a=>{if(!b||!a)return;let c=Array.from(a).map((a,b)=>{let c=a.id??`monitor-${b}`,d=a.label?.trim(),e=d&&d.length>0?d:`Monitor ${b+1}${a.isPrimary?" (Primary)":""}`,f=a.width??void 0,g=a.height??void 0;return{id:c,label:e,isPrimary:!!a.isPrimary||0===b,size:f&&g?`${f}\xd7${g}`:"Unknown"}});0===c.length?d():V(c)};return(async()=>{if("undefined"==typeof navigator||"function"!=typeof navigator.getScreenDetails)return d();try{c=await navigator.getScreenDetails(),e(c.screens);let b=()=>e(c?.screens);c?.addEventListener?.("screenschange",b),c?.addEventListener?.("currentscreenchange",b),a=()=>{c?.removeEventListener?.("screenschange",b),c?.removeEventListener?.("currentscreenchange",b)}}catch(a){console.warn("Unable to access multi-monitor details:",a),d()}})(),()=>{b=!1,a?.()}},[]);let aV=(0,ad.useMemo)(()=>"auto"===W||"all-monitors"===W?null:U.find(a=>a.id===W)??null,[U,W]),aW=U.length>1,aX=(0,ad.useMemo)(()=>"all-monitors"===W?"All Monitors":aV?aV.label:aW?"Auto-select Monitor":"Primary Monitor",[aW,aV,W]);(0,ad.useEffect)(()=>{"auto"===W||"all-monitors"===W||U.some(a=>a.id===W)||X("auto")},[U,W]);let aY=p?S:null,aZ=p?Y:null;(0,ad.useEffect)(()=>{let a=au.current,b=as.current;if(a){if(!$||I||!b){a.srcObject&&(a.srcObject=null);return}return a.srcObject=b,(async()=>{try{await a.play()}catch(a){console.warn("Unable to start screen share preview",a)}})(),()=>{a.srcObject===b&&(a.srcObject=null)}}},[$,I]);let a$=(0,ad.useCallback)(async()=>{try{let a=await fetch(`${nG}/${encodeURIComponent(aA)}/presence`,{headers:nI});if(!a.ok)throw Error(`status ${a.status}`);let b=await a.json().catch(()=>null),c=Array.isArray(b?.participants)?b.participants:[];az(c.map(a=>({...a,displayName:a.displayName??null,avatar:a.avatar??null})))}catch(a){console.warn("Failed to refresh video presence",a)}},[aA]),a_=(0,ad.useCallback)(async(a={})=>{if(!ax)return;let b=a.isMuted??aE.current,c=a.isVideoOff??aF.current,d=a.isScreenSharing??aG.current,e=av?.name&&av.name.trim()||av?.username&&av.username.trim()||`Guest ${ax.slice(0,6)}`,f=av?.avatar||(av?.ablyClientId?nF(av.ablyClientId):nF(ax));try{let a=await fetch(`${nG}/${encodeURIComponent(aA)}/presence`,{method:"POST",headers:nH,body:JSON.stringify({userId:ax,displayName:e,avatar:f,isMuted:b,isVideoOff:c,isScreenSharing:d})});if(!a.ok)throw Error(`status ${a.status}`);let g=await a.json().catch(()=>null);if(g?.participant){let a=g.participant;az(b=>{let c=new Map(b.map(a=>[a.userId,a]));return c.set(a.userId,{...a,displayName:a.displayName??null,avatar:a.avatar??null}),Array.from(c.values())})}}catch(a){console.warn("Failed to update video presence",a)}},[av?.ablyClientId,av?.avatar,av?.name,av?.username,ax,aA]),a0=(0,ad.useCallback)(async a=>{if(a)try{await fetch(`${nG}/${encodeURIComponent(aA)}/presence/${encodeURIComponent(a)}`,{method:"DELETE",headers:nI})}catch(a){console.warn("Failed to remove video presence",a)}},[aA]);(0,ad.useEffect)(()=>{ax?a_({isMuted:l,isVideoOff:n,isScreenSharing:$}):az([])},[a_,ax,l,n,$]),(0,ad.useEffect)(()=>(a$(),aB.current&&clearInterval(aB.current),aB.current=setInterval(()=>{a$()},7e3),()=>{aB.current&&(clearInterval(aB.current),aB.current=null)}),[a$]),(0,ad.useEffect)(()=>{if(!ax){aC.current&&(clearInterval(aC.current),aC.current=null);return}return a_(),aC.current&&clearInterval(aC.current),aC.current=setInterval(()=>{a_()},2e4),()=>{aC.current&&(clearInterval(aC.current),aC.current=null)}},[a_,ax]),(0,ad.useEffect)(()=>{let a=aD.current;return a&&a!==ax&&a0(a),aD.current=ax,()=>{a0(aD.current??ax)}},[ax,a0]);let a1=(0,ad.useCallback)(()=>{y(null),al(!1),af(!0),ab(!0),aj(!1),ar.current=!1,am.current&&(clearTimeout(am.current),am.current=null),z.current&&(z.current.getTracks().forEach(a=>a.stop()),z.current=null),G?fV.info(" Camera still controlled by another app. Keeping the demo preview active."):(H(!0),fV.success(" Camera is already in use (Google Meet / Zoom). Showing demo preview so their call stays live."))},[G]),a2=(0,ad.useCallback)(()=>{!ai||am.current||(am.current=setTimeout(()=>{ao(a=>a+1),am.current=null},5e3))},[ai]);(0,ad.useEffect)(()=>()=>{am.current&&(clearTimeout(am.current),am.current=null)},[]),(0,ad.useEffect)(()=>{i&&fV.info("Camera demo mode auto-enabled for presentations (safe start).",{duration:5e3})},[i]),(0,ad.useEffect)(()=>{},[j]);let a3=(0,ad.useMemo)(()=>{let a=new Date().toISOString(),b=av?.id??av?.ablyClientId??ax??"guest",c=ay.find(a=>a.userId===b)??null,d=av?.name&&av.name.trim()||av?.username&&av.username.trim()||"You",e=av?.avatar||(av?.ablyClientId?nF(av.ablyClientId):nF(b)),f=c?.joinedAt??a,g=c?.lastSeenAt??a,h=ay.filter(a=>a.userId!==b).map(a=>{let b=aw.get(a.userId)??null,c=a.displayName&&a.displayName.trim()||b?.name||b?.username||`Friend ${a.userId.slice(0,6)}`,d=a.avatar||b?.avatar||nF(b?.ablyClientId??a.userId);return{userId:a.userId,name:c,avatar:d,isMuted:a.isMuted,isVideoOff:a.isVideoOff,isSpeaking:!a.isMuted&&!a.isVideoOff,isScreenSharing:a.isScreenSharing,isSelf:!1,joinedAt:a.joinedAt,lastSeenAt:a.lastSeenAt}});return[{userId:b,name:d,avatar:e,isMuted:l,isVideoOff:n,isSpeaking:!l&&!n&&!G,isScreenSharing:p,isSelf:!0,joinedAt:f,lastSeenAt:g},...h].sort((a,b)=>new Date(a.joinedAt).getTime()-new Date(b.joinedAt).getTime())},[aw,av?.ablyClientId,av?.avatar,av?.id,av?.name,av?.username,ax,G,l,p,n,ay]),a4=(0,ad.useMemo)(()=>{if(p&&ax)return ax;let a=ay.find(a=>a.isScreenSharing);return a?.userId??null},[ax,p,ay]);(0,ad.useEffect)(()=>{a4?"speaker"!==r&&(aI(!0),s("speaker")):(aH&&"grid"!==r&&s("grid"),aH&&aI(!1))},[a4,aH,r]);let a5=(0,ad.useMemo)(()=>a4?a3.find(a=>a.userId===a4)??null:null,[a3,a4]),a6=(0,ad.useMemo)(()=>a5?a3.filter(a=>a.userId!==a5.userId||a5.isSelf):a3,[a3,a5]),a7=a3.length,a8=1===a6.length&&a6[0]?.isSelf;(0,ad.useEffect)(()=>{let a;if(!G||!B.current)return;let b=B.current,c=b.getContext("2d");if(!c)return;let d=0,e=()=>{let f=c.createLinearGradient(0,0,b.width,b.height);f.addColorStop(0,`hsl(${d}, 70%, 50%)`),f.addColorStop(.5,`hsl(${(d+60)%360}, 70%, 60%)`),f.addColorStop(1,`hsl(${(d+120)%360}, 70%, 50%)`),c.fillStyle=f,c.fillRect(0,0,b.width,b.height);let g=Date.now()/1e3;for(let a=0;a<5;a++){let d=b.width/2+100*Math.sin(g+a),e=b.height/2+80*Math.cos(g+1.5*a),f=20+10*Math.sin(2*g+a);c.beginPath(),c.arc(d,e,f,0,2*Math.PI),c.fillStyle=`rgba(255, 255, 255, ${.1+.1*Math.sin(g+a)})`,c.fill()}c.font="bold 24px system-ui",c.textAlign="center",c.textBaseline="middle",c.fillStyle="rgba(255, 255, 255, 0.9)",c.fillText(" DEMO MODE",b.width/2,b.height/2),c.font="14px system-ui",c.fillStyle="rgba(255, 255, 255, 0.7)",c.fillText("Simulated Camera Feed",b.width/2,b.height/2+35),d=(d+.5)%360,a=requestAnimationFrame(e)};return e(),()=>{cancelAnimationFrame(a)}},[G]),(0,ad.useEffect)(()=>{let a;if(!I||!p)return;let b=C.current;if(!b)return;let c=b.getContext("2d");if(!c)return;b.width=1920,b.height=1080;let d=120,e=()=>{let f=c.createLinearGradient(0,0,b.width,b.height);f.addColorStop(0,`hsl(${d}, 60%, 40%)`),f.addColorStop(.5,`hsl(${(d+40)%360}, 60%, 50%)`),f.addColorStop(1,`hsl(${(d+80)%360}, 60%, 40%)`),c.fillStyle=f,c.fillRect(0,0,b.width,b.height),c.strokeStyle="rgba(255, 255, 255, 0.1)",c.lineWidth=2;for(let a=0;a<b.width;a+=100)c.beginPath(),c.moveTo(a,0),c.lineTo(a,b.height),c.stroke();for(let a=0;a<b.height;a+=100)c.beginPath(),c.moveTo(0,a),c.lineTo(b.width,a),c.stroke();let g=Date.now()/1e3;for(let a=0;a<8;a++){let d=b.width/4+200*Math.sin(.5*g+a),e=b.height/4+150*Math.cos(.3*g+1.5*a),f=40+20*Math.sin(2*g+a);c.save(),c.translate(d,e),c.rotate(g+a),c.fillStyle=`rgba(255, 255, 255, ${.1+.05*Math.sin(g+a)})`,c.fillRect(-f/2,-f/2,f,f),c.restore()}c.font="bold 48px system-ui",c.textAlign="center",c.textBaseline="middle",c.fillStyle="rgba(255, 255, 255, 0.95)",c.fillText(" DEMO SCREEN SHARE",b.width/2,b.height/2-30),c.font="24px system-ui",c.fillStyle="rgba(255, 255, 255, 0.8)",c.fillText("Simulated Screen - Safe for Presentations",b.width/2,b.height/2+30),c.font="18px system-ui",c.fillStyle="rgba(255, 255, 255, 0.6)",c.fillText("No conflicts with Zoom, Google Meet, Teams, or FaceTime",b.width/2,b.height/2+70),d=(d+.3)%360,a=requestAnimationFrame(e)};return e(),()=>{cancelAnimationFrame(a)}},[I,p]),(0,ad.useEffect)(()=>{let a=!0;return(async()=>{if(G){console.log("Demo mode enabled - skipping camera access"),al(!1);return}if("connected"!==t||n)n&&z.current&&(al(!1),ar.current=!0,z.current.getVideoTracks().forEach(a=>a.stop()));else try{var b;let{stream:c,sharedCameraDetected:d}=await nE(ap);if(!a)return void c.getTracks().forEach(a=>a.stop());let[e]=c.getVideoTracks();if(!e)throw c.getTracks().forEach(a=>a.stop()),Error("Camera stream did not include a video track");let f=e.getSettings(),g=(b=f.width)?b>=3800?"4K UHD":b>=1900?"Full HD":b>=1200?"HD":"SD":null;console.log(`Camera resolution: ${f.width}x${f.height} @ ${f.frameRate}fps`),ar.current=!1,am.current&&(clearTimeout(am.current),am.current=null),af(!1),ab(!1),aj(!0),al(d),R(g),y(c),fV.success((a=>{switch(a){case"4K UHD":return"4K UHD Camera connected! ";case"Full HD":return"Full HD Camera connected! ";case"HD":return"HD Camera connected! ";case"SD":return"Camera connected in SD! ";default:return"Camera connected! "}})(g)),d&&fV.info("Compatibility camera mode enabled so Google Meet, Zoom, or Teams keep your video connected."),A.current&&(A.current.srcObject=c,A.current.play().catch(a=>{console.error("Error playing video:",a)})),e.onended=()=>{if(ar.current){ar.current=!1;return}console.log("Camera track ended unexpectedly  likely taken by another app."),a1()}}catch(a){if(a instanceof Error&&"CameraConflictError"===a.name)return void a1();console.error("Error accessing media devices:",a),F("Unable to access camera/microphone"),fV.error("Unable to access camera/microphone. Please check permissions.")}})(),()=>{a=!1,z.current&&(ar.current=!0,z.current.getTracks().forEach(a=>a.stop()),y(null),al(!1)),as.current&&(as.current.getTracks().forEach(a=>a.stop()),as.current=null,_(!1),q(!1),T(null),Z(null))}},[t,n,G,a1,an,ap]),(0,ad.useEffect)(()=>{z.current=x,x||al(!1)},[x]),(0,ad.useEffect)(()=>{ae&&a2()},[ae,a2]),(0,ad.useEffect)(()=>{if(!x||n||G)return;let a=A.current,b=D.current;if(!a||!b)return;let c=()=>{if(!a||!b||a.readyState<2)return;let c=b.getContext("2d");if(!c)return;let{videoWidth:d,videoHeight:e}=a;d&&e&&(b.width=d,b.height=e,c.drawImage(a,0,0,d,e),ah(b.toDataURL("image/jpeg",.7)))},d=setInterval(c,2e3);return c(),()=>{clearInterval(d)}},[x,n,G]),(0,ad.useEffect)(()=>{A.current&&x&&(A.current.srcObject=x,A.current.play().catch(a=>{console.error("Error playing video:",a)}))},[x]),(0,ad.useEffect)(()=>{x&&x.getAudioTracks().forEach(a=>{a.enabled=!l})},[l,x]),(0,ad.useEffect)(()=>{x&&x.getVideoTracks().forEach(a=>{a.enabled=!n})},[n,x]),(0,ad.useEffect)(()=>{if("connecting"===t){let a=setTimeout(()=>{u("connected"),fV.success("Call connected! ")},2e3);return()=>clearTimeout(a)}},[t]),(0,ad.useEffect)(()=>{if("connected"===t){let a=setInterval(()=>{w(a=>a+1)},1e3);return()=>clearInterval(a)}},[t]);let a9=()=>{x&&(ar.current=!0,x.getTracks().forEach(a=>a.stop()),al(!1)),as.current&&(at.current=!0,as.current.getTracks().forEach(a=>a.stop()),as.current=null),_(!1),q(!1),T(null),Z(null),fV.success("Call ended"),b&&b()},ba=(0,ad.useCallback)((a=!1)=>{if(G){a||fV.info("Camera Demo Mode is already enabled.");return}x&&(ar.current=!0,x.getTracks().forEach(a=>a.stop()),y(null)),al(!1),af(!1),am.current&&(clearTimeout(am.current),am.current=null),aj(!1),H(!0),a||fV.success("Camera Demo Mode enabled - safe for presentations! ")},[G,x]),bb=(0,ad.useCallback)((a=!1)=>{am.current&&(clearTimeout(am.current),am.current=null),aj(!0),af(!1),ab(!1),F(null),H(!1),al(!1),ao(a=>a+1),a||fV.success("Attempting to reconnect your camera... ")},[]);(0,ad.useEffect)(()=>{"connected"===t&&G&&bb(!0)},[t,G,bb]);let bc=(0,ad.useCallback)((a=!1)=>{if(!G){a||fV.info("Camera Demo Mode is already off.");return}H(!1),bb(!0),a||fV.success("Camera Demo Mode disabled - will use real camera ")},[G,bb]),bd=(0,ad.useCallback)(a=>{if(X(a),"all-monitors"===a)fV.info("Next screen share will prompt you to share every monitor on your workspace.");else{let b=U.find(b=>b.id===a);b&&fV.info(`Next screen share will request "${b.label}" in the browser prompt.`)}p&&!I&&fV.info("Stop screen share and start again to switch monitors.")},[U,p,I]),bf=async()=>{if(I){p?(_(!1),q(!1),T(null),Z(null)):(_(!1),q(!0),T("Demo"),Z("Demo Display")),p?fV.success("Demo screen share stopped"):fV.success(" Demo screen sharing started - safe for presentations!");return}if(!M)return void fV.error(O??"Screen sharing is not available on this device.");if(p)as.current&&(at.current=!0,as.current.getTracks().forEach(a=>a.stop()),as.current=null),_(!1),q(!1),T(null),Z(null);else try{K?fV.info("iOS will open the Screen Broadcast picker. Choose Safari/MoveYSplash then tap Start Broadcast."):"all-monitors"===W?fV.info('Select the "Entire screen" option to capture every monitor.'):aV?fV.info(`When prompted, choose "${aV.label}" to share that monitor.`):aW&&fV.info("Pick the monitor you want to share in the browser prompt."),console.log("Requesting screen share with multi-monitor support enabled...");let a=K?{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30},preferCurrentTab:!0}:{displaySurface:"monitor",width:{ideal:7680},height:{ideal:4320},frameRate:{ideal:30},cursor:"always",preferCurrentTab:!1,surfaceSwitching:"include",selfBrowserSurface:"exclude"};K||("all-monitors"===W?(a.logicalSurface=!0,a.monitorTypeSurfaces=["monitor"]):aV?a.monitorTypeSurfaces=["monitor"]:a.monitorTypeSurfaces=["monitor","window","browser"]);let b=await navigator.mediaDevices.getDisplayMedia({video:a,audio:!K&&{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),[c]=b.getVideoTracks();if(!c)throw Error("Screen share stream did not include a video track");let d=c.getSettings();console.log(`Screen share resolution: ${d.width}x${d.height} @ ${d.frameRate}fps`),d.width&&d.height?d.width>=7680?(T("8K UHD"),fV.success(" 8K UHD Screen sharing started!")):d.width>=5120?(T("5K UHD"),fV.success(" 5K UHD Screen sharing started!")):d.width>=3840?(T("4K UHD"),fV.success(" 4K UHD Screen sharing started!")):d.width>=2560?(T("QHD"),fV.success(" QHD Screen sharing started!")):d.width>=1920?(T("Full HD"),fV.success(" Full HD Screen sharing started!")):(T("HD"),fV.success(" Screen sharing started!")):fV.success("Screen sharing started"),Z(c.label||aV?.label||("all-monitors"===W?"All Monitors":null)||(K?"iPhone/iPad Screen":null)),as.current&&as.current.getTracks().forEach(a=>a.stop()),at.current=!1,as.current=b,_(!0),q(!0),au.current&&(au.current.srcObject=b,au.current.play().catch(a=>console.error("Error playing screen share video:",a))),c.onended=()=>{if(as.current=null,at.current){at.current=!1,_(!1),q(!1),T(null),Z(null),fV.success("Screen share stopped");return}console.log("Screen share ended unexpectedly - enabling demo mode fallback"),ab(!0),J(!0),_(!1),q(!0),T("Demo"),Z("Demo Display"),fV.success(" Screen Share Demo Mode auto-enabled - another app took over your screen")}}catch(e){console.error("Error sharing screen:",e),Z(null);let{name:a,message:b}=nA(e),c=b.toLowerCase(),d=a.toLowerCase();if(c.includes("getdisplaymedia")&&c.includes("not a function"))return void fV.error(O??"Screen sharing is not supported on this browser.");if("notallowederror"===d||"notreadableerror"===d||c.includes("permission denied")||c.includes("user cancelled")){if(K)return void fV.error('iOS blocked the Screen Broadcast. Tap "Start Broadcast" and allow Screen Recording for Safari.');c.includes("already in use")||"notreadableerror"===d?(console.log("Screen share conflict detected - another app may be sharing"),console.log("Auto-enabling screen share demo mode..."),J(!0),ab(!0),fV.success(" Screen Share Demo Mode auto-enabled - screen in use by another app!"),_(!1),q(!0),T("Demo"),Z("Demo Display")):fV.error("Screen sharing cancelled")}else fV.error("Unable to share screen. Please grant screen sharing permissions.")}},bg=()=>{G?bc():ba()},bh=()=>{let a=!I;J(a),a?(p&&(_(!1),q(!1),T(null),Z(null)),as.current&&(at.current=!0,as.current.getTracks().forEach(a=>a.stop()),as.current=null),fV.success("Screen Share Demo Mode enabled - safe for presentations! "),au.current&&(au.current.srcObject=null)):fV.success("Screen Share Demo Mode disabled - will use real screen ")},bi=()=>{k(a=>{let b=!a;return b?(ba(!0),fV.success("Safe Start enabled - MoveYSplash will stay in demo mode when you open it.")):fV.success("Safe Start disabled - MoveYSplash can auto-connect your camera again."),b})},bj=(0,ad.useCallback)(()=>{aq(a=>"user"===a?"environment":"user"),"connected"!==t||n||G||ao(a=>a+1)},[t,n,G]),bk=()=>{let a=aP.trim();if(!a)return;let b=av?.name&&av.name.trim()||av?.username&&av.username.trim()||"You";aS(c=>[...c,{id:`msg-${Date.now()}`,author:b,text:a,isSelf:!0,timestamp:new Date().toISOString()}]),aQ("")};return"ringing"===t&&c?(0,ac.jsx)("div",{className:"h-[calc(100vh-80px)] flex items-center justify-center",children:(0,ac.jsx)(gl,{className:"w-96 backdrop-blur-xl bg-white/10 border-white/20 p-8",children:(0,ac.jsxs)("div",{className:"text-center space-y-6",children:[(0,ac.jsxs)("div",{className:"relative inline-block",children:[(0,ac.jsxs)(d$,{className:"w-32 h-32 border-4 border-white/20",children:[(0,ac.jsx)(d_,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Squad"}),(0,ac.jsx)(d0,{children:"SQ"})]}),(0,ac.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-green-400 animate-ping"})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-2",children:d}),(0,ac.jsxs)("p",{className:"text-white/70",children:["video"===a?"Video":"Voice"," call incoming..."]})]}),(0,ac.jsxs)("div",{className:"flex gap-4 justify-center pt-4",children:[(0,ac.jsx)(be,{onClick:()=>{fV.success("Call declined"),b&&b()},className:"w-16 h-16 rounded-full bg-red-500 hover:bg-red-600 text-white border-0",children:(0,ac.jsx)(ny,{className:"w-6 h-6"})}),(0,ac.jsx)(be,{onClick:()=>{u("connecting")},className:"w-16 h-16 rounded-full bg-green-500 hover:bg-green-600 text-white border-0",children:(0,ac.jsx)(lF,{className:"w-6 h-6"})})]})]})})}):"connecting"===t?(0,ac.jsx)("div",{className:"h-[calc(100vh-80px)] flex items-center justify-center",children:(0,ac.jsx)(gl,{className:"w-96 backdrop-blur-xl bg-white/10 border-white/20 p-8",children:(0,ac.jsxs)("div",{className:"text-center space-y-6",children:[(0,ac.jsxs)("div",{className:"relative inline-block",children:[(0,ac.jsxs)(d$,{className:"w-32 h-32 border-4 border-white/20",children:[(0,ac.jsx)(d_,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Squad"}),(0,ac.jsx)(d0,{children:"SQ"})]}),(0,ac.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400 animate-spin",style:{animationDuration:"2s"}})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-2",children:"Connecting..."}),(0,ac.jsx)("p",{className:"text-white/70",children:"Please wait"})]}),(0,ac.jsx)(be,{onClick:a9,className:"w-16 h-16 rounded-full bg-red-500 hover:bg-red-600 text-white border-0",children:(0,ac.jsx)(fH,{className:"w-6 h-6"})})]})})}):(0,ac.jsxs)("div",{className:"h-[calc(100vh-80px)] flex flex-col max-w-7xl mx-auto gap-4",children:[(0,ac.jsx)("canvas",{ref:D,className:"hidden"}),aa&&(ae||I)&&(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-gradient-to-r from-yellow-500/90 to-orange-500/90 border-yellow-400 px-6 py-3",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,ac.jsx)("span",{className:"text-2xl",children:""})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white font-medium",children:"Camera or Screen in use elsewhere"}),(0,ac.jsx)("p",{className:"text-white/80 text-sm",children:"We switched to the simulated preview while Zoom, Meet, or Teams has your hardware. Resume the real feed once the other app releases it."})]})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[!ai&&ae&&(0,ac.jsx)(be,{onClick:()=>bb(),className:"bg-white/20 text-white hover:bg-white/30 border-0",children:"Resume real camera"}),(0,ac.jsx)(be,{onClick:()=>ab(!1),variant:"ghost",className:"text-white hover:bg-white/20",children:"Dismiss"})]})]})}),G&&!aa&&(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-gradient-to-r from-purple-500/90 to-pink-500/90 border-purple-400 px-6 py-3",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,ac.jsx)("span",{className:"text-2xl",children:""})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white font-medium",children:"Camera Demo Mode Active"}),(0,ac.jsx)("p",{className:"text-white/80 text-sm",children:"Simulated camera - safe for presentations! Your real camera is not in use."})]})]}),(0,ac.jsx)(be,{onClick:bg,variant:"ghost",className:"text-white hover:bg-white/20",children:"Disable Camera Demo"})]})}),I&&!aa&&(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-gradient-to-r from-green-500/90 to-teal-500/90 border-green-400 px-6 py-3",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,ac.jsx)("span",{className:"text-2xl",children:""})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white font-medium",children:"Screen Share Demo Mode Active"}),(0,ac.jsx)("p",{className:"text-white/80 text-sm",children:"Simulated screen share - safe for presentations! Won't conflict with Zoom/Meet/Teams."})]})]}),(0,ac.jsx)(be,{onClick:bh,variant:"ghost",className:"text-white hover:bg-white/20",children:"Disable Screen Demo"})]})}),(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 px-6 py-3",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,ac.jsxs)("span",{className:"text-white",children:[d,"  ",(f=Math.floor(v/60),`${f}:${(v%60).toString().padStart(2,"0")}`)]}),ae?(0,ac.jsx)("span",{className:"text-xs text-yellow-200",children:" Cached camera preview"}):G?(0,ac.jsx)("span",{className:"text-xs text-purple-400",children:" Demo Mode"}):x&&Q?(0,ac.jsxs)("span",{className:"text-xs text-green-400",children:[" ",Q]}):x?(0,ac.jsx)("span",{className:"text-xs text-green-400",children:" Camera Active"}):null,ak&&!ae&&!G&&(0,ac.jsx)("span",{className:"text-xs text-yellow-200 flex items-center gap-1",children:" Shared cam mode"}),aY&&(0,ac.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded ${"8K UHD"===aY?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"5K UHD"===aY||"4K UHD"===aY?"bg-blue-500/80 text-white":"bg-green-500/80 text-white"}`,children:[" ",aY," Screen Share",aZ&&(0,ac.jsx)("span",{className:"block text-[10px] text-white/80 mt-0.5",children:aZ})]})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2 text-white/70 text-sm",children:[(0,ac.jsx)(nv,{className:"w-4 h-4"}),(0,ac.jsxs)("span",{children:[aY??Q??"HD"," Quality"]}),aZ&&(0,ac.jsxs)("span",{className:"text-xs text-white/60",children:["(",aZ,")"]})]})]})}),a5&&(0,ac.jsxs)(gl,{className:"relative overflow-hidden backdrop-blur-xl bg-black/40 border-white/30 min-h-[320px]",children:[a5.isSelf?I?(0,ac.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-purple-600/40 to-pink-600/40 text-center px-6",children:(0,ac.jsxs)("div",{className:"text-white space-y-2",children:[(0,ac.jsx)("div",{className:"text-4xl",children:""}),(0,ac.jsx)("p",{className:"font-semibold",children:"Screen Share Demo Mode Active"}),(0,ac.jsx)("p",{className:"text-white/80 text-sm",children:"Your teammates see the simulated share while other apps use your screen."})]})}):(0,ac.jsx)("video",{ref:au,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-contain bg-black"}):(0,ac.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-slate-900/80 to-purple-900/60",children:(0,ac.jsxs)("div",{className:"text-center space-y-3 text-white px-6",children:[(0,ac.jsx)("div",{className:"text-4xl",children:""}),(0,ac.jsxs)("p",{className:"text-lg font-semibold",children:[a5.name," is sharing their screen"]}),(0,ac.jsx)("p",{className:"text-sm text-white/70",children:"We switched everyone to speaker view automatically."})]})}),(0,ac.jsxs)("div",{className:"absolute top-3 left-3 flex flex-wrap items-center gap-2",children:[(0,ac.jsxs)("div",{className:"bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-2",children:[(0,ac.jsx)(nv,{className:"w-4 h-4"}),(0,ac.jsx)("span",{children:a5.isSelf?"You":a5.name})]}),a5.isSelf&&S&&(0,ac.jsxs)("div",{className:`text-xs px-3 py-1 rounded-full ${"8K UHD"===S?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"5K UHD"===S||"4K UHD"===S?"bg-blue-500/80 text-white":"bg-green-500/80 text-white"}`,children:[S," Quality"]})]})]}),(0,ac.jsx)("div",{className:`flex-1 grid gap-4 ${a6.length>=4?"grid-cols-2 lg:grid-cols-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:a6.map(a=>(0,ac.jsxs)(gl,{className:`relative overflow-hidden backdrop-blur-xl bg-gradient-to-br from-purple-900/50 to-pink-900/50 border-2 transition-all min-h-[200px] ${a.isSpeaking?"border-green-400 shadow-lg shadow-green-400/50":"border-white/20"}`,children:[a.isSelf?a.isVideoOff?(0,ac.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,ac.jsxs)(d$,{className:"w-24 h-24 border-4 border-white/20",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]??"Y"})]})}):ae&&ag?(0,ac.jsxs)("div",{className:"relative w-full h-full",children:[(0,ac.jsx)(l3.default,{src:ag,alt:"Camera preview",fill:!0,unoptimized:!0,className:"object-cover"}),(0,ac.jsxs)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm flex flex-col items-center justify-center text-center px-6",children:[(0,ac.jsx)("div",{className:"text-white font-semibold mb-2",children:"Camera temporarily in use by another app"}),(0,ac.jsx)("p",{className:"text-white/80 text-sm",children:"Keeping your last frame visible while Zoom/Meet/Teams is running. We'll switch back automatically."})]})]}):ae?(0,ac.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-center px-6 bg-gradient-to-br from-purple-600/40 to-pink-600/40 text-white",children:[(0,ac.jsx)("div",{className:"text-3xl mb-2",children:""}),(0,ac.jsx)("p",{className:"font-semibold",children:"Camera temporarily unavailable"}),(0,ac.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"We're retrying while another app is using your webcam."})]}):G?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)("canvas",{ref:B,width:640,height:480,className:"absolute inset-0 w-full h-full object-cover"}),(0,ac.jsx)("div",{className:"absolute top-2 left-2 bg-purple-500/80 text-white text-xs px-2 py-1 rounded",children:" DEMO"})]}):x?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)("video",{ref:A,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover scale-x-[-1]"}),(0,ac.jsxs)("div",{className:"absolute top-2 left-2 flex gap-2",children:[(0,ac.jsxs)("div",{className:"bg-black/50 text-white text-xs px-2 py-1 rounded flex items-center gap-1",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"LIVE"]}),Q&&(0,ac.jsx)("div",{className:`text-white text-xs px-2 py-1 rounded ${"4K UHD"===Q?"bg-gradient-to-r from-purple-500 to-pink-500":"Full HD"===Q?"bg-blue-500/80":"bg-green-500/80"}`,children:Q})]})]}):(0,ac.jsx)("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-br from-blue-900/30 to-purple-900/30 flex items-center justify-center",children:(0,ac.jsxs)("div",{className:"text-white/70 text-center space-y-2",children:[(0,ac.jsx)("div",{className:"w-12 h-12 bg-white/10 rounded-full animate-pulse mx-auto"}),(0,ac.jsx)("p",{className:"text-sm",children:"Starting camera..."}),E&&(0,ac.jsx)("p",{className:"text-xs text-red-400",children:E})]})}):(0,ac.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-slate-900/40 to-purple-900/40 text-center px-4",children:[(0,ac.jsxs)(d$,{className:"w-20 h-20 border-4 border-white/20 mb-3",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]??"?"})]}),(0,ac.jsx)("p",{className:"text-white text-sm font-semibold",children:a.name}),(0,ac.jsx)("p",{className:"text-white/60 text-xs mt-1",children:a.isVideoOff?"Camera off":"Streaming"})]}),a.isSelf&&a8&&(0,ac.jsx)("div",{className:"absolute bottom-3 left-3 bg-black/60 text-white/80 text-xs px-3 py-1 rounded-full",children:"You're the first in the room"}),(0,ac.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-white text-sm",children:a.name}),a.isSpeaking&&(0,ac.jsxs)("div",{className:"flex gap-0.5",children:[(0,ac.jsx)("div",{className:"w-1 h-3 bg-green-400 rounded-full animate-pulse"}),(0,ac.jsx)("div",{className:"w-1 h-4 bg-green-400 rounded-full animate-pulse animation-delay-150"}),(0,ac.jsx)("div",{className:"w-1 h-3 bg-green-400 rounded-full animate-pulse animation-delay-300"})]})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-1",children:[a.isMuted&&(0,ac.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:(0,ac.jsx)(nu,{className:"w-3 h-3 text-white"})}),a.isVideoOff&&(0,ac.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:(0,ac.jsx)(nt,{className:"w-3 h-3 text-white"})})]})]})}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",className:"absolute top-2 right-2 text-white/70 hover:text-white hover:bg-black/30 backdrop-blur-md",children:(0,ac.jsx)(lE,{className:"w-4 h-4"})})]},a.userId))}),I&&p&&(0,ac.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",children:(0,ac.jsxs)("div",{className:"relative w-full max-w-6xl aspect-video",children:[(0,ac.jsx)("canvas",{ref:C,width:1920,height:1080,className:"w-full h-full object-contain rounded-lg border-2 border-green-400 shadow-2xl"}),(0,ac.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[(0,ac.jsx)("div",{className:"bg-green-500/90 text-white px-4 py-2 rounded-lg backdrop-blur-md",children:" Demo Screen Share Active"}),(0,ac.jsx)(be,{onClick:bf,className:"bg-red-500 hover:bg-red-600 text-white",children:"Stop Sharing"})]})]})}),(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-4",children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsx)("div",{className:"flex items-center gap-2",children:(0,ac.jsxs)("div",{className:"text-white/70 text-sm",children:[(0,ac.jsx)("span",{className:"text-white",children:d}),"  ",a7," participants"]})}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(be,{onClick:()=>{m(!l),fV.success(l?"Microphone on":"Microphone muted")},className:`rounded-full w-12 h-12 ${l?"bg-red-500 hover:bg-red-600":"bg-white/10 hover:bg-white/20"} text-white border-0`,children:l?(0,ac.jsx)(nu,{className:"w-5 h-5"}):(0,ac.jsx)(lT,{className:"w-5 h-5"})}),"video"===a&&(0,ac.jsx)(be,{onClick:()=>{o(!n),fV.success(n?"Camera on":"Camera off")},className:`rounded-full w-12 h-12 ${n?"bg-red-500 hover:bg-red-600":"bg-white/10 hover:bg-white/20"} text-white border-0`,children:n?(0,ac.jsx)(nt,{className:"w-5 h-5"}):(0,ac.jsx)(bl,{className:"w-5 h-5"})}),(0,ac.jsx)(be,{onClick:bf,className:`rounded-full w-12 h-12 ${p?"bg-green-500 hover:bg-green-600":"bg-white/10 hover:bg-white/20"} text-white border-0`,title:O??"Start or stop screen share",children:p?(0,ac.jsx)(nw,{className:"w-5 h-5"}):(0,ac.jsx)(nv,{className:"w-5 h-5"})}),(0,ac.jsx)(be,{onClick:a9,className:"rounded-full w-12 h-12 bg-red-500 hover:bg-red-600 text-white border-0",children:(0,ac.jsx)(lF,{className:"w-5 h-5 rotate-135"})})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[!ai&&(0,ac.jsx)(be,{variant:"ghost",size:"sm",onClick:()=>bb(),className:"text-yellow-200 hover:text-yellow-100 hover:bg-yellow-500/20",title:"Try to reconnect the real camera feed",children:" Resume Cam"}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:bg,className:`${G?"text-purple-400 hover:text-purple-300 bg-purple-500/20 hover:bg-purple-500/30":"text-white/70 hover:text-white hover:bg-white/10"}`,title:"Toggle Camera Demo Mode (prevents camera conflicts with Zoom/Meet/Teams)",children:[" ",G?"Cam Demo ON":"Cam Demo"]}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:bi,className:`${j?"text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30":"text-white/70 hover:text-white hover:bg-white/10"}`,title:"Always start MoveYSplash in presentation-safe demo mode so other meeting apps keep your webcam",children:[" ",j?"Safe Start ON":"Safe Start"]}),aW&&(0,ac.jsxs)(np,{children:[(0,ac.jsx)(nq,{asChild:!0,children:(0,ac.jsxs)(be,{variant:"ghost",size:"sm",className:"text-white/70 hover:text-white hover:bg-white/10",title:"Choose which monitor or workspace to share by default",children:[(0,ac.jsx)(nv,{className:"w-5 h-5 mr-2"}),aX]})}),(0,ac.jsxs)(nr,{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-white/20 text-white",children:[U.map(a=>(0,ac.jsxs)(ns,{onClick:()=>bd(a.id),className:"flex items-center justify-between gap-4 focus:bg-white/10 focus:text-white",children:[(0,ac.jsx)("span",{children:a.label}),(0,ac.jsx)("span",{className:"text-xs text-white/60",children:a.size})]},a.id)),(0,ac.jsxs)(ns,{onClick:()=>bd("all-monitors"),className:"flex items-center justify-between gap-4 focus:bg-white/10 focus:text-white",children:[(0,ac.jsx)("span",{children:"All Monitors"}),(0,ac.jsx)("span",{className:"text-xs text-white/60",children:"Entire workspace"})]})]})]}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:bh,className:`${I?"text-green-400 hover:text-green-300 bg-green-500/20 hover:bg-green-500/30":"text-white/70 hover:text-white hover:bg-white/10"}`,title:"Toggle Screen Share Demo Mode (prevents screen share conflicts)",children:[" ",I?"Screen Demo ON":"Screen Demo"]}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>s("grid"===r?"speaker":"grid"),className:`${"grid"===r?"text-white/90 bg-white/15":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[(0,ac.jsx)(nz,{className:"w-5 h-5 mr-2"}),"grid"===r?"Grid":"Speaker"]}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>aU("participants"),className:`${aJ?"text-white/90 bg-white/15":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[(0,ac.jsx)(bm,{className:"w-5 h-5 mr-2"}),"Participants"]}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>aU("chat"),className:`${aL?"text-white/90 bg-white/15":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[(0,ac.jsx)(nx,{className:"w-5 h-5 mr-2"}),"Chat"]}),(0,ac.jsx)(be,{variant:"ghost",size:"sm",onClick:()=>aU("settings"),className:`${aN?"text-white/90 bg-white/15":"text-white/70 hover:text-white hover:bg-white/10"}`,children:(0,ac.jsx)(gi,{className:"w-5 h-5"})})]})]})}),aJ&&(0,ac.jsxs)(gl,{className:"fixed right-4 bottom-28 w-80 max-h-[420px] z-40 backdrop-blur-xl bg-slate-950/80 border-white/20 text-white shadow-2xl",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm text-white/70",children:"In the room"}),(0,ac.jsxs)("p",{className:"text-lg font-semibold",children:[a7," participant",1!==a7?"s":""]})]}),(0,ac.jsx)(be,{size:"icon",variant:"ghost",onClick:()=>aK(!1),className:"text-white/70 hover:text-white",children:(0,ac.jsx)(fH,{className:"w-4 h-4"})})]}),(0,ac.jsx)("div",{className:"px-4 py-3 space-y-3 overflow-y-auto max-h-[340px]",children:a3.map(a=>(0,ac.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-white/5 px-3 py-2 border border-white/10",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]??"?"})]}),(0,ac.jsxs)("div",{className:"space-y-0.5",children:[(0,ac.jsxs)("p",{className:"text-sm font-medium",children:[a.name," ",a.isSelf?"(You)":""]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[a.isMuted?(0,ac.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ac.jsx)(nu,{className:"w-3 h-3"})," Muted"]}):(0,ac.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ac.jsx)(lT,{className:"w-3 h-3"})," Live"]}),a.isVideoOff&&(0,ac.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ac.jsx)(nt,{className:"w-3 h-3"})," Cam off"]}),a.isScreenSharing&&(0,ac.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ac.jsx)(nv,{className:"w-3 h-3"})," Sharing"]})]})]})]}),(0,ac.jsxs)("span",{className:"text-[10px] text-white/50",children:["Joined"," ",new Date(a.joinedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},a.userId))})]}),aL&&(0,ac.jsxs)(gl,{className:"fixed right-4 bottom-28 w-[26rem] max-h-[460px] z-40 backdrop-blur-xl bg-slate-950/85 border-white/20 text-white shadow-2xl",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm text-white/70",children:"Meeting chat"}),(0,ac.jsx)("p",{className:"text-lg font-semibold",children:"Share quick notes & links"})]}),(0,ac.jsx)(be,{size:"icon",variant:"ghost",onClick:()=>aM(!1),className:"text-white/70 hover:text-white",children:(0,ac.jsx)(fH,{className:"w-4 h-4"})})]}),(0,ac.jsx)("div",{ref:aT,className:"px-4 py-3 space-y-3 overflow-y-auto max-h-[320px]",children:aR.map(a=>(0,ac.jsxs)("div",{className:`flex flex-col gap-1 rounded-lg px-3 py-2 border ${a.isSelf?"bg-purple-600/20 border-purple-400/30":"bg-white/5 border-white/10"}`,children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between text-xs text-white/60",children:[(0,ac.jsx)("span",{className:"font-semibold text-white/80",children:a.author}),(0,ac.jsx)("span",{children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,ac.jsx)("p",{className:"text-sm text-white/90 whitespace-pre-wrap",children:a.text})]},a.id))}),(0,ac.jsx)("div",{className:"border-t border-white/10 px-4 py-3",children:(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(jF,{value:aP,onChange:a=>aQ(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),bk())},placeholder:"Type a message to everyone",className:"bg-white/5 border-white/10 text-white placeholder:text-white/50"}),(0,ac.jsx)(be,{onClick:bk,className:"bg-purple-500 hover:bg-purple-600 text-white",children:"Send"})]})})]}),aN&&(0,ac.jsxs)(gl,{className:"fixed right-4 bottom-28 w-80 max-h-[460px] z-40 backdrop-blur-xl bg-slate-950/85 border-white/20 text-white shadow-2xl",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm text-white/70",children:"Quick settings"}),(0,ac.jsx)("p",{className:"text-lg font-semibold",children:"Tune your call"})]}),(0,ac.jsx)(be,{size:"icon",variant:"ghost",onClick:()=>aO(!1),className:"text-white/70 hover:text-white",children:(0,ac.jsx)(fH,{className:"w-4 h-4"})})]}),(0,ac.jsxs)("div",{className:"px-4 py-3 space-y-3",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm font-semibold",children:"Camera Demo Mode"}),(0,ac.jsx)("p",{className:"text-xs text-white/60",children:"Use a safe simulated camera"})]}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:bg,className:G?"text-purple-300 bg-purple-500/20":"text-white/70 hover:text-white hover:bg-white/10",children:G?"On":"Off"})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm font-semibold",children:"Screen Share Demo"}),(0,ac.jsx)("p",{className:"text-xs text-white/60",children:"Share a safe placeholder feed"})]}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:bh,className:I?"text-green-300 bg-green-500/20":"text-white/70 hover:text-white hover:bg-white/10",children:I?"On":"Off"})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm font-semibold",children:"Safe Start"}),(0,ac.jsx)("p",{className:"text-xs text-white/60",children:"Stay in demo when opening the app"})]}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:bi,className:j?"text-amber-200 bg-amber-500/20":"text-white/70 hover:text-white hover:bg-white/10",children:j?"On":"Off"})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm font-semibold",children:"Camera lens"}),(0,ac.jsx)("p",{className:"text-xs text-white/60",children:"Front / rear for phones & tablets"})]}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:bj,className:"text-white/80 hover:text-white hover:bg-white/10",children:"user"===ap?"Rear cam":"Front cam"})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm font-semibold",children:"Layout"}),(0,ac.jsx)("p",{className:"text-xs text-white/60",children:"Switch between grid and speaker"})]}),(0,ac.jsxs)("div",{className:"flex gap-2",children:[(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>s("grid"),className:"grid"===r?"text-white bg-white/20":"text-white/70 hover:text-white hover:bg-white/10",children:"Grid"}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>s("speaker"),className:"speaker"===r?"text-white bg-white/20":"text-white/70 hover:text-white hover:bg-white/10",children:"Speaker"})]})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm font-semibold",children:"Camera Health"}),(0,ac.jsx)("p",{className:"text-xs text-white/60",children:"Retry the real camera feed"})]}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:()=>bb(),className:"text-white/80 hover:text-white hover:bg-white/10",children:"Resume cam"})]})]})]}),p&&(0,ac.jsx)(gl,{className:"absolute top-4 left-1/2 -translate-x-1/2 backdrop-blur-xl bg-green-500/90 border-green-400 px-4 py-2 z-50",children:(0,ac.jsxs)("div",{className:"flex items-center gap-2 text-white",children:[(0,ac.jsx)(nv,{className:"w-4 h-4"}),(0,ac.jsx)("span",{className:"text-sm",children:"You are sharing your screen"})]})}),(0,ac.jsx)("style",{children:`
        .rotate-135 {
          transform: rotate(135deg);
        }
        .animation-delay-150 {
          animation-delay: 150ms;
        }
        .animation-delay-300 {
          animation-delay: 300ms;
        }
      `})]})}let nK=bj("user-check",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),nL=bj("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),nM=bj("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),nN=bj("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),nO=(a,b)=>{var c;let d,e=b?.friendIds??[],f=a.friendIds.filter(b=>e.includes(b)&&b!==a.id).length;return{id:a.id,name:a.name,username:a.username.startsWith("@")?a.username:`@${a.username}`,avatar:a.avatar,status:(c=a.id,(d=["online","away","offline"])[Array.from(c).reduce((a,b)=>a+b.charCodeAt(0),0)%d.length]),mutualFriends:f}};function nP({onOpenProfile:a,onOpenMessage:b}={}){let{currentUser:c,allUsers:d,addFriend:e,removeFriend:f,blockUser:g,unblockUser:h,refreshAllUsers:i}=f3(),[j,k]=(0,ad.useState)(""),[l,m]=(0,ad.useState)(new Set),[n,o]=(0,ad.useState)(new Set),p=(0,ad.useCallback)((a,b)=>{m(c=>{let d=new Set(c);return b?d.add(a):d.delete(a),d})},[]),q=(0,ad.useCallback)(a=>l.has(a),[l]);(0,ad.useEffect)(()=>{i()},[i]);let r=(0,ad.useCallback)(b=>{a&&a(b)},[a]),s=(0,ad.useCallback)((a,b)=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),r(b))},[r]),t=(0,ad.useCallback)(a=>{b?.(a)},[b]),u=(0,ad.useMemo)(()=>Array.from(d.values()),[d]),v=(0,ad.useMemo)(()=>c?.blockedIds??[],[c?.blockedIds]),w=(0,ad.useMemo)(()=>new Set(v),[v]),x=(0,ad.useMemo)(()=>c?c.friendIds.filter(a=>!w.has(a)).map(a=>d.get(a)).filter(a=>!!a).map(a=>nO(a,c)).sort((a,b)=>a.name.localeCompare(b.name)):[],[d,w,c]),y=(0,ad.useMemo)(()=>c?u.filter(a=>{if(a.id===c.id||n.has(a.id)||w.has(a.id)||Array.isArray(a.blockedIds)&&a.blockedIds.includes(c.id))return!1;let b=a.friendIds.includes(c.id),d=c.friendIds.includes(a.id);return b&&!d}).map(a=>nO(a,c)):[],[u,w,c,n]),z=(0,ad.useMemo)(()=>{if(!c)return[];let a=new Set([c.id,...c.friendIds,...c.blockedIds,...y.map(a=>a.id)]);return u.filter(b=>!a.has(b.id)).filter(a=>!n.has(a.id)).filter(a=>!w.has(a.id)).filter(a=>!(Array.isArray(a.blockedIds)&&a.blockedIds.includes(c.id))).map(a=>nO(a,c)).sort((a,b)=>a.mutualFriends===b.mutualFriends?a.name.localeCompare(b.name):b.mutualFriends-a.mutualFriends).slice(0,8)},[u,w,c,n,y]),A=j.trim().toLowerCase(),B=(0,ad.useCallback)(a=>!A||a.name.toLowerCase().includes(A)||a.username.toLowerCase().includes(A),[A]),C=x.filter(B),D=y.filter(B),E=z.filter(B),F=(0,ad.useMemo)(()=>c?c.blockedIds.map(a=>d.get(a)).filter(a=>!!a).map(a=>nO(a,c)).sort((a,b)=>a.name.localeCompare(b.name)):[],[d,c]),G=F.filter(B),H=(0,ad.useCallback)(async a=>{if(!c)return fV.info("Sign in to connect."),!1;p(a,!0);try{let b=await e(a);return b?fV.success("Friend request sent!"):fV.error("Unable to send friend request right now."),b}finally{p(a,!1)}},[e,c,p]),I=(0,ad.useCallback)(async a=>{if(!c)return void fV.info("Sign in to manage your friends.");p(a,!0);try{await f(a)?fV.success("Friend removed."):fV.error("Unable to remove friend right now.")}finally{p(a,!1)}},[c,f,p]),J=(0,ad.useCallback)(a=>{o(b=>{if(b.has(a))return b;let c=new Set(b);return c.add(a),c})},[]),K=(0,ad.useCallback)(a=>{o(b=>{if(!b.has(a))return b;let c=new Set(b);return c.delete(a),c})},[]),L=(0,ad.useCallback)(async a=>{if(!c)return void fV.info("Sign in to manage connections.");p(a,!0);try{await g(a)?(fV.success("User blocked."),J(a)):fV.error("Unable to block user right now.")}finally{p(a,!1)}},[g,c,J,p]),M=(0,ad.useCallback)(async a=>{if(c){p(a,!0);try{await h(a)?fV.success("User unblocked."):fV.error("Unable to unblock user right now.")}finally{p(a,!1)}}},[c,p,h]),N=(0,ad.useCallback)(async a=>{await H(a)&&K(a)},[H,K]),O=(0,ad.useCallback)(async a=>{if(!c)return void fV.info("Sign in to manage connections.");p(a,!0);try{await f(a)?(J(a),fV.info("Request declined.",{description:"We removed the pending request for you."})):fV.error("Unable to decline request right now.")}finally{p(a,!1)}},[c,J,f,p]),P=(0,ad.useCallback)(a=>{J(a),fV.info("Suggestion hidden",{description:"We will show different people next time."})},[J]);return c?(0,ac.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,ac.jsxs)(fz,{defaultValue:"all",className:"w-full",children:[(0,ac.jsxs)("div",{className:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Connections"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Manage your friends, requests, and discover new connections pulled live from Supabase."})]}),(0,ac.jsxs)("div",{className:"relative w-full md:w-72",children:[(0,ac.jsx)(lG,{className:"w-4 h-4 text-white/60 absolute left-3 top-1/2 -translate-y-1/2"}),(0,ac.jsx)(jF,{value:j,onChange:a=>k(a.target.value),placeholder:"Search friends...",className:"pl-9 bg-white/5 border-white/20 text-white placeholder:text-white/50"})]})]}),(0,ac.jsxs)(fA,{className:"grid grid-cols-4 bg-white/10",children:[(0,ac.jsxs)(fB,{value:"all",children:["All Friends (",x.length,")"]}),(0,ac.jsxs)(fB,{value:"requests",children:["Requests (",y.length,")"]}),(0,ac.jsxs)(fB,{value:"suggestions",children:["Discover (",z.length,")"]}),(0,ac.jsxs)(fB,{value:"blocked",children:["Blocked (",F.length,")"]})]}),(0,ac.jsx)(fC,{value:"all",children:0===C.length?(0,ac.jsx)(gl,{className:"p-8 backdrop-blur-xl bg-white/5 border-white/20 text-white/70 text-center",children:0===x.length?"Add your first friend to see them here.":"No friends match your search."}):(0,ac.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(a=>(0,ac.jsx)(gl,{className:"p-6 backdrop-blur-xl bg-white/10 border-white/20 hover:bg-white/15 transition-colors focus:outline-none focus:ring-2 focus:ring-white/40",role:"button",tabIndex:0,onClick:()=>r(a.id),onKeyDown:b=>s(b,a.id),children:(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsxs)(d$,{className:"w-14 h-14 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]})]}),(0,ac.jsx)("div",{className:`absolute bottom-0 right-0 w-4 h-4 ${(a=>{switch(a){case"online":return"bg-green-400";case"away":return"bg-yellow-400";default:return"bg-gray-400"}})(a.status)} rounded-full border-2 border-purple-900`})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white",children:a.name}),(0,ac.jsx)("div",{className:"text-white/60 text-sm",children:a.username}),(0,ac.jsxs)("div",{className:"text-white/40 text-xs mt-1",children:[a.mutualFriends," mutual friends"]})]})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[(0,ac.jsx)(be,{size:"sm",variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10",onClick:b=>{b.stopPropagation(),t(a.id)},children:(0,ac.jsx)(bk,{className:"w-4 h-4"})}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10",onClick:a=>{a.stopPropagation()},children:(0,ac.jsx)(bl,{className:"w-4 h-4"})}),(0,ac.jsxs)(be,{size:"sm",variant:"ghost",disabled:q(a.id),onClick:b=>{b.stopPropagation(),I(a.id)},className:"text-white/70 hover:text-red-300 hover:bg-white/10 disabled:opacity-50",children:[(0,ac.jsx)(nM,{className:"w-4 h-4 mr-1"}),(0,ac.jsx)("span",{className:"hidden sm:inline",children:"Remove"})]}),(0,ac.jsxs)(be,{size:"sm",variant:"ghost",disabled:q(a.id),onClick:b=>{b.stopPropagation(),L(a.id)},className:"text-white/70 hover:text-red-400 hover:bg-white/10 disabled:opacity-50",children:[(0,ac.jsx)(nN,{className:"w-4 h-4 mr-1"}),(0,ac.jsx)("span",{className:"hidden sm:inline",children:"Block"})]})]})]})},a.id))})}),(0,ac.jsx)(fC,{value:"requests",children:0===D.length?(0,ac.jsx)(gl,{className:"p-8 backdrop-blur-xl bg-white/5 border-white/20 text-white/70 text-center",children:"No pending friend requests."}):(0,ac.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map(a=>(0,ac.jsxs)(gl,{className:"p-6 backdrop-blur-xl bg-white/10 border-white/20 hover:bg-white/15 transition-colors focus:outline-none focus:ring-2 focus:ring-white/40",role:"button",tabIndex:0,onClick:()=>r(a.id),onKeyDown:b=>s(b,a.id),children:[(0,ac.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,ac.jsxs)(d$,{className:"w-14 h-14 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white",children:a.name}),(0,ac.jsx)("div",{className:"text-white/60 text-sm",children:a.username}),(0,ac.jsxs)("div",{className:"text-white/40 text-xs mt-1",children:[a.mutualFriends," mutual friends"]})]})]}),(0,ac.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,ac.jsxs)(be,{onClick:b=>{b.stopPropagation(),N(a.id)},disabled:q(a.id),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 disabled:opacity-50",children:[(0,ac.jsx)(nK,{className:"w-4 h-4 mr-2"}),"Accept"]}),(0,ac.jsxs)(be,{variant:"outline",disabled:q(a.id),onClick:b=>{b.stopPropagation(),O(a.id)},className:"flex-1 bg-white/5 border-white/20 text-white hover:bg-white/10 disabled:opacity-50",children:[(0,ac.jsx)(nL,{className:"w-4 h-4 mr-2"}),"Decline"]}),(0,ac.jsxs)(be,{variant:"outline",disabled:q(a.id),onClick:b=>{b.stopPropagation(),L(a.id)},className:"flex-1 bg-white/5 border-white/20 text-white hover:bg-white/10 disabled:opacity-50",children:[(0,ac.jsx)(nN,{className:"w-4 h-4 mr-2"}),"Block"]})]})]},a.id))})}),(0,ac.jsx)(fC,{value:"suggestions",children:0===E.length?(0,ac.jsx)(gl,{className:"p-8 backdrop-blur-xl bg-white/5 border-white/20 text-white/70 text-center",children:"No suggestions right now."}):(0,ac.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(a=>(0,ac.jsxs)(gl,{className:"p-6 backdrop-blur-xl bg-white/10 border-white/20 hover:bg-white/15 transition-colors focus:outline-none focus:ring-2 focus:ring-white/40",role:"button",tabIndex:0,onClick:()=>r(a.id),onKeyDown:b=>s(b,a.id),children:[(0,ac.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,ac.jsxs)(d$,{className:"w-14 h-14 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white",children:a.name}),(0,ac.jsx)("div",{className:"text-white/60 text-sm",children:a.username}),(0,ac.jsxs)("div",{className:"text-white/40 text-xs mt-1",children:[a.mutualFriends," mutual friends"]})]})]}),(0,ac.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,ac.jsxs)(be,{onClick:b=>{b.stopPropagation(),H(a.id)},disabled:q(a.id),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 disabled:opacity-50",children:[(0,ac.jsx)(fG,{className:"w-4 h-4 mr-2"}),"Add Friend"]}),(0,ac.jsxs)(be,{variant:"outline",className:"flex-1 bg-white/5 border-white/20 text-white hover:bg-white/10",onClick:b=>{b.stopPropagation(),P(a.id)},children:[(0,ac.jsx)(nL,{className:"w-4 h-4 mr-2"}),"Hide"]}),(0,ac.jsxs)(be,{variant:"outline",disabled:q(a.id),onClick:b=>{b.stopPropagation(),L(a.id)},className:"flex-1 bg-white/5 border-white/20 text-white hover:bg-white/10 disabled:opacity-50",children:[(0,ac.jsx)(nN,{className:"w-4 h-4 mr-2"}),"Block"]})]})]},a.id))})}),(0,ac.jsx)(fC,{value:"blocked",children:0===G.length?(0,ac.jsx)(gl,{className:"p-8 backdrop-blur-xl bg-white/5 border-white/20 text-white/70 text-center",children:"You have not blocked anyone."}):(0,ac.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G.map(a=>(0,ac.jsxs)(gl,{className:"p-6 backdrop-blur-xl bg-white/10 border-white/20 hover:bg-white/15 transition-colors focus:outline-none focus:ring-2 focus:ring-white/40",role:"button",tabIndex:0,onClick:()=>r(a.id),onKeyDown:b=>s(b,a.id),children:[(0,ac.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,ac.jsxs)(d$,{className:"w-14 h-14 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white",children:a.name}),(0,ac.jsx)("div",{className:"text-white/60 text-sm",children:a.username}),(0,ac.jsx)("div",{className:"text-white/40 text-xs mt-1",children:"Blocked connection"})]})]}),(0,ac.jsxs)(be,{variant:"outline",disabled:q(a.id),onClick:b=>{b.stopPropagation(),M(a.id)},className:"w-full bg-white/5 border-white/20 text-white hover:bg-white/10 disabled:opacity-50",children:[(0,ac.jsx)(nK,{className:"w-4 h-4 mr-2"}),"Unblock"]})]},a.id))})})]})}):(0,ac.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,ac.jsx)(gl,{className:"p-8 backdrop-blur-xl bg-white/10 border-white/20 text-center text-white/80",children:"Sign in to see your friends and requests."})})}function nQ({className:a,...b}){return(0,ac.jsx)("div",{"data-slot":"skeleton",className:bc("bg-accent animate-pulse rounded-md",a),...b})}let nR=bj("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),nS=bj("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),nT=bj("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),nU=bj("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),nV=bj("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);function nW(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function nX(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function nY(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=nX(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():nX(a[b],null)}}}}(...a),a)}var nZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),n$=globalThis?.document?ad.useLayoutEffect:()=>{},n_=ad[" useInsertionEffect ".trim().toString()]||n$;function n0({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return n_(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}Symbol("RADIX:SYNC_STATE");var n1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),n2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});ad.forwardRef((a,b)=>(0,ac.jsx)(n1.span,{...a,ref:b,style:{...n2,...a.style}})).displayName="VisuallyHidden";var n3=[" ","Enter","ArrowUp","ArrowDown"],n4=[" ","Enter"],n5="Select",[n6,n7,n8]=eR(n5),[n9,oa]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(n5,[n8,kY]),ob=kY(),[oc,od]=n9(n5),[oe,of]=n9(n5),og=a=>{let{__scopeSelect:b,children:c,open:d,defaultOpen:e,onOpenChange:f,value:g,defaultValue:h,onValueChange:i,dir:j,name:k,autoComplete:l,disabled:m,required:n,form:o}=a,p=ob(b),[q,r]=ad.useState(null),[s,t]=ad.useState(null),[u,v]=ad.useState(!1),w=ea(j),[x,y]=n0({prop:d,defaultProp:e??!1,onChange:f,caller:n5}),[z,A]=n0({prop:g,defaultProp:h,onChange:i,caller:n5}),B=ad.useRef(null),C=!q||o||!!q.closest("form"),[D,E]=ad.useState(new Set),F=Array.from(D).map(a=>a.props.value).join(";");return(0,ac.jsx)(k_,{...p,children:(0,ac.jsxs)(oc,{required:n,scope:b,trigger:q,onTriggerChange:r,valueNode:s,onValueNodeChange:t,valueNodeHasChildren:u,onValueNodeHasChildrenChange:v,contentId:eZ(),value:z,onValueChange:A,open:x,onOpenChange:y,dir:w,triggerPointerDownPosRef:B,disabled:m,children:[(0,ac.jsx)(n6.Provider,{scope:b,children:(0,ac.jsx)(oe,{scope:a.__scopeSelect,onNativeOptionAdd:ad.useCallback(a=>{E(b=>new Set(b).add(a))},[]),onNativeOptionRemove:ad.useCallback(a=>{E(b=>{let c=new Set(b);return c.delete(a),c})},[]),children:c})}),C?(0,ac.jsxs)(oR,{"aria-hidden":!0,required:n,tabIndex:-1,name:k,autoComplete:l,value:z,onChange:a=>A(a.target.value),disabled:m,form:o,children:[void 0===z?(0,ac.jsx)("option",{value:""}):null,Array.from(D)]},F):null]})})};og.displayName=n5;var oh="SelectTrigger",oi=ad.forwardRef((a,b)=>{let{__scopeSelect:c,disabled:d=!1,...e}=a,f=ob(c),g=od(oh,c),h=g.disabled||d,i=nY(b,g.onTriggerChange),j=n7(c),k=ad.useRef("touch"),[l,m,n]=oT(a=>{let b=j().filter(a=>!a.disabled),c=b.find(a=>a.value===g.value),d=oU(b,a,c);void 0!==d&&g.onValueChange(d.value)}),o=a=>{h||(g.onOpenChange(!0),n()),a&&(g.triggerPointerDownPosRef.current={x:Math.round(a.pageX),y:Math.round(a.pageY)})};return(0,ac.jsx)(k1,{asChild:!0,...f,children:(0,ac.jsx)(nZ.button,{type:"button",role:"combobox","aria-controls":g.contentId,"aria-expanded":g.open,"aria-required":g.required,"aria-autocomplete":"none",dir:g.dir,"data-state":g.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":oS(g.value)?"":void 0,...e,ref:i,onClick:nW(e.onClick,a=>{a.currentTarget.focus(),"mouse"!==k.current&&o(a)}),onPointerDown:nW(e.onPointerDown,a=>{k.current=a.pointerType;let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),0===a.button&&!1===a.ctrlKey&&"mouse"===a.pointerType&&(o(a),a.preventDefault())}),onKeyDown:nW(e.onKeyDown,a=>{let b=""!==l.current;a.ctrlKey||a.altKey||a.metaKey||1!==a.key.length||m(a.key),(!b||" "!==a.key)&&n3.includes(a.key)&&(o(),a.preventDefault())})})})});oi.displayName=oh;var oj="SelectValue",ok=ad.forwardRef((a,b)=>{let{__scopeSelect:c,className:d,style:e,children:f,placeholder:g="",...h}=a,i=od(oj,c),{onValueNodeHasChildrenChange:j}=i,k=void 0!==f,l=nY(b,i.onValueNodeChange);return n$(()=>{j(k)},[j,k]),(0,ac.jsx)(nZ.span,{...h,ref:l,style:{pointerEvents:"none"},children:oS(i.value)?(0,ac.jsx)(ac.Fragment,{children:g}):f})});ok.displayName=oj;var ol=ad.forwardRef((a,b)=>{let{__scopeSelect:c,children:d,...e}=a;return(0,ac.jsx)(nZ.span,{"aria-hidden":!0,...e,ref:b,children:d||""})});ol.displayName="SelectIcon";var om=a=>(0,ac.jsx)(gX,{asChild:!0,...a});om.displayName="SelectPortal";var on="SelectContent",oo=ad.forwardRef((a,b)=>{let c=od(on,a.__scopeSelect),[d,e]=ad.useState();return(n$(()=>{e(new DocumentFragment)},[]),c.open)?(0,ac.jsx)(os,{...a,ref:b}):d?dL.createPortal((0,ac.jsx)(op,{scope:a.__scopeSelect,children:(0,ac.jsx)(n6.Slot,{scope:a.__scopeSelect,children:(0,ac.jsx)("div",{children:a.children})})}),d):null});oo.displayName=on;var[op,oq]=n9(on),or=ah("SelectContent.RemoveScroll"),os=ad.forwardRef((a,b)=>{let{__scopeSelect:c,position:d="item-aligned",onCloseAutoFocus:e,onEscapeKeyDown:f,onPointerDownOutside:g,side:h,sideOffset:i,align:j,alignOffset:k,arrowPadding:l,collisionBoundary:m,collisionPadding:n,sticky:o,hideWhenDetached:p,avoidCollisions:q,...r}=a,s=od(on,c),[t,u]=ad.useState(null),[v,w]=ad.useState(null),x=nY(b,a=>u(a)),[y,z]=ad.useState(null),[A,B]=ad.useState(null),C=n7(c),[D,E]=ad.useState(!1),F=ad.useRef(!1);ad.useEffect(()=>{if(t)return hD(t)},[t]),g$();let G=ad.useCallback(a=>{let[b,...c]=C().map(a=>a.ref.current),[d]=c.slice(-1),e=document.activeElement;for(let c of a)if(c===e||(c?.scrollIntoView({block:"nearest"}),c===b&&v&&(v.scrollTop=0),c===d&&v&&(v.scrollTop=v.scrollHeight),c?.focus(),document.activeElement!==e))return},[C,v]),H=ad.useCallback(()=>G([y,t]),[G,y,t]);ad.useEffect(()=>{D&&H()},[D,H]);let{onOpenChange:I,triggerPointerDownPosRef:J}=s;ad.useEffect(()=>{if(t){let a={x:0,y:0},b=b=>{a={x:Math.abs(Math.round(b.pageX)-(J.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(J.current?.y??0))}},c=c=>{a.x<=10&&a.y<=10?c.preventDefault():t.contains(c.target)||I(!1),document.removeEventListener("pointermove",b),J.current=null};return null!==J.current&&(document.addEventListener("pointermove",b),document.addEventListener("pointerup",c,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",c,{capture:!0})}}},[t,I,J]),ad.useEffect(()=>{let a=()=>I(!1);return window.addEventListener("blur",a),window.addEventListener("resize",a),()=>{window.removeEventListener("blur",a),window.removeEventListener("resize",a)}},[I]);let[K,L]=oT(a=>{let b=C().filter(a=>!a.disabled),c=b.find(a=>a.ref.current===document.activeElement),d=oU(b,a,c);d&&setTimeout(()=>d.ref.current.focus())}),M=ad.useCallback((a,b,c)=>{let d=!F.current&&!c;(void 0!==s.value&&s.value===b||d)&&(z(a),d&&(F.current=!0))},[s.value]),N=ad.useCallback(()=>t?.focus(),[t]),O=ad.useCallback((a,b,c)=>{let d=!F.current&&!c;(void 0!==s.value&&s.value===b||d)&&B(a)},[s.value]),P="popper"===d?ou:ot,Q=P===ou?{side:h,sideOffset:i,align:j,alignOffset:k,arrowPadding:l,collisionBoundary:m,collisionPadding:n,sticky:o,hideWhenDetached:p,avoidCollisions:q}:{};return(0,ac.jsx)(op,{scope:c,content:t,viewport:v,onViewportChange:w,itemRefCallback:M,selectedItem:y,onItemLeave:N,itemTextRefCallback:O,focusSelectedItem:H,selectedItemText:A,position:d,isPositioned:D,searchRef:K,children:(0,ac.jsx)(hw,{as:or,allowPinchZoom:!0,children:(0,ac.jsx)(gP,{asChild:!0,trapped:s.open,onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:nW(e,a=>{s.trigger?.focus({preventScroll:!0}),a.preventDefault()}),children:(0,ac.jsx)(gG,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:a=>a.preventDefault(),onDismiss:()=>s.onOpenChange(!1),children:(0,ac.jsx)(P,{role:"listbox",id:s.contentId,"data-state":s.open?"open":"closed",dir:s.dir,onContextMenu:a=>a.preventDefault(),...r,...Q,onPlaced:()=>E(!0),ref:x,style:{display:"flex",flexDirection:"column",outline:"none",...r.style},onKeyDown:nW(r.onKeyDown,a=>{let b=a.ctrlKey||a.altKey||a.metaKey;if("Tab"===a.key&&a.preventDefault(),b||1!==a.key.length||L(a.key),["ArrowUp","ArrowDown","Home","End"].includes(a.key)){let b=C().filter(a=>!a.disabled).map(a=>a.ref.current);if(["ArrowUp","End"].includes(a.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(a.key)){let c=a.target,d=b.indexOf(c);b=b.slice(d+1)}setTimeout(()=>G(b)),a.preventDefault()}})})})})})})});os.displayName="SelectContentImpl";var ot=ad.forwardRef((a,b)=>{let{__scopeSelect:c,onPlaced:d,...e}=a,f=od(on,c),g=oq(on,c),[h,i]=ad.useState(null),[j,k]=ad.useState(null),l=nY(b,a=>k(a)),m=n7(c),n=ad.useRef(!1),o=ad.useRef(!0),{viewport:p,selectedItem:q,selectedItemText:r,focusSelectedItem:s}=g,t=ad.useCallback(()=>{if(f.trigger&&f.valueNode&&h&&j&&p&&q&&r){let a=f.trigger.getBoundingClientRect(),b=j.getBoundingClientRect(),c=f.valueNode.getBoundingClientRect(),e=r.getBoundingClientRect();if("rtl"!==f.dir){let d=e.left-b.left,f=c.left-d,g=a.left-f,i=a.width+g,j=Math.max(i,b.width),k=ec(f,[10,Math.max(10,window.innerWidth-10-j)]);h.style.minWidth=i+"px",h.style.left=k+"px"}else{let d=b.right-e.right,f=window.innerWidth-c.right-d,g=window.innerWidth-a.right-f,i=a.width+g,j=Math.max(i,b.width),k=ec(f,[10,Math.max(10,window.innerWidth-10-j)]);h.style.minWidth=i+"px",h.style.right=k+"px"}let g=m(),i=window.innerHeight-20,k=p.scrollHeight,l=window.getComputedStyle(j),o=parseInt(l.borderTopWidth,10),s=parseInt(l.paddingTop,10),t=parseInt(l.borderBottomWidth,10),u=o+s+k+parseInt(l.paddingBottom,10)+t,v=Math.min(5*q.offsetHeight,u),w=window.getComputedStyle(p),x=parseInt(w.paddingTop,10),y=parseInt(w.paddingBottom,10),z=a.top+a.height/2-10,A=q.offsetHeight/2,B=o+s+(q.offsetTop+A);if(B<=z){let a=g.length>0&&q===g[g.length-1].ref.current;h.style.bottom="0px";let b=Math.max(i-z,A+(a?y:0)+(j.clientHeight-p.offsetTop-p.offsetHeight)+t);h.style.height=B+b+"px"}else{let a=g.length>0&&q===g[0].ref.current;h.style.top="0px";let b=Math.max(z,o+p.offsetTop+(a?x:0)+A);h.style.height=b+(u-B)+"px",p.scrollTop=B-z+p.offsetTop}h.style.margin="10px 0",h.style.minHeight=v+"px",h.style.maxHeight=i+"px",d?.(),requestAnimationFrame(()=>n.current=!0)}},[m,f.trigger,f.valueNode,h,j,p,q,r,f.dir,d]);n$(()=>t(),[t]);let[u,v]=ad.useState();n$(()=>{j&&v(window.getComputedStyle(j).zIndex)},[j]);let w=ad.useCallback(a=>{a&&!0===o.current&&(t(),s?.(),o.current=!1)},[t,s]);return(0,ac.jsx)(ov,{scope:c,contentWrapper:h,shouldExpandOnScrollRef:n,onScrollButtonChange:w,children:(0,ac.jsx)("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:u},children:(0,ac.jsx)(nZ.div,{...e,ref:l,style:{boxSizing:"border-box",maxHeight:"100%",...e.style}})})})});ot.displayName="SelectItemAlignedPosition";var ou=ad.forwardRef((a,b)=>{let{__scopeSelect:c,align:d="start",collisionPadding:e=10,...f}=a,g=ob(c);return(0,ac.jsx)(k5,{...g,...f,ref:b,align:d,collisionPadding:e,style:{boxSizing:"border-box",...f.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ou.displayName="SelectPopperPosition";var[ov,ow]=n9(on,{}),ox="SelectViewport",oy=ad.forwardRef((a,b)=>{let{__scopeSelect:c,nonce:d,...e}=a,f=oq(ox,c),g=ow(ox,c),h=nY(b,f.onViewportChange),i=ad.useRef(0);return(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:d}),(0,ac.jsx)(n6.Slot,{scope:c,children:(0,ac.jsx)(nZ.div,{"data-radix-select-viewport":"",role:"presentation",...e,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...e.style},onScroll:nW(e.onScroll,a=>{let b=a.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=g;if(d?.current&&c){let a=Math.abs(i.current-b.scrollTop);if(a>0){let d=window.innerHeight-20,e=Math.max(parseFloat(c.style.minHeight),parseFloat(c.style.height));if(e<d){let f=e+a,g=Math.min(d,f),h=f-g;c.style.height=g+"px","0px"===c.style.bottom&&(b.scrollTop=h>0?h:0,c.style.justifyContent="flex-end")}}}i.current=b.scrollTop})})})]})});oy.displayName=ox;var oz="SelectGroup",[oA,oB]=n9(oz);ad.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a,e=eZ();return(0,ac.jsx)(oA,{scope:c,id:e,children:(0,ac.jsx)(nZ.div,{role:"group","aria-labelledby":e,...d,ref:b})})}).displayName=oz;var oC="SelectLabel";ad.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a,e=oB(oC,c);return(0,ac.jsx)(nZ.div,{id:e.id,...d,ref:b})}).displayName=oC;var oD="SelectItem",[oE,oF]=n9(oD),oG=ad.forwardRef((a,b)=>{let{__scopeSelect:c,value:d,disabled:e=!1,textValue:f,...g}=a,h=od(oD,c),i=oq(oD,c),j=h.value===d,[k,l]=ad.useState(f??""),[m,n]=ad.useState(!1),o=nY(b,a=>i.itemRefCallback?.(a,d,e)),p=eZ(),q=ad.useRef("touch"),r=()=>{e||(h.onValueChange(d),h.onOpenChange(!1))};if(""===d)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,ac.jsx)(oE,{scope:c,value:d,disabled:e,textId:p,isSelected:j,onItemTextChange:ad.useCallback(a=>{l(b=>b||(a?.textContent??"").trim())},[]),children:(0,ac.jsx)(n6.ItemSlot,{scope:c,value:d,disabled:e,textValue:k,children:(0,ac.jsx)(nZ.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":j&&m,"data-state":j?"checked":"unchecked","aria-disabled":e||void 0,"data-disabled":e?"":void 0,tabIndex:e?void 0:-1,...g,ref:o,onFocus:nW(g.onFocus,()=>n(!0)),onBlur:nW(g.onBlur,()=>n(!1)),onClick:nW(g.onClick,()=>{"mouse"!==q.current&&r()}),onPointerUp:nW(g.onPointerUp,()=>{"mouse"===q.current&&r()}),onPointerDown:nW(g.onPointerDown,a=>{q.current=a.pointerType}),onPointerMove:nW(g.onPointerMove,a=>{q.current=a.pointerType,e?i.onItemLeave?.():"mouse"===q.current&&a.currentTarget.focus({preventScroll:!0})}),onPointerLeave:nW(g.onPointerLeave,a=>{a.currentTarget===document.activeElement&&i.onItemLeave?.()}),onKeyDown:nW(g.onKeyDown,a=>{(i.searchRef?.current===""||" "!==a.key)&&(n4.includes(a.key)&&r()," "===a.key&&a.preventDefault())})})})})});oG.displayName=oD;var oH="SelectItemText",oI=ad.forwardRef((a,b)=>{let{__scopeSelect:c,className:d,style:e,...f}=a,g=od(oH,c),h=oq(oH,c),i=oF(oH,c),j=of(oH,c),[k,l]=ad.useState(null),m=nY(b,a=>l(a),i.onItemTextChange,a=>h.itemTextRefCallback?.(a,i.value,i.disabled)),n=k?.textContent,o=ad.useMemo(()=>(0,ac.jsx)("option",{value:i.value,disabled:i.disabled,children:n},i.value),[i.disabled,i.value,n]),{onNativeOptionAdd:p,onNativeOptionRemove:q}=j;return n$(()=>(p(o),()=>q(o)),[p,q,o]),(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(nZ.span,{id:i.textId,...f,ref:m}),i.isSelected&&g.valueNode&&!g.valueNodeHasChildren?dL.createPortal(f.children,g.valueNode):null]})});oI.displayName=oH;var oJ="SelectItemIndicator",oK=ad.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a;return oF(oJ,c).isSelected?(0,ac.jsx)(nZ.span,{"aria-hidden":!0,...d,ref:b}):null});oK.displayName=oJ;var oL="SelectScrollUpButton",oM=ad.forwardRef((a,b)=>{let c=oq(oL,a.__scopeSelect),d=ow(oL,a.__scopeSelect),[e,f]=ad.useState(!1),g=nY(b,d.onScrollButtonChange);return n$(()=>{if(c.viewport&&c.isPositioned){let a=function(){f(b.scrollTop>0)},b=c.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[c.viewport,c.isPositioned]),e?(0,ac.jsx)(oP,{...a,ref:g,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=c;a&&b&&(a.scrollTop=a.scrollTop-b.offsetHeight)}}):null});oM.displayName=oL;var oN="SelectScrollDownButton",oO=ad.forwardRef((a,b)=>{let c=oq(oN,a.__scopeSelect),d=ow(oN,a.__scopeSelect),[e,f]=ad.useState(!1),g=nY(b,d.onScrollButtonChange);return n$(()=>{if(c.viewport&&c.isPositioned){let a=function(){let a=b.scrollHeight-b.clientHeight;f(Math.ceil(b.scrollTop)<a)},b=c.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[c.viewport,c.isPositioned]),e?(0,ac.jsx)(oP,{...a,ref:g,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=c;a&&b&&(a.scrollTop=a.scrollTop+b.offsetHeight)}}):null});oO.displayName=oN;var oP=ad.forwardRef((a,b)=>{let{__scopeSelect:c,onAutoScroll:d,...e}=a,f=oq("SelectScrollButton",c),g=ad.useRef(null),h=n7(c),i=ad.useCallback(()=>{null!==g.current&&(window.clearInterval(g.current),g.current=null)},[]);return ad.useEffect(()=>()=>i(),[i]),n$(()=>{let a=h().find(a=>a.ref.current===document.activeElement);a?.ref.current?.scrollIntoView({block:"nearest"})},[h]),(0,ac.jsx)(nZ.div,{"aria-hidden":!0,...e,ref:b,style:{flexShrink:0,...e.style},onPointerDown:nW(e.onPointerDown,()=>{null===g.current&&(g.current=window.setInterval(d,50))}),onPointerMove:nW(e.onPointerMove,()=>{f.onItemLeave?.(),null===g.current&&(g.current=window.setInterval(d,50))}),onPointerLeave:nW(e.onPointerLeave,()=>{i()})})});ad.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a;return(0,ac.jsx)(nZ.div,{"aria-hidden":!0,...d,ref:b})}).displayName="SelectSeparator";var oQ="SelectArrow";ad.forwardRef((a,b)=>{let{__scopeSelect:c,...d}=a,e=ob(c),f=od(oQ,c),g=oq(oQ,c);return f.open&&"popper"===g.position?(0,ac.jsx)(k8,{...e,...d,ref:b}):null}).displayName=oQ;var oR=ad.forwardRef(({__scopeSelect:a,value:b,...c},d)=>{let e,f=ad.useRef(null),g=nY(d,f),h=(e=ad.useRef({value:b,previous:b}),ad.useMemo(()=>(e.current.value!==b&&(e.current.previous=e.current.value,e.current.value=b),e.current.previous),[b]));return ad.useEffect(()=>{let a=f.current;if(!a)return;let c=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(h!==b&&c){let d=new Event("change",{bubbles:!0});c.call(a,b),a.dispatchEvent(d)}},[h,b]),(0,ac.jsx)(nZ.select,{...c,style:{...n2,...c.style},ref:g,defaultValue:b})});function oS(a){return""===a||void 0===a}function oT(a){let b,c=(b=ad.useRef(a),ad.useEffect(()=>{b.current=a}),ad.useMemo(()=>(...a)=>b.current?.(...a),[])),d=ad.useRef(""),e=ad.useRef(0),f=ad.useCallback(a=>{let b=d.current+a;c(b),function a(b){d.current=b,window.clearTimeout(e.current),""!==b&&(e.current=window.setTimeout(()=>a(""),1e3))}(b)},[c]),g=ad.useCallback(()=>{d.current="",window.clearTimeout(e.current)},[]);return ad.useEffect(()=>()=>window.clearTimeout(e.current),[]),[d,f,g]}function oU(a,b,c){var d,e;let f=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,g=c?a.indexOf(c):-1,h=(d=a,e=Math.max(g,0),d.map((a,b)=>d[(e+b)%d.length]));1===f.length&&(h=h.filter(a=>a!==c));let i=h.find(a=>a.textValue.toLowerCase().startsWith(f.toLowerCase()));return i!==c?i:void 0}oR.displayName="SelectBubbleInput";let oV=bj("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),oW=bj("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function oX({...a}){return(0,ac.jsx)(og,{"data-slot":"select",...a})}function oY({...a}){return(0,ac.jsx)(ok,{"data-slot":"select-value",...a})}function oZ({className:a,size:b="default",children:c,...d}){return(0,ac.jsxs)(oi,{"data-slot":"select-trigger","data-size":b,className:bc("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...d,children:[c,(0,ac.jsx)(ol,{asChild:!0,children:(0,ac.jsx)(oV,{className:"size-4 opacity-50"})})]})}function o$({className:a,children:b,position:c="popper",...d}){return(0,ac.jsx)(om,{children:(0,ac.jsxs)(oo,{"data-slot":"select-content",className:bc("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...d,children:[(0,ac.jsx)(o0,{}),(0,ac.jsx)(oy,{className:bc("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:b}),(0,ac.jsx)(o1,{})]})})}function o_({className:a,children:b,...c}){return(0,ac.jsxs)(oG,{"data-slot":"select-item",className:bc("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...c,children:[(0,ac.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,ac.jsx)(oK,{children:(0,ac.jsx)(fI,{className:"size-4"})})}),(0,ac.jsx)(oI,{children:b})]})}function o0({className:a,...b}){return(0,ac.jsx)(oM,{"data-slot":"select-scroll-up-button",className:bc("flex cursor-default items-center justify-center py-1",a),...b,children:(0,ac.jsx)(oW,{className:"size-4"})})}function o1({className:a,...b}){return(0,ac.jsx)(oO,{"data-slot":"select-scroll-down-button",className:bc("flex cursor-default items-center justify-center py-1",a),...b,children:(0,ac.jsx)(oV,{className:"size-4"})})}let o2=`https://${dF}.supabase.co/functions/v1/make-server-a14c7986`,o3={Authorization:`Bearer ${dG}`},o4={...o3,"Content-Type":"application/json"},o5=a=>{let b=Math.floor(Math.max(0,a)),c=Math.floor(b/60);return`${c}:${(b%60).toString().padStart(2,"0")}`},o6=[{label:"Public",value:"public",description:"Everyone on MoveYSplash can view your story"},{label:"Friends",value:"friends",description:"Only your connections can view"},{label:"Close friends",value:"close_friends",description:"Share with your inner circle only"}],o7=a=>{let b=new Date(a);if(Number.isNaN(b.getTime()))return"";let c=Math.floor((Date.now()-b.getTime())/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;let d=Math.floor(c/60);if(d<24)return`${d}h ago`;let e=Math.floor(d/24);return e<7?`${e}d ago`:b.toLocaleDateString()},o8="https://api.dicebear.com/7.x/shapes/svg?seed=MoveSplashStory&backgroundColor=transparent",o9=[{id:"offline-story-1",userId:"demo-user-1",user:{id:"demo-user-1",name:"Offline Demo",username:"demo",avatar:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=256&q=80",ablyClientId:"demo-user-1"},items:[{id:"offline-item-1",type:"image",url:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=1200&q=80",duration:6,timestamp:new Date().toISOString()}],viewers:[],visibility:"public",createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+864e5).toISOString(),likes:[],replies:[]}],pa=a=>{},pb=()=>[],pc=a=>{},pd=a=>({id:a.id,userId:a.userId,user:a.user,items:a.items.map(a=>({...a,url:"string"==typeof a.url&&""!==a.url.trim()&&"__existing__"!==a.url?a.url:o8})),viewers:a.viewers,visibility:a.visibility,createdAt:a.createdAt,expiresAt:a.expiresAt,likes:a.likes,replies:a.replies.map(a=>({id:a.id,storyId:a.storyId,authorId:a.authorId,content:a.content,timestamp:a.timestamp,author:a.author??void 0}))});function pe(){let{currentUser:a,allUsers:b}=f3(),[c,d]=(0,ad.useState)([]),[e,f]=(0,ad.useState)(null),[g,h]=(0,ad.useState)(0),[i,j]=(0,ad.useState)(""),[k,l]=(0,ad.useState)(!0),[m,n]=(0,ad.useState)(null),[o,p]=(0,ad.useState)(!1),q=(0,ad.useRef)(null),[r,s]=(0,ad.useState)([]),[t,u]=(0,ad.useState)("friends"),[v,w]=(0,ad.useState)(!1),[x,y]=(0,ad.useState)(null),[z,A]=(0,ad.useState)(!1),B=(0,ad.useRef)(null),[C,D]=(0,ad.useState)(null),[E,F]=(0,ad.useState)(!1),[G,H]=(0,ad.useState)(!1),[I,J]=(0,ad.useState)(null),[K,L]=(0,ad.useState)(null),[M,N]=(0,ad.useState)("user"),[O,P]=(0,ad.useState)(!1),Q=(0,ad.useRef)(null),R=(0,ad.useRef)(null),S=(0,ad.useRef)([]),T=(0,ad.useRef)(null),U=(0,ad.useRef)(!1),V=(0,ad.useRef)("video/webm"),W=(0,ad.useRef)(0),[X,Y]=(0,ad.useState)(!1),[Z,$]=(0,ad.useState)(0),[_,aa]=(0,ad.useState)(null),[ab,ae]=(0,ad.useState)(!0),[af,ag]=(0,ad.useState)(0),ah=(0,ad.useCallback)(a=>encodeURIComponent(a),[]),ai=(0,ad.useRef)([]),aj=(0,ad.useRef)(0);(0,ad.useRef)(new Set);let[ak,al]=(0,ad.useState)(!1);(0,ad.useEffect)(()=>{let a=[];a.length>0&&(ai.current=a,d(a),l(!1)),al(!0)},[]);let am=(0,ad.useCallback)(async a=>{let b=null,c=null,e=()=>{b?.abort()};try{if(ai.current.length>0&&(d(ai.current),l(!1)),!a?.aborted&&(Date.now()-aj.current>45e3||0===ai.current.length)&&(l(!0),n(null)),b=new AbortController,a){if(a.aborted)return void b.abort();a.addEventListener("abort",e)}c=window.setTimeout(e,4500);let f=await fetch(`${o2}/stories`,{headers:o3,signal:b?.signal});if(!f.ok)throw Error("Failed to fetch stories");let g=await f.json().catch(()=>({}));if(!a?.aborted){let a=Array.isArray(g?.stories)?g.stories:[];ai.current=a,aj.current=Date.now(),pa(a),d(a)}}catch(b){if("AbortError"===b.name)return;console.error("Error loading stories:",b),a?.aborted||(ai.current.length>0?(n("Using your last stories until connection comes back."),d(ai.current)):(d(o9),ai.current=o9,n("Offline mode: showing sample stories until we reconnect.")))}finally{a&&a.removeEventListener("abort",e),null!==c&&window.clearTimeout(c),a?.aborted||l(!1)}},[]),an=(0,ad.useCallback)(a=>{},[]),ao=(0,ad.useCallback)(async(b,c)=>{try{await fetch(`${o2}/notifications`,{method:"POST",headers:o4,body:JSON.stringify({userId:b,type:"story",content:c,actorName:a?.name||"MoveSplash friend",actorAvatar:a?.avatar})})}catch(a){console.warn("Failed to send Supabase notification:",a)}},[a?.avatar,a?.name]),ap=(0,ad.useCallback)(async c=>{if(!a||!a.friendIds?.length)return;let d=a.friendIds.map(a=>b.get(a)).filter(a=>!!a).filter(a=>a.settings?.notifyStories??!0);await Promise.allSettled(d.map(a=>ao(a.id,c)))},[b,a,ao]),aq=(0,ad.useCallback)(async(a,b=3)=>{for(let c=1;c<=b;c+=1){let d=new AbortController,e=window.setTimeout(()=>d.abort(),6e3);try{let b=await fetch(`${o2}/stories`,{method:"POST",headers:o4,body:JSON.stringify(a),signal:d.signal}),e=await b.json().catch(()=>({}));if(!b.ok||!e?.story)throw Error(e?.error||`Story publish failed (attempt ${c})`);return e.story}catch(a){if(c===b)throw a;await new Promise(a=>setTimeout(a,400*c))}finally{window.clearTimeout(e)}}return null},[]),ar=(0,ad.useCallback)((a,b)=>{d(c=>{let d=(a,b)=>Array.isArray(a)?a.map((a,c)=>{let d=b?.[c],e="string"==typeof a.url&&""!==a.url.trim()&&"__existing__"!==a.url?a.url:"",f="string"==typeof d?.url&&""!==d.url.trim()&&"__existing__"!==d.url?d.url:"",g=e||f||o8;return{...a,url:g}}):a,e={...a,items:d(a.items)};return c.some(b=>b.id===a.id)?c.map(b=>b.id===a.id?{...b,...e,items:d(e.items,b.items)}:b):b?.prepend?[e,...c]:[...c,e]})},[]),as=(0,ad.useCallback)(async()=>{let a=pb();if(!a.length)return;let b=[];for(let c of a)try{let a=await aq(c,2);a?(ar(a,{prepend:!0}),ai.current=[a,...ai.current].slice(0,30),pa(ai.current)):b.push(c)}catch{b.push(c)}return pc(b),0===b.length},[ar,aq]),at=(0,ad.useCallback)(a=>a?{id:a.id,name:a.name,username:a.username,avatar:a.avatar,ablyClientId:a.ablyClientId??a.id}:null,[]),au=(0,ad.useCallback)(a=>({id:a.id,userId:a.userId,visibility:a.visibility,createdAt:a.createdAt,expiresAt:a.expiresAt,viewers:a.viewers,likes:a.likes,items:a.items.map(a=>({id:a.id,type:a.type,url:"string"==typeof a.url&&""!==a.url.trim()?a.url:o8,duration:a.duration,timestamp:a.timestamp??new Date().toISOString()})),user:{id:a.user.id,name:a.user.name,username:a.user.username,avatar:a.user.avatar,ablyClientId:a.user.ablyClientId},replies:a.replies.map(a=>({id:a.id,storyId:a.storyId,authorId:a.authorId,content:a.content,timestamp:a.timestamp,author:a.author?{id:a.author.id,name:a.author.name,username:a.author.username,avatar:a.author.avatar,ablyClientId:a.author.ablyClientId}:void 0}))}),[]),av=(0,ad.useCallback)(async a=>{try{let b=at(a.user),c=await fetch(`${o2}/stories`,{method:"POST",headers:o4,body:JSON.stringify({...au(a),userSnapshot:b??void 0})});if(!c.ok)return!1;let d=await c.json().catch(()=>({}));return d?.story&&ar(d.story),!0}catch(a){return console.error("Failed to ensure story on server:",a),!1}},[au,at,ar]),aw=(0,ad.useCallback)(a=>{if(!a)return;let b=Array.from(a).filter(a=>a.type.startsWith("image/")||a.type.startsWith("video/"));if(0===b.length){y("Only image or video files are supported for stories."),fV.error("Only image or video files are supported for stories.");return}let c=Math.max(5-r.length,0);if(c<=0){y("You can add up to 5 story items."),fV.info("You can add up to 5 story items.");return}let d=b.slice(0,c),e=b.length>d.length;d.forEach(a=>{let b=new FileReader;b.onload=b=>{let c=b.target?.result;if(!c||"string"!=typeof c)return;let d=a.type.startsWith("video/");s(b=>[...b,{id:`${a.name}-${Date.now()}`,type:d?"video":"image",url:c,duration:d?15:6}])},b.readAsDataURL(a)}),d.length>0&&y(null),e&&fV.info(`Only the first ${c} files were added.`)},[r.length]),ax=(0,ad.useCallback)(a=>{aw(a.target.files),a.target.value=""},[aw]),ay=(0,ad.useCallback)(a=>{a.preventDefault(),A(!1),aw(a.dataTransfer.files)},[aw]),az=(0,ad.useCallback)(a=>{a.preventDefault(),a.dataTransfer.dropEffect="copy",z||A(!0)},[z]),aA=(0,ad.useCallback)(a=>{a.preventDefault(),A(!1)},[]),aB=(0,ad.useCallback)(()=>{null!==T.current&&(window.clearInterval(T.current),T.current=null)},[]),aC=(0,ad.useCallback)(async()=>{aB();let a=U.current;U.current=!1;let b=S.current;S.current=[],R.current=null;let c=V.current||"video/webm",d=Math.max(W.current,0);if(W.current=0,Y(!1),$(0),a||0===b.length){a&&b.length>0&&fV.info("Recording discarded.");return}try{let a=new Blob(b,{type:c}),e=await new Promise((b,c)=>{let d=new FileReader;d.onloadend=()=>{"string"==typeof d.result?b(d.result):c(Error("Unable to read recording data"))},d.onerror=c,d.readAsDataURL(a)});s(a=>{if(a.length>=5)return fV.info("You can add up to 5 story items."),a;let b=Math.min(15,Math.max(3,Math.round(d)||15));return[...a,{id:`recording-${Date.now()}`,type:"video",url:e,duration:b}]}),fV.success("Video added to your story.")}catch(a){console.error("Failed to save recording:",a),fV.error("Unable to save that recording.")}},[s,aB]),aD=(0,ad.useCallback)((a=!1)=>{if(!R.current){U.current=!1;return}U.current=a,"inactive"!==R.current.state&&R.current.stop()},[]),aE=(0,ad.useCallback)(()=>{G&&I?X?fV.info("Recording already in progress."):(aa("Video recording is not supported in this browser."),fV.error("Recording is not supported on this device.")):fV.info("Start the camera before recording.")},[I,aC,G,X,aD]);(0,ad.useEffect)(()=>()=>{aB(),U.current=!0,R.current&&"inactive"!==R.current.state&&R.current.stop()},[aB]);let aF=(0,ad.useCallback)(()=>{X&&aD(!0),J(a=>(a&&a.getTracks().forEach(a=>{try{a.stop()}catch(a){console.error("Error stopping camera stream track:",a)}}),null)),H(!1),P(!1),$(0),W.current=0,aa(null),L(null)},[X,aD]),aG=(0,ad.useCallback)(async(a=M)=>{if("undefined"==typeof navigator||!navigator.mediaDevices?.getUserMedia)return void L("Camera is not supported on this device.");try{aF();let b=null;try{b=await navigator.mediaDevices.getUserMedia({video:{facingMode:a},audio:!0})}catch(c){console.warn("Falling back to video-only capture for stories:",c),b=await navigator.mediaDevices.getUserMedia({video:{facingMode:a}})}J(b),H(!0),L(null)}catch(a){console.error("Error accessing camera:",a),L("Unable to access camera. Check your permissions."),H(!1)}},[aF,M]),aH=(0,ad.useCallback)(()=>{N(a=>"user"===a?"environment":"user"),G&&aG("user"===M?"environment":"user")},[M,G,aG]),aI=(0,ad.useCallback)(()=>{if(!G||!Q.current)return void fV.info("Start the camera to capture a photo.");if(X)return void fV.info("Stop the recording before taking a photo.");let a=Q.current;P(!0),s(b=>{if(b.length>=5)return fV.info("You can add up to 5 story items."),P(!1),b;let c=document.createElement("canvas"),d=a.videoWidth||720,e=a.videoHeight||1280;c.width=d,c.height=e;let f=c.getContext("2d");if(!f)return fV.error("Unable to capture photo."),P(!1),b;f.drawImage(a,0,0,d,e);let g=c.toDataURL("image/jpeg",.9);return g?(fV.success("Photo added to your story."),P(!1),[...b,{id:`camera-${Date.now()}`,type:"image",url:g,duration:6}]):(fV.error("Unable to capture photo."),P(!1),b)})},[G,X]),aJ=(0,ad.useCallback)(()=>{s([]),u("friends"),y(null),A(!1),w(!1),aF(),B.current&&(B.current.value="")},[aF]),aK=(0,ad.useCallback)(a=>{s(b=>b.filter(b=>b.id!==a))},[]),aL=(0,ad.useCallback)(a=>{p(a),a||aJ()},[aJ]),aM=(0,ad.useCallback)(async()=>{if(!a)return void fV.info("Sign in to share a story.");if(!v){if(0===r.length){y("Add at least one photo or video to your story."),fV.info("Add a photo or video before publishing.");return}w(!0),y(null);try{let b=r.map(a=>({id:a.id,type:a.type,url:a.url,duration:a.duration,timestamp:new Date().toISOString()})),c={userId:a.id,visibility:t,items:b},d=await aq(c,3);if(!d)throw Error("Failed to publish story.");ar(d,{prepend:!0}),ai.current=[d,...ai.current],aj.current=Date.now(),pa(ai.current);let e=d.id;aL(!1),fV.success("Your story is live!"),ap(`${a.name||"A friend"} posted a new story.`),am().catch(a=>{console.error("Error refreshing stories:",a)}),f(e),h(0)}catch(c){console.error("Error creating story:",c);let b={userId:a.id,visibility:t,items:r.map(a=>({id:a.id,type:a.type,url:a.url,duration:a.duration,timestamp:new Date().toISOString()}))};pc([...pb(),b]),y("Network issue. Your story is queued and will auto-post when back online."),fV.error("Offline? We queued your story and will send it when you reconnect.")}finally{w(!1)}}},[a,r,t,am,aL,ar,v,ap,aq]);(0,ad.useEffect)(()=>{if(!ak)return;let a=new AbortController;return am(a.signal),()=>a.abort()},[am,ak]),(0,ad.useEffect)(()=>{if(!ak)return;as();let a=()=>{as()};return window.addEventListener("online",a),()=>window.removeEventListener("online",a)},[as,ak]),(0,ad.useEffect)(()=>{c.length>0&&an(c)},[c,an]),(0,ad.useEffect)(()=>{let a=Q.current;a&&(I?(a.srcObject=I,(async()=>{try{await a.play()}catch(a){console.error("Error starting camera preview:",a),L("Unable to start camera preview.")}})()):a.srcObject=null)},[I]),(0,ad.useEffect)(()=>{o||aF()},[o,aF]);let aN=(0,ad.useMemo)(()=>c.filter(a=>!!a?.user&&Array.isArray(a.items)&&a.items.length>0).map(b=>{let c=b.items.map(a=>({...a,type:"video"===a.type?"video":"image"})),d=b.user,e={id:d.id,name:d.name,username:d.username,avatar:d.avatar,ablyClientId:d.ablyClientId??d.id},f=b.createdAt&&!Number.isNaN(Date.parse(b.createdAt))?new Date(b.createdAt).toISOString():new Date().toISOString(),g=b.expiresAt&&!Number.isNaN(Date.parse(b.expiresAt))?new Date(b.expiresAt).toISOString():f,h=Array.from(new Set(Array.isArray(b.likes)?b.likes.filter(a=>"string"==typeof a):[])),i=Array.isArray(b.replies)?b.replies.map((a,c)=>{if(!a||"object"!=typeof a)return null;let d="string"==typeof a.authorId?a.authorId:"";if(!d)return null;let e=a.timestamp&&!Number.isNaN(Date.parse(a.timestamp))?new Date(a.timestamp).toISOString():new Date().toISOString(),f=a.author,g=f?{id:f.id,name:f.name,username:f.username,avatar:f.avatar,ablyClientId:f.ablyClientId??f.id}:null,h="string"==typeof a.content?a.content:"";return h?{id:a.id||`${b.id}-reply-${c}`,storyId:a.storyId??b.id,authorId:d,author:g,content:h,timestamp:e}:null}).filter(a=>!!a).sort((a,b)=>Date.parse(a.timestamp)-Date.parse(b.timestamp)):[];return{id:b.id,userId:b.userId,user:e,items:c,viewers:Array.isArray(b.viewers)?b.viewers:[],visibility:b.visibility??"friends",createdAt:f,expiresAt:g,viewed:!!a&&!!Array.isArray(b.viewers)&&b.viewers.includes(a.id),likes:h,likeCount:h.length,liked:!!a&&h.includes(a.id),replies:i}}).sort((a,b)=>Date.parse(b.createdAt)-Date.parse(a.createdAt)),[c,a]),aO=(0,ad.useMemo)(()=>{if(!a||aN.some(b=>b.userId===a.id))return null;let b=new Date().toISOString();return{id:`create-story-${a.id}`,userId:a.id,user:{id:a.id,name:a.name,username:a.username,avatar:a.avatar,ablyClientId:a.ablyClientId??a.id},items:[],viewers:[],visibility:"friends",createdAt:b,expiresAt:b,viewed:!1,likes:[],likeCount:0,liked:!1,replies:[]}},[a,aN]),aP=(0,ad.useMemo)(()=>aN.filter(a=>a.items.length>0),[aN]),aQ=(0,ad.useMemo)(()=>{let b=aN;return a&&(b=[...aN.filter(b=>b.userId===a.id),...aN.filter(b=>b.userId!==a.id)]),aO?[aO,...b]:b},[a,aN,aO]),aR=e?aP.find(a=>a.id===e)??null:null,aS=aR?.items[g];(0,ad.useEffect)(()=>{!e||aP.some(a=>a.id===e)||(f(null),h(0))},[e,aP]),(0,ad.useEffect)(()=>{j(""),ag(0),ae(!0)},[e]),(0,ad.useEffect)(()=>{if(!e||!a)return;let b=c.find(a=>a.id===e);if(!b||Array.isArray(b.viewers)&&b.viewers.includes(a.id))return;let f=new AbortController;return(async()=>{try{let c=ah(b.id);await fetch(`${o2}/stories/${c}/view`,{method:"POST",headers:o4,body:JSON.stringify({viewerId:a.id}),signal:f.signal}),d(c=>c.map(c=>c.id===b.id?{...c,viewers:Array.from(new Set([...c.viewers??[],a.id]))}:c))}catch(a){"AbortError"!==a.name&&console.error("Failed to update story view state:",a)}})(),()=>f.abort()},[e,a,c,ah]);let aT=(0,ad.useCallback)(()=>{if(!aR)return;if(g<aR.items.length-1)return void h(a=>a+1);let a=aP.findIndex(a=>a.id===aR.id);a>=0&&a<aP.length-1?f(aP[a+1].id):f(null),h(0)},[aR,g,aP]),aU=(0,ad.useCallback)(()=>{if(!aR)return;if(g>0)return void h(a=>a-1);let a=aP.findIndex(a=>a.id===aR.id);if(a>0){let b=aP[a-1];f(b.id),h(Math.max(b.items.length-1,0))}},[aR,g,aP]),aV=(0,ad.useCallback)(async(b,c)=>{if(!a||b.userId===a.id)return;let d=a.ablyClientId??a.id,e=Array.from(new Set([d,b.user.ablyClientId??b.user.id].filter(a=>!!a)));if(e.length<2)return;let f=`Story chat with ${b.user.name}`,g=null;try{let b=await fetch(`${o2}/chats`,{method:"POST",headers:o4,body:JSON.stringify({name:f,members:e,isGroup:!1,createdBy:a.id})}),c=await b.json().catch(()=>({}));b.ok&&c?.chat&&"string"==typeof c.chat.id?g=c.chat.id:b.ok||console.warn("Failed to ensure chat for story reply",b.status)}catch(a){console.error("Error ensuring chat for story reply:",a)}if(g)try{let b=await fetch(`${o2}/messages`,{method:"POST",headers:o4,body:JSON.stringify({chatId:g,senderId:d,senderName:a.name,senderAvatar:a.avatar,content:`Reply to your story: ${c}`})});b.ok||console.warn("Failed to persist story reply message",b.status)}catch(a){console.error("Error sending story reply message:",a)}},[a]);(0,ad.useEffect)(()=>{if(!aS||"video"!==aS.type){ag(0);let a=q.current;a&&(a.pause(),a.currentTime=0);return}let a=q.current;if(!a)return;a.muted=ab;let b=()=>aT(),c=()=>{a.duration&&ag(a.currentTime/a.duration)},d=()=>{ag(0),a.muted=ab;let b=a.play();b&&b.catch(a=>console.warn("Unable to autoplay story video:",a))};a.addEventListener("ended",b),a.addEventListener("timeupdate",c),a.addEventListener("loadedmetadata",d);let e=a.play();return e&&e.catch(a=>console.warn("Unable to autoplay story video:",a)),()=>{a.removeEventListener("ended",b),a.removeEventListener("timeupdate",c),a.removeEventListener("loadedmetadata",d)}},[aS,aT,ab]);let aW=(0,ad.useCallback)(()=>{ae(a=>{let b=!a;return q.current&&(q.current.muted=b),b})},[]),aX=(0,ad.useCallback)(async b=>{if(!a)return void fV.info("Sign in to like stories.");if(!C||C===b.id){D(b.id);try{let c=async(d=0)=>{let e=ah(b.id),f=await fetch(`${o2}/stories/${e}/like`,{method:"POST",headers:o4,body:JSON.stringify({userId:a.id,likerSnapshot:{id:a.id,name:a.name,username:a.username,avatar:a.avatar,ablyClientId:a.ablyClientId??a.id},...d>0?{storySnapshot:au(b)}:{}})});if(404===f.status&&0===d&&await av(b))return c(d+1);let g=await f.json().catch(()=>({}));return!!f.ok&&!!g?.story&&(ar(g.story),!0)};if(!await c())throw Error("restore")}catch{if(a){let c=b.likes.includes(a.id),d=c?b.likes.filter(b=>b!==a.id):[...b.likes,a.id];ar(pd({...b,likes:d,likeCount:d.length,liked:!c})),fV.success(c?"Removed like.":"Liked story!")}else fV.success("Story like recorded!")}finally{D(null)}}},[a,C,ar,ah,av,au]),aY=(0,ad.useCallback)(async()=>{if(!aR)return;let b=i.trim();if(b){if(!a)return void fV.info("Sign in to reply to stories.");F(!0);try{let c=async(d=0)=>{let e=ah(aR.id),f=await fetch(`${o2}/stories/${e}/reply`,{method:"POST",headers:o4,body:JSON.stringify({authorId:a.id,content:b,authorSnapshot:{id:a.id,name:a.name,username:a.username,avatar:a.avatar,ablyClientId:a.ablyClientId??a.id},...d>0?{storySnapshot:au(aR)}:{}})});if(404===f.status&&0===d&&await av(aR))return c(d+1);let g=await f.json().catch(()=>({}));return!!f.ok&&!!g?.story&&(ar(g.story),j(""),fV.success("Reply sent!"),aR.userId!==a.id&&ao(aR.userId,`${a.name||"Someone"} replied to your story.`),aV(aR,b),!0)};if(!await c())throw Error("restore")}catch{if(aR&&a){let c={id:`offline-${Date.now().toString(36)}`,storyId:aR.id,authorId:a.id,content:b,timestamp:new Date().toISOString(),author:{id:a.id,name:a.name,username:a.username,avatar:a.avatar,ablyClientId:a.ablyClientId??a.id}};ar(pd({...aR,replies:[...aR.replies,c]})),j(""),fV.success("Reply sent!"),aR.userId!==a.id&&ao(aR.userId,`${a.name||"Someone"} replied to your story.`),aV(aR,b)}else fV.success("Reply captured!")}finally{F(!1)}}},[aR,a,ah,av,ar,i,aV,au,ao]),aZ=k&&0===c.length;return(0,ac.jsxs)("div",{className:"max-w-7xl mx-auto space-y-4",children:[m&&(0,ac.jsxs)("div",{className:"p-4 rounded-2xl bg-white/10 border border-white/20 text-white/80 flex items-center justify-between gap-4",children:[(0,ac.jsx)("p",{className:"text-sm",children:m}),(0,ac.jsx)(be,{size:"sm",variant:"outline",onClick:()=>void am(),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:"Try again"})]}),aZ?(0,ac.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 hide-scrollbar",children:Array.from({length:5}).map((a,b)=>(0,ac.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-shrink-0",children:[(0,ac.jsx)(nQ,{className:"w-20 h-20 rounded-full bg-white/10"}),(0,ac.jsx)(nQ,{className:"w-16 h-3 bg-white/10"})]},b))}):(0,ac.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 hide-scrollbar",children:0!==aQ.length||a?aQ.map(b=>{let c=!!(a&&b.userId===a.id),d=c&&0===b.items.length,e=b.viewed&&!d?"from-white/30 via-white/20 to-white/30":"from-pink-500 via-purple-500 to-indigo-500",g=d?"Create a story":c?"View your story":`View ${b.user.name}'s story`;return(0,ac.jsxs)("button",{type:"button",onClick:()=>{a&&b.userId===a.id&&0===b.items.length?aL(!0):0!==b.items.length&&(f(b.id),h(0))},className:"relative flex flex-col items-center gap-2 flex-shrink-0 group focus:outline-none transition-transform duration-300 hover:-translate-y-1","aria-label":g,children:[(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsxs)("div",{className:`relative p-[3px] rounded-full bg-gradient-to-tr ${e} transition-all duration-500 ease-out group-hover:shadow-[0_18px_35px_rgba(168,85,247,0.35)] group-hover:scale-[1.03]`,children:[(0,ac.jsx)("div",{className:"absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 group-hover:blur-lg bg-white/25 transition-all duration-500"}),(0,ac.jsx)("div",{className:"relative p-0.5 rounded-full bg-gradient-to-br from-purple-950/80 via-purple-900/70 to-pink-900/80",children:(0,ac.jsxs)(d$,{className:"w-16 h-16 border-2 border-white/20 transition-transform duration-500 group-hover:scale-[1.04]",children:[(0,ac.jsx)(d_,{src:b.user.avatar}),(0,ac.jsx)(d0,{children:b.user.name[0]})]})})]}),d&&(0,ac.jsx)("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 rounded-full flex items-center justify-center border-2 border-purple-950 shadow-[0_12px_35px_rgba(236,72,153,0.45)] transition-transform duration-300 group-hover:scale-110",children:(0,ac.jsx)(lH,{className:"w-3.5 h-3.5 text-white"})}),c&&!d&&(0,ac.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),aL(!0)},className:"absolute -bottom-1 -right-1 flex h-7 w-7 items-center justify-center rounded-full border-2 border-purple-950 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white shadow-[0_12px_35px_rgba(236,72,153,0.45)] transition-transform duration-300 hover:scale-110 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/80","aria-label":"Add to your story",children:(0,ac.jsx)(lH,{className:"w-3.5 h-3.5"})})]}),(0,ac.jsx)("span",{className:"text-white/90 text-sm max-w-[90px] truncate text-center tracking-tight transition-colors duration-300 group-hover:text-white",children:c?"Your Story":b.user.name})]},b.id)}):(0,ac.jsx)("div",{className:"text-white/70 text-sm",children:"No stories yet. Check back soon!"})}),(0,ac.jsx)(h9,{open:null!==e,onOpenChange:a=>!a&&f(null),children:(0,ac.jsx)(ie,{className:"max-w-md h-[90vh] p-0 bg-transparent border-0",children:aR&&aS&&(0,ac.jsxs)("div",{className:"relative w-full h-full rounded-3xl overflow-hidden bg-black",children:[(0,ac.jsx)("div",{className:"absolute inset-0",children:"video"===aS.type?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)("video",{ref:q,src:aS.url,className:"h-full w-full object-contain bg-black",playsInline:!0,autoPlay:!0,controls:!1,muted:ab},aS.id),(0,ac.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-black/60"})]}):(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(bt,{src:aS.url,alt:"Story",className:"w-full h-full object-cover"}),(0,ac.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/60"})]})}),(0,ac.jsx)("div",{className:"absolute top-0 left-0 right-0 p-4 z-10",children:(0,ac.jsx)("div",{className:"flex gap-1",children:aR.items.map((a,b)=>{let c=b===g,d=b<g,e=d||c&&"video"!==a.type?void 0:c&&"video"===a.type?100*Math.min(Math.max(af,0),1):void 0,f=["h-full bg-white transition-all duration-300",d?"w-full":"",!c&&!d?"w-0":"",c&&"video"!==a.type?"w-full animate-progress":""].filter(Boolean).join(" ");return(0,ac.jsx)("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:(0,ac.jsx)("div",{className:f,style:void 0!==e?{width:`${e}%`}:void 0})},b)})})}),(0,ac.jsxs)("div",{className:"absolute top-4 right-4 z-20 flex gap-2",children:["video"===aS.type&&(0,ac.jsx)(be,{size:"icon",variant:"ghost",onClick:aW,className:"text-white hover:bg-white/20",children:ab?(0,ac.jsx)(nU,{className:"w-5 h-5"}):(0,ac.jsx)(nT,{className:"w-5 h-5"})}),(0,ac.jsx)(be,{size:"icon",variant:"ghost",onClick:()=>f(null),className:"text-white hover:bg-white/20",children:(0,ac.jsx)(fH,{className:"w-5 h-5"})})]}),(0,ac.jsx)("div",{className:"absolute top-6 left-0 right-0 px-4 z-10",children:(0,ac.jsx)("div",{className:"flex items-center justify-between",children:(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10 border-2 border-white/50",children:[(0,ac.jsx)(d_,{src:aR.user.avatar}),(0,ac.jsx)(d0,{children:aR.user.name[0]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("div",{className:"text-white",children:aR.user.name}),(0,ac.jsx)("div",{className:"text-white/70 text-sm",children:o7(aS.timestamp)})]})]})})}),(0,ac.jsx)("button",{onClick:aU,className:"absolute left-0 top-0 bottom-0 w-1/3 z-10 cursor-pointer","aria-label":"Previous"}),(0,ac.jsx)("button",{onClick:aT,className:"absolute right-0 top-0 bottom-0 w-1/3 z-10 cursor-pointer","aria-label":"Next"}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:aU,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-20",children:(0,ac.jsx)(nR,{className:"w-6 h-6"})}),(0,ac.jsx)(be,{size:"sm",variant:"ghost",onClick:aT,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-20",children:(0,ac.jsx)(no,{className:"w-6 h-6"})}),(0,ac.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 z-10",children:(0,ac.jsxs)("div",{className:"space-y-3",children:[aR.replies.length>0&&(0,ac.jsx)("div",{className:"max-h-40 overflow-y-auto rounded-2xl border border-white/10 bg-black/30 p-3 backdrop-blur",children:(0,ac.jsx)("div",{className:"space-y-3",children:aR.replies.map(a=>(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsxs)(d$,{className:"h-8 w-8 border border-white/20",children:[(0,ac.jsx)(d_,{src:a.author?.avatar}),(0,ac.jsx)(d0,{children:(a.author?.name??a.author?.username??"?")[0]??"?"})]}),(0,ac.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between text-xs text-white/60",children:[(0,ac.jsx)("span",{className:"font-medium text-white/90",children:a.author?.name??a.author?.username??"MoveSplash user"}),(0,ac.jsx)("span",{children:o7(a.timestamp)})]}),(0,ac.jsx)("p",{className:"text-sm text-white/90",children:a.content})]})]},a.id))})}),(0,ac.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,ac.jsxs)(be,{type:"button",variant:"ghost",onClick:()=>void aX(aR),disabled:C===aR.id,className:`flex items-center gap-2 rounded-full border border-white/25 bg-black/40 px-4 py-2 text-sm transition-all duration-200 ${aR.liked?"border-rose-400/60 text-rose-100 hover:bg-rose-500/20":"text-white hover:bg-white/15"} ${C===aR.id?"opacity-70 cursor-not-allowed":""}`,children:[C===aR.id?(0,ac.jsx)(fK,{className:"h-4 w-4 animate-spin"}):(0,ac.jsx)(bp,{className:`h-4 w-4 ${aR.liked?"fill-current":""}`}),(0,ac.jsx)("span",{children:aR.likeCount})]}),(0,ac.jsx)(jF,{placeholder:"Send a reply...",value:i,onChange:a=>j(a.target.value),onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),aY())},disabled:E,className:"flex-1 min-w-[140px] bg-white/10 backdrop-blur-md border-white/20 text-white placeholder:text-white/50"}),(0,ac.jsxs)(be,{type:"button",onClick:()=>void aY(),disabled:E||!i.trim(),className:"flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-[0_12px_30px_rgba(168,85,247,0.45)] transition-all duration-200 hover:from-pink-600 hover:to-purple-600 disabled:opacity-70",children:[E?(0,ac.jsx)(fK,{className:"h-4 w-4 animate-spin"}):(0,ac.jsx)(gq,{className:"h-4 w-4"}),(0,ac.jsx)("span",{className:"text-sm font-medium",children:"Send"})]})]})]})})]})})}),(0,ac.jsx)(h9,{open:o,onOpenChange:aL,children:(0,ac.jsx)(ie,{className:"w-full max-w-[95vw] sm:max-w-2xl lg:max-w-3xl p-0 border-0 bg-transparent shadow-none",children:(0,ac.jsxs)("div",{className:"relative flex max-h-[88vh] flex-col overflow-hidden rounded-3xl bg-gradient-to-br from-[#24103f] via-[#170d3e] to-[#0b1531] text-white shadow-[0_28px_70px_rgba(147,51,234,0.45)]",children:[(0,ac.jsx)("div",{className:"pointer-events-none absolute inset-0 opacity-70",style:{background:"radial-gradient(circle at 20% 20%, rgba(236,72,153,0.3), transparent 60%), radial-gradient(circle at 80% 10%, rgba(96,165,250,0.25), transparent 55%), radial-gradient(circle at 50% 90%, rgba(168,85,247,0.25), transparent 60%)"}}),(0,ac.jsxs)("div",{className:"relative flex-1 overflow-y-auto px-5 py-6 sm:px-8 sm:py-8 space-y-6",children:[(0,ac.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,ac.jsxs)("div",{className:"space-y-2 sm:space-y-1",children:[(0,ac.jsx)("h2",{className:"text-lg font-semibold sm:text-xl",children:"Create a Story"}),(0,ac.jsx)("p",{className:"text-sm text-white/70",children:"Add photos or short clips to share with your friends."})]}),(0,ac.jsx)(be,{type:"button",variant:"ghost",onClick:()=>aL(!1),className:"text-white/70 hover:text-white hover:bg-white/15",children:(0,ac.jsx)(fH,{className:"w-5 h-5"})})]}),(0,ac.jsxs)("div",{className:`relative rounded-2xl border border-dashed ${z?"border-white/60 bg-white/10":"border-white/20 bg-white/5"} transition-all duration-300 ease-out`,onDragOver:az,onDragLeave:aA,onDrop:ay,children:[(0,ac.jsx)("input",{ref:B,type:"file",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:ax}),(0,ac.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 px-4 py-8 text-center sm:px-6 sm:py-10",children:[(0,ac.jsx)("div",{className:"rounded-full bg-white/10 p-4 text-white shadow-[0_12px_35px_rgba(236,72,153,0.35)]",children:(0,ac.jsx)(nS,{className:"w-7 h-7"})}),(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)("p",{className:"text-base font-medium",children:"Drag & drop to upload"}),(0,ac.jsxs)("p",{className:"text-sm text-white/60",children:["You can add up to ",5," photos or videos."]})]}),(0,ac.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 text-xs text-white/60",children:[(0,ac.jsx)("span",{children:"Supported: JPG, PNG, MP4"}),(0,ac.jsx)("span",{className:"hidden sm:inline",children:"|"}),(0,ac.jsxs)("span",{children:["Recommended length ~ ",15,"s"]})]}),(0,ac.jsx)(be,{type:"button",onClick:()=>B.current?.click(),className:"rounded-full bg-white px-5 py-2 text-sm font-semibold text-purple-900 shadow-[0_12px_30px_rgba(148,63,255,0.35)] hover:bg-white/90",children:"Browse files"})]})]}),(0,ac.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-5 backdrop-blur space-y-3",children:[(0,ac.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,ac.jsxs)(be,{type:"button",onClick:()=>void aG(),disabled:G,className:"flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-purple-900 shadow-[0_12px_30px_rgba(148,63,255,0.35)] transition duration-200 hover:bg-white/90 disabled:cursor-not-allowed disabled:opacity-70",children:[(0,ac.jsx)(bq,{className:"h-4 w-4"}),G?"Camera Ready":"Use Camera"]}),(0,ac.jsxs)(be,{type:"button",variant:"outline",onClick:()=>void aI(),disabled:!G||O,className:"flex items-center gap-2 rounded-full border-white/40 bg-purple-900/30 px-4 py-2 text-sm text-white hover:bg-purple-800/50 disabled:opacity-60",children:[O?(0,ac.jsx)(fK,{className:"h-4 w-4 animate-spin"}):(0,ac.jsx)(bq,{className:"h-4 w-4"}),"Capture photo"]}),(0,ac.jsxs)(be,{type:"button",variant:X?"destructive":"outline",onClick:()=>{X?aD():aE()},disabled:!G||O,className:`flex items-center gap-2 rounded-full border-white/40 px-4 py-2 text-sm ${X?"bg-rose-500/30 text-white hover:bg-rose-500/40":"bg-purple-900/30 text-white hover:bg-purple-800/50"} disabled:opacity-60`,children:[X?(0,ac.jsx)(lU,{className:"h-4 w-4"}):(0,ac.jsx)(bl,{className:"h-4 w-4"}),X?"Stop recording":"Record video"]}),(0,ac.jsxs)(be,{type:"button",variant:"ghost",onClick:aH,disabled:O,className:"rounded-full px-4 py-2 text-sm text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-60",children:[(0,ac.jsx)(nV,{className:"h-4 w-4"}),"user"===M?"Rear camera":"Front camera"]}),(0,ac.jsx)(be,{type:"button",variant:"ghost",onClick:()=>aF(),disabled:!G,className:"rounded-full px-4 py-2 text-sm text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-60",children:"Stop camera"})]}),X&&(0,ac.jsxs)("div",{className:"text-xs uppercase tracking-[0.2em] text-amber-200",children:["Recording ",o5(Z)," / ",o5(15)]}),K&&(0,ac.jsx)("p",{className:"text-sm text-rose-200",children:K}),_&&(0,ac.jsx)("p",{className:"text-sm text-rose-200",children:_}),G&&(0,ac.jsx)("div",{className:"overflow-hidden rounded-2xl border border-white/20 bg-black/30 shadow-[0_18px_40px_rgba(124,58,237,0.35)]",children:(0,ac.jsx)("video",{ref:Q,autoPlay:!0,playsInline:!0,muted:!0,className:"h-48 w-full object-cover sm:h-64"})})]}),r.length>0&&(0,ac.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:r.map(a=>(0,ac.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/15 bg-white/5 backdrop-blur-sm shadow-[0_18px_40px_rgba(124,58,237,0.35)]",children:["image"===a.type?(0,ac.jsx)(bt,{src:a.url,alt:"Story preview",className:"h-48 w-full object-cover sm:h-56"}):(0,ac.jsx)("video",{src:a.url,className:"h-48 w-full object-cover sm:h-56",controls:!0,playsInline:!0,muted:!0}),(0,ac.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex items-center justify-between gap-2 bg-gradient-to-t from-black/80 via-black/40 to-transparent px-4 py-3 text-sm",children:[(0,ac.jsx)("span",{className:"text-white/80 capitalize",children:a.type}),(0,ac.jsx)(be,{type:"button",variant:"ghost",size:"sm",onClick:()=>aK(a.id),className:"text-white/80 transition-colors duration-200 hover:text-white hover:bg-white/15",children:(0,ac.jsx)(lV,{className:"w-4 h-4"})})]})]},a.id))}),x&&(0,ac.jsx)("p",{className:"text-sm text-rose-200",children:x}),(0,ac.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,ac.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-6",children:[a&&(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsxs)(d$,{className:"h-10 w-10 border border-white/25",children:[(0,ac.jsx)(d_,{src:a.avatar}),(0,ac.jsx)(d0,{children:a.name[0]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-sm font-medium text-white",children:a.name}),(0,ac.jsxs)("p",{className:"text-xs text-white/60",children:["@",a.username]})]})]}),(0,ac.jsx)("div",{className:"h-px w-full bg-white/10 sm:hidden"}),(0,ac.jsx)("div",{className:"hidden sm:block sm:h-14 sm:w-px bg-white/15"}),(0,ac.jsxs)("div",{className:"min-w-[200px] space-y-1 sm:flex sm:flex-col sm:justify-center sm:space-y-2",children:[(0,ac.jsx)("p",{className:"text-xs uppercase tracking-[0.25em] text-white/50",children:"Visibility"}),(0,ac.jsxs)(oX,{value:t,onValueChange:a=>u(a),children:[(0,ac.jsx)(oZ,{className:"w-full border-white/20 bg-white/10 text-white hover:bg-white/15",children:(0,ac.jsx)(oY,{placeholder:"Choose who can view"})}),(0,ac.jsx)(o$,{className:"border-white/20 bg-slate-950/95 text-white backdrop-blur",children:o6.map(a=>(0,ac.jsx)(o_,{value:a.value,children:(0,ac.jsxs)("div",{className:"flex flex-col",children:[(0,ac.jsx)("span",{className:"text-sm font-medium",children:a.label}),(0,ac.jsx)("span",{className:"text-xs text-white/60",children:a.description})]})},a.value))})]})]})]}),(0,ac.jsxs)("div",{className:"flex flex-col gap-3 sm:items-end",children:[(0,ac.jsxs)("span",{className:"text-xs text-white/60",children:[r.length," / ",5," items selected"]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(be,{type:"button",variant:"ghost",onClick:()=>aL(!1),className:"text-white/70 hover:text-white hover:bg-white/10",disabled:v,children:"Cancel"}),(0,ac.jsx)(be,{type:"button",onClick:()=>void aM(),disabled:v||0===r.length,className:"bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 px-6 py-2 text-sm font-semibold text-white shadow-[0_15px_40px_rgba(168,85,247,0.45)] transition-all duration-300 hover:brightness-110 disabled:opacity-60",children:v?"Posting...":"Share Story"})]})]})]})]})]})})}),(0,ac.jsx)("style",{children:`
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        @keyframes progress {
          from { width: 0%; }
          to { width: 100%; }
        }
        .animate-progress {
          animation: progress 5s linear forwards;
        }
      `})]})}var pf=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),pg=ad.forwardRef((a,b)=>(0,ac.jsx)(pf.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));function ph({className:a,...b}){return(0,ac.jsx)(pg,{"data-slot":"label",className:bc("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...b})}function pi(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function pj(...a){return b=>{let c=!1,d=a.map(a=>{let d=pi(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():pi(a[b],null)}}}}function pk(a){let b=ad.useRef(a);return ad.useEffect(()=>{b.current=a}),ad.useMemo(()=>(...a)=>b.current?.(...a),[])}pg.displayName="Label";var pl=globalThis?.document?ad.useLayoutEffect:()=>{},pm=ad.forwardRef((a,b)=>{let{children:c,...d}=a,e=ad.Children.toArray(c),f=e.find(pp);if(f){let a=f.props.children,c=e.map(b=>b!==f?b:ad.Children.count(a)>1?ad.Children.only(null):ad.isValidElement(a)?a.props.children:null);return(0,ac.jsx)(pn,{...d,ref:b,children:ad.isValidElement(a)?ad.cloneElement(a,void 0,c):null})}return(0,ac.jsx)(pn,{...d,ref:b,children:c})});pm.displayName="Slot";var pn=ad.forwardRef((a,b)=>{let{children:c,...d}=a;if(ad.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{f(...a),e(...a)}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==ad.Fragment&&(h.ref=b?pj(b,g):g),ad.cloneElement(c,h)}return ad.Children.count(c)>1?ad.Children.only(null):null});pn.displayName="SlotClone";var po=({children:a})=>(0,ac.jsx)(ac.Fragment,{children:a});function pp(a){return ad.isValidElement(a)&&a.type===po}var pq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,b)=>{let c=ad.forwardRef((a,c)=>{let{asChild:d,...e}=a,f=d?pm:b;return(0,ac.jsx)(f,{...e,ref:c})});return c.displayName=`Primitive.${b}`,{...a,[b]:c}},{}),pr="Switch",[ps,pt]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(pr),[pu,pv]=ps(pr),pw=ad.forwardRef((a,b)=>{let{__scopeSwitch:c,name:d,checked:e,defaultChecked:f,required:g,disabled:h,value:i="on",onCheckedChange:j,form:k,...l}=a,[m,n]=ad.useState(null),o=function(...a){return ad.useCallback(pj(...a),a)}(b,a=>n(a)),p=ad.useRef(!1),q=!m||k||!!m.closest("form"),[r=!1,s]=function({prop:a,defaultProp:b,onChange:c=()=>{}}){let[d,e]=function({defaultProp:a,onChange:b}){let c=ad.useState(a),[d]=c,e=ad.useRef(d),f=pk(b);return ad.useEffect(()=>{e.current!==d&&(f(d),e.current=d)},[d,e,f]),c}({defaultProp:b,onChange:c}),f=void 0!==a,g=f?a:d,h=pk(c);return[g,ad.useCallback(b=>{if(f){let c="function"==typeof b?b(a):b;c!==a&&h(c)}else e(b)},[f,a,e,h])]}({prop:e,defaultProp:f,onChange:j});return(0,ac.jsxs)(pu,{scope:c,checked:r,disabled:h,children:[(0,ac.jsx)(pq.button,{type:"button",role:"switch","aria-checked":r,"aria-required":g,"data-state":pA(r),"data-disabled":h?"":void 0,disabled:h,value:i,...l,ref:o,onClick:function(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}(a.onClick,a=>{s(a=>!a),q&&(p.current=a.isPropagationStopped(),p.current||a.stopPropagation())})}),q&&(0,ac.jsx)(pz,{control:m,bubbles:!p.current,name:d,value:i,checked:r,required:g,disabled:h,form:k,style:{transform:"translateX(-100%)"}})]})});pw.displayName=pr;var px="SwitchThumb",py=ad.forwardRef((a,b)=>{let{__scopeSwitch:c,...d}=a,e=pv(px,c);return(0,ac.jsx)(pq.span,{"data-state":pA(e.checked),"data-disabled":e.disabled?"":void 0,...d,ref:b})});py.displayName=px;var pz=a=>{let b,{control:c,checked:d,bubbles:e=!0,...f}=a,g=ad.useRef(null),h=(b=ad.useRef({value:d,previous:d}),ad.useMemo(()=>(b.current.value!==d&&(b.current.previous=b.current.value,b.current.value=d),b.current.previous),[d])),i=function(a){let[b,c]=ad.useState(void 0);return pl(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(c);return ad.useEffect(()=>{let a=g.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==d&&b){let c=new Event("click",{bubbles:e});b.call(a,d),a.dispatchEvent(c)}},[h,d,e]),(0,ac.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:d,...f,tabIndex:-1,ref:g,style:{...a.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function pA(a){return a?"checked":"unchecked"}function pB({className:a,...b}){return(0,ac.jsx)(pw,{"data-slot":"switch",className:bc("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...b,children:(0,ac.jsx)(py,{"data-slot":"switch-thumb",className:bc("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var pC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),pD="horizontal",pE=["horizontal","vertical"],pF=ad.forwardRef((a,b)=>{var c;let{decorative:d,orientation:e=pD,...f}=a,g=(c=e,pE.includes(c))?e:pD;return(0,ac.jsx)(pC.div,{"data-orientation":g,...d?{role:"none"}:{"aria-orientation":"vertical"===g?g:void 0,role:"separator"},...f,ref:b})});function pG({className:a,orientation:b="horizontal",decorative:c=!0,...d}){return(0,ac.jsx)(pF,{"data-slot":"separator-root",decorative:c,orientation:b,className:bc("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...d})}function pH(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function pI(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function pJ(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=pI(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():pI(a[b],null)}}}}(...a),a)}pF.displayName="Separator";var pK=globalThis?.document?ad.useLayoutEffect:()=>{},pL=ad[" useInsertionEffect ".trim().toString()]||pK;Symbol("RADIX:SYNC_STATE");var pM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),pN=["PageUp","PageDown"],pO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pQ="Slider",[pR,pS,pT]=eR(pQ),[pU,pV]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(pQ,[pT]),[pW,pX]=pU(pQ),pY=ad.forwardRef((a,b)=>{let{name:c,min:d=0,max:e=100,step:f=1,orientation:g="horizontal",disabled:h=!1,minStepsBetweenThumbs:i=0,defaultValue:j=[d],value:k,onValueChange:l=()=>{},onValueCommit:m=()=>{},inverted:n=!1,form:o,...p}=a,q=ad.useRef(new Set),r=ad.useRef(0),s="horizontal"===g,[t=[],u]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return pL(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:k,defaultProp:j,onChange:a=>{let b=[...q.current];b[r.current]?.focus(),l(a)}}),v=ad.useRef(t);function w(a,b,{commit:c}={commit:!1}){let g,h=(String(f).split(".")[1]||"").length,j=ec(Math.round((Math.round((a-d)/f)*f+d)*(g=Math.pow(10,h)))/g,[d,e]);u((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,j,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,i*f))return a;{r.current=d.indexOf(j);let b=String(d)!==String(a);return b&&c&&m(d),b?d:a}})}return(0,ac.jsx)(pW,{scope:a.__scopeSlider,name:c,disabled:h,min:d,max:e,valueIndexToChangeRef:r,thumbs:q.current,values:t,orientation:g,form:o,children:(0,ac.jsx)(pR.Provider,{scope:a.__scopeSlider,children:(0,ac.jsx)(pR.Slot,{scope:a.__scopeSlider,children:(0,ac.jsx)(s?p_:p0,{"aria-disabled":h,"data-disabled":h?"":void 0,...p,ref:b,onPointerDown:pH(p.onPointerDown,()=>{h||(v.current=t)}),min:d,max:e,inverted:n,onSlideStart:h?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(t,a);w(a,b)},onSlideMove:h?void 0:function(a){w(a,r.current)},onSlideEnd:h?void 0:function(){let a=v.current[r.current];t[r.current]!==a&&m(t)},onHomeKeyDown:()=>!h&&w(d,0,{commit:!0}),onEndKeyDown:()=>!h&&w(e,t.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!h){let c=pN.includes(a.key)||a.shiftKey&&pO.includes(a.key),d=r.current;w(t[d]+f*(c?10:1)*b,d,{commit:!0})}}})})})})});pY.displayName=pQ;var[pZ,p$]=pU(pQ,{startEdge:"left",endEdge:"right",size:"width",direction:1}),p_=ad.forwardRef((a,b)=>{let{min:c,max:d,dir:e,inverted:f,onSlideStart:g,onSlideMove:h,onSlideEnd:i,onStepKeyDown:j,...k}=a,[l,m]=ad.useState(null),n=pJ(b,a=>m(a)),o=ad.useRef(void 0),p=ea(e),q="ltr"===p,r=q&&!f||!q&&f;function s(a){let b=o.current||l.getBoundingClientRect(),e=qb([0,b.width],r?[c,d]:[d,c]);return o.current=b,e(a-b.left)}return(0,ac.jsx)(pZ,{scope:a.__scopeSlider,startEdge:r?"left":"right",endEdge:r?"right":"left",direction:r?1:-1,size:"width",children:(0,ac.jsx)(p1,{dir:p,"data-orientation":"horizontal",...k,ref:n,style:{...k.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=s(a.clientX);g?.(b)},onSlideMove:a=>{let b=s(a.clientX);h?.(b)},onSlideEnd:()=>{o.current=void 0,i?.()},onStepKeyDown:a=>{let b=pP[r?"from-left":"from-right"].includes(a.key);j?.({event:a,direction:b?-1:1})}})})}),p0=ad.forwardRef((a,b)=>{let{min:c,max:d,inverted:e,onSlideStart:f,onSlideMove:g,onSlideEnd:h,onStepKeyDown:i,...j}=a,k=ad.useRef(null),l=pJ(b,k),m=ad.useRef(void 0),n=!e;function o(a){let b=m.current||k.current.getBoundingClientRect(),e=qb([0,b.height],n?[d,c]:[c,d]);return m.current=b,e(a-b.top)}return(0,ac.jsx)(pZ,{scope:a.__scopeSlider,startEdge:n?"bottom":"top",endEdge:n?"top":"bottom",size:"height",direction:n?1:-1,children:(0,ac.jsx)(p1,{"data-orientation":"vertical",...j,ref:l,style:{...j.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=o(a.clientY);f?.(b)},onSlideMove:a=>{let b=o(a.clientY);g?.(b)},onSlideEnd:()=>{m.current=void 0,h?.()},onStepKeyDown:a=>{let b=pP[n?"from-bottom":"from-top"].includes(a.key);i?.({event:a,direction:b?-1:1})}})})}),p1=ad.forwardRef((a,b)=>{let{__scopeSlider:c,onSlideStart:d,onSlideMove:e,onSlideEnd:f,onHomeKeyDown:g,onEndKeyDown:h,onStepKeyDown:i,...j}=a,k=pX(pQ,c);return(0,ac.jsx)(pM.span,{...j,ref:b,onKeyDown:pH(a.onKeyDown,a=>{"Home"===a.key?(g(a),a.preventDefault()):"End"===a.key?(h(a),a.preventDefault()):pN.concat(pO).includes(a.key)&&(i(a),a.preventDefault())}),onPointerDown:pH(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),k.thumbs.has(b)?b.focus():d(a)}),onPointerMove:pH(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&e(a)}),onPointerUp:pH(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),f(a))})})}),p2="SliderTrack",p3=ad.forwardRef((a,b)=>{let{__scopeSlider:c,...d}=a,e=pX(p2,c);return(0,ac.jsx)(pM.span,{"data-disabled":e.disabled?"":void 0,"data-orientation":e.orientation,...d,ref:b})});p3.displayName=p2;var p4="SliderRange",p5=ad.forwardRef((a,b)=>{let{__scopeSlider:c,...d}=a,e=pX(p4,c),f=p$(p4,c),g=pJ(b,ad.useRef(null)),h=e.values.length,i=e.values.map(a=>qa(a,e.min,e.max)),j=h>1?Math.min(...i):0,k=100-Math.max(...i);return(0,ac.jsx)(pM.span,{"data-orientation":e.orientation,"data-disabled":e.disabled?"":void 0,...d,ref:g,style:{...a.style,[f.startEdge]:j+"%",[f.endEdge]:k+"%"}})});p5.displayName=p4;var p6="SliderThumb",p7=ad.forwardRef((a,b)=>{let c=pS(a.__scopeSlider),[d,e]=ad.useState(null),f=pJ(b,a=>e(a)),g=ad.useMemo(()=>d?c().findIndex(a=>a.ref.current===d):-1,[c,d]);return(0,ac.jsx)(p8,{...a,ref:f,index:g})}),p8=ad.forwardRef((a,b)=>{var c,d,e,f,g;let h,i,{__scopeSlider:j,index:k,name:l,...m}=a,n=pX(p6,j),o=p$(p6,j),[p,q]=ad.useState(null),r=pJ(b,a=>q(a)),s=!p||n.form||!!p.closest("form"),t=function(a){let[b,c]=ad.useState(void 0);return pK(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(p),u=n.values[k],v=void 0===u?0:qa(u,n.min,n.max),w=(c=k,(d=n.values.length)>2?`Value ${c+1} of ${d}`:2===d?["Minimum","Maximum"][c]:void 0),x=t?.[o.size],y=x?(e=x,f=v,g=o.direction,i=qb([0,50],[0,h=e/2]),(h-i(f)*g)*g):0;return ad.useEffect(()=>{if(p)return n.thumbs.add(p),()=>{n.thumbs.delete(p)}},[p,n.thumbs]),(0,ac.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${y}px)`},children:[(0,ac.jsx)(pR.ItemSlot,{scope:a.__scopeSlider,children:(0,ac.jsx)(pM.span,{role:"slider","aria-label":a["aria-label"]||w,"aria-valuemin":n.min,"aria-valuenow":u,"aria-valuemax":n.max,"aria-orientation":n.orientation,"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,tabIndex:n.disabled?void 0:0,...m,ref:r,style:void 0===u?{display:"none"}:a.style,onFocus:pH(a.onFocus,()=>{n.valueIndexToChangeRef.current=k})})}),s&&(0,ac.jsx)(p9,{name:l??(n.name?n.name+(n.values.length>1?"[]":""):void 0),form:n.form,value:u},k)]})});p7.displayName=p6;var p9=ad.forwardRef(({__scopeSlider:a,value:b,...c},d)=>{let e,f=ad.useRef(null),g=pJ(f,d),h=(e=ad.useRef({value:b,previous:b}),ad.useMemo(()=>(e.current.value!==b&&(e.current.previous=e.current.value,e.current.value=b),e.current.previous),[b]));return ad.useEffect(()=>{let a=f.current;if(!a)return;let c=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(h!==b&&c){let d=new Event("input",{bubbles:!0});c.call(a,b),a.dispatchEvent(d)}},[h,b]),(0,ac.jsx)(pM.input,{style:{display:"none"},...c,ref:g,defaultValue:b})});function qa(a,b,c){return ec(100/(c-b)*(a-b),[0,100])}function qb(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}function qc({className:a,defaultValue:b,value:c,min:d=0,max:e=100,...f}){let g=ad.useMemo(()=>Array.isArray(c)?c:Array.isArray(b)?b:[d,e],[c,b,d,e]);return(0,ac.jsxs)(pY,{"data-slot":"slider",defaultValue:b,value:c,min:d,max:e,className:bc("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...f,children:[(0,ac.jsx)(p3,{"data-slot":"slider-track",className:bc("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,ac.jsx)(p5,{"data-slot":"slider-range",className:bc("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:g.length},(a,b)=>(0,ac.jsx)(p7,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},b))]})}p9.displayName="RadioBubbleInput";let qd=bj("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),qe=bj("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),qf=bj("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),qg=bj("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),qh=bj("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),qi=bj("palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),qj=bj("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),qk=bj("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ql=bj("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),qm=new class{permission="default";supported=!1;constructor(){const a=this.getNotificationAPI();this.supported=!!a,a&&(this.permission=a.permission)}getNotificationAPI(){}isSupported(){return this.supported}getPermission(){return this.permission}async requestPermission(){if(!this.supported)return console.warn("Notifications are not supported in this browser"),"denied";let a=this.getNotificationAPI();if(!a)return console.warn("Notification API is not available"),"denied";try{if("default"===a.permission){let b=await new Promise(b=>{0===a.requestPermission.length?a.requestPermission().then(b):a.requestPermission(b)});return this.permission=b,b}return this.permission=a.permission,a.permission}catch(a){return console.error("Error requesting notification permission:",a),"denied"}}async show(a){if(!this.supported)return console.warn("Notifications are not supported"),null;let b=this.getNotificationAPI();if(!b)return console.warn("Notification API is not available"),null;if("granted"!==this.permission&&"granted"!==await this.requestPermission())return console.warn("Notification permission denied"),null;try{let c=new b(a.title,{body:a.body,icon:a.icon||"/favicon.ico",tag:a.tag,requireInteraction:a.requireInteraction||!1,badge:a.icon,silent:!1});return a.onClick&&(c.onclick=b=>{b.preventDefault(),a.onClick?.(),c.close()}),c}catch(a){return console.error("Error showing notification:",a),null}}async showSimple(a,b,c){return this.show({title:a,body:b,onClick:c})}};function qn({onClose:a,onLogout:b,initialTab:c,onOpenHelpCenter:d,onOpenPrivacyPolicy:e,onOpenTermsOfService:f}){let{currentUser:g,updateUser:h,updateSettings:i,changePassword:j}=f3(),{setTheme:k}=(0,ae.useTheme)(),[l,m]=(0,ad.useState)({name:"",email:"",phoneNumber:"",location:"",bio:""}),[n,o]=(0,ad.useState)(!1),[p,q]=(0,ad.useState)(()=>({...f4})),[r,s]=(0,ad.useState)(f_(f4.theme)),[t,u]=(0,ad.useState)(!1),[v,w]=(0,ad.useState)("default"),[x,y]=(0,ad.useState)(!1),z=(0,ad.useRef)(null),[A,B]=(0,ad.useState)(!1),[C,D]=(0,ad.useState)(!1),[E,F]=(0,ad.useState)({oldPassword:"",newPassword:"",confirmPassword:""});(0,ad.useEffect)(()=>{qm.isSupported()&&w(qm.getPermission())},[]),(0,ad.useEffect)(()=>{if(!g)return;let a={...f4,...g.settings??{}},b=f_(g.settings?.theme),c=f6(a.fontSize);a.theme=b,a.fontSize=c,a.language="en",q(a),s(b),n||m({name:g.name??"",email:g.email??"",phoneNumber:a.phoneNumber??"",location:g.location??"",bio:g.bio??""})},[g,n]),(0,ad.useEffect)(()=>{let a=()=>{k(f0(r))};if(a(),"dynamic"===r){let b=setInterval(a,6e5);return()=>clearInterval(b)}},[r,k]),(0,ad.useEffect)(()=>()=>{z.current&&clearTimeout(z.current)},[]),(0,ad.useEffect)(()=>{A||(F({oldPassword:"",newPassword:"",confirmPassword:""}),D(!1))},[A]);let G=(0,ad.useCallback)((a,b)=>{let c="fontSize"===a?f6("string"==typeof b?b:void 0):"language"===a?"en":"theme"===a&&"string"==typeof b?f_(b):b;return q(b=>({...b,[a]:c})),i({[a]:c})},[i]),H=(0,ad.useCallback)(a=>{let b=f_(a);s(b),q(a=>({...a,theme:b})),k(f0(b)),i({theme:b})},[k,i]),I=(0,ad.useCallback)(a=>{let b=Math.max(0,Math.min(100,a[0]??0));q(a=>({...a,soundVolume:b})),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{i({soundVolume:b})},300)},[i]),J=(0,ad.useCallback)(a=>b=>{let c=b.target.value;F(b=>({...b,[a]:c}))},[]),K=(0,ad.useCallback)(async a=>{a.preventDefault();let{oldPassword:b,newPassword:c,confirmPassword:d}=E;if(!b||!c||!d)return void fV.error("Please complete every password field");if(c.length<8)return void fV.error("New password must be at least 8 characters long");if(c===b)return void fV.error("New password must be different from the old password");if(c!==d)return void fV.error("New password and confirmation do not match");D(!0);let e=await j(b,c);if(!e.success){fV.error(e.error??"Unable to change password right now"),D(!1);return}fV.success("Password updated successfully"),B(!1),D(!1)},[E,j]),L=a=>b=>{let c=b.target.value;o(!0),m(b=>({...b,[a]:c}))},M=async()=>{if(!g)return void fV.error("No user is signed in");u(!0);try{let a=await h({name:l.name,email:l.email,location:l.location,bio:l.bio});q(a=>({...a,phoneNumber:l.phoneNumber})),await i({phoneNumber:l.phoneNumber}),a?(o(!1),fV.success("Settings saved successfully! ")):fV.error("Unable to save account changes")}catch(a){console.error("Error saving account settings:",a),fV.error("Unable to save settings right now")}finally{u(!1)}},N=(0,ad.useCallback)(async()=>{y(!0);try{let a=await qm.requestPermission();w(a),"granted"===a?(fV.success("Browser notifications enabled! "),await qm.showSimple("MoveSplash","You will now receive browser notifications!"),G("pushNotifications",!0)):"denied"===a&&(fV.error("Browser notifications blocked. Please enable them in your browser settings."),G("pushNotifications",!1))}catch(a){console.error("Error requesting notification permission:",a),fV.error("Unable to enable browser notifications")}finally{y(!1)}},[G]);return g?(0,ac.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 overflow-hidden",children:[(0,ac.jsxs)("div",{className:"p-6 border-b border-white/20 flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-xl flex items-center justify-center",children:(0,ac.jsx)(qd,{className:"w-5 h-5 text-white"})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h1",{className:"text-white text-2xl",children:"Settings"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Manage your account and preferences"})]})]}),a&&(0,ac.jsx)(be,{variant:"ghost",size:"sm",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10",children:(0,ac.jsx)(fH,{className:"w-5 h-5"})})]}),(0,ac.jsxs)(fz,{defaultValue:c??"account",className:"w-full",children:[(0,ac.jsx)("div",{className:"px-6 pt-4 border-b border-white/20",children:(0,ac.jsxs)(fA,{className:"w-full bg-white/5 border-white/20 grid grid-cols-5",children:[(0,ac.jsxs)(fB,{value:"account",className:"data-[state=active]:bg-white/20",children:[(0,ac.jsx)(qd,{className:"w-4 h-4 mr-2"}),"Account"]}),(0,ac.jsxs)(fB,{value:"privacy",className:"data-[state=active]:bg-white/20",children:[(0,ac.jsx)(qe,{className:"w-4 h-4 mr-2"}),"Privacy"]}),(0,ac.jsxs)(fB,{value:"notifications",className:"data-[state=active]:bg-white/20",children:[(0,ac.jsx)(fF,{className:"w-4 h-4 mr-2"}),"Notifications"]}),(0,ac.jsxs)(fB,{value:"appearance",className:"data-[state=active]:bg-white/20",children:[(0,ac.jsx)(qi,{className:"w-4 h-4 mr-2"}),"Appearance"]}),(0,ac.jsxs)(fB,{value:"about",className:"data-[state=active]:bg-white/20",children:[(0,ac.jsx)(qh,{className:"w-4 h-4 mr-2"}),"About"]})]})}),(0,ac.jsxs)(eL,{className:"h-[500px]",children:[(0,ac.jsxs)(fC,{value:"account",className:"p-6 space-y-6",children:[(0,ac.jsxs)("div",{className:"space-y-3",children:[(0,ac.jsx)(ph,{className:"text-white",children:"Profile Picture"}),(0,ac.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ac.jsxs)(d$,{className:"w-20 h-20 border-4 border-white/20",children:[(0,ac.jsx)(d_,{src:g.avatar}),(0,ac.jsx)(d0,{children:g.name?.slice(0,2).toUpperCase()||"MS"})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsxs)(be,{className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0",children:[(0,ac.jsx)(bq,{className:"w-4 h-4 mr-2"}),"Change Photo"]}),(0,ac.jsx)("p",{className:"text-white/50 text-xs",children:"JPG, PNG or GIF. Max size 5MB"})]})]})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Personal Information"}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"name",className:"text-white/70",children:"Full Name"}),(0,ac.jsx)(jF,{id:"name",value:l.name,onChange:L("name"),className:"bg-white/5 border-white/20 text-white"})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"email",className:"text-white/70",children:"Email"}),(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)(im,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50"}),(0,ac.jsx)(jF,{id:"email",type:"email",value:l.email,onChange:L("email"),className:"pl-10 bg-white/5 border-white/20 text-white"})]})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"phone",className:"text-white/70",children:"Phone Number"}),(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)(lF,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50"}),(0,ac.jsx)(jF,{id:"phone",value:l.phoneNumber,onChange:L("phoneNumber"),className:"pl-10 bg-white/5 border-white/20 text-white"})]})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"location",className:"text-white/70",children:"Location"}),(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)(qj,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50"}),(0,ac.jsx)(jF,{id:"location",value:l.location,onChange:L("location"),className:"pl-10 bg-white/5 border-white/20 text-white"})]})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"bio",className:"text-white/70",children:"Bio"}),(0,ac.jsx)(jF,{id:"bio",value:l.bio,onChange:L("bio"),className:"bg-white/5 border-white/20 text-white"})]})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Password"}),(0,ac.jsxs)(h9,{open:A,onOpenChange:B,children:[(0,ac.jsx)(ia,{asChild:!0,children:(0,ac.jsxs)(be,{variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(qe,{className:"w-4 h-4 mr-2"}),"Change Password"]})}),(0,ac.jsxs)(ie,{className:"bg-background/95 text-foreground border border-border backdrop-blur",children:[(0,ac.jsxs)(ig,{children:[(0,ac.jsx)(ii,{children:"Change password"}),(0,ac.jsx)(ij,{children:"Enter your current password and choose a new one. Pick something unique to keep your account secure."})]}),(0,ac.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"current-password",className:"text-sm font-medium text-foreground/80",children:"Current password"}),(0,ac.jsx)(jF,{id:"current-password",type:"password",value:E.oldPassword,onChange:J("oldPassword"),autoComplete:"current-password",className:"bg-input-background border border-border text-foreground",required:!0})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"new-password",className:"text-sm font-medium text-foreground/80",children:"New password"}),(0,ac.jsx)(jF,{id:"new-password",type:"password",value:E.newPassword,onChange:J("newPassword"),autoComplete:"new-password",className:"bg-input-background border border-border text-foreground",required:!0,minLength:8})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{htmlFor:"confirm-password",className:"text-sm font-medium text-foreground/80",children:"Confirm new password"}),(0,ac.jsx)(jF,{id:"confirm-password",type:"password",value:E.confirmPassword,onChange:J("confirmPassword"),autoComplete:"new-password",className:"bg-input-background border border-border text-foreground",required:!0,minLength:8}),(0,ac.jsx)("p",{className:"text-foreground/60 text-xs",children:"Passwords must be at least 8 characters long."})]}),(0,ac.jsxs)(ih,{children:[(0,ac.jsx)(ic,{asChild:!0,children:(0,ac.jsx)(be,{type:"button",variant:"ghost",disabled:C,children:"Cancel"})}),(0,ac.jsx)(be,{type:"submit",disabled:C,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 disabled:opacity-60",children:C?"Updating...":"Update Password"})]})]})]})]})]}),(0,ac.jsx)("div",{className:"flex gap-3 pt-4",children:(0,ac.jsxs)(be,{onClick:M,disabled:t,className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 disabled:opacity-60",children:[(0,ac.jsx)(qk,{className:"w-4 h-4 mr-2"}),t?"Saving...":"Save Changes"]})})]}),(0,ac.jsxs)(fC,{value:"privacy",className:"p-6 space-y-6",children:[(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Profile Visibility"}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Who can see your profile?"}),(0,ac.jsxs)(oX,{value:p.profileVisibility,onValueChange:a=>void G("profileVisibility",a),children:[(0,ac.jsx)(oZ,{className:"bg-white/5 border-white/20 text-white",children:(0,ac.jsx)(oY,{})}),(0,ac.jsxs)(o$,{className:"bg-gradient-to-br from-purple-900 to-pink-900 border-white/20",children:[(0,ac.jsx)(o_,{value:"public",children:"Everyone"}),(0,ac.jsx)(o_,{value:"friends",children:"Friends Only"}),(0,ac.jsx)(o_,{value:"private",children:"Only Me"})]})]})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Who can message you?"}),(0,ac.jsxs)(oX,{value:p.whoCanMessage,onValueChange:a=>void G("whoCanMessage",a),children:[(0,ac.jsx)(oZ,{className:"bg-white/5 border-white/20 text-white",children:(0,ac.jsx)(oY,{})}),(0,ac.jsxs)(o$,{className:"bg-gradient-to-br from-purple-900 to-pink-900 border-white/20",children:[(0,ac.jsx)(o_,{value:"everyone",children:"Everyone"}),(0,ac.jsx)(o_,{value:"friends",children:"Friends Only"}),(0,ac.jsx)(o_,{value:"nobody",children:"Nobody"})]})]})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Who can call you?"}),(0,ac.jsxs)(oX,{value:p.whoCanCall,onValueChange:a=>void G("whoCanCall",a),children:[(0,ac.jsx)(oZ,{className:"bg-white/5 border-white/20 text-white",children:(0,ac.jsx)(oY,{})}),(0,ac.jsxs)(o$,{className:"bg-gradient-to-br from-purple-900 to-pink-900 border-white/20",children:[(0,ac.jsx)(o_,{value:"everyone",children:"Everyone"}),(0,ac.jsx)(o_,{value:"friends",children:"Friends Only"}),(0,ac.jsx)(o_,{value:"nobody",children:"Nobody"})]})]})]})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Activity Status"}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Show online status"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Let friends see when you're online"})]}),(0,ac.jsx)(pB,{checked:p.showOnlineStatus,onCheckedChange:a=>void G("showOnlineStatus",a)})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Read receipts"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Show when you've read messages"})]}),(0,ac.jsx)(pB,{checked:p.showReadReceipts,onCheckedChange:a=>void G("showReadReceipts",a)})]})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Tagging & Mentions"}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Allow tagging"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Let friends tag you in posts and photos"})]}),(0,ac.jsx)(pB,{checked:p.allowTagging,onCheckedChange:a=>void G("allowTagging",a)})]})]})]}),(0,ac.jsxs)(fC,{value:"notifications",className:"p-6 space-y-6",children:[qm.isSupported()&&(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/5 border-white/20 p-4",children:(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,ac.jsx)(fF,{className:"w-5 h-5 text-white"})}),(0,ac.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ac.jsx)("h4",{className:"text-white",children:"Browser Notifications"}),"granted"===v&&(0,ac.jsxs)(fE,{className:"bg-green-500/20 text-green-400 border-green-400/30",children:[(0,ac.jsx)(fI,{className:"w-3 h-3 mr-1"}),"Enabled"]}),"denied"===v&&(0,ac.jsxs)(fE,{className:"bg-red-500/20 text-red-400 border-red-400/30",children:[(0,ac.jsx)(fH,{className:"w-3 h-3 mr-1"}),"Blocked"]}),"default"===v&&(0,ac.jsxs)(fE,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-400/30",children:[(0,ac.jsx)(ql,{className:"w-3 h-3 mr-1"}),"Not Set"]})]}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mb-3",children:"granted"===v?"You will receive browser notifications for new messages, calls, and updates.":"denied"===v?"Browser notifications are blocked. Please enable them in your browser settings.":"Enable browser notifications to stay updated even when MoveSplash is not open."}),"granted"!==v&&(0,ac.jsxs)(be,{onClick:N,disabled:x||"denied"===v,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 text-sm disabled:opacity-50",children:[(0,ac.jsx)(fF,{className:"w-4 h-4 mr-2"}),x?"Requesting...":"Enable Browser Notifications"]})]})]})}),(0,ac.jsx)(pG,{className:"bg-white/10"})]}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Notification Channels"}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Push Notifications"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Receive notifications on your device"})]}),(0,ac.jsx)(pB,{"data-testid":"toggle-push-notifications",checked:p.pushNotifications,onCheckedChange:a=>{a&&qm.isSupported()&&"granted"!==v?N():G("pushNotifications",a)}})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Email Notifications"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Receive updates via email"})]}),(0,ac.jsx)(pB,{checked:p.emailNotifications,onCheckedChange:a=>void G("emailNotifications",a)})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"SMS Notifications"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Receive text message alerts"})]}),(0,ac.jsx)(pB,{checked:p.smsNotifications,onCheckedChange:a=>void G("smsNotifications",a)})]})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Activity Alerts"}),[["notifyLikes","Likes","Alerts when someone likes your posts"],["notifyComments","Comments","Stay updated on new comments"],["notifyMessages","Messages","Never miss a direct message"],["notifyFriendRequests","Friend Requests","Know when someone wants to connect"],["notifyStories","Stories","Updates when friends post new stories"]].map(([a,b,c])=>(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:b}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:c})]}),(0,ac.jsx)(pB,{checked:p[a],onCheckedChange:b=>void G(a,b)})]},a))]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Sound & Alerts"}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Notification Sounds"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Play sounds for new notifications"})]}),(0,ac.jsx)(pB,{checked:p.soundEnabled,onCheckedChange:a=>void G("soundEnabled",a)})]}),(0,ac.jsxs)("div",{className:"space-y-3",children:[(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2 text-white/70",children:[(0,ac.jsx)(nT,{className:"w-4 h-4"}),(0,ac.jsx)("span",{children:"Volume"})]}),(0,ac.jsxs)(fE,{className:"bg-white/10 text-white border-white/20",children:[p.soundVolume,"%"]})]}),(0,ac.jsx)(qc,{value:[p.soundVolume],onValueChange:I})]})]})]}),(0,ac.jsxs)(fC,{value:"appearance",className:"p-6 space-y-6",children:[(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Theme"}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Color Theme"}),(0,ac.jsxs)(oX,{value:r,onValueChange:H,children:[(0,ac.jsx)(oZ,{className:"bg-white/5 border-white/20 text-white",children:(0,ac.jsx)(oY,{})}),(0,ac.jsx)(o$,{className:"bg-gradient-to-br from-purple-900 to-pink-900 border-white/20",children:f$.map(a=>(0,ac.jsx)(o_,{value:a.value,children:a.label},a.value))})]})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Font Size"}),(0,ac.jsxs)(oX,{value:p.fontSize,onValueChange:a=>void G("fontSize",a),children:[(0,ac.jsx)(oZ,{className:"bg-white/5 border-white/20 text-white",children:(0,ac.jsx)(oY,{})}),(0,ac.jsxs)(o$,{className:"bg-gradient-to-br from-purple-900 to-pink-900 border-white/20",children:[(0,ac.jsx)(o_,{value:"small",children:"Small"}),(0,ac.jsx)(o_,{value:"medium",children:"Medium"}),(0,ac.jsx)(o_,{value:"large",children:"Large"})]})]})]}),(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Language"}),(0,ac.jsxs)(oX,{value:"en",disabled:!0,children:[(0,ac.jsx)(oZ,{className:"bg-white/5 border-white/20 text-white",disabled:!0,children:(0,ac.jsx)(oY,{placeholder:"English"})}),(0,ac.jsx)(o$,{className:"bg-gradient-to-br from-purple-900 to-pink-900 border-white/20",children:(0,ac.jsx)(o_,{value:"en",children:"English"})})]}),(0,ac.jsx)("p",{className:"text-white/50 text-xs",children:"English is the only available language right now."})]})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"Accessibility"}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Auto-play videos"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Videos play automatically in feed"})]}),(0,ac.jsx)(pB,{"data-testid":"toggle-auto-play",checked:p.autoPlayVideos,onCheckedChange:a=>void G("autoPlayVideos",a)})]}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"space-y-1",children:[(0,ac.jsx)(ph,{className:"text-white/70",children:"Reduce animations"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"Minimize motion effects"})]}),(0,ac.jsx)(pB,{"data-testid":"toggle-reduce-animations",checked:p.reduceAnimations,onCheckedChange:a=>void G("reduceAnimations",a)})]})]})]}),(0,ac.jsxs)(fC,{value:"about",className:"p-6 space-y-6",children:[(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white",children:"MoveSplash"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Version 1.0.0"}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:"A Gen Z-focused social media platform with glassmorphism design, real-time messaging, video chat, and disappearing stories."})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:d,className:"w-full justify-start text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-40",disabled:!d,children:[(0,ac.jsx)(qg,{className:"w-4 h-4 mr-2"}),"Help Center"]}),(0,ac.jsxs)(be,{variant:"ghost",onClick:e,className:"w-full justify-start text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-40",disabled:!e,children:[(0,ac.jsx)(qf,{className:"w-4 h-4 mr-2"}),"Privacy Policy"]}),(0,ac.jsxs)(be,{variant:"ghost",onClick:f,className:"w-full justify-start text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-40",disabled:!f,children:[(0,ac.jsx)(qh,{className:"w-4 h-4 mr-2"}),"Terms of Service"]})]}),(0,ac.jsx)(pG,{className:"bg-white/10"}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)("h3",{className:"text-white text-red-400",children:"Danger Zone"}),b&&(0,ac.jsxs)(be,{variant:"ghost",onClick:b,className:"w-full justify-start text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(gj,{className:"w-4 h-4 mr-2"}),"Log Out"]}),(0,ac.jsxs)(be,{variant:"ghost",onClick:()=>{fV.error("Account deletion requires confirmation")},className:"w-full justify-start text-red-400 hover:text-red-300 hover:bg-red-500/10",children:[(0,ac.jsx)(lV,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})]})]})]})]})}):(0,ac.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6 text-white",children:[(0,ac.jsx)("h2",{className:"text-xl font-semibold",children:"Settings unavailable"}),(0,ac.jsx)("p",{className:"text-white/70 text-sm mt-2",children:"Please sign in to manage your MoveSplash preferences."})]})})}let qo=bj("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),qp=bj("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),qq=bj("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),qr=bj("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),qs={Award:qq,TrendingUp:qr,Camera:bq,Users:bm,Star:lK,MessageCircle:bk,Zap:bn,Calendar:qp};function qt({onShareToMessages:a,profileUserId:b=null,isLoading:c=!1,onBackToFriends:d}={}){let{currentUser:e,profileUser:f,profileUserId:g,allUsers:h,updateUser:i,addPost:j,deletePost:k,likePost:l,sharePost:m,getUserStats:n,getAchievements:o,loadUserData:p,loadProfileUser:q,fetchComments:r,addComment:s}=f3(),[t,u]=(0,ad.useState)(!1),v=f??e,[w,x]=(0,ad.useState)(v?.name||""),[y,z]=(0,ad.useState)(v?.bio||""),[A,B]=(0,ad.useState)(v?.location||""),[C,D]=(0,ad.useState)(v?.website||""),[E,F]=(0,ad.useState)(""),[G,H]=(0,ad.useState)(!1),[I,J]=(0,ad.useState)([]),K=e?.id??null,L=!!(v&&K&&v.id===K),[M,N]=(0,ad.useState)({}),[O,P]=(0,ad.useState)({}),[Q,R]=(0,ad.useState)(null),[S,T]=(0,ad.useState)(!1),U=(0,ad.useRef)(null),V=(0,ad.useRef)(null);(0,ad.useEffect)(()=>{b&&g!==b&&q(b)},[b,g,q]),(0,ad.useEffect)(()=>{v&&!t&&(x(v.name||""),z(v.bio||""),B(v.location||""),D(v.website||""))},[v,t]),(0,ad.useEffect)(()=>{v?N(a=>{let b={};v.posts.forEach(c=>{let d={likes:c.likes,liked:!!K&&c.likedBy.includes(K),dirty:!1},e=a[c.id];if(e?.dirty){let a=e.likes===d.likes&&e.liked===d.liked;b[c.id]=a?d:e}else e&&!e.dirty&&e.likes===d.likes&&e.liked===d.liked?b[c.id]=e:b[c.id]=d});let c=Object.keys(a),d=Object.keys(b);return c.length===d.length&&d.every(c=>a[c]===b[c])?a:b}):N({})},[v,K]),(0,ad.useEffect)(()=>{v?P(a=>{let b={};return v.posts.forEach(c=>{let d=a[c.id];d&&(b[c.id]=d)}),b}):P({})},[v]);let W=(0,ad.useMemo)(()=>v?v.posts.reduce((a,b)=>{let c=M[b.id];return c?a+(c.likes-b.likes):a},0):0,[v,M]),X=(0,ad.useMemo)(()=>Array.from(h.values()),[h]),Y=(0,ad.useMemo)(()=>{if(!v)return{totalPosts:0,totalFriends:0,totalLikes:0,rank:0};if(L)return n();let a=v.posts.length,b=v.friendIds.length,c=v.posts.reduce((a,b)=>a+b.likes,0),d=10*a+c+5*b,e=X.map(a=>{let b=a.posts.reduce((a,b)=>a+b.likes,0);return{id:a.id,score:10*a.posts.length+b+5*a.friendIds.length}}).sort((a,b)=>b.score-a.score),f=e.findIndex(a=>a.id===v.id);return{totalPosts:a,totalFriends:b,totalLikes:c,rank:f>=0?f+1:e.filter(a=>a.score>=d).length+1}},[X,v,n,L]);if(c||!v&&(b??g))return(0,ac.jsx)("div",{className:"h-[calc(100vh-80px)] flex items-center justify-center",children:(0,ac.jsxs)(gl,{className:"px-6 py-4 bg-white/10 border-white/20 text-white/80 flex items-center gap-3",children:[(0,ac.jsx)(fK,{className:"w-5 h-5 animate-spin"}),(0,ac.jsx)("span",{children:"Loading profile..."})]})});if(!v)return e?(0,ac.jsx)("div",{className:"h-[calc(100vh-80px)] flex items-center justify-center",children:(0,ac.jsxs)(gl,{className:"px-6 py-8 bg-white/10 border-white/20 text-center text-white/80 space-y-4",children:[(0,ac.jsx)("p",{children:"We couldnt find that profile."}),d&&(0,ac.jsx)(be,{onClick:d,className:"bg-white/10 hover:bg-white/20 text-white border-white/20",children:"Back to Friends"})]})}):(0,ac.jsx)("div",{className:"h-[calc(100vh-80px)] flex items-center justify-center",children:(0,ac.jsx)("p",{className:"text-white",children:"Please log in to view your profile"})});let Z=L?o():[],$=Math.max(Y.totalLikes+W,0),_=new Date(v.joinedAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}),aa=[{label:"Posts",value:Y.totalPosts,icon:bk},{label:"Friends",value:Y.totalFriends,icon:bm},{label:"Likes",value:$>=1e6?($/1e6).toFixed(1)+"M":$>=1e3?($/1e3).toFixed(1)+"K":$.toString(),icon:bp},{label:"Rank",value:`#${Y.rank}`,icon:qr}],ab=async()=>{v&&L&&(await i({name:w,bio:y,location:A,website:C})?(await p(v.id)||console.warn("Profile refresh from Supabase failed; continuing with local state"),await q(v.id),u(!1),fV.success("Profile updated! ")):fV.error("Unable to update profile right now. Please try again."))},ae=async b=>{if(!Q||!v||S)return;if(!K)return void fV.info("Sign in to share posts.");let c=is(Q.memberId,Q.userpostId),d=it(Q.authorName,Q.text),e=`${d}

${c}`,f=iu(Q),g=!1,h=a=>{};switch(b){case"copy":try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(e);else{let a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.focus(),a.select(),document.execCommand("copy"),document.body.removeChild(a)}fV.success("Post link copied!"),g=!0}catch(a){console.error("Unable to copy link:",a),fV.error("Unable to copy the link. Please try again.")}break;case"facebook":h(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(c)}`),fV.info("Opening Facebook share"),g=!0;break;case"twitter":h(`https://twitter.com/intent/tweet?text=${encodeURIComponent(`${d} ${c}`)}`),fV.info("Opening X (Twitter)"),g=!0;break;case"whatsapp":h(`https://wa.me/?text=${encodeURIComponent(e)}`),fV.info("Launching WhatsApp"),g=!0;break;case"telegram":h(`https://t.me/share/url?url=${encodeURIComponent(c)}&text=${encodeURIComponent(d)}`),fV.info("Opening Telegram"),g=!0;break;case"email":encodeURIComponent("Check this MoveYSplash post"),encodeURIComponent(e),fV.info("Composing email"),g=!0;break;case"movesplash":a?.({message:f,postId:Q.userpostId,postOwnerId:Q.memberId}),fV.success("Draft ready in MoveYSplash Messages "),g=!0;break;case"web":if(navigator.share)try{await navigator.share({title:`${Q.authorName} on MoveYSplash`,text:d,url:c}),fV.success("Shared successfully! "),g=!0}catch(a){a instanceof DOMException&&"AbortError"===a.name?fV.info("Share cancelled."):(console.error("Web share failed:",a),fV.error("Unable to share via your device."))}else fV.info("Device share sheet is not available.")}if(g){T(!0);try{await m(Q.memberId,Q.userpostId,{platform:b,sharerUserId:K,message:f})}catch(a){console.error("Error syncing share count:",a)}finally{T(!1),R(null)}}},af=async a=>{let b=O[a.id],c=!b?.isOpen,d=b?.hasLoaded??!1;if(P(b=>{let e=b[a.id],f=e?{...e,isOpen:!e.isOpen,isLoading:c&&!d,error:null}:{isOpen:!0,isLoading:!0,isSubmitting:!1,hasLoaded:!1,comments:[],input:"",error:null};return{...b,[a.id]:f}}),c&&!d)try{let b=await r(a.userId,a.id);P(c=>{let d=c[a.id];return d?{...c,[a.id]:{...d,isLoading:!1,hasLoaded:!0,comments:b}}:c})}catch(b){console.error("Error loading comments:",b),P(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isLoading:!1,hasLoaded:!0,error:"Unable to load comments right now."}}:b})}},ag=async a=>{let b=O[a.id];if(!b||b.isSubmitting)return;if(!K)return void fV.info("Please log in to comment.");let c=b.input.trim();if(!c)return void P(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,error:"Please enter a comment before posting."}}:b});P(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isSubmitting:!0,error:null}}:b});let d=await s(a.userId,a.id,c);d?P(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isSubmitting:!1,hasLoaded:!0,comments:[...c.comments,d.comment],input:"",error:null}}:b}):P(b=>{let c=b[a.id];return c?{...b,[a.id]:{...c,isSubmitting:!1,error:"Unable to post your comment right now."}}:b})};return(0,ac.jsxs)("div",{className:"h-[calc(100vh-80px)] overflow-hidden",children:[(0,ac.jsx)(eL,{className:"h-full",children:(0,ac.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6 pb-8",children:[!L&&d&&(0,ac.jsx)("div",{className:"flex justify-end",children:(0,ac.jsx)(be,{onClick:d,variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:"Back to Friends"})}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 overflow-hidden",children:[(0,ac.jsx)("div",{className:"h-48 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 relative",children:(0,ac.jsx)("div",{className:"absolute inset-0 bg-black/20"})}),(0,ac.jsxs)("div",{className:"p-6 relative",children:[(0,ac.jsx)("div",{className:"absolute -top-20 left-6",children:(0,ac.jsxs)("div",{className:"relative group",children:[(0,ac.jsxs)(d$,{className:"w-32 h-32 border-4 border-white/20 backdrop-blur-xl bg-white/10",children:[(0,ac.jsx)(d_,{src:v.avatar}),(0,ac.jsx)(d0,{children:v.name[0]})]}),L&&(0,ac.jsx)("button",{onClick:()=>{L?fV.success("Profile picture updated! "):fV.info("You can only change your own profile picture.")},className:"absolute bottom-0 right-0 w-10 h-10 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,ac.jsx)(bq,{className:"w-5 h-5 text-white"})})]})}),!t&&L&&(0,ac.jsx)("div",{className:"flex justify-end mb-4",children:(0,ac.jsxs)(be,{onClick:()=>{u(!0),x(v.name),z(v.bio),B(v.location),D(v.website)},className:"bg-white/10 hover:bg-white/20 text-white border border-white/20",children:[(0,ac.jsx)(qo,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})}),t&&L&&(0,ac.jsxs)("div",{className:"flex justify-end gap-2 mb-4",children:[(0,ac.jsxs)(be,{onClick:()=>{x(v.name),z(v.bio),B(v.location),D(v.website),u(!1)},variant:"ghost",className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(fH,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,ac.jsxs)(be,{onClick:ab,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0",children:[(0,ac.jsx)(qk,{className:"w-4 h-4 mr-2"}),"Save"]})]}),(0,ac.jsxs)("div",{className:"mt-16 space-y-4",children:[t?(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white",children:"Name"}),(0,ac.jsx)(jF,{value:w,onChange:a=>x(a.target.value),className:"bg-white/5 border-white/20 text-white"})]}):(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)("h1",{className:"text-white text-3xl",children:v.name}),(0,ac.jsx)("p",{className:"text-white/70",children:v.username})]}),t?(0,ac.jsxs)("div",{className:"space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white",children:"Bio"}),(0,ac.jsx)(gm,{value:y,onChange:a=>z(a.target.value),className:"bg-white/5 border-white/20 text-white min-h-[80px]",placeholder:"Tell us about yourself..."})]}):v.bio&&(0,ac.jsx)("p",{className:"text-white/80",children:v.bio}),(0,ac.jsx)("div",{className:"flex flex-wrap gap-4 text-white/70 text-sm",children:t?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsxs)("div",{className:"flex-1 min-w-[200px] space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white",children:"Location"}),(0,ac.jsx)(jF,{value:A,onChange:a=>B(a.target.value),className:"bg-white/5 border-white/20 text-white",placeholder:"City, Country"})]}),(0,ac.jsxs)("div",{className:"flex-1 min-w-[200px] space-y-2",children:[(0,ac.jsx)(ph,{className:"text-white",children:"Website"}),(0,ac.jsx)(jF,{value:C,onChange:a=>D(a.target.value),className:"bg-white/5 border-white/20 text-white",placeholder:"yourwebsite.com"})]})]}):(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(im,{className:"w-4 h-4"}),(0,ac.jsx)("span",{children:v.email})]}),v.location&&(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(qj,{className:"w-4 h-4"}),(0,ac.jsx)("span",{children:v.location})]}),v.website&&(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(il,{className:"w-4 h-4"}),(0,ac.jsx)("a",{href:`https://${v.website}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:v.website})]}),(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)(qp,{className:"w-4 h-4"}),(0,ac.jsxs)("span",{children:["Joined ",_]})]})]})})]})]})]}),(0,ac.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:aa.map(a=>(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:(0,ac.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ac.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,ac.jsx)(a.icon,{className:"w-6 h-6 text-white"})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-white text-2xl",children:a.value}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:a.label})]})]})},a.label))}),Z.length>0&&(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("h2",{className:"text-white text-xl mb-4 flex items-center gap-2",children:[(0,ac.jsx)(qq,{className:"w-5 h-5"}),"Achievements (",Z.length,")"]}),(0,ac.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Z.map(a=>{let b=qs[a.icon]||qq;return(0,ac.jsxs)("div",{className:"group relative",children:[(0,ac.jsxs)("div",{className:`bg-gradient-to-br ${a.color} p-4 rounded-xl text-center hover:scale-105 transition-transform cursor-pointer`,children:[(0,ac.jsx)(b,{className:"w-8 h-8 text-white mx-auto mb-2"}),(0,ac.jsx)("p",{className:"text-white text-sm",children:a.name})]}),(0,ac.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-black/90 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:[a.description,(0,ac.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black/90"})]})]},a.id)})})]}),(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20",children:(0,ac.jsxs)(fz,{defaultValue:"posts",className:"w-full",children:[(0,ac.jsxs)(fA,{className:"w-full bg-white/5 border-b border-white/20 rounded-none",children:[(0,ac.jsxs)(fB,{value:"posts",className:"flex-1",children:["Posts (",v.posts.length,")"]}),(0,ac.jsx)(fB,{value:"media",className:"flex-1",children:"Media"}),(0,ac.jsx)(fB,{value:"likes",className:"flex-1",children:"Likes"})]}),(0,ac.jsxs)(fC,{value:"posts",className:"p-6 space-y-6",children:[L&&(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/5 border-white/20 p-4",children:(0,ac.jsxs)("div",{className:"flex gap-3",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:v.avatar}),(0,ac.jsx)(d0,{children:v.name[0]})]}),(0,ac.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,ac.jsx)(gm,{value:E,onChange:a=>F(a.target.value),placeholder:"What's on your mind?",className:"bg-white/5 border-white/20 text-white placeholder:text-white/40 min-h-[100px]"}),I.length>0&&(0,ac.jsx)("div",{className:"grid grid-cols-3 gap-2",children:I.map(a=>(0,ac.jsxs)("div",{className:"relative group",children:["image"===a.type?(0,ac.jsx)(bt,{src:a.url,alt:"Selected",className:"w-full h-32 object-cover rounded-lg"}):(0,ac.jsx)("video",{src:a.url,className:"w-full h-32 object-cover rounded-lg"}),(0,ac.jsx)("button",{onClick:()=>{var b;return b=a.id,void J(a=>a.filter(a=>a.id!==b))},className:"absolute top-2 right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,ac.jsx)(fH,{className:"w-4 h-4 text-white"})})]},a.id))}),(0,ac.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)("input",{ref:U,type:"file",accept:"image/*",multiple:!0,onChange:a=>{let b=a.target.files;b&&Array.from(b).forEach(a=>{let b=new FileReader;b.onload=a=>{let b=a.target?.result;J(a=>[...a,{id:Math.random().toString(),type:"image",url:b}])},b.readAsDataURL(a)})},className:"hidden"}),(0,ac.jsx)("input",{ref:V,type:"file",accept:"video/*",onChange:a=>{let b=a.target.files;b&&Array.from(b).forEach(a=>{let b=new FileReader;b.onload=a=>{let b=a.target?.result;J(a=>[...a,{id:Math.random().toString(),type:"video",url:b}])},b.readAsDataURL(a)})},className:"hidden"}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>U.current?.click(),className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(go,{className:"w-5 h-5 mr-2"}),"Photo"]}),(0,ac.jsxs)(be,{variant:"ghost",size:"sm",onClick:()=>V.current?.click(),className:"text-white/70 hover:text-white hover:bg-white/10",children:[(0,ac.jsx)(bl,{className:"w-5 h-5 mr-2"}),"Video"]}),(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)(be,{variant:"ghost",size:"sm",onClick:()=>H(!G),className:"text-white/70 hover:text-white hover:bg-white/10",children:(0,ac.jsx)(gp,{className:"w-5 h-5"})}),G&&(0,ac.jsx)("div",{className:"absolute bottom-full left-0 mb-2 z-10",children:(0,ac.jsx)(gt,{onSelect:a=>{F(b=>b+a),H(!1)}})})]})]}),(0,ac.jsxs)(be,{onClick:()=>{E.trim()||0!==I.length?(j({text:E,media:I.length>0?I.map(a=>({type:a.type,url:a.url})):void 0}),F(""),J([]),fV.success("Post created! ")):fV.error("Please add some content to your post")},disabled:!E.trim()&&0===I.length,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0",children:[(0,ac.jsx)(gq,{className:"w-4 h-4 mr-2"}),"Post"]})]})]})]})}),(0,ac.jsx)("div",{className:"space-y-4",children:0===v.posts.length?(0,ac.jsxs)("div",{className:"text-center py-12",children:[(0,ac.jsx)(bk,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),(0,ac.jsx)("p",{className:"text-white/60",children:"No posts yet. Share your first post!"})]}):v.posts.map(a=>{var b;let c,d,e,f,g=M[a.id],h=g?g.liked:!!K&&a.likedBy.includes(K),i=g?g.likes:a.likes,j=O[a.id],m=j?.isOpen;return(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/5 border-white/20 p-4",children:(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsxs)(d$,{className:"w-10 h-10 border-2 border-white/20",children:[(0,ac.jsx)(d_,{src:v.avatar}),(0,ac.jsx)(d0,{children:v.name[0]})]}),(0,ac.jsxs)("div",{className:"flex-1",children:[(0,ac.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("p",{className:"text-white",children:v.name}),(0,ac.jsx)("p",{className:"text-white/50 text-sm",children:(b=a.timestamp,d=Math.floor((c=new Date().getTime()-b.getTime())/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5),d<60?`${d}m ago`:e<24?`${e}h ago`:f<7?`${f}d ago`:b.toLocaleDateString())})]}),(0,ac.jsx)(be,{variant:"ghost",size:"sm",onClick:()=>{k(a.id),fV.success("Post deleted")},className:"text-white/50 hover:text-red-400 hover:bg-white/10",children:(0,ac.jsx)(lV,{className:"w-4 h-4"})})]}),a.text&&(0,ac.jsx)("p",{className:"text-white/90 mb-3",children:a.text}),a.media&&a.media.length>0&&(0,ac.jsx)("div",{className:`grid gap-2 mb-3 ${1===a.media.length?"grid-cols-1":"grid-cols-2"}`,children:a.media.map((a,b)=>(0,ac.jsx)("div",{className:"rounded-lg overflow-hidden",children:"image"===a.type?(0,ac.jsx)(bt,{src:a.url,alt:"Post media",className:"w-full h-64 object-cover"}):(0,ac.jsx)("video",{src:a.url,controls:!0,className:"w-full h-64 object-cover"})},b))}),(0,ac.jsxs)("div",{className:"flex items-center gap-6 text-white/60 text-sm",children:[(0,ac.jsxs)("button",{type:"button",onClick:()=>(a=>{if(!v)return;if(!K)return void fV.info("Sign in to react to posts.");let b=v.posts.find(b=>b.id===a);b&&(N(c=>{let d=c[a]??{likes:b.likes,liked:!!K&&b.likedBy.includes(K),dirty:!1},e=!d.liked,f=e?d.likes+1:Math.max(d.likes-1,0);return{...c,[a]:{likes:f,liked:e,dirty:!0}}}),l(a,K))})(a.id),"aria-label":h?`Unlike post (${i})`:`Like post (${i})`,className:`flex items-center gap-2 hover:text-pink-400 transition-colors ${h?"text-pink-400":""}`,children:[(0,ac.jsx)(bp,{className:`w-5 h-5 ${h?"fill-current":""}`}),(0,ac.jsx)("span",{children:i})]}),(0,ac.jsxs)("button",{type:"button",onClick:()=>void af(a),className:`flex items-center gap-2 hover:text-blue-400 transition-colors ${m?"text-blue-400":""}`,children:[(0,ac.jsx)(bk,{className:"w-5 h-5"}),(0,ac.jsx)("span",{children:a.comments})]}),(0,ac.jsxs)(be,{type:"button",variant:"ghost",size:"sm",onClick:()=>(a=>{if(!v)return void fV.info("Please log in to share posts.");let b=v.username??"",c=b?b.startsWith("@")?b:`@${b}`:"@movesplash-user";R({userpostId:a.id,memberId:a.userId,authorName:v.name,authorUsername:c,authorAvatar:v.avatar,text:a.text??""})})(a),disabled:S&&Q?.userpostId===a.id,className:"flex items-center gap-2 text-white/70 hover:text-green-400 hover:bg-white/10 disabled:opacity-50",children:[(0,ac.jsx)(bo,{className:"w-5 h-5 mr-1"}),(0,ac.jsx)("span",{children:a.shares})]})]}),j?.isOpen&&(0,ac.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10 space-y-4",children:[j.isLoading?(0,ac.jsxs)("div",{className:"flex items-center gap-3 text-white/70 text-sm",children:[(0,ac.jsx)(fK,{className:"w-4 h-4 animate-spin"}),(0,ac.jsx)("span",{children:"Loading comments..."})]}):(0,ac.jsxs)(ac.Fragment,{children:[0===j.comments.length&&!j.error&&(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Be the first to comment."}),j.comments.map(a=>{let b;return(0,ac.jsxs)("div",{className:"flex gap-3",children:[(0,ac.jsxs)(d$,{className:"w-9 h-9 border border-white/10",children:[(0,ac.jsx)(d_,{src:a.authorAvatar||(b=a.authorId,`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(b||"user")}`)}),(0,ac.jsx)(d0,{children:a.authorName[0]??"U"})]}),(0,ac.jsxs)("div",{className:"flex-1",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-white text-sm",children:a.authorName}),(0,ac.jsx)("span",{className:"text-white/40 text-xs",children:(a=>{let b=Math.floor((Date.now()-a.getTime())/6e4);if(b<1)return"Just now";if(b<60)return`${b}m ago`;let c=Math.floor(b/60);if(c<24)return`${c}h ago`;let d=Math.floor(c/24);return d<7?`${d}d ago`:a.toLocaleDateString()})(a.createdAt)})]}),(0,ac.jsx)("p",{className:"text-white/80 text-sm whitespace-pre-line",children:a.content})]})]},a.id)}),j.error&&(0,ac.jsx)("p",{className:"text-red-300 text-sm",children:j.error})]}),(0,ac.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,ac.jsx)(gm,{value:j.input,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void P(a=>{let b=a[c];return b?{...a,[c]:{...b,input:d,error:null}}:a})},placeholder:"Write a comment...",rows:2,className:"flex-1 bg-white/5 border-white/20 text-white placeholder:text-white/50"}),(0,ac.jsx)(be,{type:"button",onClick:()=>void ag(a),disabled:j.isSubmitting||0===j.input.trim().length,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 self-center disabled:opacity-50",children:j.isSubmitting?(0,ac.jsx)(fK,{className:"w-4 h-4 animate-spin"}):(0,ac.jsx)(gq,{className:"w-4 h-4"})})]})]})]})]})},a.id)})})]}),(0,ac.jsxs)(fC,{value:"media",className:"p-6",children:[(0,ac.jsx)("div",{className:"grid grid-cols-3 gap-4",children:v.posts.filter(a=>a.media&&a.media.length>0).flatMap(a=>a.media||[]).map((a,b)=>(0,ac.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden group relative",children:"image"===a.type?(0,ac.jsx)(bt,{src:a.url,alt:"Media",className:"w-full h-full object-cover group-hover:scale-110 transition-transform"}):(0,ac.jsx)("video",{src:a.url,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"})},b))}),0===v.posts.filter(a=>a.media&&a.media.length>0).length&&(0,ac.jsxs)("div",{className:"text-center py-12",children:[(0,ac.jsx)(go,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),(0,ac.jsx)("p",{className:"text-white/60",children:"No media posts yet"})]})]}),(0,ac.jsx)(fC,{value:"likes",className:"p-6",children:(0,ac.jsx)("div",{className:"space-y-4",children:(0,ac.jsxs)("div",{className:"text-center py-12",children:[(0,ac.jsx)(bp,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),(0,ac.jsx)("p",{className:"text-white/60",children:"Posts you like will appear here"})]})})})]})})]})}),(0,ac.jsx)(ir,{open:!!Q,post:Q,onClose:()=>{S||R(null)},onSelect:a=>{ae(a)}})]})}function qu(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}var qv=globalThis?.document?ad.useLayoutEffect:()=>{},qw=ad[" useInsertionEffect ".trim().toString()]||qv;function qx({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return qw(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}Symbol("RADIX:SYNC_STATE");var qy=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),qz=globalThis?.document?ad.useLayoutEffect:()=>{},qA=ad[" useInsertionEffect ".trim().toString()]||qz;function qB(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}Symbol("RADIX:SYNC_STATE");var qC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=ah(`Primitive.${b}`),d=ad.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,ac.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),qD="Collapsible",[qE,qF]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(qD),[qG,qH]=qE(qD),qI=ad.forwardRef((a,b)=>{let{__scopeCollapsible:c,open:d,defaultOpen:e,disabled:f,onOpenChange:g,...h}=a,[i,j]=function({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=ad.useState(a),e=ad.useRef(c),f=ad.useRef(b);return qA(()=>{f.current=b},[b]),ad.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=ad.useRef(void 0!==a);ad.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,ad.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}({prop:d,defaultProp:e??!1,onChange:g,caller:qD});return(0,ac.jsx)(qG,{scope:c,disabled:f,contentId:eZ(),open:i,onOpenToggle:ad.useCallback(()=>j(a=>!a),[j]),children:(0,ac.jsx)(qC.div,{"data-state":qO(i),"data-disabled":f?"":void 0,...h,ref:b})})});qI.displayName=qD;var qJ="CollapsibleTrigger",qK=ad.forwardRef((a,b)=>{let{__scopeCollapsible:c,...d}=a,e=qH(qJ,c);return(0,ac.jsx)(qC.button,{type:"button","aria-controls":e.contentId,"aria-expanded":e.open||!1,"data-state":qO(e.open),"data-disabled":e.disabled?"":void 0,disabled:e.disabled,...d,ref:b,onClick:function(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}(a.onClick,e.onOpenToggle)})});qK.displayName=qJ;var qL="CollapsibleContent",qM=ad.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=qH(qL,a.__scopeCollapsible);return(0,ac.jsx)(d4,{present:c||e.open,children:({present:a})=>(0,ac.jsx)(qN,{...d,ref:b,present:a})})});qM.displayName=qL;var qN=ad.forwardRef((a,b)=>{let{__scopeCollapsible:c,present:d,children:e,...f}=a,g=qH(qL,c),[h,i]=ad.useState(d),j=ad.useRef(null),k=function(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=qB(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():qB(a[b],null)}}}}(...a),a)}(b,j),l=ad.useRef(0),m=l.current,n=ad.useRef(0),o=n.current,p=g.open||h,q=ad.useRef(p),r=ad.useRef(void 0);return ad.useEffect(()=>{let a=requestAnimationFrame(()=>q.current=!1);return()=>cancelAnimationFrame(a)},[]),qz(()=>{let a=j.current;if(a){r.current=r.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();l.current=b.height,n.current=b.width,q.current||(a.style.transitionDuration=r.current.transitionDuration,a.style.animationName=r.current.animationName),i(d)}},[g.open,d]),(0,ac.jsx)(qC.div,{"data-state":qO(g.open),"data-disabled":g.disabled?"":void 0,id:g.contentId,hidden:!p,...f,ref:k,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":o?`${o}px`:void 0,...a.style},children:p&&e})});function qO(a){return a?"open":"closed"}var qP="Accordion",qQ=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[qR,qS,qT]=eR(qP),[qU,qV]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>ad.createContext(a));return function(c){let d=c?.[a]||b;return ad.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=ad.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=ad.useMemo(()=>g,Object.values(g));return(0,ac.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=ad.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return ad.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}(qP,[qT,qF]),qW=qF(),qX=ad.default.forwardRef((a,b)=>{let{type:c,...d}=a;return(0,ac.jsx)(qR.Provider,{scope:a.__scopeAccordion,children:"multiple"===c?(0,ac.jsx)(q1,{...d,ref:b}):(0,ac.jsx)(q0,{...d,ref:b})})});qX.displayName=qP;var[qY,qZ]=qU(qP),[q$,q_]=qU(qP,{collapsible:!1}),q0=ad.default.forwardRef((a,b)=>{let{value:c,defaultValue:d,onValueChange:e=()=>{},collapsible:f=!1,...g}=a,[h,i]=qx({prop:c,defaultProp:d??"",onChange:e,caller:qP});return(0,ac.jsx)(qY,{scope:a.__scopeAccordion,value:ad.default.useMemo(()=>h?[h]:[],[h]),onItemOpen:i,onItemClose:ad.default.useCallback(()=>f&&i(""),[f,i]),children:(0,ac.jsx)(q$,{scope:a.__scopeAccordion,collapsible:f,children:(0,ac.jsx)(q4,{...g,ref:b})})})}),q1=ad.default.forwardRef((a,b)=>{let{value:c,defaultValue:d,onValueChange:e=()=>{},...f}=a,[g,h]=qx({prop:c,defaultProp:d??[],onChange:e,caller:qP}),i=ad.default.useCallback(a=>h((b=[])=>[...b,a]),[h]),j=ad.default.useCallback(a=>h((b=[])=>b.filter(b=>b!==a)),[h]);return(0,ac.jsx)(qY,{scope:a.__scopeAccordion,value:g,onItemOpen:i,onItemClose:j,children:(0,ac.jsx)(q$,{scope:a.__scopeAccordion,collapsible:!0,children:(0,ac.jsx)(q4,{...f,ref:b})})})}),[q2,q3]=qU(qP),q4=ad.default.forwardRef((a,b)=>{let{__scopeAccordion:c,disabled:d,dir:e,orientation:f="vertical",...g}=a,h=function(...a){return ad.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=qu(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():qu(a[b],null)}}}}(...a),a)}(ad.default.useRef(null),b),i=qS(c),j="ltr"===ea(e),k=function(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}(a.onKeyDown,a=>{if(!qQ.includes(a.key))return;let b=a.target,c=i().filter(a=>!a.ref.current?.disabled),d=c.findIndex(a=>a.ref.current===b),e=c.length;if(-1===d)return;a.preventDefault();let g=d,h=e-1,k=()=>{(g=d+1)>h&&(g=0)},l=()=>{(g=d-1)<0&&(g=h)};switch(a.key){case"Home":g=0;break;case"End":g=h;break;case"ArrowRight":"horizontal"===f&&(j?k():l());break;case"ArrowDown":"vertical"===f&&k();break;case"ArrowLeft":"horizontal"===f&&(j?l():k());break;case"ArrowUp":"vertical"===f&&l()}let m=g%e;c[m].ref.current?.focus()});return(0,ac.jsx)(q2,{scope:c,disabled:d,direction:e,orientation:f,children:(0,ac.jsx)(qR.Slot,{scope:c,children:(0,ac.jsx)(qy.div,{...g,"data-orientation":f,ref:h,onKeyDown:d?void 0:k})})})}),q5="AccordionItem",[q6,q7]=qU(q5),q8=ad.default.forwardRef((a,b)=>{let{__scopeAccordion:c,value:d,...e}=a,f=q3(q5,c),g=qZ(q5,c),h=qW(c),i=eZ(),j=d&&g.value.includes(d)||!1,k=f.disabled||a.disabled;return(0,ac.jsx)(q6,{scope:c,open:j,disabled:k,triggerId:i,children:(0,ac.jsx)(qI,{"data-orientation":f.orientation,"data-state":rf(j),...h,...e,ref:b,disabled:k,open:j,onOpenChange:a=>{a?g.onItemOpen(d):g.onItemClose(d)}})})});q8.displayName=q5;var q9="AccordionHeader",ra=ad.default.forwardRef((a,b)=>{let{__scopeAccordion:c,...d}=a,e=q3(qP,c),f=q7(q9,c);return(0,ac.jsx)(qy.h3,{"data-orientation":e.orientation,"data-state":rf(f.open),"data-disabled":f.disabled?"":void 0,...d,ref:b})});ra.displayName=q9;var rb="AccordionTrigger",rc=ad.default.forwardRef((a,b)=>{let{__scopeAccordion:c,...d}=a,e=q3(qP,c),f=q7(rb,c),g=q_(rb,c),h=qW(c);return(0,ac.jsx)(qR.ItemSlot,{scope:c,children:(0,ac.jsx)(qK,{"aria-disabled":f.open&&!g.collapsible||void 0,"data-orientation":e.orientation,id:f.triggerId,...h,...d,ref:b})})});rc.displayName=rb;var rd="AccordionContent",re=ad.default.forwardRef((a,b)=>{let{__scopeAccordion:c,...d}=a,e=q3(qP,c),f=q7(rd,c),g=qW(c);return(0,ac.jsx)(qM,{role:"region","aria-labelledby":f.triggerId,"data-orientation":e.orientation,...g,...d,ref:b,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});function rf(a){return a?"open":"closed"}function rg({...a}){return(0,ac.jsx)(qX,{"data-slot":"accordion",...a})}function rh({className:a,...b}){return(0,ac.jsx)(q8,{"data-slot":"accordion-item",className:bc("border-b last:border-b-0",a),...b})}function ri({className:a,children:b,...c}){return(0,ac.jsx)(ra,{className:"flex",children:(0,ac.jsxs)(rc,{"data-slot":"accordion-trigger",className:bc("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...c,children:[b,(0,ac.jsx)(oV,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function rj({className:a,children:b,...c}){return(0,ac.jsx)(re,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...c,children:(0,ac.jsx)("div",{className:bc("pt-0 pb-4",a),children:b})})}re.displayName=rd;let rk=bj("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),rl=bj("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function rm({onBack:a}){let[b,c]=(0,ad.useState)(""),d=[{id:"getting-started",title:"Getting Started",icon:rk,color:"from-blue-500 to-cyan-500",articles:[{question:"How do I sign up?",answer:"Tap 'Get Started,' add your name, email, and a password, then pick a birthday. We drop you into the app right away so you can finish setup later."},{question:"How do I find friends quickly?",answer:"Head to the Friends tab, search by name or @handle, or share your personal invite link. Accept requests from the same screen."},{question:"Why use MoveSplash instead of juggling other apps?",answer:"Group chat, calls, stories, and the feed live in one place with a mostly chronological timeline. No noisy ads or mystery ranking rules."}]},{id:"messaging",title:"Messaging & Chat",icon:nx,color:"from-purple-500 to-pink-500",articles:[{question:"How do I send a message?",answer:"Open Messages, pick a friend, type, and hit enter. Drop emojis, GIFs, or /giphy commands if you want to spice it up."},{question:"What about group chats?",answer:"Select 'New Group,' choose up to 20 friends, and name the thread. Everyone can share photos, polls, files, and reactions immediately."},{question:"How do I share media?",answer:"Click the paperclip or drag files right into the composer. Large videos compress automatically so they still send quickly."},{question:"Can I send voice notes?",answer:"Hold the mic icon to record, release to send, swipe left to cancel. Perfect when you are walking or just cannot type."}]},{id:"video-calls",title:"Video & Voice Calls",icon:bl,color:"from-green-500 to-emerald-500",articles:[{question:"How do I start a call?",answer:"Open any chat and tap the camera or phone icon. Group chats instantly turn into conference calls with up to 20 people."},{question:"What quality should I expect?",answer:"If your gear and connection can handle it we will push 4K video. Otherwise we gracefully fall back to 1080p or 720p so calls stay smooth."},{question:"How do I share my screen?",answer:"During a call, hit the monitor icon and choose your window, tab, or full desktop. A border shows what everyone can see."},{question:"What is demo mode?",answer:"When another app already owns your camera, demo mode fakes a video feed so you can keep presenting without replugging gear."}]},{id:"stories",title:"Stories & Moments",icon:go,color:"from-orange-500 to-yellow-500",articles:[{question:"How do I post a story?",answer:"Tap your avatar with the plus sign, shoot something new or upload from the camera roll, add stickers or text, then post."},{question:"Who sees my story?",answer:"Friends by default, but you can switch to Close Friends or a custom list before publishing each story."},{question:"Can I see who watched it?",answer:"Open your own story and swipe up to see a viewer list with timestamps."},{question:"Do stories auto-save?",answer:"We stash a copy in your private Memories view and you can download it whenever you want."}]},{id:"feed",title:"Social Feed",icon:bm,color:"from-pink-500 to-rose-500",articles:[{question:"How does the feed work?",answer:"It is mostly chronological from the people you follow with gentle bumps for posts you missed. No endless recommended junk."},{question:"How do I create a post?",answer:"Click 'What's on your mind?', type your update, add media if you want, choose the audience, and press Post."},{question:"What can I share?",answer:"Text, photos, videos, playlists, polls, and location tags all live side by side. Mix and match."},{question:"How do reactions work?",answer:"Tap the heart for a quick like or hold it to pick from the emoji stack - each one animates differently."}]},{id:"privacy",title:"Privacy & Security",icon:qf,color:"from-indigo-500 to-purple-500",articles:[{question:"Is my data safe?",answer:"Messages are encrypted in transit and at rest. We do not sell personal info. Details live in the Privacy Policy."},{question:"How do I control who sees my posts?",answer:"Every post has a visibility picker (Public, Friends, Close Friends, Custom). We remember your last choice."},{question:"How do I block or report someone?",answer:"From their profile, open the three-dot menu and choose Block or Report. We review reports quickly and keep you anonymous."},{question:"Can I deactivate or delete my account?",answer:"Go to Settings -> Account. Deactivate to take a break, or start a permanent deletion which finishes after 30 days."}]},{id:"settings",title:"Settings & Account",icon:gi,color:"from-teal-500 to-cyan-500",articles:[{question:"How do I change my profile photo?",answer:"Open your profile, tap the avatar, and upload a new shot or snap one on the spot."},{question:"Where do I manage notifications?",answer:"Settings -> Notifications lets you toggle DMs, calls, mentions, and set quiet hours so MoveSplash stays chill while you sleep."},{question:"Can I tweak the theme?",answer:"MoveSplash follows your system light or dark mode and lets you customize accent colors plus chat bubble gradients."},{question:"How do I change my password?",answer:"Settings -> Account -> Change Password. Enter the current password once and the new one twice to confirm."}]}],e=d.map(a=>({...a,articles:a.articles.filter(a=>""===b||a.question.toLowerCase().includes(b.toLowerCase())||a.answer.toLowerCase().includes(b.toLowerCase()))})).filter(a=>a.articles.length>0);return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-pink-900 relative overflow-hidden",children:[(0,ac.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,ac.jsx)("div",{className:"absolute top-0 -left-4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),(0,ac.jsx)("div",{className:"absolute top-0 -right-4 w-96 h-96 bg-yellow-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),(0,ac.jsx)("div",{className:"absolute -bottom-8 left-20 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,ac.jsxs)("div",{className:"mb-8",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center space-y-4 mb-8",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 mb-4",children:(0,ac.jsx)(qg,{className:"w-10 h-10 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-5xl",children:"Help Center"}),(0,ac.jsx)("p",{className:"text-white/70 text-lg",children:"Find answers to common questions and learn how to use MoveSplash"})]}),(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-4 mb-6",children:(0,ac.jsxs)("div",{className:"relative",children:[(0,ac.jsx)(lG,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/50"}),(0,ac.jsx)(jF,{placeholder:"Search for help...",value:b,onChange:a=>c(a.target.value),className:"pl-10 bg-white/5 border-white/20 text-white placeholder:text-white/50"})]})})]}),""===b&&(0,ac.jsx)("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:d.map(a=>{let b=a.icon;return(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6 hover:bg-white/15 transition-all",children:[(0,ac.jsx)("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br ${a.color} mb-4`,children:(0,ac.jsx)(b,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-lg mb-2",children:a.title}),(0,ac.jsxs)("p",{className:"text-white/60 text-sm",children:[a.articles.length," articles"]})]},a.id)})}),(0,ac.jsx)("div",{className:"space-y-6",children:e.map(a=>{let b=a.icon;return(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br ${a.color}`,children:(0,ac.jsx)(b,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:a.title})]}),(0,ac.jsx)(rg,{type:"single",collapsible:!0,className:"space-y-2",children:a.articles.map((b,c)=>(0,ac.jsxs)(rh,{value:`${a.id}-${c}`,className:"border-white/10 rounded-lg overflow-hidden",children:[(0,ac.jsx)(ri,{className:"text-white hover:text-white/80 px-4 py-3 hover:bg-white/5",children:b.question}),(0,ac.jsx)(rj,{className:"text-white/70 px-4 pb-3",children:b.answer})]},c))})]},a.id)})})]})]})}let rn=bj("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ro=bj("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),rp=bj("cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);function rq({onBack:a}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-pink-900 relative overflow-hidden",children:[(0,ac.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,ac.jsx)("div",{className:"absolute top-0 -left-4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),(0,ac.jsx)("div",{className:"absolute top-0 -right-4 w-96 h-96 bg-yellow-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),(0,ac.jsx)("div",{className:"absolute -bottom-8 left-20 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-4xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-8",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 mb-4",children:(0,ac.jsx)(qf,{className:"w-10 h-10 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-5xl mb-4",children:"Privacy Policy"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Last Updated: October 17, 2025"})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-400/30 p-6 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:" Your Privacy Matters"}),(0,ac.jsx)("p",{className:"text-white/80 leading-relaxed",children:"Privacy shouldn't require a law degree. This page spells out what we collect, why we collect it, and the shortcuts you have to control it. No dark patternsjust the facts."})]}),(0,ac.jsxs)("div",{className:"space-y-6",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:(0,ac.jsx)(ro,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"Information We Collect"})]}),(0,ac.jsxs)("div",{className:"space-y-4 text-white/70",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white text-lg mb-2",children:"Account Information"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[(0,ac.jsx)("li",{children:"The name and email you typed in when creating your account."}),(0,ac.jsx)("li",{children:"Any profile photo, pronouns, or bio you choose to share."}),(0,ac.jsx)("li",{children:"Optional recovery info like a phone number so we can help if you get locked out."}),(0,ac.jsx)("li",{children:"Birthday details so we can confirm you meet the minimum age."})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white text-lg mb-2",children:"Content You Create"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[(0,ac.jsx)("li",{children:"Chats, comments, and stories you post or send to friends."}),(0,ac.jsx)("li",{children:"Photos, videos, audio notes, and files you drop into the app."}),(0,ac.jsx)("li",{children:"Optional call recordings when everyone on the call says yes."}),(0,ac.jsx)("li",{children:"Reactions, likes, and any other in-app signals you create."})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white text-lg mb-2",children:"Usage Information"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[(0,ac.jsx)("li",{children:"Which features you tap on and how often you use them."}),(0,ac.jsx)("li",{children:"Rough session stats like how long you hang out in the app."}),(0,ac.jsx)("li",{children:"Basic device details (model, OS, browser) so we can debug things."}),(0,ac.jsx)("li",{children:"Your IP address and general location (city/countrynot your street)."})]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,ac.jsx)(rn,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"How We Use Your Information"})]}),(0,ac.jsxs)("div",{className:"space-y-3 text-white/70",children:[(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Run the product:"})," We need certain data to power chats, calls, and feed features."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Improve experience:"})," Usage trends help us fix bugs and surface better suggestions."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Safety & security:"})," Logs help us flag spam, prevent abuse, and keep accounts secure."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Communications:"})," We use contact info for product updates, receipts, and support replies."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Analytics:"})," Aggregated stats tell us which features people love (or ignore)."]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:(0,ac.jsx)(qe,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"Data Security"})]}),(0,ac.jsxs)("div",{className:"space-y-3 text-white/70",children:[(0,ac.jsx)("p",{children:"Security is an ongoing job, so we layer multiple protections instead of relying on a single switch:"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[(0,ac.jsx)("li",{children:"Messages and calls are encrypted end-to-end by default."}),(0,ac.jsx)("li",{children:"Everything travels over HTTPS while in transit."}),(0,ac.jsx)("li",{children:"Independent partners run routine pen-tests and code reviews."}),(0,ac.jsx)("li",{children:"Optional 2FA keeps strangers from hijacking your account."}),(0,ac.jsx)("li",{children:"Production databases stay encrypted at rest with limited access."}),(0,ac.jsx)("li",{children:"Only vetted employees can reach user data, and every query is logged."})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:(0,ac.jsx)(fF,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"When We Share Information"})]}),(0,ac.jsxs)("div",{className:"space-y-3 text-white/70",children:[(0,ac.jsx)("p",{className:"text-white",children:"We don't sell or rent your personal data. That's not our business model."}),(0,ac.jsx)("p",{children:"We only share info when it's absolutely necessary:"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[(0,ac.jsxs)("li",{children:[(0,ac.jsx)("span",{className:"text-white",children:"You tell us to:"})," Sharing publicly or inviting friends obviously sends them your content."]}),(0,ac.jsxs)("li",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Vetted partners:"})," Hosting, analytics, and support providers under strict confidentiality clauses."]}),(0,ac.jsxs)("li",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Law enforcement:"})," When a valid legal request arrives or there's an immediate risk of harm."]}),(0,ac.jsxs)("li",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Company changes:"})," If we merge or get acquired, we'll let you know before data changes hands."]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center",children:(0,ac.jsx)(qf,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"Your Privacy Rights"})]}),(0,ac.jsxs)("div",{className:"space-y-3 text-white/70",children:[(0,ac.jsx)("p",{children:"Here are the switches you control at any time:"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" Access Your Data"}),(0,ac.jsx)("p",{className:"text-sm",children:"Ask for a copy of the info we store about your account."})]}),(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" Correct Information"}),(0,ac.jsx)("p",{className:"text-sm",children:"Fix typos or outdated details whenever you want."})]}),(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" Delete Your Account"}),(0,ac.jsx)("p",{className:"text-sm",children:"Close your account and wipe most data within about 30 days."})]}),(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" Export Your Data"}),(0,ac.jsx)("p",{className:"text-sm",children:"Grab your photos, chats, and other content in a portable format."})]}),(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" Control Visibility"}),(0,ac.jsx)("p",{className:"text-sm",children:"Choose who can see your posts, stories, and profile details."})]}),(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" Opt-Out"}),(0,ac.jsx)("p",{className:"text-sm",children:"Mute marketing emails and personalized suggestions."})]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center",children:(0,ac.jsx)(rp,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"Cookies & Tracking"})]}),(0,ac.jsxs)("div",{className:"space-y-3 text-white/70",children:[(0,ac.jsx)("p",{children:"Cookies keep you logged in, remember your theme, and let us know if a feature totally flops. Don't want them? Most browsers let you block or clear cookies in a couple of taps."}),(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,ac.jsx)("p",{className:"text-white mb-2",children:"Types of cookies we use:"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4 text-sm",children:[(0,ac.jsx)("li",{children:"Essential cookies that keep sessions active."}),(0,ac.jsx)("li",{children:"Preference cookies for things like dark mode."}),(0,ac.jsx)("li",{children:"Analytics cookies so we know which screens crash."}),(0,ac.jsx)("li",{children:"Limited ad cookies when we run promos with partners."})]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"Children's Privacy"}),(0,ac.jsxs)("p",{className:"text-white/70",children:["This community is for ages 13+. If we discover someone younger snuck in, we scrub their data and close the account. Parents or guardians can reach us at"," ",(0,ac.jsx)("span",{className:"text-white",children:"privacy@movesplash.com"})," for help."]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"International Data Transfers"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Our servers live mainly in the United States. If you're somewhere else, your data may move across borders but always under GDPR/CCPA-style protections and approved transfer agreements."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"Changes to This Policy"}),(0,ac.jsx)("p",{className:"text-white/70",children:"When we revise this policy, we'll highlight the update in the app and send an email summary. Keep using MoveSplash after the effective date and you're agreeing to the new language."})]}),(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 border-purple-400/30 p-8",children:(0,ac.jsxs)("div",{className:"text-center space-y-4",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/10",children:(0,ac.jsx)(im,{className:"w-8 h-8 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-2xl",children:"Questions About Privacy?"}),(0,ac.jsxs)("p",{className:"text-white/70",children:["Ping ",(0,ac.jsx)("span",{className:"text-white",children:"privacy@movesplash.com"})," and someone from the privacy crew will reply within a few days."]}),(0,ac.jsxs)("p",{className:"text-white/70 text-sm",children:["MoveSplash, Inc.",(0,ac.jsx)("br",{}),"123 Social Street",(0,ac.jsx)("br",{}),"San Francisco, CA 94103",(0,ac.jsx)("br",{}),"United States"]})]})})]})]})]})}let rr=bj("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),rs=bj("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);function rt({onBack:a}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-pink-900 relative overflow-hidden",children:[(0,ac.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,ac.jsx)("div",{className:"absolute top-0 -left-4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),(0,ac.jsx)("div",{className:"absolute top-0 -right-4 w-96 h-96 bg-yellow-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),(0,ac.jsx)("div",{className:"absolute -bottom-8 left-20 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-4xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-8",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 mb-4",children:(0,ac.jsx)(rr,{className:"w-10 h-10 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-5xl mb-4",children:"Terms of Use"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Last Updated: October 17, 2025"})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border-blue-400/30 p-6 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:" Agreement Overview"}),(0,ac.jsx)("p",{className:"text-white/80 leading-relaxed",children:"Thanks for hanging out on MoveYSplash. These are the house rules: they explain what we offer, what we expect in return, and what happens when things go sideways. If something here doesn't sit right with you, skip the app instead of rolling the dice."})]}),(0,ac.jsxs)("div",{className:"space-y-6",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:(0,ac.jsx)(rs,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"1. Acceptance of Terms"})]}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-3",children:[(0,ac.jsx)("p",{children:"Opening the app, creating an account, or even checking out public content means you accept these Terms plus our Privacy Policy. That's true whether you're lurking, livestreaming, or running a community."}),(0,ac.jsx)("p",{children:"We tweak these terms when laws change or we launch new stuff. When that happens we'll call it out in-product or by email. Keep using MoveYSplash after the update and you're agreeing to the new version."})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"2. Eligibility"}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-2",children:[(0,ac.jsx)("p",{children:"MoveSplash is meant for people who can legally be responsible for what they post."}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[(0,ac.jsx)("li",{children:"You must be 13 or older in the United States (check your local rules elsewhere)."}),(0,ac.jsx)("li",{children:"You can't join if you're barred from online services where you live."}),(0,ac.jsx)("li",{children:"Previous bans stick. If we removed you once, don't sneak back in."}),(0,ac.jsx)("li",{children:"Sign-up info should be real and currentno burner names or fake birthdays."})]}),(0,ac.jsx)("p",{className:"mt-3",children:"If you're under 18, loop in a parent or guardian so everyone understands the deal."})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,ac.jsx)(qf,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"3. Account Responsibilities"})]}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-3",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:"Account Security"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[(0,ac.jsx)("li",{children:"Pick a password you don't reuse anywhere else and keep it private."}),(0,ac.jsx)("li",{children:"Let us know right away if you suspect someone logged in as you."}),(0,ac.jsx)("li",{children:"You're on the hook for anything that happens on your profile until you report the issue."}),(0,ac.jsx)("li",{children:"Sharing accounts isn't allowedeven with roommates or teammates."})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:"Account Information"}),(0,ac.jsxs)("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[(0,ac.jsx)("li",{children:"Keep your profile details accurate so friends know it's you."}),(0,ac.jsx)("li",{children:"No impersonation, parody, or duplicate accounts without our written okay."}),(0,ac.jsx)("li",{children:"If your contact info changes, update it so we can reach you about important stuff."}),(0,ac.jsx)("li",{children:"Businesses and creators who need more than one account must talk to us first."})]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:(0,ac.jsx)(ql,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"4. Acceptable Use Policy"})]}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-3",children:[(0,ac.jsx)("p",{className:"text-white",children:"You agree NOT to use MoveYSplash to:"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" Harassment & Bullying"}),(0,ac.jsx)("p",{className:"text-sm",children:"No pile-ons, doxxing, threats, or coordinated takedowns. Disagree without being cruel."})]}),(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" Hate Speech"}),(0,ac.jsx)("p",{className:"text-sm",children:"Any slur, coded language, or encouragement of violence aimed at a protected group is an instant ban."})]}),(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" Illegal Content"}),(0,ac.jsx)("p",{className:"text-sm",children:"Don't upload or organize anything illegalincluding knock-off merch, drugs, or dangerous challenges."})]}),(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" Spam & Scams"}),(0,ac.jsx)("p",{className:"text-sm",children:"No mass DMs, pyramid pitches, phishing, or fake giveaways. Keep conversations real."})]}),(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" Adult Content"}),(0,ac.jsx)("p",{className:"text-sm",children:"Graphic sexual content, exploitation, and gore are never welcome here."})]}),(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" Intellectual Property"}),(0,ac.jsx)("p",{className:"text-sm",children:"Share work you own or have permission to repost. Credit alone doesn't make it legal."})]}),(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" System Abuse"}),(0,ac.jsx)("p",{className:"text-sm",children:"No reverse engineering, load testing, or exploits meant to break our infrastructure."})]}),(0,ac.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-red-400 mb-1",children:" Data Mining"}),(0,ac.jsx)("p",{className:"text-sm",children:"Scraping profiles, harvesting handles, or exporting other people's data is off-limits."})]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"5. Content & Intellectual Property"}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-3",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:"Your Content"}),(0,ac.jsx)("p",{children:"Everything you create is still yours. Sharing it on MoveYSplash gives us a limited, revocable license to host it, display it to the people you choose, and make backup copies so the app works. Delete the post and the license ends once it clears our caches."})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:"Our Content"}),(0,ac.jsx)("p",{children:"The brand, codebase, product copy, and design system belong to MoveYSplash. Please don't rip our UI, reuse our logo, or ship a look-alike experience without written permission."})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"6. Privacy & Data"}),(0,ac.jsxs)("p",{className:"text-white/70",children:["We only collect the info we need to keep MoveYSplash running (think account basics, usage stats, and stuff you intentionally share). The full breakdown lives in our"," ",(0,ac.jsx)("span",{className:"text-white underline cursor-pointer",children:"Privacy Policy"}),". Using the app means you're cool with those practices."]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center",children:(0,ac.jsx)(nN,{className:"w-5 h-5 text-white"})}),(0,ac.jsx)("h2",{className:"text-white text-2xl",children:"7. Termination"})]}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-3",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:"By You"}),(0,ac.jsx)("p",{children:"Done with MoveYSplash? Head to Settings and delete your account. We start wiping things within 30 days unless the law says we have to hold onto them a little longer (for example, fraud investigations)."})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:"By Us"}),(0,ac.jsx)("p",{children:"We can pause or remove accounts that break these rules, hurt other people, or threaten the service. We'll usually send a warning, but for serious stuff we can cut access immediately."})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"8. Disclaimers & Limitations"}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-3",children:[(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:'Service is "as-is":'})," We work hard to keep MoveYSplash fast and reliable, but bugs and outages happen. We can't promise uninterrupted service, perfect security, or zero data loss."]}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Limited liability:"})," If something breaks, we're not liable for lost profits, data, or other indirect damage the law lets us disclaim."]}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"User content:"})," You control what you share and who sees it. We don't endorse user posts and we're not responsible for what someone else says or does."]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"9. Indemnification"}),(0,ac.jsx)("p",{className:"text-white/70",children:"If your actions or content cause us legal trouble, you'll cover the reasonable costs including lawyersso the rest of the community doesn't have to."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"10. Dispute Resolution"}),(0,ac.jsx)("div",{className:"text-white/70 space-y-3",children:(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Governing law:"})," California law applies, even if you use MoveYSplash somewhere else."]})})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"11. Changes to Terms"}),(0,ac.jsx)("p",{className:"text-white/70",children:"When we change these terms, we'll give you a heads up (email + in-app banner) about 30 days before the update takes effect. Don't like the new version? Remove your account before the date listed and you won't be bound by it going forward."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"12. Miscellaneous"}),(0,ac.jsxs)("div",{className:"text-white/70 space-y-2",children:[(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Entire agreement:"})," These terms and the Privacy Policy replace any previous conversations you had with us about using MoveYSplash."]}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"If one part fails:"})," The rest still counts even if a single sentence is struck down in court."]}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"No silent waivers:"})," If we don't enforce a rule right away, it doesn't mean we gave up the right to enforce it later."]}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Assignment:"})," You can't transfer your account or these terms to someone else. We can assign our rights if we merge, get acquired, or restructure."]})]})]})]})]})]})}let ru=bj("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),rv=bj("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);function rw({onBack:a}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-900 to-blue-900 relative overflow-hidden",children:[(0,ac.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,ac.jsx)("div",{className:"absolute w-96 h-96 bg-pink-500/30 rounded-full blur-3xl -top-48 -left-48 animate-pulse"}),(0,ac.jsx)("div",{className:"absolute w-96 h-96 bg-purple-500/30 rounded-full blur-3xl top-1/3 -right-48 animate-pulse",style:{animationDelay:"1s"}}),(0,ac.jsx)("div",{className:"absolute w-96 h-96 bg-blue-500/30 rounded-full blur-3xl -bottom-48 left-1/3 animate-pulse",style:{animationDelay:"2s"}})]}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-4xl mx-auto p-6 py-12",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-8",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-16",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 mb-6",children:(0,ac.jsx)(bn,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"About MoveYSplash"}),(0,ac.jsx)("p",{className:"text-white/70 text-xl max-w-2xl mx-auto",children:"The most vibrant social platform designed for Gen Z. Built with love, powered by innovation."})]}),(0,ac.jsx)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-8",children:(0,ac.jsxs)("div",{className:"flex items-start gap-4",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center flex-shrink-0",children:(0,ac.jsx)(bp,{className:"w-6 h-6 text-white"})}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"Our Mission"}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed",children:"We started MoveYSplash because our own group chats were split across four different apps. Instead of bolting on more features, we rebuilt the basicsfast messaging, crisp video, expressive designand kept the experience opinionated but simple."})]})]})}),(0,ac.jsxs)("div",{className:"mb-12",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6 text-center",children:"Our Values"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(br,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Innovation First"}),(0,ac.jsx)("p",{className:"text-white/70",children:"We only ship features when they make conversations feel more natural4K video, buttery screen share, and tools that do not get in the way."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(bm,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Community Focused"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Every roadmap discussion starts with will this help a friend group stay close? If not, it does not make the cut."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(qf,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Privacy & Security"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Encryption, disappearing stories, and clear controls keep your info yours. No data brokers, no surprise dark patterns."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(ru,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Inclusive Design"}),(0,ac.jsx)("p",{className:"text-white/70",children:"High-contrast themes, captions, and keyboard-friendly flows make the app usable whether you are on a phone, tablet, or laptop."})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-8",children:[(0,ac.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0",children:(0,ac.jsx)(rv,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("div",{children:(0,ac.jsx)("h2",{className:"text-white text-2xl mb-3",children:"What Makes Us Different"})})]}),(0,ac.jsxs)("div",{className:"space-y-4 text-white/70",children:[(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-pink-500 rounded-full mt-2 flex-shrink-0"}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Honest quality:"})," 4K video and 8K screen share are standard, not hidden behind a pricing grid."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"One tap away:"})," Feeds, stories, calls, and DMs sit under the same roof so your group never splinters."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Design with taste:"})," The interface nods to glass and neon without sacrificing readability or speed."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Demo saves the day:"})," If Zoom already owns your camera, we fake one so presentations keep rolling."]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),(0,ac.jsxs)("p",{children:[(0,ac.jsx)("span",{className:"text-white",children:"No paywall:"})," Use every feature without upgrading or watching ads. We're focused on building trust, not squeezing wallets."]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-8",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:"Our Story"}),(0,ac.jsxs)("div",{className:"space-y-4 text-white/70 leading-relaxed",children:[(0,ac.jsx)("p",{children:"MoveSplash started as a side project to fix our own friend group problems. We were hopping between Snapchat for stories, Discord for planning, and Zoom for calls. It felt ridiculous."}),(0,ac.jsx)("p",{children:"Instead of cloning another feed, we stitched the pieces togetherhi-res video, stories that do not overstay their welcome, and a feed that does not punish you for disappearing for a weekend."}),(0,ac.jsx)("p",{children:"Today we are still a small team, but we ship fast, talk to users every week, and keep the product honest. If it does not help you connect with real people, it does not ship."})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-pink-500/30 to-purple-500/30 border-pink-400/30 p-12 text-center",children:[(0,ac.jsx)("h2",{className:"text-white text-4xl mb-4",children:"Join us if you're tired of noisy feeds."}),(0,ac.jsx)("p",{className:"text-white/80 text-lg mb-6",children:"Sign up free, bring your people, and let us worry about the infrastructure."}),(0,ac.jsx)(be,{onClick:a,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white border-0 text-lg px-8 py-6",children:"Get Started Now"})]})]})]})}function rx({onBack:a}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-900 via-yellow-900 to-amber-900 relative overflow-hidden",children:[(0,ac.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,ac.jsx)("div",{className:"absolute w-96 h-96 bg-orange-500/30 rounded-full blur-3xl -top-48 -left-48 animate-pulse"}),(0,ac.jsx)("div",{className:"absolute w-96 h-96 bg-yellow-500/30 rounded-full blur-3xl top-1/3 -right-48 animate-pulse",style:{animationDelay:"1s"}}),(0,ac.jsx)("div",{className:"absolute w-96 h-96 bg-amber-500/30 rounded-full blur-3xl -bottom-48 left-1/3 animate-pulse",style:{animationDelay:"2s"}})]}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-4xl mx-auto p-6 py-12",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-8",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-12",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-orange-500 to-yellow-500 mb-6",children:(0,ac.jsx)(rp,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"Cookie Policy"}),(0,ac.jsx)("p",{className:"text-white/70 text-lg",children:"Last Updated: January 17, 2025"})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:"What Are Cookies?"}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed mb-4",children:"Cookies are tiny text snippets your browser saves so a site remembers you the next time."}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed",children:"MoveSplash uses cookies to keep you signed in, load things faster, and figure out which features deserve more love."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-6",children:"Types of Cookies We Use"}),(0,ac.jsxs)("div",{className:"space-y-6",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsxs)("h3",{className:"text-white text-xl mb-2 flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-2xl",children:""})," Essential Cookies (Required)"]}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed mb-3",children:"These are the behind-the-scenes helpers that keep MoveSplash usable. Without them you couldn't log in, load your feed, or protect your account."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm ml-8",children:[(0,ac.jsx)("li",{children:" Authentication tokens so you stay signed in."}),(0,ac.jsx)("li",{children:" Session cookies that remember which tab is yours."}),(0,ac.jsx)("li",{children:" Security cookies that catch suspicious logins."}),(0,ac.jsx)("li",{children:" Load-balancer notes to keep the app speedy."})]}),(0,ac.jsx)("p",{className:"text-white/50 text-sm mt-2",children:" If you disable these, the app simply won't run."})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsxs)("h3",{className:"text-white text-xl mb-2 flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-2xl",children:""})," Functional Cookies"]}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed mb-3",children:"These remember the little things so you don't have to redo them every visit."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm ml-8",children:[(0,ac.jsx)("li",{children:" Language and region settings."}),(0,ac.jsx)("li",{children:" Light/dark mode and accessibility tweaks."}),(0,ac.jsx)("li",{children:" Video quality defaults for calls and streams."}),(0,ac.jsx)("li",{children:" Notification and mute choices."}),(0,ac.jsx)("li",{children:" Demo mode toggles when you block hardware access."}),(0,ac.jsx)("li",{children:" Volume, playback, and camera preferences."})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsxs)("h3",{className:"text-white text-xl mb-2 flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-2xl",children:""})," Analytics Cookies"]}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed mb-3",children:"These help us understand what's working and what's confusing so we can make better decisions."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm ml-8",children:[(0,ac.jsx)("li",{children:" Which screens people bounce from immediately."}),(0,ac.jsx)("li",{children:" Feature usage stats so we know what to improve."}),(0,ac.jsx)("li",{children:" Performance metrics and crash reports."}),(0,ac.jsx)("li",{children:" Approximate time spent inside different areas."}),(0,ac.jsx)("li",{children:" Anonymous device/browser combos to reproduce bugs."})]}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mt-2",children:"We aggregate this data and never sell individual information."})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsxs)("h3",{className:"text-white text-xl mb-2 flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-2xl",children:""})," Performance Cookies"]}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed mb-3",children:"These keep things smooth even when your Wi-Fi isn't."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm ml-8",children:[(0,ac.jsx)("li",{children:" Cached assets so feeds don't reload on every scroll."}),(0,ac.jsx)("li",{children:" CDN routing choices to serve content from nearby servers."}),(0,ac.jsx)("li",{children:" Adaptive video streaming that matches your connection."}),(0,ac.jsx)("li",{children:" Network monitoring to catch regional outages quickly."})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsxs)("h3",{className:"text-white text-xl mb-2 flex items-center gap-2",children:[(0,ac.jsx)("span",{className:"text-2xl",children:""})," Social Media & Integration Cookies"]}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed mb-3",children:"These power things like social logins and embedded content."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm ml-8",children:[(0,ac.jsx)("li",{children:" Share buttons and live embeds."}),(0,ac.jsx)("li",{children:" OAuth logins through Apple, Google, or others."}),(0,ac.jsx)("li",{children:" Playing nicely with calendars, docs, or other shared content."}),(0,ac.jsx)("li",{children:" Remembering permissions you've granted to integrations."})]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:"Third-Party Cookies"}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed mb-4",children:"Some of the tools we lean on drop their own cookies. We only work with vendors we trust and we keep the list short:"}),(0,ac.jsxs)("ul",{className:"space-y-3 text-white/60",children:[(0,ac.jsxs)("li",{className:"flex items-start gap-3",children:[(0,ac.jsx)("span",{className:"text-white",children:""}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Analytics partners:"})," Help us spot bugs, crashes, and clunky flows."]})]}),(0,ac.jsxs)("li",{className:"flex items-start gap-3",children:[(0,ac.jsx)("span",{className:"text-white",children:""}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Authentication providers:"})," Power single-sign-on through services like Google or Apple."]})]}),(0,ac.jsxs)("li",{className:"flex items-start gap-3",children:[(0,ac.jsx)("span",{className:"text-white",children:""}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"CDNs:"})," Serve photos and videos quickly from servers near you."]})]}),(0,ac.jsxs)("li",{className:"flex items-start gap-3",children:[(0,ac.jsx)("span",{className:"text-white",children:""}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("span",{className:"text-white",children:"Video infrastructure:"})," Keep 4K calls and screen shares stable."]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:"Managing Your Cookie Preferences"}),(0,ac.jsxs)("div",{className:"space-y-4 text-white/70 leading-relaxed",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white text-lg mb-2",children:"Browser Settings"}),(0,ac.jsx)("p",{className:"mb-2",children:"Head to your browser's privacy panel to tweak cookies. Typical controls include:"}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 ml-6",children:[(0,ac.jsx)("li",{children:" Viewing or deleting saved cookies."}),(0,ac.jsx)("li",{children:" Blocking every cookie (the app will struggle if you do)."}),(0,ac.jsx)("li",{children:" Blocking only third-party cookies while keeping essentials."}),(0,ac.jsx)("li",{children:" Auto-clearing cookies each time you close the browser."})]})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white text-lg mb-2",children:"In-App Settings"}),(0,ac.jsx)("p",{children:"Inside MoveSplash go to Settings  Privacy  Cookie Preferences to:"}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 ml-6 mt-2",children:[(0,ac.jsx)("li",{children:" Clear cached data without deleting the app."}),(0,ac.jsx)("li",{children:" Adjust notification and tracking permissions."}),(0,ac.jsx)("li",{children:" Review active sessions and log out devices."})]})]}),(0,ac.jsx)("div",{className:"bg-yellow-500/20 border border-yellow-400/30 p-4 rounded-lg",children:(0,ac.jsxs)("p",{className:"text-yellow-200",children:[" ",(0,ac.jsx)("strong",{children:"Heads up:"})," Disabling essential cookies breaks logins and live features. If something feels off after changing settings, re-enable required cookies and refresh."]})})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:"How Long Do Cookies Last?"}),(0,ac.jsxs)("div",{className:"space-y-3 text-white/70",children:[(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"Session Cookies"}),(0,ac.jsx)("p",{className:"text-sm",children:"Short-lived and gone when you close the tab. These keep you logged in while you bounce between screens."})]}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"Persistent Cookies"}),(0,ac.jsx)("p",{className:"text-sm",children:"Stick around for 30 days to a year so we remember things like your theme or camera settings."})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-6",children:[(0,ac.jsx)("h2",{className:"text-white text-2xl mb-4",children:"Updates to This Policy"}),(0,ac.jsx)("p",{className:"text-white/70 leading-relaxed",children:"If we tweak how we use cookies, we'll update this page and refresh the Last Updated date. Big changes also trigger an in-app heads-up."})]}),(0,ac.jsx)("div",{className:"text-center mt-12",children:(0,ac.jsx)(be,{onClick:a,className:"bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white border-0 px-8 py-6",children:"Back to MoveSplash"})})]})]})}let ry=bj("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),rz=bj("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),rA=bj("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);function rB({feature:a,onBack:b,onGetStarted:c}){switch(a){case"group-chats":return(0,ac.jsx)(rC,{onBack:b,onGetStarted:c});case"video-calls":return(0,ac.jsx)(rD,{onBack:b,onGetStarted:c});case"screen-share":return(0,ac.jsx)(rE,{onBack:b,onGetStarted:c});case"stories":return(0,ac.jsx)(rF,{onBack:b,onGetStarted:c});case"friends":return(0,ac.jsx)(rG,{onBack:b,onGetStarted:c});case"gen-z":return(0,ac.jsx)(rH,{onBack:b,onGetStarted:c});default:return null}}function rC({onBack:a,onGetStarted:b}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-pink-900 relative overflow-hidden",children:[(0,ac.jsx)(rI,{}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-12",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 mb-6",children:(0,ac.jsx)(nx,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"Group Chats"}),(0,ac.jsx)("p",{className:"text-white/70 text-xl max-w-2xl mx-auto",children:"Bring your whole squad together with group chats that support up to 20 people. Share moments, coordinate plans, and stay connected - all in one place."})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(bm,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Up to 20 People"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Create massive group chats for your friend groups, teams, or family. Everyone stays in the loop."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(go,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Rich Media Sharing"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Share photos, videos, voice messages, files, and links. Everything your group needs to communicate."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(lK,{className:"w-6 h-6 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Star Messages"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Mark important messages with a star so your group can find them easily later."})]})]}),(0,ac.jsx)("div",{className:"space-y-6 mb-12",children:(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6",children:"Powerful Group Features"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(bk,{className:"w-5 h-5"}),title:"Text Messages",description:"Send unlimited text messages with emoji support and formatting"}),(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(bq,{className:"w-5 h-5"}),title:"Photo & Video Sharing",description:"Share photos and videos instantly with the whole group"}),(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(lT,{className:"w-5 h-5"}),title:"Voice Messages",description:"Record and send voice messages when typing isn't enough"}),(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(rr,{className:"w-5 h-5"}),title:"File Sharing",description:"Share documents, PDFs, and files up to 100MB"})]}),(0,ac.jsxs)("div",{className:"space-y-4",children:[(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(bp,{className:"w-5 h-5"}),title:"Message Reactions",description:"React to messages with emojis -    and more"}),(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(lK,{className:"w-5 h-5"}),title:"Starred Messages",description:"Save important messages by starring them for quick access"}),(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(bm,{className:"w-5 h-5"}),title:"Group Admin Controls",description:"Admins can add/remove members and manage group settings"}),(0,ac.jsx)(rJ,{icon:(0,ac.jsx)(rM,{className:"w-5 h-5"}),title:"Custom Notifications",description:"Set notification preferences per group - mute or customize alerts"})]})]})]})}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-12",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6",children:"Perfect For Every Squad"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,ac.jsx)(rK,{icon:"",title:"Friend Groups",description:"Keep the crew connected"}),(0,ac.jsx)(rK,{icon:"",title:"Study Groups",description:"Coordinate homework & projects"}),(0,ac.jsx)(rK,{icon:"",title:"Family Chats",description:"Stay close with loved ones"}),(0,ac.jsx)(rK,{icon:"",title:"Work Teams",description:"Collaborate on projects"}),(0,ac.jsx)(rK,{icon:"",title:"Gaming Squads",description:"Plan game sessions"}),(0,ac.jsx)(rK,{icon:"",title:"Event Planning",description:"Organize parties & meetups"}),(0,ac.jsx)(rK,{icon:"",title:"Sports Teams",description:"Coordinate practices & games"}),(0,ac.jsx)(rK,{icon:"",title:"Creative Projects",description:"Share ideas & feedback"})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 border-purple-400/30 p-12 text-center",children:[(0,ac.jsx)("h2",{className:"text-white text-4xl mb-4",children:"Ready to Connect Your Squad?"}),(0,ac.jsx)("p",{className:"text-white/80 text-lg mb-6",children:"Create your first group chat in seconds and bring everyone together."}),(0,ac.jsx)(be,{onClick:()=>b?.(),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white border-0 text-lg px-8 py-6",children:"Start Group Chat"})]})]})]})}function rD({onBack:a,onGetStarted:b}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-pink-900 relative overflow-hidden",children:[(0,ac.jsx)(rI,{}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-12",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 mb-6",children:(0,ac.jsx)(bl,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"Video Calls"}),(0,ac.jsx)("p",{className:"text-white/70 text-xl max-w-2xl mx-auto",children:"Stunning 4K UHD video calls with up to 20 participants. See your friends' faces in incredible detail, share your screen, and feel like you're in the same room - no matter where you are."})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-12",children:[(0,ac.jsx)(rL,{number:"20",label:"Participants",color:"from-blue-500 to-cyan-500"}),(0,ac.jsx)(rL,{number:"4K",label:"UHD Quality",color:"from-purple-500 to-pink-500"}),(0,ac.jsx)(rL,{number:"",label:"Call Duration",color:"from-green-500 to-emerald-500"}),(0,ac.jsx)(rL,{number:"0",label:"Call Limits",color:"from-yellow-500 to-orange-500"})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(bl,{className:"w-7 h-7 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"4K UHD Video & Audio"}),(0,ac.jsx)("p",{className:"text-white/70 mb-4",children:"Stunning 4K UHD (3840x2160) video quality with intelligent adaptive streaming. Automatically detects your webcam capabilities and internet speed for the best possible quality - from 4K UHD down to HD as needed."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm",children:[(0,ac.jsx)("li",{children:" Up to 4K UHD (3840x2160) @ 30fps"}),(0,ac.jsx)("li",{children:" Auto-fallback to Full HD (1920x1080) or HD (1280x720)"}),(0,ac.jsx)("li",{children:" Echo cancellation & noise reduction"}),(0,ac.jsx)("li",{children:" Automatic quality optimization"}),(0,ac.jsx)("li",{children:" Low-latency audio streaming"})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(bm,{className:"w-7 h-7 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"Group Video Calls"}),(0,ac.jsx)("p",{className:"text-white/70 mb-4",children:"Host video calls with up to 20 people simultaneously. Perfect for friend groups, family gatherings, study sessions, or remote team meetings."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm",children:[(0,ac.jsx)("li",{children:" Up to 20 simultaneous participants"}),(0,ac.jsx)("li",{children:" Grid or speaker view layouts"}),(0,ac.jsx)("li",{children:" See who's talking with active speaker indicator"}),(0,ac.jsx)("li",{children:" Join from mobile or desktop"})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(nv,{className:"w-7 h-7 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"Screen Sharing"}),(0,ac.jsx)("p",{className:"text-white/70 mb-4",children:"Share your entire screen, specific window, or browser tab. Perfect for presentations, watching videos together, or helping friends troubleshoot."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm",children:[(0,ac.jsx)("li",{children:" Share full screen or specific windows"}),(0,ac.jsx)("li",{children:" Audio sharing included"}),(0,ac.jsx)("li",{children:" HD quality screen streaming"}),(0,ac.jsx)("li",{children:" Easy one-click sharing"})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center mb-4",children:(0,ac.jsx)(br,{className:"w-7 h-7 text-white"})}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"Demo Mode"}),(0,ac.jsx)("p",{className:"text-white/70 mb-4",children:"Presenting on another call? Enable Demo Mode to simulate your camera without accessing it, preventing conflicts with other video apps."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60 text-sm",children:[(0,ac.jsx)("li",{children:" Safe for presentations"}),(0,ac.jsx)("li",{children:" No camera conflicts"}),(0,ac.jsx)("li",{children:" Animated demo feed"}),(0,ac.jsx)("li",{children:" Toggle anytime during calls"})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-12",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6",children:"How MoveYSplash Compares"}),(0,ac.jsx)("div",{className:"overflow-x-auto",children:(0,ac.jsxs)("table",{className:"w-full text-left",children:[(0,ac.jsx)("thead",{children:(0,ac.jsxs)("tr",{className:"border-b border-white/20",children:[(0,ac.jsx)("th",{className:"text-white py-3 px-4",children:"Platform"}),(0,ac.jsx)("th",{className:"text-white py-3 px-4",children:"Video Quality"}),(0,ac.jsx)("th",{className:"text-white py-3 px-4",children:"Screen Share"}),(0,ac.jsx)("th",{className:"text-white py-3 px-4",children:"Participants"}),(0,ac.jsx)("th",{className:"text-white py-3 px-4",children:"Price"})]})}),(0,ac.jsxs)("tbody",{className:"text-white/70",children:[(0,ac.jsxs)("tr",{className:"border-b border-white/10 bg-gradient-to-r from-purple-500/20 to-pink-500/20",children:[(0,ac.jsx)("td",{className:"py-3 px-4 text-white",children:" MoveYSplash"}),(0,ac.jsx)("td",{className:"py-3 px-4 text-green-400",children:"4K UHD"}),(0,ac.jsx)("td",{className:"py-3 px-4 text-green-400",children:"8K UHD"}),(0,ac.jsx)("td",{className:"py-3 px-4 text-green-400",children:"20"}),(0,ac.jsx)("td",{className:"py-3 px-4 text-green-400",children:"FREE"})]}),(0,ac.jsxs)("tr",{className:"border-b border-white/10",children:[(0,ac.jsx)("td",{className:"py-3 px-4",children:"Zoom"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"1080p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"1080p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"100 (paid)"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"$14.99/mo"})]}),(0,ac.jsxs)("tr",{className:"border-b border-white/10",children:[(0,ac.jsx)("td",{className:"py-3 px-4",children:"Google Meet"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"1080p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"1080p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"100 (paid)"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"$6-18/mo"})]}),(0,ac.jsxs)("tr",{className:"border-b border-white/10",children:[(0,ac.jsx)("td",{className:"py-3 px-4",children:"Discord"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"1080p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"4K (Nitro)"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"25"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"$9.99/mo"})]}),(0,ac.jsxs)("tr",{className:"border-b border-white/10",children:[(0,ac.jsx)("td",{className:"py-3 px-4",children:"Messenger"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"720p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"720p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"8"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"Free"})]}),(0,ac.jsxs)("tr",{children:[(0,ac.jsx)("td",{className:"py-3 px-4",children:"Snapchat"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"720p"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"N/A"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"15"}),(0,ac.jsx)("td",{className:"py-3 px-4",children:"Free"})]})]})]})}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mt-4 text-center",children:"MoveYSplash offers the highest video and screen sharing quality of any social platform - completely free! "})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-12",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6",children:"Intuitive Call Controls"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,ac.jsxs)("div",{className:"text-center",children:[(0,ac.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center mx-auto mb-3",children:(0,ac.jsx)(lT,{className:"w-8 h-8 text-white"})}),(0,ac.jsx)("h3",{className:"text-white mb-2",children:"Mute/Unmute"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Quick toggle for your microphone"})]}),(0,ac.jsxs)("div",{className:"text-center",children:[(0,ac.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center mx-auto mb-3",children:(0,ac.jsx)(bl,{className:"w-8 h-8 text-white"})}),(0,ac.jsx)("h3",{className:"text-white mb-2",children:"Camera On/Off"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Toggle your video feed"})]}),(0,ac.jsxs)("div",{className:"text-center",children:[(0,ac.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center mx-auto mb-3",children:(0,ac.jsx)(nv,{className:"w-8 h-8 text-white"})}),(0,ac.jsx)("h3",{className:"text-white mb-2",children:"8K Screen Share"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Share in up to 8K UHD quality"})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-blue-500/30 to-purple-500/30 border-blue-400/30 p-12 text-center",children:[(0,ac.jsx)("h2",{className:"text-white text-4xl mb-4",children:"Start Your First Video Call"}),(0,ac.jsx)("p",{className:"text-white/80 text-lg mb-6",children:"Connect face-to-face with friends, family, or colleagues in stunning 4K UHD quality."}),(0,ac.jsx)(be,{onClick:()=>b?.(),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white border-0 text-lg px-8 py-6",children:"Make a Call"})]})]})]})}function rE({onBack:a,onGetStarted:b}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-teal-900 to-blue-900 relative overflow-hidden",children:[(0,ac.jsx)(rI,{}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-12",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 mb-6",children:(0,ac.jsx)(nv,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"8K Screen Sharing"}),(0,ac.jsx)("p",{className:"text-white/70 text-xl max-w-2xl mx-auto",children:"Share your screen in stunning 8K UHD quality (7680x4320) during video calls. Perfect for ultra-high-res presentations, design work, tutorials, or remote collaboration with uncompromising clarity."})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-12",children:[(0,ac.jsx)(rL,{number:"8K",label:"UHD Quality",color:"from-green-500 to-emerald-500"}),(0,ac.jsx)(rL,{number:"7680",label:"Pixels Wide",color:"from-blue-500 to-cyan-500"}),(0,ac.jsx)(rL,{number:"30fps",label:"Frame Rate",color:"from-purple-500 to-pink-500"}),(0,ac.jsx)(rL,{number:"",label:"Share Time",color:"from-yellow-500 to-orange-500"})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)("h3",{className:"text-white text-2xl mb-4",children:" 8K UHD Full Screen Sharing"}),(0,ac.jsx)("p",{className:"text-white/70 mb-4",children:"Share your entire screen at up to 8K UHD resolution (7680x4320). Perfect for ultra-high-resolution displays, professional presentations, design reviews, and content creation workflows where every pixel matters."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60",children:[(0,ac.jsx)("li",{children:" Up to 8K UHD (7680x4320) quality"}),(0,ac.jsx)("li",{children:" Auto-detects display resolution"}),(0,ac.jsx)("li",{children:" Falls back to 5K/4K/QHD/Full HD/HD as needed"}),(0,ac.jsx)("li",{children:" Smooth 30fps frame rate"}),(0,ac.jsx)("li",{children:" Audio sharing included"}),(0,ac.jsx)("li",{children:" Works on mobile & desktop"})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)("h3",{className:"text-white text-2xl mb-4",children:" Selective Window Sharing"}),(0,ac.jsx)("p",{className:"text-white/70 mb-4",children:"Share just a specific window or application in full quality. Keep your notifications, messages, and other windows completely private while sharing."}),(0,ac.jsxs)("ul",{className:"space-y-2 text-white/60",children:[(0,ac.jsx)("li",{children:" Privacy-focused sharing"}),(0,ac.jsx)("li",{children:" Choose specific apps or browser tabs"}),(0,ac.jsx)("li",{children:" Hide sensitive information"}),(0,ac.jsx)("li",{children:" Easy app switching during share"}),(0,ac.jsx)("li",{children:" Full quality for selected window"}),(0,ac.jsx)("li",{children:" Share audio from specific tabs"})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-12",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6",children:"Intelligent Quality Adaptation"}),(0,ac.jsx)("p",{className:"text-white/70 mb-6",children:"MoveYSplash automatically detects your display resolution and internet connection to deliver the best possible screen sharing quality:"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,ac.jsxs)("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-400/30 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" 8K UHD"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mb-2",children:"7680 x 4320 pixels"}),(0,ac.jsx)("p",{className:"text-white/60 text-xs",children:"For ultra-high-res displays and professional work"})]}),(0,ac.jsxs)("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-blue-400/30 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" 5K UHD"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mb-2",children:"5120 x 2880 pixels"}),(0,ac.jsx)("p",{className:"text-white/60 text-xs",children:"For iMac 5K and similar displays"})]}),(0,ac.jsxs)("div",{className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border border-green-400/30 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" 4K UHD"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mb-2",children:"3840 x 2160 pixels"}),(0,ac.jsx)("p",{className:"text-white/60 text-xs",children:"Standard 4K displays and monitors"})]}),(0,ac.jsxs)("div",{className:"bg-white/10 border border-white/20 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" QHD"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mb-2",children:"2560 x 1440 pixels"}),(0,ac.jsx)("p",{className:"text-white/60 text-xs",children:"2K/1440p displays"})]}),(0,ac.jsxs)("div",{className:"bg-white/10 border border-white/20 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" Full HD"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mb-2",children:"1920 x 1080 pixels"}),(0,ac.jsx)("p",{className:"text-white/60 text-xs",children:"Standard 1080p displays"})]}),(0,ac.jsxs)("div",{className:"bg-white/10 border border-white/20 p-4 rounded-lg",children:[(0,ac.jsx)("h3",{className:"text-white mb-2",children:" HD"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm mb-2",children:"1280 x 720 pixels"}),(0,ac.jsx)("p",{className:"text-white/60 text-xs",children:"Mobile devices and lower-res screens"})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-12",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6",children:"Perfect For"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,ac.jsx)(rK,{icon:"",title:"Design Reviews",description:"Show high-res mockups & prototypes"}),(0,ac.jsx)(rK,{icon:"",title:"Video Editing",description:"Share 8K footage & timelines"}),(0,ac.jsx)(rK,{icon:"",title:"Data Visualization",description:"Share detailed dashboards"}),(0,ac.jsx)(rK,{icon:"",title:"CAD/3D Work",description:"Present architectural designs"}),(0,ac.jsx)(rK,{icon:"",title:"Photography",description:"Review high-res photos"}),(0,ac.jsx)(rK,{icon:"",title:"Code Reviews",description:"Share IDE with clarity"}),(0,ac.jsx)(rK,{icon:"",title:"Teaching",description:"Clear presentations & tutorials"}),(0,ac.jsx)(rK,{icon:"",title:"Gaming",description:"Stream gameplay in detail"})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-green-500/30 to-teal-500/30 border-green-400/30 p-12 text-center",children:[(0,ac.jsx)("h2",{className:"text-white text-4xl mb-4",children:"Experience 8K Screen Sharing"}),(0,ac.jsx)("p",{className:"text-white/80 text-lg mb-6",children:"The most advanced screen sharing technology available on any social platform."}),(0,ac.jsx)(be,{onClick:()=>b?.(),className:"bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white border-0 text-lg px-8 py-6",children:"Start Sharing in 8K"})]})]})]})}function rF({onBack:a,onGetStarted:b}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-900 via-purple-900 to-orange-900 relative overflow-hidden",children:[(0,ac.jsx)(rI,{}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-12",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-pink-500 to-orange-500 mb-6",children:(0,ac.jsx)(bn,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"Stories & Snaps"}),(0,ac.jsx)("p",{className:"text-white/70 text-xl max-w-2xl mx-auto",children:"Share your moments with disappearing Stories that vanish after 24 hours. Snapchat-style ephemeral content that's perfect for sharing your day without the permanence."})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)(fJ,{className:"w-12 h-12 text-yellow-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"24-Hour Stories"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Stories disappear after 24 hours. Share freely without worrying about permanent posts."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)(rn,{className:"w-12 h-12 text-blue-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"See Who Viewed"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Track who's viewing your stories and when they watched them."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6",children:[(0,ac.jsx)(bp,{className:"w-12 h-12 text-pink-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"React & Reply"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Friends can react with emojis or send quick replies to your stories."})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-pink-500/30 to-orange-500/30 border-pink-400/30 p-12 text-center",children:[(0,ac.jsx)("h2",{className:"text-white text-4xl mb-4",children:"Start Sharing Your Story"}),(0,ac.jsx)(be,{onClick:()=>b?.(),className:"bg-gradient-to-r from-pink-500 to-orange-500 hover:from-pink-600 hover:to-orange-600 text-white border-0 text-lg px-8 py-6",children:"Post Your First Story"})]})]})]})}function rG({onBack:a,onGetStarted:b}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 relative overflow-hidden",children:[(0,ac.jsx)(rI,{}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-12",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 mb-6",children:(0,ac.jsx)(bm,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"Friends Network"}),(0,ac.jsx)("p",{className:"text-white/70 text-xl max-w-2xl mx-auto",children:"Build your social circle. Connect with friends, discover new people, and manage your network with powerful friend management tools."})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)(fG,{className:"w-12 h-12 text-green-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"Easy Friend Requests"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Search for friends by name or username. Send friend requests and build your network easily."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)(ru,{className:"w-12 h-12 text-blue-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"Friend Suggestions"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Discover mutual friends and get personalized friend recommendations."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)(qe,{className:"w-12 h-12 text-purple-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"Privacy Controls"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Control who can send you requests, see your posts, and view your profile."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8",children:[(0,ac.jsx)(rz,{className:"w-12 h-12 text-pink-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-2xl mb-3",children:"Friend Lists"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Organize friends into custom lists: Close Friends, Family, Work, etc."})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-indigo-500/30 to-purple-500/30 border-indigo-400/30 p-12 text-center",children:[(0,ac.jsx)("h2",{className:"text-white text-4xl mb-4",children:"Grow Your Network"}),(0,ac.jsx)(be,{onClick:()=>b?.(),className:"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white border-0 text-lg px-8 py-6",children:"Find Friends"})]})]})]})}function rH({onBack:a,onGetStarted:b}){return(0,ac.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-900 via-pink-900 to-purple-900 relative overflow-hidden",children:[(0,ac.jsx)(rI,{}),(0,ac.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto p-6",children:[(0,ac.jsxs)(be,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white hover:bg-white/10 mb-4",children:[(0,ac.jsx)(rl,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ac.jsxs)("div",{className:"text-center mb-12",children:[(0,ac.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-yellow-500 via-pink-500 to-purple-500 mb-6",children:(0,ac.jsx)(ry,{className:"w-12 h-12 text-white"})}),(0,ac.jsx)("h1",{className:"text-white text-6xl mb-4",children:"Gen Z Vibes "}),(0,ac.jsx)("p",{className:"text-white/70 text-xl max-w-2xl mx-auto",children:"Built by Gen Z, for Gen Z. We speak your language with a design that's aesthetic AF, features that matter, and vibes that just hit different."})]}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-pink-500/20 to-purple-500/20 border-pink-400/30 p-6",children:[(0,ac.jsx)(br,{className:"w-12 h-12 text-pink-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Glassmorphism Design"}),(0,ac.jsx)("p",{className:"text-white/70",children:"That smooth, frosted glass aesthetic everyone's obsessed with. Liquid gradients, blur effects, and vibes."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border-yellow-400/30 p-6",children:[(0,ac.jsx)(bp,{className:"w-12 h-12 text-yellow-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Emoji Everything"}),(0,ac.jsx)("p",{className:"text-white/70",children:"Full emoji support everywhere. React, express, and communicate in the language of the internet."})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-purple-500/20 to-blue-500/20 border-purple-400/30 p-6",children:[(0,ac.jsx)(qr,{className:"w-12 h-12 text-purple-400 mb-4"}),(0,ac.jsx)("h3",{className:"text-white text-xl mb-2",children:"Always Evolving"}),(0,ac.jsx)("p",{className:"text-white/70",children:"We're constantly adding new features based on what YOU want. Your feedback shapes the app."})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-8 mb-12",children:[(0,ac.jsx)("h2",{className:"text-white text-3xl mb-6",children:"Why Gen Z Loves MoveYSplash"}),(0,ac.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)(ry,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-1"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"No Toxic Algorithms"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"See what your friends share, not what a faceless ranking system decides you care about."})]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)(qe,{className:"w-6 h-6 text-green-400 flex-shrink-0 mt-1"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"Privacy First"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Your data is yours. We don't sell it, period."})]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)(bn,{className:"w-6 h-6 text-yellow-400 flex-shrink-0 mt-1"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"Lightning Fast"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"No lag, no loading, just instant vibes"})]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)(bp,{className:"w-6 h-6 text-pink-400 flex-shrink-0 mt-1"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"Mental Health Friendly"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"No follower counts, no public likes, less stress"})]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)(rA,{className:"w-6 h-6 text-purple-400 flex-shrink-0 mt-1"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"Aesthetic AF"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Every screen is screenshot-worthy"})]})]}),(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)(bo,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-1"}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h3",{className:"text-white mb-1",children:"Made for Sharing"}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:"Stories, snaps, memes - share it all your way"})]})]})]})]}),(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-gradient-to-br from-yellow-500/30 via-pink-500/30 to-purple-500/30 border-yellow-400/30 p-12 text-center",children:[(0,ac.jsx)("h2",{className:"text-white text-4xl mb-4",children:"Join the MoveSplash Generation"}),(0,ac.jsx)("p",{className:"text-white/80 text-lg mb-6",children:"Where your vibe matters more than your follower count "}),(0,ac.jsx)(be,{onClick:()=>b?.(),className:"bg-gradient-to-r from-yellow-500 via-pink-500 to-purple-500 hover:opacity-90 text-white border-0 text-lg px-8 py-6",children:"Get Started - It's Free"})]})]})]})}function rI(){return(0,ac.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,ac.jsx)("div",{className:"absolute top-0 -left-4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),(0,ac.jsx)("div",{className:"absolute top-0 -right-4 w-96 h-96 bg-yellow-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),(0,ac.jsx)("div",{className:"absolute -bottom-8 left-20 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]})}function rJ({icon:a,title:b,description:c}){return(0,ac.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ac.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0 text-white",children:a}),(0,ac.jsxs)("div",{children:[(0,ac.jsx)("h4",{className:"text-white mb-1",children:b}),(0,ac.jsx)("p",{className:"text-white/60 text-sm",children:c})]})]})}function rK({icon:a,title:b,description:c}){return(0,ac.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg text-center",children:[(0,ac.jsx)("div",{className:"text-3xl mb-2",children:a}),(0,ac.jsx)("h4",{className:"text-white text-sm mb-1",children:b}),(0,ac.jsx)("p",{className:"text-white/50 text-xs",children:c})]})}function rL({number:a,label:b,color:c}){return(0,ac.jsxs)(gl,{className:"backdrop-blur-xl bg-white/10 border-white/20 p-6 text-center",children:[(0,ac.jsx)("div",{className:`text-5xl text-transparent bg-clip-text bg-gradient-to-r ${c} mb-2`,children:a}),(0,ac.jsx)("div",{className:"text-white/70",children:b})]})}function rM({className:a}){return(0,ac.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ac.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}let rN=({...a})=>{let{theme:b="system"}=(0,ae.useTheme)();return(0,ac.jsx)(fZ,{theme:b,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...a})},rO="/login",rP="feed",rQ={feed:"feed",messages:"messages",video:"videochat",friends:"friendsList",stories:"stories",settings:"settings",profile:"profile",help:"help",privacy:"privacy",terms:"terms"},rR=Object.entries(rQ).reduce((a,[b,c])=>(a[c.toLowerCase()]=b,a),{}),rS={"group-chats":"messaging","video-calls":"videochat","screen-share":"screenshare",stories:"stories",friends:"friends","gen-z":"genz"},rT=Object.entries(rS).reduce((a,[b,c])=>(a[c.toLowerCase()]=b,a),{}),rU={help:"help",privacy:"privacy",terms:"terms",about:"about",cookies:"cookies",signup:"signup"},rV={landing:"/",signup:"/signup",help:"/help",privacy:"/privacy",terms:"/terms",about:"/about",cookies:"/cookies"};function rW(a){let b=a.split("/").filter(Boolean);if(0===b.length)return{state:"landing",feature:null,view:rP};let[c,d]=b.map(a=>a.toLowerCase());if("login"===c){if(!d)return{state:"login",feature:null,view:rP};let a=rR[d];return a?{state:"app",feature:null,view:a}:{state:"login",feature:null,view:rP}}let e=rU[c];if(e)return{state:e,feature:null,view:rP};let f=rT[c];return f?{state:"feature",feature:f,view:rP}:{state:"landing",feature:null,view:rP}}function rX(){let{login:a,signup:b,logout:c,currentUser:d,loadProfileUser:e}=f3(),f=(0,af.useRouter)(),g=(0,af.usePathname)()||"/",h=rW(g),[i,j]=(0,ad.useState)(h.state),[k,l]=(0,ad.useState)(h.view),[m,n]=(0,ad.useState)(null),[o,p]=(0,ad.useState)(h.feature),[q,r]=(0,ad.useState)(null),[s,t]=(0,ad.useState)(null),[u,v]=(0,ad.useState)(null),[w,x]=(0,ad.useState)(!1),{resolvedTheme:y}=(0,ae.useTheme)(),z="light"===y,A=bc("min-h-screen relative overflow-hidden transition-colors duration-500",z?"bg-gradient-to-br from-rose-100 via-purple-100 to-sky-100 text-slate-900":"bg-gradient-to-br from-purple-900 via-pink-800 to-orange-700 text-white");(0,ad.useEffect)(()=>{let a=rW(g);if("app"===a.state){j("app"),l(a.view),p(null);return}if("feature"===a.state){j("feature"),p(a.feature);return}j(a.state),p(null)},[g]),(0,ad.useEffect)(()=>{let a=function(a,b,c){if("login"===a)return rO;if("app"===a){let a=rQ[c]??rQ[rP];return`${rO}/${a}`}return"feature"===a&&b?`/${rS[b]}`:rV[a]??"/"}(i,o,k);g!==a&&f.replace(a,{scroll:!1})},[i,o,k,g,f]),(0,ad.useEffect)(()=>{d?v(a=>a||d.id):v(null)},[d]),(0,ad.useEffect)(()=>{let a=!1;return(async()=>{if(null===u){x(!1),await e(null);return}x(!0);let b=await e(u);!a&&(x(!1),b||fV.error("Unable to load that profile right now."))})(),()=>{a=!0}},[u,e]);let B=async(b,c)=>{await a(b,c)?(fV.success("Welcome back! "),v(null),j("app"),l("feed")):fV.error("Invalid email or password")},C=async(a,c,d,e)=>{await b(a,c,d,e)?(fV.success(`Welcome to MoveYSplash, ${a}! `),v(null),j("app"),l("feed")):fV.error("Email already in use")},D=()=>{c(),fV.success("See you later! "),v(null),t(null),x(!1),j("landing")},E=a=>{r(a),l("messages")},F=()=>{p(null),j("login")};return"help"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(rm,{onBack:()=>j("landing")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"privacy"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(rq,{onBack:()=>j("landing")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"terms"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(rt,{onBack:()=>j("landing")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"about"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(rw,{onBack:()=>j("landing")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"cookies"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(rx,{onBack:()=>j("landing")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"feature"===i&&o?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(rB,{feature:o,onBack:()=>{p(null),j("landing")},onGetStarted:()=>j("signup")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"landing"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(bu,{onGetStarted:()=>j("signup"),onLogin:F,onViewFeature:a=>{p(a),j("feature")},onViewHelp:()=>j("help"),onViewPrivacy:()=>j("privacy"),onViewTerms:()=>j("terms"),onViewAbout:()=>j("about"),onViewCookies:()=>j("cookies")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"login"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(dI,{onLogin:B,onBack:()=>j("landing"),onSignup:()=>j("signup")}),(0,ac.jsx)(rN,{position:"top-center"})]}):"signup"===i?(0,ac.jsxs)(ac.Fragment,{children:[(0,ac.jsx)(dJ,{onSignup:C,onBack:()=>j("landing"),onLogin:F}),(0,ac.jsx)(rN,{position:"top-center"})]}):(0,ac.jsxs)("div",{className:A,children:[(0,ac.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:(z?["absolute -top-40 -left-40 w-96 h-96 bg-gradient-to-r from-pink-200 to-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob","absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-r from-amber-200 to-orange-200 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob animation-delay-2000","absolute -bottom-40 left-20 w-96 h-96 bg-gradient-to-r from-sky-200 to-cyan-200 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob animation-delay-4000"]:["absolute -top-40 -left-40 w-96 h-96 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob","absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000","absolute -bottom-40 left-20 w-96 h-96 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"]).map((a,b)=>(0,ac.jsx)("div",{className:a},b))}),(0,ac.jsx)(gk,{currentView:k,onNavigate:a=>{"profile"===a&&v(d?d.id:null),l(a),n(null)},onLogout:D,onOpenSettings:()=>{l("settings"),n(null)}}),(0,ac.jsxs)("main",{className:"relative z-10 p-6",children:["feed"===k&&(0,ac.jsxs)("div",{className:"space-y-6",children:[(0,ac.jsx)(pe,{}),(0,ac.jsx)(ix,{onShareToMessages:E})]}),"messages"===k&&!m&&(0,ac.jsx)(l2,{onStartCall:a=>{n(a),l("video")},shareDraft:q?.message??null,onShareDraftConsumed:()=>r(null),focusUserId:s,onFocusUserConsumed:()=>t(null)}),("video"===k||m)&&(0,ac.jsx)(nJ,{callType:m||"video",onEndCall:()=>{n(null),l("messages")}}),"friends"===k&&(0,ac.jsx)(nP,{onOpenProfile:a=>{v(a),l("profile")},onOpenMessage:a=>{t(a),l("messages")}}),"stories"===k&&(0,ac.jsx)(pe,{}),"settings"===k&&(0,ac.jsx)(qn,{onClose:()=>{l("feed")},onLogout:D,onOpenHelpCenter:()=>{n(null),l("help")},onOpenPrivacyPolicy:()=>{n(null),l("privacy")},onOpenTermsOfService:()=>{n(null),l("terms")}}),"help"===k&&(0,ac.jsx)(rm,{onBack:()=>l("settings")}),"privacy"===k&&(0,ac.jsx)(rq,{onBack:()=>l("settings")}),"terms"===k&&(0,ac.jsx)(rt,{onBack:()=>l("settings")}),"profile"===k&&(0,ac.jsx)(qt,{onShareToMessages:E,profileUserId:u,isLoading:w,onBackToFriends:()=>{d&&v(d.id),l("friends")}})]}),(0,ac.jsx)(rN,{position:"top-center"}),(0,ac.jsx)("style",{children:`
        @keyframes blob {
          0% { transform: translate(0px, 0px) scale(1); }
          33% { transform: translate(30px, -50px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
          100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]})}function rY(){return(0,ac.jsx)(gc,{children:(0,ac.jsx)(rX,{})})}a.s(["default",()=>rY],40777)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8461521f._.js.map