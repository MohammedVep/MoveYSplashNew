module.exports = [
"[project]/src/app/utils/supabase/info.tsx [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/* AUTOGENERATED FILE - DO NOT EDIT CONTENTS */ __turbopack_context__.s([
    "projectId",
    ()=>projectId,
    "publicAnonKey",
    ()=>publicAnonKey
]);
const projectId = "opmvuhlheenygwbqwljk";
const publicAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wbXZ1aGxoZWVueWd3YnF3bGprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2OTkxMjMsImV4cCI6MjA3NjI3NTEyM30.teI8M7lSDyunxTtcltbw8duAGnjJ8P8hgZXbRlDFYb4";
}),
"[project]/src/app/utils/userContext.tsx [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "UserProvider",
    ()=>UserProvider,
    "defaultSettings",
    ()=>defaultSettings,
    "resolveFontSizePreference",
    ()=>resolveFontSizePreference,
    "useUser",
    ()=>useUser
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$themes$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next-themes/dist/index.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/utils/supabase/info.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$settings$2d$theme$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/settings-theme.ts [app-ssr] (ecmascript)");
'use client';
;
;
;
;
;
const API_BASE_URL = `https://${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["projectId"]}.supabase.co/functions/v1/make-server-a14c7986`;
const UserContext = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])(undefined);
function useUser() {
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(UserContext);
    if (context === undefined) {
        throw new Error('useUser must be used within a UserProvider');
    }
    return context;
}
const defaultSettings = {
    profileVisibility: 'public',
    whoCanMessage: 'everyone',
    whoCanCall: 'friends',
    showOnlineStatus: true,
    showReadReceipts: true,
    allowTagging: true,
    pushNotifications: true,
    emailNotifications: true,
    smsNotifications: false,
    notifyLikes: true,
    notifyComments: true,
    notifyMessages: true,
    notifyFriendRequests: true,
    notifyStories: false,
    soundEnabled: true,
    soundVolume: 75,
    theme: 'dark',
    language: 'en',
    fontSize: 'medium',
    autoPlayVideos: true,
    reduceAnimations: false,
    phoneNumber: ''
};
const FONT_SIZE_SCALE = {
    small: '14px',
    medium: '16px',
    large: '18px'
};
const resolveFontSizePreference = (value)=>{
    if (value === 'small') {
        return 'small';
    }
    if (value === 'medium') {
        return 'medium';
    }
    return 'large';
};
const sanitizeSettings = (settings)=>{
    const sanitized = {
        ...settings
    };
    if (sanitized.theme) {
        sanitized.theme = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$settings$2d$theme$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["normalizeThemePreference"])(sanitized.theme);
    }
    if (sanitized.fontSize) {
        sanitized.fontSize = resolveFontSizePreference(sanitized.fontSize);
    }
    if (sanitized.language) {
        sanitized.language = 'en';
    }
    return sanitized;
};
const mergeWithDefaultSettings = (settings)=>({
        ...defaultSettings,
        ...sanitizeSettings(settings ?? {})
    });
const normalizeServerUser = (user)=>{
    const joinedAt = user.joinedAt ? new Date(user.joinedAt) : new Date();
    return {
        id: user.id,
        ablyClientId: user.ablyClientId ?? user.id,
        name: user.name,
        username: user.username,
        email: user.email,
        avatar: user.avatar,
        bio: user.bio ?? '',
        location: user.location ?? '',
        website: user.website ?? '',
        joinedAt,
        friendIds: Array.isArray(user.friendIds) ? user.friendIds : [],
        blockedIds: Array.isArray(user.blockedIds) ? user.blockedIds : [],
        savedPostIds: Array.isArray(user.savedPostIds) ? user.savedPostIds.filter((value)=>typeof value === 'string') : [],
        posts: [],
        achievements: [],
        settings: mergeWithDefaultSettings()
    };
};
const mergeServerUser = (server, fallback)=>{
    const normalized = normalizeServerUser(server);
    return {
        ...normalized,
        posts: fallback?.posts ?? normalized.posts,
        achievements: fallback?.achievements ?? normalized.achievements,
        settings: fallback?.settings ?? normalized.settings
    };
};
const normalizeComment = (value, fallbackPostOwnerId)=>{
    if (typeof value !== 'object' || value === null) {
        return null;
    }
    const record = value;
    const idValue = record['id'];
    const postIdValue = record['postId'];
    const postOwnerValue = record['postOwnerId'] ?? record['postOwner'] ?? fallbackPostOwnerId;
    const authorIdValue = record['authorId'];
    if (typeof idValue !== 'string' || idValue.trim().length === 0 || typeof postIdValue !== 'string' || postIdValue.trim().length === 0 || typeof postOwnerValue !== 'string' || postOwnerValue.trim().length === 0 || typeof authorIdValue !== 'string' || authorIdValue.trim().length === 0) {
        return null;
    }
    const createdAtRaw = record['createdAt'];
    const createdAt = typeof createdAtRaw === 'string' && createdAtRaw ? new Date(createdAtRaw) : new Date();
    return {
        id: idValue,
        postId: postIdValue,
        postOwnerId: postOwnerValue,
        authorId: authorIdValue,
        authorName: typeof record['authorName'] === 'string' && record['authorName'] ? record['authorName'] : 'Unknown user',
        authorAvatar: typeof record['authorAvatar'] === 'string' ? record['authorAvatar'] ?? '' : '',
        content: typeof record['content'] === 'string' ? record['content'] : '',
        createdAt
    };
};
function UserProvider({ children }) {
    const [currentUser, setCurrentUser] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [allUsers, setAllUsers] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(new Map());
    const [profileUserId, setProfileUserId] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [profileUser, setProfileUser] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const { setTheme } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$themes$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useTheme"])();
    // Load user directory from Supabase so all profile data reflects persisted state
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const fetchUsers = async ()=>{
            try {
                const response = await fetch(`${API_BASE_URL}/users`, {
                    headers: {
                        'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                    }
                });
                if (!response.ok) {
                    console.error('Failed to load users from Supabase');
                    return;
                }
                const { users: serverUsers } = await response.json();
                setAllUsers((prev)=>{
                    const updated = new Map(prev);
                    serverUsers.forEach((serverUser)=>{
                        const normalized = normalizeServerUser(serverUser);
                        const existing = prev.get(serverUser.id) ?? (normalized.ablyClientId ? prev.get(normalized.ablyClientId) : undefined);
                        const mergedUser = existing ? {
                            ...normalized,
                            posts: existing.posts,
                            achievements: existing.achievements,
                            settings: mergeWithDefaultSettings(existing.settings)
                        } : normalized;
                        updated.set(mergedUser.id, mergedUser);
                        if (mergedUser.ablyClientId && mergedUser.ablyClientId !== mergedUser.id) {
                            updated.set(mergedUser.ablyClientId, mergedUser);
                        }
                    });
                    return updated;
                });
            } catch (error) {
                console.error('Error loading users from Supabase:', error);
            }
        };
        fetchUsers();
    }, []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const preference = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$settings$2d$theme$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["normalizeThemePreference"])(currentUser?.settings?.theme ?? defaultSettings.theme);
        const applyTheme = ()=>{
            setTheme((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$settings$2d$theme$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["resolveThemePreference"])(preference));
        };
        applyTheme();
        if (preference === 'dynamic') {
            const interval = setInterval(applyTheme, 10 * 60 * 1000);
            return ()=>clearInterval(interval);
        }
        return undefined;
    }, [
        currentUser?.settings?.theme,
        setTheme
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const resolvedPreference = resolveFontSizePreference(currentUser?.settings?.fontSize ?? defaultSettings.fontSize);
        const root = typeof document !== 'undefined' ? document.documentElement : null;
        if (root) {
            root.style.setProperty('--font-size', FONT_SIZE_SCALE[resolvedPreference]);
        }
    }, [
        currentUser?.settings?.fontSize
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!currentUser) {
            setProfileUserId(null);
            setProfileUser(null);
            return;
        }
        if (!profileUserId || profileUserId === currentUser.id) {
            setProfileUserId(currentUser.id);
            setProfileUser(currentUser);
        }
    }, [
        currentUser,
        profileUserId
    ]);
    // Calculate achievements based on merit
    const calculateAchievements = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((user)=>{
        const achievements = [];
        const now = new Date();
        const accountAge = now.getTime() - user.joinedAt.getTime();
        const daysOld = accountAge / (1000 * 60 * 60 * 24);
        // Early Adopter - joined within first 3 months
        const firstUsers = Array.from(allUsers.values()).sort((a, b)=>a.joinedAt.getTime() - b.joinedAt.getTime()).slice(0, 100);
        if (firstUsers.some((u)=>u.id === user.id)) {
            achievements.push({
                id: 'early-adopter',
                name: 'Early Adopter',
                description: 'One of the first 100 users on MoveSplash',
                earnedAt: user.joinedAt,
                icon: 'Award',
                color: 'from-purple-500 to-pink-500'
            });
        }
        // Top Contributor - 50+ posts
        if (user.posts.length >= 50) {
            achievements.push({
                id: 'top-contributor',
                name: 'Top Contributor',
                description: 'Created over 50 posts',
                earnedAt: user.posts[49]?.timestamp || now,
                icon: 'TrendingUp',
                color: 'from-orange-500 to-yellow-500'
            });
        }
        // Story Master - 30+ posts with media
        const postsWithMedia = user.posts.filter((p)=>p.media && p.media.length > 0);
        if (postsWithMedia.length >= 30) {
            achievements.push({
                id: 'story-master',
                name: 'Story Master',
                description: 'Shared 30+ posts with photos or videos',
                earnedAt: postsWithMedia[29]?.timestamp || now,
                icon: 'Camera',
                color: 'from-blue-500 to-cyan-500'
            });
        }
        // Super Friend - 100+ friends
        if (user.friendIds.length >= 100) {
            achievements.push({
                id: 'super-friend',
                name: 'Super Friend',
                description: 'Connected with over 100 friends',
                earnedAt: now,
                icon: 'Users',
                color: 'from-green-500 to-emerald-500'
            });
        }
        // Rising Star - 1000+ total likes
        const totalLikes = user.posts.reduce((sum, post)=>sum + post.likes, 0);
        if (totalLikes >= 1000) {
            achievements.push({
                id: 'rising-star',
                name: 'Rising Star',
                description: 'Received over 1000 likes',
                earnedAt: now,
                icon: 'Star',
                color: 'from-yellow-500 to-orange-500'
            });
        }
        // Conversation Starter - 500+ total comments
        const totalComments = user.posts.reduce((sum, post)=>sum + post.comments, 0);
        if (totalComments >= 500) {
            achievements.push({
                id: 'conversation-starter',
                name: 'Conversation Starter',
                description: 'Generated over 500 comments',
                earnedAt: now,
                icon: 'MessageCircle',
                color: 'from-cyan-500 to-blue-500'
            });
        }
        // Viral Creator - any post with 500+ likes
        if (user.posts.some((p)=>p.likes >= 500)) {
            achievements.push({
                id: 'viral-creator',
                name: 'Viral Creator',
                description: 'Created a post with 500+ likes',
                earnedAt: user.posts.find((p)=>p.likes >= 500)?.timestamp || now,
                icon: 'Zap',
                color: 'from-pink-500 to-purple-500'
            });
        }
        // Consistent Creator - posted for 30+ days
        if (daysOld >= 30 && user.posts.length >= 30) {
            achievements.push({
                id: 'consistent-creator',
                name: 'Consistent Creator',
                description: 'Posted consistently for 30+ days',
                earnedAt: now,
                icon: 'Calendar',
                color: 'from-indigo-500 to-purple-500'
            });
        }
        return achievements;
    }, [
        allUsers
    ]);
    // Update achievements for current user
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!currentUser) {
            return;
        }
        const achievements = calculateAchievements(currentUser);
        const existing = currentUser.achievements;
        const isSame = existing.length === achievements.length && existing.every((achievement, index)=>achievement.id === achievements[index]?.id);
        if (isSame) {
            return;
        }
        setCurrentUser((prev)=>prev ? {
                ...prev,
                achievements
            } : null);
        setAllUsers((prev)=>{
            const newMap = new Map(prev);
            const entry = newMap.get(currentUser.id);
            if (entry) {
                const updatedEntry = {
                    ...entry,
                    achievements
                };
                newMap.set(currentUser.id, updatedEntry);
                if (entry.ablyClientId && entry.ablyClientId !== entry.id) {
                    newMap.set(entry.ablyClientId, updatedEntry);
                }
            }
            return newMap;
        });
    }, [
        currentUser,
        calculateAchievements
    ]);
    const updateUser = async (userData)=>{
        if (!currentUser) {
            return false;
        }
        const previousUser = currentUser;
        const updated = {
            ...currentUser,
            ...userData
        };
        setCurrentUser(updated);
        setAllUsers((prev)=>{
            const newMap = new Map(prev);
            newMap.set(updated.id, updated);
            if (updated.ablyClientId && updated.ablyClientId !== updated.id) {
                newMap.set(updated.ablyClientId, updated);
            }
            return newMap;
        });
        try {
            const response = await fetch(`${API_BASE_URL}/users/${updated.id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({
                    name: updated.name,
                    username: updated.username,
                    email: updated.email,
                    avatar: updated.avatar,
                    bio: updated.bio,
                    location: updated.location,
                    website: updated.website,
                    joinedAt: updated.joinedAt.toISOString(),
                    friendIds: updated.friendIds,
                    blockedIds: updated.blockedIds
                })
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.user) {
                console.error('Failed to sync user data to server');
                setCurrentUser(previousUser);
                setAllUsers((prev)=>{
                    const newMap = new Map(prev);
                    newMap.set(previousUser.id, previousUser);
                    if (previousUser.ablyClientId && previousUser.ablyClientId !== previousUser.id) {
                        newMap.set(previousUser.ablyClientId, previousUser);
                    }
                    return newMap;
                });
                return false;
            }
            const serverUser = payload.user;
            const normalized = normalizeServerUser(serverUser);
            const mergedUser = {
                ...updated,
                name: normalized.name,
                username: normalized.username,
                email: normalized.email,
                avatar: normalized.avatar,
                bio: normalized.bio,
                location: normalized.location,
                website: normalized.website,
                joinedAt: normalized.joinedAt,
                friendIds: normalized.friendIds,
                blockedIds: normalized.blockedIds
            };
            setCurrentUser(mergedUser);
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                newMap.set(mergedUser.id, mergedUser);
                if (mergedUser.ablyClientId && mergedUser.ablyClientId !== mergedUser.id) {
                    newMap.set(mergedUser.ablyClientId, mergedUser);
                }
                return newMap;
            });
            return true;
        } catch (error) {
            console.error('Error syncing user data:', error);
            setCurrentUser(previousUser);
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                newMap.set(previousUser.id, previousUser);
                if (previousUser.ablyClientId && previousUser.ablyClientId !== previousUser.id) {
                    newMap.set(previousUser.ablyClientId, previousUser);
                }
                return newMap;
            });
            return false;
        }
    };
    const updateSettings = async (settings)=>{
        if (currentUser) {
            const sanitized = sanitizeSettings(settings);
            const updatedSettings = {
                ...currentUser.settings,
                ...sanitized
            };
            const updated = {
                ...currentUser,
                settings: updatedSettings
            };
            setCurrentUser(updated);
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                newMap.set(updated.id, updated);
                return newMap;
            });
            // Sync to Supabase
            try {
                const response = await fetch(`${API_BASE_URL}/users/${currentUser.id}/settings`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                    },
                    body: JSON.stringify(updatedSettings)
                });
                if (!response.ok) {
                    console.error('Failed to sync settings to server');
                }
            } catch (error) {
                console.error('Error syncing settings:', error);
            }
        }
    };
    const changePassword = async (oldPassword, newPassword)=>{
        if (!currentUser) {
            return {
                success: false,
                error: 'No user is signed in'
            };
        }
        try {
            const response = await fetch(`${API_BASE_URL}/auth/change-password`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({
                    userId: currentUser.id,
                    oldPassword,
                    newPassword
                })
            });
            const payload = await response.json().catch(()=>({}));
            if (!response.ok || payload?.success !== true) {
                const errorMessage = typeof payload?.error === 'string' && payload.error.trim().length > 0 ? payload.error : 'Unable to change password right now';
                return {
                    success: false,
                    error: errorMessage
                };
            }
            return {
                success: true
            };
        } catch (error) {
            console.error('Error changing password:', error);
            return {
                success: false,
                error: 'Unexpected error while updating password'
            };
        }
    };
    const addPost = async (post)=>{
        if (currentUser) {
            const newPost = {
                ...post,
                id: `${currentUser.id}-post-${Date.now()}`,
                userId: currentUser.id,
                timestamp: new Date(),
                likes: 0,
                comments: 0,
                shares: 0,
                likedBy: []
            };
            const updatedUser = {
                ...currentUser,
                posts: [
                    newPost,
                    ...currentUser.posts
                ]
            };
            setCurrentUser(updatedUser);
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                newMap.set(updatedUser.id, updatedUser);
                return newMap;
            });
            // Sync to Supabase
            try {
                await fetch(`${API_BASE_URL}/posts`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                    },
                    body: JSON.stringify({
                        userId: currentUser.id,
                        text: post.text,
                        media: post.media
                    })
                });
            } catch (error) {
                console.error('Error syncing post:', error);
            }
        }
    };
    const deletePost = async (postId)=>{
        if (currentUser) {
            const updatedUser = {
                ...currentUser,
                posts: currentUser.posts.filter((p)=>p.id !== postId)
            };
            setCurrentUser(updatedUser);
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                newMap.set(updatedUser.id, updatedUser);
                return newMap;
            });
            // Sync to Supabase
            try {
                await fetch(`${API_BASE_URL}/posts/${currentUser.id}/${postId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                    }
                });
            } catch (error) {
                console.error('Error deleting post:', error);
            }
        }
    };
    const likePost = async (postId, userId)=>{
        let nextProfileUser = null;
        setAllUsers((prev)=>{
            const newMap = new Map(prev);
            newMap.forEach((user, id)=>{
                const postIndex = user.posts.findIndex((p)=>p.id === postId);
                if (postIndex !== -1) {
                    const post = user.posts[postIndex];
                    const hasLiked = post.likedBy.includes(userId);
                    const updatedPost = {
                        ...post,
                        likes: hasLiked ? post.likes - 1 : post.likes + 1,
                        likedBy: hasLiked ? post.likedBy.filter((id)=>id !== userId) : [
                            ...post.likedBy,
                            userId
                        ]
                    };
                    const updatedPosts = [
                        ...user.posts
                    ];
                    updatedPosts[postIndex] = updatedPost;
                    const updatedUser = {
                        ...user,
                        posts: updatedPosts
                    };
                    newMap.set(id, updatedUser);
                    if (currentUser && id === currentUser.id) {
                        setCurrentUser(updatedUser);
                    }
                    if (profileUserId && (id === profileUserId || user.ablyClientId === profileUserId)) {
                        nextProfileUser = updatedUser;
                    }
                    // Sync to Supabase
                    fetch(`${API_BASE_URL}/posts/${user.id}/${postId}/like`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                        },
                        body: JSON.stringify({
                            likerUserId: userId
                        })
                    }).catch((error)=>console.error('Error syncing like:', error));
                }
            });
            return newMap;
        });
        if (nextProfileUser) {
            setProfileUser(nextProfileUser);
        }
    };
    const sharePost = async (postOwnerId, postId, options)=>{
        const payloadBody = {
            platform: options.platform,
            sharerUserId: options.sharerUserId ?? currentUser?.id ?? '',
            message: options.message ?? ''
        };
        try {
            const response = await fetch(`${API_BASE_URL}/posts/${postOwnerId}/${postId}/share`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify(payloadBody)
            });
            let payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.post) {
                if (response.status !== 404) {
                    const errorMessage = payload?.error ?? `status ${response.status}`;
                    console.error('Error recording share:', errorMessage);
                    return null;
                }
                // Fallback to legacy dynamic route
                const fallbackResponse = await fetch(`${API_BASE_URL}/shares`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                    },
                    body: JSON.stringify({
                        ...payloadBody,
                        postOwnerId,
                        postId
                    })
                });
                payload = await fallbackResponse.json().catch(()=>null);
                if (!fallbackResponse.ok || !payload?.post) {
                    const errorMessage = payload?.error ?? `status ${fallbackResponse.status}`;
                    console.error('Error recording share (fallback):', errorMessage);
                    return null;
                }
            }
            const postRecord = payload.post;
            const totalSharesValue = postRecord?.['shares'];
            const totalShares = typeof totalSharesValue === 'number' && Number.isFinite(totalSharesValue) ? totalSharesValue : null;
            let resolvedShares = totalShares;
            let updatedOwnerSnapshot = null;
            let nextProfileUser = null;
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                const owner = newMap.get(postOwnerId);
                if (!owner) {
                    return prev;
                }
                const postIndex = owner.posts.findIndex((post)=>post.id === postId);
                if (postIndex === -1) {
                    return prev;
                }
                const updatedPosts = [
                    ...owner.posts
                ];
                const existingPost = updatedPosts[postIndex];
                const nextShares = totalShares ?? existingPost.shares + 1;
                resolvedShares = nextShares;
                updatedPosts[postIndex] = {
                    ...existingPost,
                    shares: nextShares
                };
                const updatedOwner = {
                    ...owner,
                    posts: updatedPosts
                };
                updatedOwnerSnapshot = updatedOwner;
                newMap.set(updatedOwner.id, updatedOwner);
                if (updatedOwner.ablyClientId && updatedOwner.ablyClientId !== updatedOwner.id) {
                    newMap.set(updatedOwner.ablyClientId, updatedOwner);
                }
                if (profileUserId && (updatedOwner.id === profileUserId || updatedOwner.ablyClientId === profileUserId)) {
                    nextProfileUser = updatedOwner;
                }
                return newMap;
            });
            const ownerSnapshot = updatedOwnerSnapshot;
            const ownerId = ownerSnapshot ? ownerSnapshot.id : null;
            if (ownerSnapshot && ownerId && currentUser && currentUser.id === ownerId) {
                setCurrentUser(ownerSnapshot);
            }
            if (nextProfileUser) {
                setProfileUser(nextProfileUser);
            }
            return resolvedShares ?? totalShares ?? null;
        } catch (error) {
            console.error('Error sharing post:', error);
            return null;
        }
    };
    const toggleSavePost = async (postOwnerId, postId)=>{
        if (!currentUser) {
            console.warn('toggleSavePost requires a logged-in user');
            throw new Error('User must be signed in to save posts');
        }
        const activeUser = currentUser;
        const userId = activeUser.id;
        const bookmarkKey = `${postOwnerId}:${postId}`;
        const previousSaved = Array.isArray(activeUser.savedPostIds) ? activeUser.savedPostIds : [];
        const hasSaved = previousSaved.includes(bookmarkKey);
        const optimisticSaved = hasSaved ? previousSaved.filter((value)=>value !== bookmarkKey) : [
            ...previousSaved,
            bookmarkKey
        ];
        const applySavedPostIds = (savedPostIds)=>{
            setCurrentUser((prev)=>prev && prev.id === userId ? {
                    ...prev,
                    savedPostIds
                } : prev);
            setAllUsers((prev)=>{
                const next = new Map(prev);
                const base = next.get(userId) ?? (activeUser && activeUser.id === userId ? activeUser : null);
                if (base) {
                    const updated = {
                        ...base,
                        savedPostIds
                    };
                    next.set(base.id, updated);
                    if (base.ablyClientId && base.ablyClientId !== base.id) {
                        next.set(base.ablyClientId, updated);
                    }
                }
                return next;
            });
            setProfileUser((prev)=>{
                if (!prev) {
                    return prev;
                }
                if (prev.id === userId || prev.ablyClientId === userId) {
                    return {
                        ...prev,
                        savedPostIds
                    };
                }
                return prev;
            });
        };
        applySavedPostIds(optimisticSaved);
        const parseSavedIds = (value)=>Array.isArray(value) ? value.filter((entry)=>typeof entry === 'string') : optimisticSaved;
        const sendBookmarkRequest = async (endpoint, body)=>{
            const response = await fetch(endpoint, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    Authorization: `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify(body)
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.success) {
                const error = new Error(payload?.error ?? `status ${response.status}`);
                error.status = response.status;
                throw error;
            }
            return parseSavedIds(payload.savedPostIds);
        };
        const persistSavedPostIds = async (savedPostIds)=>{
            const response = await fetch(`${API_BASE_URL}/users/${userId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    Authorization: `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({
                    savedPostIds
                })
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.user) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                const error = new Error(errorMessage);
                error.status = response.status;
                throw error;
            }
            return parseSavedIds(payload.user.savedPostIds);
        };
        try {
            const savedIds = await sendBookmarkRequest(`${API_BASE_URL}/posts/${postOwnerId}/${postId}/bookmark`, {
                userId
            });
            applySavedPostIds(savedIds);
            return savedIds.includes(bookmarkKey);
        } catch (primaryError) {
            const withStatus = primaryError;
            if (withStatus.status === 404 || withStatus.status === 405) {
                try {
                    const savedIds = await sendBookmarkRequest(`${API_BASE_URL}/bookmarks`, {
                        userId,
                        postOwnerId,
                        postId
                    });
                    applySavedPostIds(savedIds);
                    return savedIds.includes(bookmarkKey);
                } catch (fallbackError) {
                    const fallbackWithStatus = fallbackError;
                    if (fallbackWithStatus.status === 404 || fallbackWithStatus.status === 405) {
                        try {
                            const savedIds = await persistSavedPostIds(optimisticSaved);
                            applySavedPostIds(savedIds);
                            return savedIds.includes(bookmarkKey);
                        } catch (persistError) {
                            applySavedPostIds(previousSaved);
                            console.error('Error persisting saved posts via user update:', persistError);
                            throw persistError instanceof Error ? persistError : new Error(String(persistError));
                        }
                    }
                    applySavedPostIds(previousSaved);
                    console.error('Error toggling saved post (fallback):', fallbackError);
                    throw fallbackError instanceof Error ? fallbackError : new Error(String(fallbackError));
                }
            }
            applySavedPostIds(previousSaved);
            console.error('Error toggling saved post:', primaryError);
            throw primaryError instanceof Error ? primaryError : new Error(String(primaryError));
        }
    };
    const fetchComments = async (postOwnerId, postId)=>{
        const headers = {
            'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
        };
        const parseResponse = async (response)=>{
            const payload = await response.json().catch(()=>null);
            if (!response.ok) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                throw new Error(errorMessage);
            }
            const rawComments = Array.isArray(payload?.comments) ? payload.comments : [];
            return rawComments.map((comment)=>normalizeComment(comment, postOwnerId)).filter((comment)=>Boolean(comment)).sort((a, b)=>a.createdAt.getTime() - b.createdAt.getTime());
        };
        try {
            const primaryQuery = new URLSearchParams({
                ownerId: postOwnerId,
                postId
            });
            const primaryResponse = await fetch(`${API_BASE_URL}/comments?${primaryQuery.toString()}`, {
                headers
            });
            try {
                return await parseResponse(primaryResponse);
            } catch (primaryError) {
                if (primaryResponse.status !== 404) {
                    throw primaryError instanceof Error ? primaryError : new Error(String(primaryError));
                }
                // Fallback to legacy dynamic route
                const fallbackResponse = await fetch(`${API_BASE_URL}/posts/${postOwnerId}/${postId}/comments`, {
                    headers
                });
                return await parseResponse(fallbackResponse);
            }
        } catch (error) {
            console.error('Error fetching comments:', error);
            return [];
        }
    };
    const addComment = async (postOwnerId, postId, content)=>{
        if (!currentUser) {
            console.warn('addComment requires a logged-in user');
            return null;
        }
        const trimmed = content.trim();
        if (!trimmed) {
            return null;
        }
        try {
            const primaryResponse = await fetch(`${API_BASE_URL}/comments`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({
                    postOwnerId,
                    postId,
                    authorId: currentUser.id,
                    content: trimmed
                })
            });
            let payload = await primaryResponse.json().catch(()=>null);
            if (!primaryResponse.ok || !payload?.comment) {
                if (primaryResponse.status !== 404) {
                    const errorMessage = payload?.error ?? `status ${primaryResponse.status}`;
                    console.error('Error creating comment:', errorMessage);
                    return null;
                }
                // Fallback to legacy dynamic route
                const fallbackResponse = await fetch(`${API_BASE_URL}/posts/${postOwnerId}/${postId}/comments`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                    },
                    body: JSON.stringify({
                        authorId: currentUser.id,
                        content: trimmed
                    })
                });
                payload = await fallbackResponse.json().catch(()=>null);
                if (!fallbackResponse.ok || !payload?.comment) {
                    const errorMessage = payload?.error ?? `status ${fallbackResponse.status}`;
                    console.error('Error creating comment (fallback):', errorMessage);
                    return null;
                }
            }
            const normalizedComment = normalizeComment(payload.comment, postOwnerId);
            if (!normalizedComment) {
                return null;
            }
            const postRecord = payload.post;
            const totalCommentsValue = postRecord?.['comments'];
            const totalComments = typeof totalCommentsValue === 'number' && Number.isFinite(totalCommentsValue) ? totalCommentsValue : null;
            let resolvedComments = totalComments;
            let updatedUserSnapshot = null;
            let nextProfileUser = null;
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                const owner = newMap.get(postOwnerId);
                if (!owner) {
                    return prev;
                }
                const postIndex = owner.posts.findIndex((post)=>post.id === postId);
                if (postIndex === -1) {
                    return prev;
                }
                const updatedPosts = [
                    ...owner.posts
                ];
                const existingPost = updatedPosts[postIndex];
                const nextComments = totalComments ?? existingPost.comments + 1;
                resolvedComments = nextComments;
                updatedPosts[postIndex] = {
                    ...existingPost,
                    comments: nextComments
                };
                const updatedUser = {
                    ...owner,
                    posts: updatedPosts
                };
                updatedUserSnapshot = updatedUser;
                newMap.set(updatedUser.id, updatedUser);
                if (updatedUser.ablyClientId && updatedUser.ablyClientId !== updatedUser.id) {
                    newMap.set(updatedUser.ablyClientId, updatedUser);
                }
                if (profileUserId && (updatedUser.id === profileUserId || updatedUser.ablyClientId === profileUserId)) {
                    nextProfileUser = updatedUser;
                }
                return newMap;
            });
            const nextSnapshot = updatedUserSnapshot;
            const nextId = nextSnapshot ? nextSnapshot.id : null;
            if (nextSnapshot && nextId && currentUser.id === nextId) {
                setCurrentUser(nextSnapshot);
            }
            if (nextProfileUser) {
                setProfileUser(nextProfileUser);
            }
            const finalCount = resolvedComments !== null && resolvedComments !== undefined ? resolvedComments : totalComments !== null && totalComments !== undefined ? totalComments : 1;
            return {
                comment: normalizedComment,
                totalComments: finalCount
            };
        } catch (error) {
            console.error('Error adding comment:', error);
            return null;
        }
    };
    const addFriend = async (friendId)=>{
        if (!currentUser || friendId === currentUser.id) {
            console.warn('addFriend requires a different logged-in user');
            return false;
        }
        try {
            const response = await fetch(`${API_BASE_URL}/friends/${currentUser.id}/${friendId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({
                    actorName: currentUser.name,
                    actorAvatar: currentUser.avatar
                })
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.currentUser) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                console.error('Error adding friend:', errorMessage);
                return false;
            }
            const mergedCurrent = mergeServerUser(payload.currentUser, currentUser);
            setCurrentUser(mergedCurrent);
            setAllUsers((prev)=>{
                const next = new Map(prev);
                next.set(mergedCurrent.id, mergedCurrent);
                const targetPayload = payload.targetUser;
                if (targetPayload) {
                    const existingTarget = prev.get(targetPayload.id);
                    const mergedTarget = mergeServerUser(targetPayload, existingTarget);
                    next.set(mergedTarget.id, mergedTarget);
                }
                return next;
            });
            void refreshAllUsers();
            return true;
        } catch (error) {
            console.error('Error adding friend:', error);
            return false;
        }
    };
    const removeFriend = async (friendId)=>{
        if (!currentUser || friendId === currentUser.id) {
            return false;
        }
        try {
            const response = await fetch(`${API_BASE_URL}/friends/${currentUser.id}/${friendId}`, {
                method: 'DELETE',
                headers: {
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                }
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.currentUser) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                console.error('Error removing friend:', errorMessage);
                return false;
            }
            const mergedCurrent = mergeServerUser(payload.currentUser, currentUser);
            setCurrentUser(mergedCurrent);
            setAllUsers((prev)=>{
                const next = new Map(prev);
                next.set(mergedCurrent.id, mergedCurrent);
                const targetPayload = payload.targetUser;
                if (targetPayload) {
                    const existingTarget = prev.get(targetPayload.id);
                    const mergedTarget = mergeServerUser(targetPayload, existingTarget);
                    next.set(mergedTarget.id, mergedTarget);
                }
                return next;
            });
            void refreshAllUsers();
            return true;
        } catch (error) {
            console.error('Error removing friend:', error);
            return false;
        }
    };
    const blockUser = async (userId)=>{
        if (!currentUser || userId === currentUser.id) {
            return false;
        }
        try {
            const response = await fetch(`${API_BASE_URL}/blocks/${currentUser.id}/${userId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({})
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.currentUser) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                console.error('Error blocking user:', errorMessage);
                return false;
            }
            const mergedCurrent = mergeServerUser(payload.currentUser, currentUser);
            setCurrentUser(mergedCurrent);
            setAllUsers((prev)=>{
                const next = new Map(prev);
                next.set(mergedCurrent.id, mergedCurrent);
                const targetPayload = payload.targetUser;
                if (targetPayload) {
                    const existingTarget = prev.get(targetPayload.id);
                    const mergedTarget = mergeServerUser(targetPayload, existingTarget);
                    next.set(mergedTarget.id, mergedTarget);
                }
                return next;
            });
            void refreshAllUsers();
            return true;
        } catch (error) {
            console.error('Error blocking user:', error);
            return false;
        }
    };
    const unblockUser = async (userId)=>{
        if (!currentUser || userId === currentUser.id) {
            return false;
        }
        try {
            const response = await fetch(`${API_BASE_URL}/blocks/${currentUser.id}/${userId}`, {
                method: 'DELETE',
                headers: {
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                }
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.currentUser) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                console.error('Error unblocking user:', errorMessage);
                return false;
            }
            const mergedCurrent = mergeServerUser(payload.currentUser, currentUser);
            setCurrentUser(mergedCurrent);
            setAllUsers((prev)=>{
                const next = new Map(prev);
                next.set(mergedCurrent.id, mergedCurrent);
                return next;
            });
            void refreshAllUsers();
            return true;
        } catch (error) {
            console.error('Error unblocking user:', error);
            return false;
        }
    };
    const getUserStats = ()=>{
        if (!currentUser) {
            return {
                totalPosts: 0,
                totalFriends: 0,
                totalLikes: 0,
                rank: 0
            };
        }
        const totalPosts = currentUser.posts.length;
        const totalFriends = currentUser.friendIds.length;
        const totalLikes = currentUser.posts.reduce((sum, post)=>sum + post.likes, 0);
        // Calculate rank based on total engagement
        const allUsersArray = Array.from(allUsers.values());
        const rankedUsers = allUsersArray.map((user)=>({
                id: user.id,
                score: user.posts.length * 10 + user.posts.reduce((sum, post)=>sum + post.likes, 0) + user.friendIds.length * 5
            })).sort((a, b)=>b.score - a.score);
        const rank = rankedUsers.findIndex((u)=>u.id === currentUser.id) + 1;
        return {
            totalPosts,
            totalFriends,
            totalLikes,
            rank
        };
    };
    const getAchievements = ()=>{
        if (!currentUser) return [];
        return calculateAchievements(currentUser);
    };
    const fetchUserSnapshot = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (userId)=>{
        try {
            const userResponse = await fetch(`${API_BASE_URL}/users/${userId}`, {
                headers: {
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                }
            });
            if (!userResponse.ok) {
                return null;
            }
            const { user: userData } = await userResponse.json();
            const settingsResponse = await fetch(`${API_BASE_URL}/users/${userId}/settings`, {
                headers: {
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                }
            });
            let settings = mergeWithDefaultSettings();
            if (settingsResponse.ok) {
                const { settings: savedSettings } = await settingsResponse.json();
                settings = mergeWithDefaultSettings(savedSettings);
            }
            const postsResponse = await fetch(`${API_BASE_URL}/users/${userId}/posts`, {
                headers: {
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                }
            });
            let posts = [];
            if (postsResponse.ok) {
                const { posts: savedPosts } = await postsResponse.json();
                posts = savedPosts.map((savedPost)=>({
                        ...savedPost,
                        timestamp: new Date(savedPost.timestamp)
                    }));
            }
            return {
                ...userData,
                ablyClientId: userData.ablyClientId ?? userData.id,
                bio: userData.bio ?? '',
                location: userData.location ?? '',
                website: userData.website ?? '',
                joinedAt: new Date(userData.joinedAt ?? new Date().toISOString()),
                friendIds: Array.isArray(userData.friendIds) ? userData.friendIds : [],
                blockedIds: Array.isArray(userData.blockedIds) ? userData.blockedIds : [],
                savedPostIds: Array.isArray(userData.savedPostIds) ? userData.savedPostIds.filter((value)=>typeof value === 'string') : [],
                posts,
                settings,
                achievements: []
            };
        } catch (error) {
            console.error('Error fetching user snapshot:', error);
            return null;
        }
    }, []);
    const loadUserData = async (userId)=>{
        try {
            const user = await fetchUserSnapshot(userId);
            if (!user) {
                return false;
            }
            setCurrentUser(user);
            setAllUsers((prev)=>{
                const newMap = new Map(prev);
                newMap.set(user.id, user);
                if (user.ablyClientId && user.ablyClientId !== user.id) {
                    newMap.set(user.ablyClientId, user);
                }
                return newMap;
            });
            if (!profileUserId || profileUserId === user.id) {
                setProfileUserId(user.id);
                setProfileUser(user);
            }
            return true;
        } catch (error) {
            console.error('Error loading user data:', error);
            return false;
        }
    };
    const loadProfileUser = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (userId)=>{
        if (!userId) {
            if (currentUser) {
                setProfileUserId(currentUser.id);
                setProfileUser(currentUser);
                return true;
            }
            setProfileUserId(null);
            setProfileUser(null);
            return false;
        }
        if (currentUser && userId === currentUser.id) {
            setProfileUserId(currentUser.id);
            setProfileUser(currentUser);
            return true;
        }
        const snapshot = await fetchUserSnapshot(userId);
        if (!snapshot) {
            return false;
        }
        setProfileUserId(snapshot.id);
        setProfileUser(snapshot);
        setAllUsers((prev)=>{
            const next = new Map(prev);
            next.set(snapshot.id, snapshot);
            if (snapshot.ablyClientId && snapshot.ablyClientId !== snapshot.id) {
                next.set(snapshot.ablyClientId, snapshot);
            }
            return next;
        });
        return true;
    }, [
        currentUser,
        fetchUserSnapshot
    ]);
    const refreshAllUsers = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        try {
            const response = await fetch(`${API_BASE_URL}/users`, {
                headers: {
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                }
            });
            if (!response.ok) {
                throw new Error(`status ${response.status}`);
            }
            const payload = await response.json().catch(()=>null);
            const rawUsers = Array.isArray(payload?.users) ? payload.users : [];
            setAllUsers((prev)=>{
                const next = new Map();
                rawUsers.forEach((rawUser)=>{
                    if (typeof rawUser !== 'object' || rawUser === null) {
                        return;
                    }
                    const serverUser = rawUser;
                    const existing = prev.get(serverUser.id);
                    const merged = mergeServerUser(serverUser, existing);
                    next.set(merged.id, merged);
                    if (merged.ablyClientId && merged.ablyClientId !== merged.id) {
                        next.set(merged.ablyClientId, merged);
                    }
                });
                prev.forEach((value, key)=>{
                    if (!next.has(key)) {
                        next.set(key, value);
                    }
                });
                return next;
            });
            setCurrentUser((prev)=>{
                if (!prev) {
                    return prev;
                }
                const serverEntry = rawUsers.find((candidate)=>{
                    return typeof candidate === 'object' && candidate !== null && candidate.id === prev.id;
                });
                if (!serverEntry) {
                    return prev;
                }
                const merged = mergeServerUser(serverEntry, prev);
                const prevFriendsSorted = [
                    ...prev.friendIds
                ].sort();
                const mergedFriendsSorted = [
                    ...merged.friendIds
                ].sort();
                const sameFriends = prevFriendsSorted.length === mergedFriendsSorted.length && prevFriendsSorted.every((value, index)=>value === mergedFriendsSorted[index]);
                const prevBlockedSorted = [
                    ...prev.blockedIds
                ].sort();
                const mergedBlockedSorted = [
                    ...merged.blockedIds
                ].sort();
                const sameBlocked = prevBlockedSorted.length === mergedBlockedSorted.length && prevBlockedSorted.every((value, index)=>value === mergedBlockedSorted[index]);
                if (sameFriends && sameBlocked) {
                    return prev;
                }
                return merged;
            });
        } catch (error) {
            console.error('Error refreshing users:', error);
        }
    }, []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        void refreshAllUsers();
    }, [
        refreshAllUsers
    ]);
    const login = async (email, password)=>{
        try {
            console.log('[Login] Attempting login for:', email);
            const response = await fetch(`${API_BASE_URL}/auth/login`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({
                    email,
                    password
                })
            });
            const payload = await response.json().catch(()=>null);
            console.log('[Login] Server response status:', response.status);
            if (!response.ok || !payload?.user) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                console.log('[Login]  Server login failed:', errorMessage);
                return false;
            }
            const userData = payload.user;
            console.log('[Login]  Server login successful for:', userData.name);
            const loaded = await loadUserData(userData.id);
            if (!loaded) {
                console.warn('[Login]  Using normalized login payload while Supabase details load');
                const fallbackUser = normalizeServerUser(userData);
                setCurrentUser(fallbackUser);
                setAllUsers((prev)=>{
                    const newMap = new Map(prev);
                    newMap.set(fallbackUser.id, fallbackUser);
                    if (fallbackUser.ablyClientId && fallbackUser.ablyClientId !== fallbackUser.id) {
                        newMap.set(fallbackUser.ablyClientId, fallbackUser);
                    }
                    return newMap;
                });
            }
            return true;
        } catch (error) {
            console.error('[Login] Error during login:', error);
            return false;
        }
    };
    const signup = async (name, email, password, birthdate)=>{
        try {
            const response = await fetch(`${API_BASE_URL}/auth/register`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
                },
                body: JSON.stringify({
                    name,
                    email,
                    password,
                    birthdate
                })
            });
            const payload = await response.json().catch(()=>null);
            if (!response.ok || !payload?.user) {
                const errorMessage = payload?.error ?? `status ${response.status}`;
                console.error('Registration failed:', errorMessage);
                return false;
            }
            const userData = payload.user;
            const settingsFromResponse = payload.settings;
            const loaded = await loadUserData(userData.id);
            if (!loaded) {
                const fallbackUser = {
                    ...normalizeServerUser(userData),
                    settings: mergeWithDefaultSettings(settingsFromResponse)
                };
                setCurrentUser(fallbackUser);
                setAllUsers((prev)=>{
                    const newMap = new Map(prev);
                    newMap.set(fallbackUser.id, fallbackUser);
                    if (fallbackUser.ablyClientId && fallbackUser.ablyClientId !== fallbackUser.id) {
                        newMap.set(fallbackUser.ablyClientId, fallbackUser);
                    }
                    return newMap;
                });
            }
            console.log('User registered successfully:', userData.email);
            return true;
        } catch (error) {
            console.error('Signup error:', error);
            return false;
        }
    };
    const logout = ()=>{
        setCurrentUser(null);
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(UserContext.Provider, {
        value: {
            currentUser,
            profileUser,
            profileUserId,
            allUsers,
            updateUser,
            updateSettings,
            changePassword,
            addPost,
            deletePost,
            likePost,
            sharePost,
            toggleSavePost,
            fetchComments,
            addComment,
            addFriend,
            removeFriend,
            blockUser,
            unblockUser,
            refreshAllUsers,
            getUserStats,
            getAchievements,
            login,
            signup,
            logout,
            loadUserData,
            loadProfileUser
        },
        children: children
    }, void 0, false, {
        fileName: "[project]/src/app/utils/userContext.tsx",
        lineNumber: 1811,
        columnNumber: 5
    }, this);
}
}),
"[project]/src/app/utils/shareUtils.ts [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "buildPostShareUrl",
    ()=>buildPostShareUrl,
    "buildShareMessage",
    ()=>buildShareMessage,
    "buildShareText",
    ()=>buildShareText
]);
'use client';
const FALLBACK_ORIGIN = 'https://movesplash.app';
const buildPostShareUrl = (postOwnerId, postId)=>{
    if (("TURBOPACK compile-time value", "undefined") !== 'undefined' && window.location?.origin) //TURBOPACK unreachable
    ;
    return `${FALLBACK_ORIGIN}/posts/${encodeURIComponent(postOwnerId)}/${encodeURIComponent(postId)}`;
};
const buildShareText = (authorName, postText)=>{
    const trimmed = postText?.trim();
    if (trimmed && trimmed.length > 0) {
        return trimmed.length > 280 ? `${trimmed.slice(0, 277)}` : trimmed;
    }
    return `Check out this MoveYSplash post from ${authorName}!`;
};
const buildShareMessage = (post)=>{
    const shareUrl = buildPostShareUrl(post.memberId, post.userpostId);
    const base = buildShareText(post.authorName, post.text);
    return `${post.authorName} on MoveYSplash:\n${base}\n\n${shareUrl}`;
};
}),
"[project]/src/app/utils/notifications.ts [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
  * Mohammed Vepari
  * ID: 5145543
  * Friday November 14th 2025
  */ /**
 * Cross-browser notification utility
 * Works with Safari, Chrome, Firefox, and other modern browsers
 */ __turbopack_context__.s([
    "getNotificationPermission",
    ()=>getNotificationPermission,
    "isNotificationSupported",
    ()=>isNotificationSupported,
    "notificationManager",
    ()=>notificationManager,
    "requestNotificationPermission",
    ()=>requestNotificationPermission,
    "showNotification",
    ()=>showNotification
]);
class NotificationManager {
    permission = 'default';
    supported = false;
    constructor(){
        const notificationAPI = this.getNotificationAPI();
        this.supported = Boolean(notificationAPI);
        if (notificationAPI) {
            this.permission = notificationAPI.permission;
        }
    }
    getNotificationAPI() {
        if ("TURBOPACK compile-time truthy", 1) {
            return undefined;
        }
        //TURBOPACK unreachable
        ;
    }
    /**
   * Check if notifications are supported
   */ isSupported() {
        return this.supported;
    }
    /**
   * Get current permission status
   */ getPermission() {
        return this.permission;
    }
    /**
   * Request notification permission
   * MUST be called from a user interaction (click, tap, etc.) for Safari
   */ async requestPermission() {
        if (!this.supported) {
            console.warn('Notifications are not supported in this browser');
            return 'denied';
        }
        const notificationAPI = this.getNotificationAPI();
        if (!notificationAPI) {
            console.warn('Notification API is not available');
            return 'denied';
        }
        try {
            // Safari requires the callback syntax in older versions
            if (notificationAPI.permission === 'default') {
                const permission = await new Promise((resolve)=>{
                    // Modern browsers (and newer Safari)
                    if (notificationAPI.requestPermission.length === 0) {
                        notificationAPI.requestPermission().then(resolve);
                    } else {
                        // Older Safari
                        notificationAPI.requestPermission(resolve);
                    }
                });
                this.permission = permission;
                return permission;
            }
            this.permission = notificationAPI.permission;
            return notificationAPI.permission;
        } catch (error) {
            console.error('Error requesting notification permission:', error);
            return 'denied';
        }
    }
    /**
   * Show a notification
   * Will automatically request permission if needed (must be called from user interaction)
   */ async show(options) {
        if (!this.supported) {
            console.warn('Notifications are not supported');
            return null;
        }
        const notificationAPI = this.getNotificationAPI();
        if (!notificationAPI) {
            console.warn('Notification API is not available');
            return null;
        }
        // Request permission if not granted
        if (this.permission !== 'granted') {
            const permission = await this.requestPermission();
            if (permission !== 'granted') {
                console.warn('Notification permission denied');
                return null;
            }
        }
        try {
            const notification = new notificationAPI(options.title, {
                body: options.body,
                icon: options.icon || '/favicon.ico',
                tag: options.tag,
                requireInteraction: options.requireInteraction || false,
                // Safari-specific: ensure badge and silent are set
                badge: options.icon,
                silent: false
            });
            if (options.onClick) {
                notification.onclick = (event)=>{
                    event.preventDefault();
                    options.onClick?.();
                    notification.close();
                };
            }
            return notification;
        } catch (error) {
            console.error('Error showing notification:', error);
            return null;
        }
    }
    /**
   * Show a notification (simplified version)
   */ async showSimple(title, body, onClick) {
        return this.show({
            title,
            body,
            onClick
        });
    }
}
const notificationManager = new NotificationManager();
const requestNotificationPermission = ()=>notificationManager.requestPermission();
const showNotification = (options)=>notificationManager.show(options);
const isNotificationSupported = ()=>notificationManager.isSupported();
const getNotificationPermission = ()=>notificationManager.getPermission();
}),
"[project]/src/app/page.tsx [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>App
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$themes$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next-themes/dist/index.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/navigation.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$LandingPage$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/LandingPage.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$LoginPage$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/LoginPage.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$SignupPage$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/SignupPage.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Navigation$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/Navigation.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$MainFeed$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/MainFeed.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ChatInterface$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ChatInterface.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$VideoChat$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/VideoChat.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$FriendsList$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/FriendsList.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Stories$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/Stories.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Settings$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/Settings.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Profile$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/Profile.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$HelpCenter$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/HelpCenter.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$PrivacyPolicy$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/PrivacyPolicy.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$TermsOfUse$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/TermsOfUse.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$AboutUs$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/AboutUs.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$CookiePolicy$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/CookiePolicy.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$FeaturePages$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/FeaturePages.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/sonner.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sonner/dist/index.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$userContext$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/utils/userContext.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$utils$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/utils.ts [app-ssr] (ecmascript)");
'use client';
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const LOGIN_BASE = '/login';
const DEFAULT_VIEW = 'feed';
const viewPathSegments = {
    feed: 'feed',
    messages: 'messages',
    video: 'videochat',
    friends: 'friendsList',
    stories: 'stories',
    settings: 'settings',
    profile: 'profile',
    help: 'help',
    privacy: 'privacy',
    terms: 'terms'
};
const pathSegmentToView = Object.entries(viewPathSegments).reduce((acc, [view, segment])=>{
    acc[segment.toLowerCase()] = view;
    return acc;
}, {});
const featurePathSegments = {
    'group-chats': 'messaging',
    'video-calls': 'videochat',
    'screen-share': 'screenshare',
    stories: 'stories',
    friends: 'friends',
    'gen-z': 'genz'
};
const pathSegmentToFeature = Object.entries(featurePathSegments).reduce((acc, [feature, segment])=>{
    acc[segment.toLowerCase()] = feature;
    return acc;
}, {});
const staticLandingRoutes = {
    help: 'help',
    privacy: 'privacy',
    terms: 'terms',
    about: 'about',
    cookies: 'cookies',
    signup: 'signup'
};
const staticStatePaths = {
    landing: '/',
    signup: '/signup',
    help: '/help',
    privacy: '/privacy',
    terms: '/terms',
    about: '/about',
    cookies: '/cookies'
};
function deriveStateFromPath(pathname) {
    const segments = pathname.split('/').filter(Boolean);
    if (segments.length === 0) {
        return {
            state: 'landing',
            feature: null,
            view: DEFAULT_VIEW
        };
    }
    const [first, second] = segments.map((segment)=>segment.toLowerCase());
    if (first === 'login') {
        if (!second) {
            return {
                state: 'login',
                feature: null,
                view: DEFAULT_VIEW
            };
        }
        const matchedView = pathSegmentToView[second];
        if (matchedView) {
            return {
                state: 'app',
                feature: null,
                view: matchedView
            };
        }
        return {
            state: 'login',
            feature: null,
            view: DEFAULT_VIEW
        };
    }
    const staticState = staticLandingRoutes[first];
    if (staticState) {
        return {
            state: staticState,
            feature: null,
            view: DEFAULT_VIEW
        };
    }
    const matchedFeature = pathSegmentToFeature[first];
    if (matchedFeature) {
        return {
            state: 'feature',
            feature: matchedFeature,
            view: DEFAULT_VIEW
        };
    }
    return {
        state: 'landing',
        feature: null,
        view: DEFAULT_VIEW
    };
}
function pathForState(state, feature, view) {
    if (state === 'login') {
        return LOGIN_BASE;
    }
    if (state === 'app') {
        const segment = viewPathSegments[view] ?? viewPathSegments[DEFAULT_VIEW];
        return `${LOGIN_BASE}/${segment}`;
    }
    if (state === 'feature' && feature) {
        return `/${featurePathSegments[feature]}`;
    }
    return staticStatePaths[state] ?? '/';
}
function AppShell() {
    const { login, signup, logout, currentUser, loadProfileUser } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$userContext$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useUser"])();
    const router = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRouter"])();
    const pathname = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["usePathname"])() || '/';
    const derivedFromPath = deriveStateFromPath(pathname);
    const [appState, setAppState] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(derivedFromPath.state);
    const [currentView, setCurrentView] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(derivedFromPath.view);
    const [activeCall, setActiveCall] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [currentFeature, setCurrentFeature] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(derivedFromPath.feature);
    const [pendingShareDraft, setPendingShareDraft] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [pendingMessageTarget, setPendingMessageTarget] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [selectedProfileId, setSelectedProfileId] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [isProfileLoading, setIsProfileLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const { resolvedTheme } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$themes$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useTheme"])();
    const isLightTheme = resolvedTheme === 'light';
    const appContainerClass = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$utils$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cn"])('min-h-screen relative overflow-hidden transition-colors duration-500', isLightTheme ? 'bg-gradient-to-br from-rose-100 via-purple-100 to-sky-100 text-slate-900' : 'bg-gradient-to-br from-purple-900 via-pink-800 to-orange-700 text-white');
    const backgroundBlobs = isLightTheme ? [
        'absolute -top-40 -left-40 w-96 h-96 bg-gradient-to-r from-pink-200 to-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob',
        'absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-r from-amber-200 to-orange-200 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob animation-delay-2000',
        'absolute -bottom-40 left-20 w-96 h-96 bg-gradient-to-r from-sky-200 to-cyan-200 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob animation-delay-4000'
    ] : [
        'absolute -top-40 -left-40 w-96 h-96 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob',
        'absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000',
        'absolute -bottom-40 left-20 w-96 h-96 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000'
    ];
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const derived = deriveStateFromPath(pathname);
        if (derived.state === 'app') {
            setAppState('app');
            setCurrentView(derived.view);
            setCurrentFeature(null);
            return;
        }
        if (derived.state === 'feature') {
            setAppState('feature');
            setCurrentFeature(derived.feature);
            return;
        }
        setAppState(derived.state);
        setCurrentFeature(null);
    }, [
        pathname
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const targetPath = pathForState(appState, currentFeature, currentView);
        if (pathname !== targetPath) {
            router.replace(targetPath, {
                scroll: false
            });
        }
    }, [
        appState,
        currentFeature,
        currentView,
        pathname,
        router
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (!currentUser) {
            setSelectedProfileId(null);
            return;
        }
        setSelectedProfileId((prev)=>prev ? prev : currentUser.id);
    }, [
        currentUser
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        let cancelled = false;
        const run = async ()=>{
            if (selectedProfileId === null) {
                setIsProfileLoading(false);
                await loadProfileUser(null);
                return;
            }
            setIsProfileLoading(true);
            const success = await loadProfileUser(selectedProfileId);
            if (cancelled) {
                return;
            }
            setIsProfileLoading(false);
            if (!success) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"].error('Unable to load that profile right now.');
            }
        };
        void run();
        return ()=>{
            cancelled = true;
        };
    }, [
        selectedProfileId,
        loadProfileUser
    ]);
    const handleLogin = async (email, password)=>{
        const success = await login(email, password);
        if (success) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"].success('Welcome back! ');
            setSelectedProfileId(null);
            setAppState('app');
            setCurrentView('feed');
        } else {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"].error('Invalid email or password');
        }
    };
    const handleSignup = async (name, email, password, birthdate)=>{
        const success = await signup(name, email, password, birthdate);
        if (success) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"].success(`Welcome to MoveSplash, ${name}! `);
            setSelectedProfileId(null);
            setAppState('app');
            setCurrentView('feed');
        } else {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"].error('Email already in use');
        }
    };
    const handleLogout = ()=>{
        logout();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"].success('See you later! ');
        setSelectedProfileId(null);
        setPendingMessageTarget(null);
        setIsProfileLoading(false);
        setAppState('landing');
    };
    const handleNavigate = (view)=>{
        if (view === 'profile') {
            setSelectedProfileId(currentUser ? currentUser.id : null);
        }
        setCurrentView(view);
        setActiveCall(null); // Clear active call when navigating
    };
    const handleStartCall = (type)=>{
        setActiveCall(type);
        setCurrentView('video');
    };
    const handleEndCall = ()=>{
        setActiveCall(null);
        setCurrentView('messages'); // Return to messages after call ends
    };
    const handleOpenSettings = ()=>{
        setCurrentView('settings');
        setActiveCall(null);
    };
    const handleOpenHelpCenterInApp = ()=>{
        setActiveCall(null);
        setCurrentView('help');
    };
    const handleOpenPrivacyPolicyInApp = ()=>{
        setActiveCall(null);
        setCurrentView('privacy');
    };
    const handleOpenTermsInApp = ()=>{
        setActiveCall(null);
        setCurrentView('terms');
    };
    const handleCloseSettings = ()=>{
        setCurrentView('feed');
    };
    const handleShareToMessages = (payload)=>{
        setPendingShareDraft(payload);
        setCurrentView('messages');
    };
    const handleOpenMessagesForUser = (userId)=>{
        setPendingMessageTarget(userId);
        setCurrentView('messages');
    };
    const handleOpenProfile = (userId)=>{
        setSelectedProfileId(userId);
        setCurrentView('profile');
    };
    const handleProfileBack = ()=>{
        if (currentUser) {
            setSelectedProfileId(currentUser.id);
        }
        setCurrentView('friends');
    };
    const handleOpenLoginFlow = ()=>{
        setCurrentFeature(null);
        setAppState('login');
    };
    const handleOpenFeature = (feature)=>{
        setCurrentFeature(feature);
        setAppState('feature');
    };
    const handleCloseFeature = ()=>{
        setCurrentFeature(null);
        setAppState('landing');
    };
    // Render different states
    if (appState === 'help') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$HelpCenter$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["HelpCenter"], {
                    onBack: ()=>setAppState('landing')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 362,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 363,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'privacy') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$PrivacyPolicy$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PrivacyPolicy"], {
                    onBack: ()=>setAppState('landing')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 371,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 372,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'terms') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$TermsOfUse$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["TermsOfUse"], {
                    onBack: ()=>setAppState('landing')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 380,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 381,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'about') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$AboutUs$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["AboutUs"], {
                    onBack: ()=>setAppState('landing')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 389,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 390,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'cookies') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$CookiePolicy$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["CookiePolicy"], {
                    onBack: ()=>setAppState('landing')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 398,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 399,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'feature' && currentFeature) {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$FeaturePages$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["FeaturePages"], {
                    feature: currentFeature,
                    onBack: handleCloseFeature,
                    onGetStarted: ()=>setAppState('signup')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 407,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 412,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'landing') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$LandingPage$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["LandingPage"], {
                    onGetStarted: ()=>setAppState('signup'),
                    onLogin: handleOpenLoginFlow,
                    onViewFeature: handleOpenFeature,
                    onViewHelp: ()=>setAppState('help'),
                    onViewPrivacy: ()=>setAppState('privacy'),
                    onViewTerms: ()=>setAppState('terms'),
                    onViewAbout: ()=>setAppState('about'),
                    onViewCookies: ()=>setAppState('cookies')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 420,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 430,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'login') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$LoginPage$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["LoginPage"], {
                    onLogin: handleLogin,
                    onBack: ()=>setAppState('landing'),
                    onSignup: ()=>setAppState('signup')
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 438,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 443,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    if (appState === 'signup') {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$SignupPage$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SignupPage"], {
                    onSignup: handleSignup,
                    onBack: ()=>setAppState('landing'),
                    onLogin: handleOpenLoginFlow
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 451,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                    position: "top-center"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 456,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true);
    }
    // Main App View
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: appContainerClass,
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "fixed inset-0 overflow-hidden pointer-events-none",
                children: backgroundBlobs.map((className, index)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: className
                    }, index, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 467,
                        columnNumber: 11
                    }, this))
            }, void 0, false, {
                fileName: "[project]/src/app/page.tsx",
                lineNumber: 465,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Navigation$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Navigation"], {
                currentView: currentView,
                onNavigate: handleNavigate,
                onLogout: handleLogout,
                onOpenSettings: handleOpenSettings
            }, void 0, false, {
                fileName: "[project]/src/app/page.tsx",
                lineNumber: 472,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("main", {
                className: "relative z-10 p-6",
                children: [
                    currentView === 'feed' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "space-y-6",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Stories$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Stories"], {}, void 0, false, {
                                fileName: "[project]/src/app/page.tsx",
                                lineNumber: 483,
                                columnNumber: 13
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$MainFeed$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["MainFeed"], {
                                onShareToMessages: handleShareToMessages
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.tsx",
                                lineNumber: 484,
                                columnNumber: 13
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 482,
                        columnNumber: 11
                    }, this),
                    currentView === 'messages' && !activeCall && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ChatInterface$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ChatInterface"], {
                        onStartCall: handleStartCall,
                        shareDraft: pendingShareDraft?.message ?? null,
                        onShareDraftConsumed: ()=>setPendingShareDraft(null),
                        focusUserId: pendingMessageTarget,
                        onFocusUserConsumed: ()=>setPendingMessageTarget(null)
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 488,
                        columnNumber: 11
                    }, this),
                    (currentView === 'video' || activeCall) && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$VideoChat$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["VideoChat"], {
                        callType: activeCall || 'video',
                        onEndCall: handleEndCall
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 497,
                        columnNumber: 11
                    }, this),
                    currentView === 'friends' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$FriendsList$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["FriendsList"], {
                        onOpenProfile: handleOpenProfile,
                        onOpenMessage: handleOpenMessagesForUser
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 503,
                        columnNumber: 11
                    }, this),
                    currentView === 'stories' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Stories$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Stories"], {}, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 508,
                        columnNumber: 39
                    }, this),
                    currentView === 'settings' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Settings$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Settings"], {
                        onClose: handleCloseSettings,
                        onLogout: handleLogout,
                        onOpenHelpCenter: handleOpenHelpCenterInApp,
                        onOpenPrivacyPolicy: handleOpenPrivacyPolicyInApp,
                        onOpenTermsOfService: handleOpenTermsInApp
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 510,
                        columnNumber: 11
                    }, this),
                    currentView === 'help' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$HelpCenter$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["HelpCenter"], {
                        onBack: ()=>setCurrentView('settings')
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 519,
                        columnNumber: 11
                    }, this),
                    currentView === 'privacy' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$PrivacyPolicy$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PrivacyPolicy"], {
                        onBack: ()=>setCurrentView('settings')
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 522,
                        columnNumber: 11
                    }, this),
                    currentView === 'terms' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$TermsOfUse$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["TermsOfUse"], {
                        onBack: ()=>setCurrentView('settings')
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 525,
                        columnNumber: 11
                    }, this),
                    currentView === 'profile' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$Profile$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Profile"], {
                        onShareToMessages: handleShareToMessages,
                        profileUserId: selectedProfileId,
                        isLoading: isProfileLoading,
                        onBackToFriends: handleProfileBack
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 528,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/app/page.tsx",
                lineNumber: 480,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$sonner$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Toaster"], {
                position: "top-center"
            }, void 0, false, {
                fileName: "[project]/src/app/page.tsx",
                lineNumber: 537,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("style", {
                children: `
        @keyframes blob {
          0% { transform: translate(0px, 0px) scale(1); }
          33% { transform: translate(30px, -50px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
          100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `
            }, void 0, false, {
                fileName: "[project]/src/app/page.tsx",
                lineNumber: 539,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/app/page.tsx",
        lineNumber: 463,
        columnNumber: 5
    }, this);
}
function App() {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$userContext$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["UserProvider"], {
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(AppShell, {}, void 0, false, {
            fileName: "[project]/src/app/page.tsx",
            lineNumber: 563,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/app/page.tsx",
        lineNumber: 562,
        columnNumber: 5
    }, this);
}
}),
];

//# sourceMappingURL=src_app_0c05cfe7._.js.map