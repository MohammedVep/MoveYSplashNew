{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/clsx/dist/clsx.mjs"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;"],"names":[],"mappings":";;;;;;AAAA,SAAS,EAAE,CAAC;IAAE,IAAI,GAAE,GAAE,IAAE;IAAG,IAAG,YAAU,OAAO,KAAG,YAAU,OAAO,GAAE,KAAG;SAAO,IAAG,YAAU,OAAO,GAAE,IAAG,MAAM,OAAO,CAAC,IAAG;QAAC,IAAI,IAAE,EAAE,MAAM;QAAC,IAAI,IAAE,GAAE,IAAE,GAAE,IAAI,CAAC,CAAC,EAAE,IAAE,CAAC,IAAE,EAAE,CAAC,CAAC,EAAE,CAAC,KAAG,CAAC,KAAG,CAAC,KAAG,GAAG,GAAE,KAAG,CAAC;IAAC,OAAM,IAAI,KAAK,EAAE,CAAC,CAAC,EAAE,IAAE,CAAC,KAAG,CAAC,KAAG,GAAG,GAAE,KAAG,CAAC;IAAE,OAAO;AAAC;AAAQ,SAAS;IAAO,IAAI,IAAI,GAAE,GAAE,IAAE,GAAE,IAAE,IAAG,IAAE,UAAU,MAAM,EAAC,IAAE,GAAE,IAAI,CAAC,IAAE,SAAS,CAAC,EAAE,KAAG,CAAC,IAAE,EAAE,EAAE,KAAG,CAAC,KAAG,CAAC,KAAG,GAAG,GAAE,KAAG,CAAC;IAAE,OAAO;AAAC;uCAAgB","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/class-variance-authority/dist/index.mjs"],"sourcesContent":["/**\n * Copyright 2022 Joe Bell. All rights reserved.\n *\n * This file is licensed to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with the\n * License. You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR REPRESENTATIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */ import { clsx } from \"clsx\";\nconst falsyToString = (value)=>typeof value === \"boolean\" ? `${value}` : value === 0 ? \"0\" : value;\nexport const cx = clsx;\nexport const cva = (base, config)=>(props)=>{\n        var _config_compoundVariants;\n        if ((config === null || config === void 0 ? void 0 : config.variants) == null) return cx(base, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n        const { variants, defaultVariants } = config;\n        const getVariantClassNames = Object.keys(variants).map((variant)=>{\n            const variantProp = props === null || props === void 0 ? void 0 : props[variant];\n            const defaultVariantProp = defaultVariants === null || defaultVariants === void 0 ? void 0 : defaultVariants[variant];\n            if (variantProp === null) return null;\n            const variantKey = falsyToString(variantProp) || falsyToString(defaultVariantProp);\n            return variants[variant][variantKey];\n        });\n        const propsWithoutUndefined = props && Object.entries(props).reduce((acc, param)=>{\n            let [key, value] = param;\n            if (value === undefined) {\n                return acc;\n            }\n            acc[key] = value;\n            return acc;\n        }, {});\n        const getCompoundVariantClassNames = config === null || config === void 0 ? void 0 : (_config_compoundVariants = config.compoundVariants) === null || _config_compoundVariants === void 0 ? void 0 : _config_compoundVariants.reduce((acc, param)=>{\n            let { class: cvClass, className: cvClassName, ...compoundVariantOptions } = param;\n            return Object.entries(compoundVariantOptions).every((param)=>{\n                let [key, value] = param;\n                return Array.isArray(value) ? value.includes({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                }[key]) : ({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                })[key] === value;\n            }) ? [\n                ...acc,\n                cvClass,\n                cvClassName\n            ] : acc;\n        }, []);\n        return cx(base, getVariantClassNames, getCompoundVariantClassNames, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n    };\n\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;CAcC;;;;;;AAAG;;AACJ,MAAM,gBAAgB,CAAC,QAAQ,OAAO,UAAU,YAAY,GAAG,OAAO,GAAG,UAAU,IAAI,MAAM;AACtF,MAAM,KAAK,gJAAI;AACf,MAAM,MAAM,CAAC,MAAM,SAAS,CAAC;QAC5B,IAAI;QACJ,IAAI,CAAC,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAG,MAAM,UAAU,QAAQ,UAAU,KAAK,IAAI,KAAK,IAAI,MAAM,KAAK,EAAE,UAAU,QAAQ,UAAU,KAAK,IAAI,KAAK,IAAI,MAAM,SAAS;QACvN,MAAM,EAAE,QAAQ,EAAE,eAAe,EAAE,GAAG;QACtC,MAAM,uBAAuB,OAAO,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpD,MAAM,cAAc,UAAU,QAAQ,UAAU,KAAK,IAAI,KAAK,IAAI,KAAK,CAAC,QAAQ;YAChF,MAAM,qBAAqB,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,KAAK,IAAI,eAAe,CAAC,QAAQ;YACrH,IAAI,gBAAgB,MAAM,OAAO;YACjC,MAAM,aAAa,cAAc,gBAAgB,cAAc;YAC/D,OAAO,QAAQ,CAAC,QAAQ,CAAC,WAAW;QACxC;QACA,MAAM,wBAAwB,SAAS,OAAO,OAAO,CAAC,OAAO,MAAM,CAAC,CAAC,KAAK;YACtE,IAAI,CAAC,KAAK,MAAM,GAAG;YACnB,IAAI,UAAU,WAAW;gBACrB,OAAO;YACX;YACA,GAAG,CAAC,IAAI,GAAG;YACX,OAAO;QACX,GAAG,CAAC;QACJ,MAAM,+BAA+B,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,CAAC,2BAA2B,OAAO,gBAAgB,MAAM,QAAQ,6BAA6B,KAAK,IAAI,KAAK,IAAI,yBAAyB,MAAM,CAAC,CAAC,KAAK;YACvO,IAAI,EAAE,OAAO,OAAO,EAAE,WAAW,WAAW,EAAE,GAAG,wBAAwB,GAAG;YAC5E,OAAO,OAAO,OAAO,CAAC,wBAAwB,KAAK,CAAC,CAAC;gBACjD,IAAI,CAAC,KAAK,MAAM,GAAG;gBACnB,OAAO,MAAM,OAAO,CAAC,SAAS,MAAM,QAAQ,CAAC;oBACzC,GAAG,eAAe;oBAClB,GAAG,qBAAqB;gBAC5B,CAAC,CAAC,IAAI,IAAI,CAAC;oBACP,GAAG,eAAe;oBAClB,GAAG,qBAAqB;gBAC5B,CAAC,CAAC,CAAC,IAAI,KAAK;YAChB,KAAK;mBACE;gBACH;gBACA;aACH,GAAG;QACR,GAAG,EAAE;QACL,OAAO,GAAG,MAAM,sBAAsB,8BAA8B,UAAU,QAAQ,UAAU,KAAK,IAAI,KAAK,IAAI,MAAM,KAAK,EAAE,UAAU,QAAQ,UAAU,KAAK,IAAI,KAAK,IAAI,MAAM,SAAS;IAChM","ignoreList":[0]}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js"],"sourcesContent":["/**\n * @license React\n * use-sync-external-store-shim.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    function useSyncExternalStore$2(subscribe, getSnapshot) {\n      didWarnOld18Alpha ||\n        void 0 === React.startTransition ||\n        ((didWarnOld18Alpha = !0),\n        console.error(\n          \"You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release.\"\n        ));\n      var value = getSnapshot();\n      if (!didWarnUncachedGetSnapshot) {\n        var cachedValue = getSnapshot();\n        objectIs(value, cachedValue) ||\n          (console.error(\n            \"The result of getSnapshot should be cached to avoid an infinite loop\"\n          ),\n          (didWarnUncachedGetSnapshot = !0));\n      }\n      cachedValue = useState({\n        inst: { value: value, getSnapshot: getSnapshot }\n      });\n      var inst = cachedValue[0].inst,\n        forceUpdate = cachedValue[1];\n      useLayoutEffect(\n        function () {\n          inst.value = value;\n          inst.getSnapshot = getSnapshot;\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n        },\n        [subscribe, value, getSnapshot]\n      );\n      useEffect(\n        function () {\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          return subscribe(function () {\n            checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          });\n        },\n        [subscribe]\n      );\n      useDebugValue(value);\n      return value;\n    }\n    function checkIfSnapshotChanged(inst) {\n      var latestGetSnapshot = inst.getSnapshot;\n      inst = inst.value;\n      try {\n        var nextValue = latestGetSnapshot();\n        return !objectIs(inst, nextValue);\n      } catch (error) {\n        return !0;\n      }\n    }\n    function useSyncExternalStore$1(subscribe, getSnapshot) {\n      return getSnapshot();\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useState = React.useState,\n      useEffect = React.useEffect,\n      useLayoutEffect = React.useLayoutEffect,\n      useDebugValue = React.useDebugValue,\n      didWarnOld18Alpha = !1,\n      didWarnUncachedGetSnapshot = !1,\n      shim =\n        \"undefined\" === typeof window ||\n        \"undefined\" === typeof window.document ||\n        \"undefined\" === typeof window.document.createElement\n          ? useSyncExternalStore$1\n          : useSyncExternalStore$2;\n    exports.useSyncExternalStore =\n      void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GAGgB;AADjB;AACA,oEACE,AAAC;IACC,SAAS,GAAG,CAAC,EAAE,CAAC;QACd,OAAO,AAAC,MAAM,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM,IAAI,CAAC,KAAO,MAAM,KAAK,MAAM;IACxE;IACA,SAAS,uBAAuB,SAAS,EAAE,WAAW;QACpD,qBACE,KAAK,MAAM,MAAM,eAAe,IAChC,CAAC,AAAC,oBAAoB,CAAC,GACvB,QAAQ,KAAK,CACX,iMACD;QACH,IAAI,QAAQ;QACZ,IAAI,CAAC,4BAA4B;YAC/B,IAAI,cAAc;YAClB,SAAS,OAAO,gBACd,CAAC,QAAQ,KAAK,CACZ,yEAED,6BAA6B,CAAC,CAAE;QACrC;QACA,cAAc,SAAS;YACrB,MAAM;gBAAE,OAAO;gBAAO,aAAa;YAAY;QACjD;QACA,IAAI,OAAO,WAAW,CAAC,EAAE,CAAC,IAAI,EAC5B,cAAc,WAAW,CAAC,EAAE;QAC9B;sDACE;gBACE,KAAK,KAAK,GAAG;gBACb,KAAK,WAAW,GAAG;gBACnB,uBAAuB,SAAS,YAAY;oBAAE,MAAM;gBAAK;YAC3D;qDACA;YAAC;YAAW;YAAO;SAAY;QAEjC;gDACE;gBACE,uBAAuB,SAAS,YAAY;oBAAE,MAAM;gBAAK;gBACzD,OAAO;wDAAU;wBACf,uBAAuB,SAAS,YAAY;4BAAE,MAAM;wBAAK;oBAC3D;;YACF;+CACA;YAAC;SAAU;QAEb,cAAc;QACd,OAAO;IACT;IACA,SAAS,uBAAuB,IAAI;QAClC,IAAI,oBAAoB,KAAK,WAAW;QACxC,OAAO,KAAK,KAAK;QACjB,IAAI;YACF,IAAI,YAAY;YAChB,OAAO,CAAC,SAAS,MAAM;QACzB,EAAE,OAAO,OAAO;YACd,OAAO,CAAC;QACV;IACF;IACA,SAAS,uBAAuB,SAAS,EAAE,WAAW;QACpD,OAAO;IACT;IACA,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,2BAA2B,IACnE,+BAA+B,2BAA2B,CAAC;IAC7D,IAAI,uHACF,WAAW,eAAe,OAAO,OAAO,EAAE,GAAG,OAAO,EAAE,GAAG,IACzD,WAAW,MAAM,QAAQ,EACzB,YAAY,MAAM,SAAS,EAC3B,kBAAkB,MAAM,eAAe,EACvC,gBAAgB,MAAM,aAAa,EACnC,oBAAoB,CAAC,GACrB,6BAA6B,CAAC,GAC9B,OACE,gBAAgB,OAAO,UACvB,gBAAgB,OAAO,OAAO,QAAQ,IACtC,gBAAgB,OAAO,OAAO,QAAQ,CAAC,aAAa,GAChD,yBACA;IACR,QAAQ,oBAAoB,GAC1B,KAAK,MAAM,MAAM,oBAAoB,GAAG,MAAM,oBAAoB,GAAG;IACvE,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,0BAA0B,IAClE,+BAA+B,0BAA0B,CAAC;AAC9D","ignoreList":[0]}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/use-sync-external-store/shim/index.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n"],"names":[],"mappings":"AAEI;AAFJ;AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0]}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/sonner/dist/index.mjs"],"sourcesContent":["'use client';\nfunction __insertCSS(code) {\n  if (!code || typeof document == 'undefined') return\n  let head = document.head || document.getElementsByTagName('head')[0]\n  let style = document.createElement('style')\n  style.type = 'text/css'\n  head.appendChild(style)\n  ;style.styleSheet ? (style.styleSheet.cssText = code) : style.appendChild(document.createTextNode(code))\n}\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst getAsset = (type)=>{\n    switch(type){\n        case 'success':\n            return SuccessIcon;\n        case 'info':\n            return InfoIcon;\n        case 'warning':\n            return WarningIcon;\n        case 'error':\n            return ErrorIcon;\n        default:\n            return null;\n    }\n};\nconst bars = Array(12).fill(0);\nconst Loader = ({ visible, className })=>{\n    return /*#__PURE__*/ React.createElement(\"div\", {\n        className: [\n            'sonner-loading-wrapper',\n            className\n        ].filter(Boolean).join(' '),\n        \"data-visible\": visible\n    }, /*#__PURE__*/ React.createElement(\"div\", {\n        className: \"sonner-spinner\"\n    }, bars.map((_, i)=>/*#__PURE__*/ React.createElement(\"div\", {\n            className: \"sonner-loading-bar\",\n            key: `spinner-bar-${i}`\n        }))));\n};\nconst SuccessIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\",\n    clipRule: \"evenodd\"\n}));\nconst WarningIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z\",\n    clipRule: \"evenodd\"\n}));\nconst InfoIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\",\n    clipRule: \"evenodd\"\n}));\nconst ErrorIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z\",\n    clipRule: \"evenodd\"\n}));\nconst CloseIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"12\",\n    height: \"12\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"1.5\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n}, /*#__PURE__*/ React.createElement(\"line\", {\n    x1: \"18\",\n    y1: \"6\",\n    x2: \"6\",\n    y2: \"18\"\n}), /*#__PURE__*/ React.createElement(\"line\", {\n    x1: \"6\",\n    y1: \"6\",\n    x2: \"18\",\n    y2: \"18\"\n}));\n\nconst useIsDocumentHidden = ()=>{\n    const [isDocumentHidden, setIsDocumentHidden] = React.useState(document.hidden);\n    React.useEffect(()=>{\n        const callback = ()=>{\n            setIsDocumentHidden(document.hidden);\n        };\n        document.addEventListener('visibilitychange', callback);\n        return ()=>window.removeEventListener('visibilitychange', callback);\n    }, []);\n    return isDocumentHidden;\n};\n\nlet toastsCounter = 1;\nclass Observer {\n    constructor(){\n        // We use arrow functions to maintain the correct `this` reference\n        this.subscribe = (subscriber)=>{\n            this.subscribers.push(subscriber);\n            return ()=>{\n                const index = this.subscribers.indexOf(subscriber);\n                this.subscribers.splice(index, 1);\n            };\n        };\n        this.publish = (data)=>{\n            this.subscribers.forEach((subscriber)=>subscriber(data));\n        };\n        this.addToast = (data)=>{\n            this.publish(data);\n            this.toasts = [\n                ...this.toasts,\n                data\n            ];\n        };\n        this.create = (data)=>{\n            var _data_id;\n            const { message, ...rest } = data;\n            const id = typeof (data == null ? void 0 : data.id) === 'number' || ((_data_id = data.id) == null ? void 0 : _data_id.length) > 0 ? data.id : toastsCounter++;\n            const alreadyExists = this.toasts.find((toast)=>{\n                return toast.id === id;\n            });\n            const dismissible = data.dismissible === undefined ? true : data.dismissible;\n            if (this.dismissedToasts.has(id)) {\n                this.dismissedToasts.delete(id);\n            }\n            if (alreadyExists) {\n                this.toasts = this.toasts.map((toast)=>{\n                    if (toast.id === id) {\n                        this.publish({\n                            ...toast,\n                            ...data,\n                            id,\n                            title: message\n                        });\n                        return {\n                            ...toast,\n                            ...data,\n                            id,\n                            dismissible,\n                            title: message\n                        };\n                    }\n                    return toast;\n                });\n            } else {\n                this.addToast({\n                    title: message,\n                    ...rest,\n                    dismissible,\n                    id\n                });\n            }\n            return id;\n        };\n        this.dismiss = (id)=>{\n            if (id) {\n                this.dismissedToasts.add(id);\n                requestAnimationFrame(()=>this.subscribers.forEach((subscriber)=>subscriber({\n                            id,\n                            dismiss: true\n                        })));\n            } else {\n                this.toasts.forEach((toast)=>{\n                    this.subscribers.forEach((subscriber)=>subscriber({\n                            id: toast.id,\n                            dismiss: true\n                        }));\n                });\n            }\n            return id;\n        };\n        this.message = (message, data)=>{\n            return this.create({\n                ...data,\n                message\n            });\n        };\n        this.error = (message, data)=>{\n            return this.create({\n                ...data,\n                message,\n                type: 'error'\n            });\n        };\n        this.success = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'success',\n                message\n            });\n        };\n        this.info = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'info',\n                message\n            });\n        };\n        this.warning = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'warning',\n                message\n            });\n        };\n        this.loading = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'loading',\n                message\n            });\n        };\n        this.promise = (promise, data)=>{\n            if (!data) {\n                // Nothing to show\n                return;\n            }\n            let id = undefined;\n            if (data.loading !== undefined) {\n                id = this.create({\n                    ...data,\n                    promise,\n                    type: 'loading',\n                    message: data.loading,\n                    description: typeof data.description !== 'function' ? data.description : undefined\n                });\n            }\n            const p = Promise.resolve(promise instanceof Function ? promise() : promise);\n            let shouldDismiss = id !== undefined;\n            let result;\n            const originalPromise = p.then(async (response)=>{\n                result = [\n                    'resolve',\n                    response\n                ];\n                const isReactElementResponse = React.isValidElement(response);\n                if (isReactElementResponse) {\n                    shouldDismiss = false;\n                    this.create({\n                        id,\n                        type: 'default',\n                        message: response\n                    });\n                } else if (isHttpResponse(response) && !response.ok) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(`HTTP error! status: ${response.status}`) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(`HTTP error! status: ${response.status}`) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                } else if (response instanceof Error) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(response) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(response) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                } else if (data.success !== undefined) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.success === 'function' ? await data.success(response) : data.success;\n                    const description = typeof data.description === 'function' ? await data.description(response) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'success',\n                        description,\n                        ...toastSettings\n                    });\n                }\n            }).catch(async (error)=>{\n                result = [\n                    'reject',\n                    error\n                ];\n                if (data.error !== undefined) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(error) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(error) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                }\n            }).finally(()=>{\n                if (shouldDismiss) {\n                    // Toast is still in load state (and will be indefinitely â€” dismiss it)\n                    this.dismiss(id);\n                    id = undefined;\n                }\n                data.finally == null ? void 0 : data.finally.call(data);\n            });\n            const unwrap = ()=>new Promise((resolve, reject)=>originalPromise.then(()=>result[0] === 'reject' ? reject(result[1]) : resolve(result[1])).catch(reject));\n            if (typeof id !== 'string' && typeof id !== 'number') {\n                // cannot Object.assign on undefined\n                return {\n                    unwrap\n                };\n            } else {\n                return Object.assign(id, {\n                    unwrap\n                });\n            }\n        };\n        this.custom = (jsx, data)=>{\n            const id = (data == null ? void 0 : data.id) || toastsCounter++;\n            this.create({\n                jsx: jsx(id),\n                id,\n                ...data\n            });\n            return id;\n        };\n        this.getActiveToasts = ()=>{\n            return this.toasts.filter((toast)=>!this.dismissedToasts.has(toast.id));\n        };\n        this.subscribers = [];\n        this.toasts = [];\n        this.dismissedToasts = new Set();\n    }\n}\nconst ToastState = new Observer();\n// bind this to the toast function\nconst toastFunction = (message, data)=>{\n    const id = (data == null ? void 0 : data.id) || toastsCounter++;\n    ToastState.addToast({\n        title: message,\n        ...data,\n        id\n    });\n    return id;\n};\nconst isHttpResponse = (data)=>{\n    return data && typeof data === 'object' && 'ok' in data && typeof data.ok === 'boolean' && 'status' in data && typeof data.status === 'number';\n};\nconst basicToast = toastFunction;\nconst getHistory = ()=>ToastState.toasts;\nconst getToasts = ()=>ToastState.getActiveToasts();\n// We use `Object.assign` to maintain the correct types as we would lose them otherwise\nconst toast = Object.assign(basicToast, {\n    success: ToastState.success,\n    info: ToastState.info,\n    warning: ToastState.warning,\n    error: ToastState.error,\n    custom: ToastState.custom,\n    message: ToastState.message,\n    promise: ToastState.promise,\n    dismiss: ToastState.dismiss,\n    loading: ToastState.loading\n}, {\n    getHistory,\n    getToasts\n});\n\n__insertCSS(\"[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\");\n\nfunction isAction(action) {\n    return action.label !== undefined;\n}\n\n// Visible toasts amount\nconst VISIBLE_TOASTS_AMOUNT = 3;\n// Viewport padding\nconst VIEWPORT_OFFSET = '24px';\n// Mobile viewport padding\nconst MOBILE_VIEWPORT_OFFSET = '16px';\n// Default lifetime of a toasts (in ms)\nconst TOAST_LIFETIME = 4000;\n// Default toast width\nconst TOAST_WIDTH = 356;\n// Default gap between toasts\nconst GAP = 14;\n// Threshold to dismiss a toast\nconst SWIPE_THRESHOLD = 45;\n// Equal to exit animation duration\nconst TIME_BEFORE_UNMOUNT = 200;\nfunction cn(...classes) {\n    return classes.filter(Boolean).join(' ');\n}\nfunction getDefaultSwipeDirections(position) {\n    const [y, x] = position.split('-');\n    const directions = [];\n    if (y) {\n        directions.push(y);\n    }\n    if (x) {\n        directions.push(x);\n    }\n    return directions;\n}\nconst Toast = (props)=>{\n    var _toast_classNames, _toast_classNames1, _toast_classNames2, _toast_classNames3, _toast_classNames4, _toast_classNames5, _toast_classNames6, _toast_classNames7, _toast_classNames8;\n    const { invert: ToasterInvert, toast, unstyled, interacting, setHeights, visibleToasts, heights, index, toasts, expanded, removeToast, defaultRichColors, closeButton: closeButtonFromToaster, style, cancelButtonStyle, actionButtonStyle, className = '', descriptionClassName = '', duration: durationFromToaster, position, gap, expandByDefault, classNames, icons, closeButtonAriaLabel = 'Close toast' } = props;\n    const [swipeDirection, setSwipeDirection] = React.useState(null);\n    const [swipeOutDirection, setSwipeOutDirection] = React.useState(null);\n    const [mounted, setMounted] = React.useState(false);\n    const [removed, setRemoved] = React.useState(false);\n    const [swiping, setSwiping] = React.useState(false);\n    const [swipeOut, setSwipeOut] = React.useState(false);\n    const [isSwiped, setIsSwiped] = React.useState(false);\n    const [offsetBeforeRemove, setOffsetBeforeRemove] = React.useState(0);\n    const [initialHeight, setInitialHeight] = React.useState(0);\n    const remainingTime = React.useRef(toast.duration || durationFromToaster || TOAST_LIFETIME);\n    const dragStartTime = React.useRef(null);\n    const toastRef = React.useRef(null);\n    const isFront = index === 0;\n    const isVisible = index + 1 <= visibleToasts;\n    const toastType = toast.type;\n    const dismissible = toast.dismissible !== false;\n    const toastClassname = toast.className || '';\n    const toastDescriptionClassname = toast.descriptionClassName || '';\n    // Height index is used to calculate the offset as it gets updated before the toast array, which means we can calculate the new layout faster.\n    const heightIndex = React.useMemo(()=>heights.findIndex((height)=>height.toastId === toast.id) || 0, [\n        heights,\n        toast.id\n    ]);\n    const closeButton = React.useMemo(()=>{\n        var _toast_closeButton;\n        return (_toast_closeButton = toast.closeButton) != null ? _toast_closeButton : closeButtonFromToaster;\n    }, [\n        toast.closeButton,\n        closeButtonFromToaster\n    ]);\n    const duration = React.useMemo(()=>toast.duration || durationFromToaster || TOAST_LIFETIME, [\n        toast.duration,\n        durationFromToaster\n    ]);\n    const closeTimerStartTimeRef = React.useRef(0);\n    const offset = React.useRef(0);\n    const lastCloseTimerStartTimeRef = React.useRef(0);\n    const pointerStartRef = React.useRef(null);\n    const [y, x] = position.split('-');\n    const toastsHeightBefore = React.useMemo(()=>{\n        return heights.reduce((prev, curr, reducerIndex)=>{\n            // Calculate offset up until current toast\n            if (reducerIndex >= heightIndex) {\n                return prev;\n            }\n            return prev + curr.height;\n        }, 0);\n    }, [\n        heights,\n        heightIndex\n    ]);\n    const isDocumentHidden = useIsDocumentHidden();\n    const invert = toast.invert || ToasterInvert;\n    const disabled = toastType === 'loading';\n    offset.current = React.useMemo(()=>heightIndex * gap + toastsHeightBefore, [\n        heightIndex,\n        toastsHeightBefore\n    ]);\n    React.useEffect(()=>{\n        remainingTime.current = duration;\n    }, [\n        duration\n    ]);\n    React.useEffect(()=>{\n        // Trigger enter animation without using CSS animation\n        setMounted(true);\n    }, []);\n    React.useEffect(()=>{\n        const toastNode = toastRef.current;\n        if (toastNode) {\n            const height = toastNode.getBoundingClientRect().height;\n            // Add toast height to heights array after the toast is mounted\n            setInitialHeight(height);\n            setHeights((h)=>[\n                    {\n                        toastId: toast.id,\n                        height,\n                        position: toast.position\n                    },\n                    ...h\n                ]);\n            return ()=>setHeights((h)=>h.filter((height)=>height.toastId !== toast.id));\n        }\n    }, [\n        setHeights,\n        toast.id\n    ]);\n    React.useLayoutEffect(()=>{\n        // Keep height up to date with the content in case it updates\n        if (!mounted) return;\n        const toastNode = toastRef.current;\n        const originalHeight = toastNode.style.height;\n        toastNode.style.height = 'auto';\n        const newHeight = toastNode.getBoundingClientRect().height;\n        toastNode.style.height = originalHeight;\n        setInitialHeight(newHeight);\n        setHeights((heights)=>{\n            const alreadyExists = heights.find((height)=>height.toastId === toast.id);\n            if (!alreadyExists) {\n                return [\n                    {\n                        toastId: toast.id,\n                        height: newHeight,\n                        position: toast.position\n                    },\n                    ...heights\n                ];\n            } else {\n                return heights.map((height)=>height.toastId === toast.id ? {\n                        ...height,\n                        height: newHeight\n                    } : height);\n            }\n        });\n    }, [\n        mounted,\n        toast.title,\n        toast.description,\n        setHeights,\n        toast.id,\n        toast.jsx,\n        toast.action,\n        toast.cancel\n    ]);\n    const deleteToast = React.useCallback(()=>{\n        // Save the offset for the exit swipe animation\n        setRemoved(true);\n        setOffsetBeforeRemove(offset.current);\n        setHeights((h)=>h.filter((height)=>height.toastId !== toast.id));\n        setTimeout(()=>{\n            removeToast(toast);\n        }, TIME_BEFORE_UNMOUNT);\n    }, [\n        toast,\n        removeToast,\n        setHeights,\n        offset\n    ]);\n    React.useEffect(()=>{\n        if (toast.promise && toastType === 'loading' || toast.duration === Infinity || toast.type === 'loading') return;\n        let timeoutId;\n        // Pause the timer on each hover\n        const pauseTimer = ()=>{\n            if (lastCloseTimerStartTimeRef.current < closeTimerStartTimeRef.current) {\n                // Get the elapsed time since the timer started\n                const elapsedTime = new Date().getTime() - closeTimerStartTimeRef.current;\n                remainingTime.current = remainingTime.current - elapsedTime;\n            }\n            lastCloseTimerStartTimeRef.current = new Date().getTime();\n        };\n        const startTimer = ()=>{\n            // setTimeout(, Infinity) behaves as if the delay is 0.\n            // As a result, the toast would be closed immediately, giving the appearance that it was never rendered.\n            // See: https://github.com/denysdovhan/wtfjs?tab=readme-ov-file#an-infinite-timeout\n            if (remainingTime.current === Infinity) return;\n            closeTimerStartTimeRef.current = new Date().getTime();\n            // Let the toast know it has started\n            timeoutId = setTimeout(()=>{\n                toast.onAutoClose == null ? void 0 : toast.onAutoClose.call(toast, toast);\n                deleteToast();\n            }, remainingTime.current);\n        };\n        if (expanded || interacting || isDocumentHidden) {\n            pauseTimer();\n        } else {\n            startTimer();\n        }\n        return ()=>clearTimeout(timeoutId);\n    }, [\n        expanded,\n        interacting,\n        toast,\n        toastType,\n        isDocumentHidden,\n        deleteToast\n    ]);\n    React.useEffect(()=>{\n        if (toast.delete) {\n            deleteToast();\n            toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n        }\n    }, [\n        deleteToast,\n        toast.delete\n    ]);\n    function getLoadingIcon() {\n        var _toast_classNames;\n        if (icons == null ? void 0 : icons.loading) {\n            var _toast_classNames1;\n            return /*#__PURE__*/ React.createElement(\"div\", {\n                className: cn(classNames == null ? void 0 : classNames.loader, toast == null ? void 0 : (_toast_classNames1 = toast.classNames) == null ? void 0 : _toast_classNames1.loader, 'sonner-loader'),\n                \"data-visible\": toastType === 'loading'\n            }, icons.loading);\n        }\n        return /*#__PURE__*/ React.createElement(Loader, {\n            className: cn(classNames == null ? void 0 : classNames.loader, toast == null ? void 0 : (_toast_classNames = toast.classNames) == null ? void 0 : _toast_classNames.loader),\n            visible: toastType === 'loading'\n        });\n    }\n    const icon = toast.icon || (icons == null ? void 0 : icons[toastType]) || getAsset(toastType);\n    var _toast_richColors, _icons_close;\n    return /*#__PURE__*/ React.createElement(\"li\", {\n        tabIndex: 0,\n        ref: toastRef,\n        className: cn(className, toastClassname, classNames == null ? void 0 : classNames.toast, toast == null ? void 0 : (_toast_classNames = toast.classNames) == null ? void 0 : _toast_classNames.toast, classNames == null ? void 0 : classNames.default, classNames == null ? void 0 : classNames[toastType], toast == null ? void 0 : (_toast_classNames1 = toast.classNames) == null ? void 0 : _toast_classNames1[toastType]),\n        \"data-sonner-toast\": \"\",\n        \"data-rich-colors\": (_toast_richColors = toast.richColors) != null ? _toast_richColors : defaultRichColors,\n        \"data-styled\": !Boolean(toast.jsx || toast.unstyled || unstyled),\n        \"data-mounted\": mounted,\n        \"data-promise\": Boolean(toast.promise),\n        \"data-swiped\": isSwiped,\n        \"data-removed\": removed,\n        \"data-visible\": isVisible,\n        \"data-y-position\": y,\n        \"data-x-position\": x,\n        \"data-index\": index,\n        \"data-front\": isFront,\n        \"data-swiping\": swiping,\n        \"data-dismissible\": dismissible,\n        \"data-type\": toastType,\n        \"data-invert\": invert,\n        \"data-swipe-out\": swipeOut,\n        \"data-swipe-direction\": swipeOutDirection,\n        \"data-expanded\": Boolean(expanded || expandByDefault && mounted),\n        \"data-testid\": toast.testId,\n        style: {\n            '--index': index,\n            '--toasts-before': index,\n            '--z-index': toasts.length - index,\n            '--offset': `${removed ? offsetBeforeRemove : offset.current}px`,\n            '--initial-height': expandByDefault ? 'auto' : `${initialHeight}px`,\n            ...style,\n            ...toast.style\n        },\n        onDragEnd: ()=>{\n            setSwiping(false);\n            setSwipeDirection(null);\n            pointerStartRef.current = null;\n        },\n        onPointerDown: (event)=>{\n            if (event.button === 2) return; // Return early on right click\n            if (disabled || !dismissible) return;\n            dragStartTime.current = new Date();\n            setOffsetBeforeRemove(offset.current);\n            // Ensure we maintain correct pointer capture even when going outside of the toast (e.g. when swiping)\n            event.target.setPointerCapture(event.pointerId);\n            if (event.target.tagName === 'BUTTON') return;\n            setSwiping(true);\n            pointerStartRef.current = {\n                x: event.clientX,\n                y: event.clientY\n            };\n        },\n        onPointerUp: ()=>{\n            var _toastRef_current, _toastRef_current1, _dragStartTime_current;\n            if (swipeOut || !dismissible) return;\n            pointerStartRef.current = null;\n            const swipeAmountX = Number(((_toastRef_current = toastRef.current) == null ? void 0 : _toastRef_current.style.getPropertyValue('--swipe-amount-x').replace('px', '')) || 0);\n            const swipeAmountY = Number(((_toastRef_current1 = toastRef.current) == null ? void 0 : _toastRef_current1.style.getPropertyValue('--swipe-amount-y').replace('px', '')) || 0);\n            const timeTaken = new Date().getTime() - ((_dragStartTime_current = dragStartTime.current) == null ? void 0 : _dragStartTime_current.getTime());\n            const swipeAmount = swipeDirection === 'x' ? swipeAmountX : swipeAmountY;\n            const velocity = Math.abs(swipeAmount) / timeTaken;\n            if (Math.abs(swipeAmount) >= SWIPE_THRESHOLD || velocity > 0.11) {\n                setOffsetBeforeRemove(offset.current);\n                toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n                if (swipeDirection === 'x') {\n                    setSwipeOutDirection(swipeAmountX > 0 ? 'right' : 'left');\n                } else {\n                    setSwipeOutDirection(swipeAmountY > 0 ? 'down' : 'up');\n                }\n                deleteToast();\n                setSwipeOut(true);\n                return;\n            } else {\n                var _toastRef_current2, _toastRef_current3;\n                (_toastRef_current2 = toastRef.current) == null ? void 0 : _toastRef_current2.style.setProperty('--swipe-amount-x', `0px`);\n                (_toastRef_current3 = toastRef.current) == null ? void 0 : _toastRef_current3.style.setProperty('--swipe-amount-y', `0px`);\n            }\n            setIsSwiped(false);\n            setSwiping(false);\n            setSwipeDirection(null);\n        },\n        onPointerMove: (event)=>{\n            var _window_getSelection, // Apply transform using both x and y values\n            _toastRef_current, _toastRef_current1;\n            if (!pointerStartRef.current || !dismissible) return;\n            const isHighlighted = ((_window_getSelection = window.getSelection()) == null ? void 0 : _window_getSelection.toString().length) > 0;\n            if (isHighlighted) return;\n            const yDelta = event.clientY - pointerStartRef.current.y;\n            const xDelta = event.clientX - pointerStartRef.current.x;\n            var _props_swipeDirections;\n            const swipeDirections = (_props_swipeDirections = props.swipeDirections) != null ? _props_swipeDirections : getDefaultSwipeDirections(position);\n            // Determine swipe direction if not already locked\n            if (!swipeDirection && (Math.abs(xDelta) > 1 || Math.abs(yDelta) > 1)) {\n                setSwipeDirection(Math.abs(xDelta) > Math.abs(yDelta) ? 'x' : 'y');\n            }\n            let swipeAmount = {\n                x: 0,\n                y: 0\n            };\n            const getDampening = (delta)=>{\n                const factor = Math.abs(delta) / 20;\n                return 1 / (1.5 + factor);\n            };\n            // Only apply swipe in the locked direction\n            if (swipeDirection === 'y') {\n                // Handle vertical swipes\n                if (swipeDirections.includes('top') || swipeDirections.includes('bottom')) {\n                    if (swipeDirections.includes('top') && yDelta < 0 || swipeDirections.includes('bottom') && yDelta > 0) {\n                        swipeAmount.y = yDelta;\n                    } else {\n                        // Smoothly transition to dampened movement\n                        const dampenedDelta = yDelta * getDampening(yDelta);\n                        // Ensure we don't jump when transitioning to dampened movement\n                        swipeAmount.y = Math.abs(dampenedDelta) < Math.abs(yDelta) ? dampenedDelta : yDelta;\n                    }\n                }\n            } else if (swipeDirection === 'x') {\n                // Handle horizontal swipes\n                if (swipeDirections.includes('left') || swipeDirections.includes('right')) {\n                    if (swipeDirections.includes('left') && xDelta < 0 || swipeDirections.includes('right') && xDelta > 0) {\n                        swipeAmount.x = xDelta;\n                    } else {\n                        // Smoothly transition to dampened movement\n                        const dampenedDelta = xDelta * getDampening(xDelta);\n                        // Ensure we don't jump when transitioning to dampened movement\n                        swipeAmount.x = Math.abs(dampenedDelta) < Math.abs(xDelta) ? dampenedDelta : xDelta;\n                    }\n                }\n            }\n            if (Math.abs(swipeAmount.x) > 0 || Math.abs(swipeAmount.y) > 0) {\n                setIsSwiped(true);\n            }\n            (_toastRef_current = toastRef.current) == null ? void 0 : _toastRef_current.style.setProperty('--swipe-amount-x', `${swipeAmount.x}px`);\n            (_toastRef_current1 = toastRef.current) == null ? void 0 : _toastRef_current1.style.setProperty('--swipe-amount-y', `${swipeAmount.y}px`);\n        }\n    }, closeButton && !toast.jsx && toastType !== 'loading' ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"aria-label\": closeButtonAriaLabel,\n        \"data-disabled\": disabled,\n        \"data-close-button\": true,\n        onClick: disabled || !dismissible ? ()=>{} : ()=>{\n            deleteToast();\n            toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n        },\n        className: cn(classNames == null ? void 0 : classNames.closeButton, toast == null ? void 0 : (_toast_classNames2 = toast.classNames) == null ? void 0 : _toast_classNames2.closeButton)\n    }, (_icons_close = icons == null ? void 0 : icons.close) != null ? _icons_close : CloseIcon) : null, (toastType || toast.icon || toast.promise) && toast.icon !== null && ((icons == null ? void 0 : icons[toastType]) !== null || toast.icon) ? /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-icon\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.icon, toast == null ? void 0 : (_toast_classNames3 = toast.classNames) == null ? void 0 : _toast_classNames3.icon)\n    }, toast.promise || toast.type === 'loading' && !toast.icon ? toast.icon || getLoadingIcon() : null, toast.type !== 'loading' ? icon : null) : null, /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-content\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.content, toast == null ? void 0 : (_toast_classNames4 = toast.classNames) == null ? void 0 : _toast_classNames4.content)\n    }, /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-title\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.title, toast == null ? void 0 : (_toast_classNames5 = toast.classNames) == null ? void 0 : _toast_classNames5.title)\n    }, toast.jsx ? toast.jsx : typeof toast.title === 'function' ? toast.title() : toast.title), toast.description ? /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-description\": \"\",\n        className: cn(descriptionClassName, toastDescriptionClassname, classNames == null ? void 0 : classNames.description, toast == null ? void 0 : (_toast_classNames6 = toast.classNames) == null ? void 0 : _toast_classNames6.description)\n    }, typeof toast.description === 'function' ? toast.description() : toast.description) : null), /*#__PURE__*/ React.isValidElement(toast.cancel) ? toast.cancel : toast.cancel && isAction(toast.cancel) ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"data-button\": true,\n        \"data-cancel\": true,\n        style: toast.cancelButtonStyle || cancelButtonStyle,\n        onClick: (event)=>{\n            // We need to check twice because typescript\n            if (!isAction(toast.cancel)) return;\n            if (!dismissible) return;\n            toast.cancel.onClick == null ? void 0 : toast.cancel.onClick.call(toast.cancel, event);\n            deleteToast();\n        },\n        className: cn(classNames == null ? void 0 : classNames.cancelButton, toast == null ? void 0 : (_toast_classNames7 = toast.classNames) == null ? void 0 : _toast_classNames7.cancelButton)\n    }, toast.cancel.label) : null, /*#__PURE__*/ React.isValidElement(toast.action) ? toast.action : toast.action && isAction(toast.action) ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"data-button\": true,\n        \"data-action\": true,\n        style: toast.actionButtonStyle || actionButtonStyle,\n        onClick: (event)=>{\n            // We need to check twice because typescript\n            if (!isAction(toast.action)) return;\n            toast.action.onClick == null ? void 0 : toast.action.onClick.call(toast.action, event);\n            if (event.defaultPrevented) return;\n            deleteToast();\n        },\n        className: cn(classNames == null ? void 0 : classNames.actionButton, toast == null ? void 0 : (_toast_classNames8 = toast.classNames) == null ? void 0 : _toast_classNames8.actionButton)\n    }, toast.action.label) : null);\n};\nfunction getDocumentDirection() {\n    if (typeof window === 'undefined') return 'ltr';\n    if (typeof document === 'undefined') return 'ltr'; // For Fresh purpose\n    const dirAttribute = document.documentElement.getAttribute('dir');\n    if (dirAttribute === 'auto' || !dirAttribute) {\n        return window.getComputedStyle(document.documentElement).direction;\n    }\n    return dirAttribute;\n}\nfunction assignOffset(defaultOffset, mobileOffset) {\n    const styles = {};\n    [\n        defaultOffset,\n        mobileOffset\n    ].forEach((offset, index)=>{\n        const isMobile = index === 1;\n        const prefix = isMobile ? '--mobile-offset' : '--offset';\n        const defaultValue = isMobile ? MOBILE_VIEWPORT_OFFSET : VIEWPORT_OFFSET;\n        function assignAll(offset) {\n            [\n                'top',\n                'right',\n                'bottom',\n                'left'\n            ].forEach((key)=>{\n                styles[`${prefix}-${key}`] = typeof offset === 'number' ? `${offset}px` : offset;\n            });\n        }\n        if (typeof offset === 'number' || typeof offset === 'string') {\n            assignAll(offset);\n        } else if (typeof offset === 'object') {\n            [\n                'top',\n                'right',\n                'bottom',\n                'left'\n            ].forEach((key)=>{\n                if (offset[key] === undefined) {\n                    styles[`${prefix}-${key}`] = defaultValue;\n                } else {\n                    styles[`${prefix}-${key}`] = typeof offset[key] === 'number' ? `${offset[key]}px` : offset[key];\n                }\n            });\n        } else {\n            assignAll(defaultValue);\n        }\n    });\n    return styles;\n}\nfunction useSonner() {\n    const [activeToasts, setActiveToasts] = React.useState([]);\n    React.useEffect(()=>{\n        return ToastState.subscribe((toast)=>{\n            if (toast.dismiss) {\n                setTimeout(()=>{\n                    ReactDOM.flushSync(()=>{\n                        setActiveToasts((toasts)=>toasts.filter((t)=>t.id !== toast.id));\n                    });\n                });\n                return;\n            }\n            // Prevent batching, temp solution.\n            setTimeout(()=>{\n                ReactDOM.flushSync(()=>{\n                    setActiveToasts((toasts)=>{\n                        const indexOfExistingToast = toasts.findIndex((t)=>t.id === toast.id);\n                        // Update the toast if it already exists\n                        if (indexOfExistingToast !== -1) {\n                            return [\n                                ...toasts.slice(0, indexOfExistingToast),\n                                {\n                                    ...toasts[indexOfExistingToast],\n                                    ...toast\n                                },\n                                ...toasts.slice(indexOfExistingToast + 1)\n                            ];\n                        }\n                        return [\n                            toast,\n                            ...toasts\n                        ];\n                    });\n                });\n            });\n        });\n    }, []);\n    return {\n        toasts: activeToasts\n    };\n}\nconst Toaster = /*#__PURE__*/ React.forwardRef(function Toaster(props, ref) {\n    const { id, invert, position = 'bottom-right', hotkey = [\n        'altKey',\n        'KeyT'\n    ], expand, closeButton, className, offset, mobileOffset, theme = 'light', richColors, duration, style, visibleToasts = VISIBLE_TOASTS_AMOUNT, toastOptions, dir = getDocumentDirection(), gap = GAP, icons, containerAriaLabel = 'Notifications' } = props;\n    const [toasts, setToasts] = React.useState([]);\n    const filteredToasts = React.useMemo(()=>{\n        if (id) {\n            return toasts.filter((toast)=>toast.toasterId === id);\n        }\n        return toasts.filter((toast)=>!toast.toasterId);\n    }, [\n        toasts,\n        id\n    ]);\n    const possiblePositions = React.useMemo(()=>{\n        return Array.from(new Set([\n            position\n        ].concat(filteredToasts.filter((toast)=>toast.position).map((toast)=>toast.position))));\n    }, [\n        filteredToasts,\n        position\n    ]);\n    const [heights, setHeights] = React.useState([]);\n    const [expanded, setExpanded] = React.useState(false);\n    const [interacting, setInteracting] = React.useState(false);\n    const [actualTheme, setActualTheme] = React.useState(theme !== 'system' ? theme : typeof window !== 'undefined' ? window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light');\n    const listRef = React.useRef(null);\n    const hotkeyLabel = hotkey.join('+').replace(/Key/g, '').replace(/Digit/g, '');\n    const lastFocusedElementRef = React.useRef(null);\n    const isFocusWithinRef = React.useRef(false);\n    const removeToast = React.useCallback((toastToRemove)=>{\n        setToasts((toasts)=>{\n            var _toasts_find;\n            if (!((_toasts_find = toasts.find((toast)=>toast.id === toastToRemove.id)) == null ? void 0 : _toasts_find.delete)) {\n                ToastState.dismiss(toastToRemove.id);\n            }\n            return toasts.filter(({ id })=>id !== toastToRemove.id);\n        });\n    }, []);\n    React.useEffect(()=>{\n        return ToastState.subscribe((toast)=>{\n            if (toast.dismiss) {\n                // Prevent batching of other state updates\n                requestAnimationFrame(()=>{\n                    setToasts((toasts)=>toasts.map((t)=>t.id === toast.id ? {\n                                ...t,\n                                delete: true\n                            } : t));\n                });\n                return;\n            }\n            // Prevent batching, temp solution.\n            setTimeout(()=>{\n                ReactDOM.flushSync(()=>{\n                    setToasts((toasts)=>{\n                        const indexOfExistingToast = toasts.findIndex((t)=>t.id === toast.id);\n                        // Update the toast if it already exists\n                        if (indexOfExistingToast !== -1) {\n                            return [\n                                ...toasts.slice(0, indexOfExistingToast),\n                                {\n                                    ...toasts[indexOfExistingToast],\n                                    ...toast\n                                },\n                                ...toasts.slice(indexOfExistingToast + 1)\n                            ];\n                        }\n                        return [\n                            toast,\n                            ...toasts\n                        ];\n                    });\n                });\n            });\n        });\n    }, [\n        toasts\n    ]);\n    React.useEffect(()=>{\n        if (theme !== 'system') {\n            setActualTheme(theme);\n            return;\n        }\n        if (theme === 'system') {\n            // check if current preference is dark\n            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n                // it's currently dark\n                setActualTheme('dark');\n            } else {\n                // it's not dark\n                setActualTheme('light');\n            }\n        }\n        if (typeof window === 'undefined') return;\n        const darkMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n        try {\n            // Chrome & Firefox\n            darkMediaQuery.addEventListener('change', ({ matches })=>{\n                if (matches) {\n                    setActualTheme('dark');\n                } else {\n                    setActualTheme('light');\n                }\n            });\n        } catch (error) {\n            // Safari < 14\n            darkMediaQuery.addListener(({ matches })=>{\n                try {\n                    if (matches) {\n                        setActualTheme('dark');\n                    } else {\n                        setActualTheme('light');\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            });\n        }\n    }, [\n        theme\n    ]);\n    React.useEffect(()=>{\n        // Ensure expanded is always false when no toasts are present / only one left\n        if (toasts.length <= 1) {\n            setExpanded(false);\n        }\n    }, [\n        toasts\n    ]);\n    React.useEffect(()=>{\n        const handleKeyDown = (event)=>{\n            var _listRef_current;\n            const isHotkeyPressed = hotkey.every((key)=>event[key] || event.code === key);\n            if (isHotkeyPressed) {\n                var _listRef_current1;\n                setExpanded(true);\n                (_listRef_current1 = listRef.current) == null ? void 0 : _listRef_current1.focus();\n            }\n            if (event.code === 'Escape' && (document.activeElement === listRef.current || ((_listRef_current = listRef.current) == null ? void 0 : _listRef_current.contains(document.activeElement)))) {\n                setExpanded(false);\n            }\n        };\n        document.addEventListener('keydown', handleKeyDown);\n        return ()=>document.removeEventListener('keydown', handleKeyDown);\n    }, [\n        hotkey\n    ]);\n    React.useEffect(()=>{\n        if (listRef.current) {\n            return ()=>{\n                if (lastFocusedElementRef.current) {\n                    lastFocusedElementRef.current.focus({\n                        preventScroll: true\n                    });\n                    lastFocusedElementRef.current = null;\n                    isFocusWithinRef.current = false;\n                }\n            };\n        }\n    }, [\n        listRef.current\n    ]);\n    return(// Remove item from normal navigation flow, only available via hotkey\n    /*#__PURE__*/ React.createElement(\"section\", {\n        ref: ref,\n        \"aria-label\": `${containerAriaLabel} ${hotkeyLabel}`,\n        tabIndex: -1,\n        \"aria-live\": \"polite\",\n        \"aria-relevant\": \"additions text\",\n        \"aria-atomic\": \"false\",\n        suppressHydrationWarning: true\n    }, possiblePositions.map((position, index)=>{\n        var _heights_;\n        const [y, x] = position.split('-');\n        if (!filteredToasts.length) return null;\n        return /*#__PURE__*/ React.createElement(\"ol\", {\n            key: position,\n            dir: dir === 'auto' ? getDocumentDirection() : dir,\n            tabIndex: -1,\n            ref: listRef,\n            className: className,\n            \"data-sonner-toaster\": true,\n            \"data-sonner-theme\": actualTheme,\n            \"data-y-position\": y,\n            \"data-x-position\": x,\n            style: {\n                '--front-toast-height': `${((_heights_ = heights[0]) == null ? void 0 : _heights_.height) || 0}px`,\n                '--width': `${TOAST_WIDTH}px`,\n                '--gap': `${gap}px`,\n                ...style,\n                ...assignOffset(offset, mobileOffset)\n            },\n            onBlur: (event)=>{\n                if (isFocusWithinRef.current && !event.currentTarget.contains(event.relatedTarget)) {\n                    isFocusWithinRef.current = false;\n                    if (lastFocusedElementRef.current) {\n                        lastFocusedElementRef.current.focus({\n                            preventScroll: true\n                        });\n                        lastFocusedElementRef.current = null;\n                    }\n                }\n            },\n            onFocus: (event)=>{\n                const isNotDismissible = event.target instanceof HTMLElement && event.target.dataset.dismissible === 'false';\n                if (isNotDismissible) return;\n                if (!isFocusWithinRef.current) {\n                    isFocusWithinRef.current = true;\n                    lastFocusedElementRef.current = event.relatedTarget;\n                }\n            },\n            onMouseEnter: ()=>setExpanded(true),\n            onMouseMove: ()=>setExpanded(true),\n            onMouseLeave: ()=>{\n                // Avoid setting expanded to false when interacting with a toast, e.g. swiping\n                if (!interacting) {\n                    setExpanded(false);\n                }\n            },\n            onDragEnd: ()=>setExpanded(false),\n            onPointerDown: (event)=>{\n                const isNotDismissible = event.target instanceof HTMLElement && event.target.dataset.dismissible === 'false';\n                if (isNotDismissible) return;\n                setInteracting(true);\n            },\n            onPointerUp: ()=>setInteracting(false)\n        }, filteredToasts.filter((toast)=>!toast.position && index === 0 || toast.position === position).map((toast, index)=>{\n            var _toastOptions_duration, _toastOptions_closeButton;\n            return /*#__PURE__*/ React.createElement(Toast, {\n                key: toast.id,\n                icons: icons,\n                index: index,\n                toast: toast,\n                defaultRichColors: richColors,\n                duration: (_toastOptions_duration = toastOptions == null ? void 0 : toastOptions.duration) != null ? _toastOptions_duration : duration,\n                className: toastOptions == null ? void 0 : toastOptions.className,\n                descriptionClassName: toastOptions == null ? void 0 : toastOptions.descriptionClassName,\n                invert: invert,\n                visibleToasts: visibleToasts,\n                closeButton: (_toastOptions_closeButton = toastOptions == null ? void 0 : toastOptions.closeButton) != null ? _toastOptions_closeButton : closeButton,\n                interacting: interacting,\n                position: position,\n                style: toastOptions == null ? void 0 : toastOptions.style,\n                unstyled: toastOptions == null ? void 0 : toastOptions.unstyled,\n                classNames: toastOptions == null ? void 0 : toastOptions.classNames,\n                cancelButtonStyle: toastOptions == null ? void 0 : toastOptions.cancelButtonStyle,\n                actionButtonStyle: toastOptions == null ? void 0 : toastOptions.actionButtonStyle,\n                closeButtonAriaLabel: toastOptions == null ? void 0 : toastOptions.closeButtonAriaLabel,\n                removeToast: removeToast,\n                toasts: filteredToasts.filter((t)=>t.position == toast.position),\n                heights: heights.filter((h)=>h.position == toast.position),\n                setHeights: setHeights,\n                expandByDefault: expand,\n                gap: gap,\n                expanded: expanded,\n                swipeDirections: props.swipeDirections\n            });\n        }));\n    })));\n});\n\nexport { Toaster, toast, useSonner };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1509, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/tslib/tslib.es6.mjs"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2144, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll-bar/dist/es2015/constants.js"],"sourcesContent":["export var zeroRightClassName = 'right-scroll-bar-position';\nexport var fullWidthClassName = 'width-before-scroll-bar';\nexport var noScrollbarsClassName = 'with-scroll-bars-hidden';\n/**\n * Name of a CSS variable containing the amount of \"hidden\" scrollbar\n * ! might be undefined ! use will fallback!\n */\nexport var removedBarSizeVariable = '--removed-body-scroll-bar-size';\n"],"names":[],"mappings":";;;;;;;;;;AAAO,IAAI,qBAAqB;AACzB,IAAI,qBAAqB;AACzB,IAAI,wBAAwB;AAK5B,IAAI,yBAAyB","ignoreList":[0]}},
    {"offset": {"line": 2162, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll-bar/dist/es2015/utils.js"],"sourcesContent":["export var zeroGap = {\n    left: 0,\n    top: 0,\n    right: 0,\n    gap: 0,\n};\nvar parse = function (x) { return parseInt(x || '', 10) || 0; };\nvar getOffset = function (gapMode) {\n    var cs = window.getComputedStyle(document.body);\n    var left = cs[gapMode === 'padding' ? 'paddingLeft' : 'marginLeft'];\n    var top = cs[gapMode === 'padding' ? 'paddingTop' : 'marginTop'];\n    var right = cs[gapMode === 'padding' ? 'paddingRight' : 'marginRight'];\n    return [parse(left), parse(top), parse(right)];\n};\nexport var getGapWidth = function (gapMode) {\n    if (gapMode === void 0) { gapMode = 'margin'; }\n    if (typeof window === 'undefined') {\n        return zeroGap;\n    }\n    var offsets = getOffset(gapMode);\n    var documentWidth = document.documentElement.clientWidth;\n    var windowWidth = window.innerWidth;\n    return {\n        left: offsets[0],\n        top: offsets[1],\n        right: offsets[2],\n        gap: Math.max(0, windowWidth - documentWidth + offsets[2] - offsets[0]),\n    };\n};\n"],"names":[],"mappings":";;;;;;AAAO,IAAI,UAAU;IACjB,MAAM;IACN,KAAK;IACL,OAAO;IACP,KAAK;AACT;AACA,IAAI,QAAQ,SAAU,CAAC;IAAI,OAAO,SAAS,KAAK,IAAI,OAAO;AAAG;AAC9D,IAAI,YAAY,SAAU,OAAO;IAC7B,IAAI,KAAK,OAAO,gBAAgB,CAAC,SAAS,IAAI;IAC9C,IAAI,OAAO,EAAE,CAAC,YAAY,YAAY,gBAAgB,aAAa;IACnE,IAAI,MAAM,EAAE,CAAC,YAAY,YAAY,eAAe,YAAY;IAChE,IAAI,QAAQ,EAAE,CAAC,YAAY,YAAY,iBAAiB,cAAc;IACtE,OAAO;QAAC,MAAM;QAAO,MAAM;QAAM,MAAM;KAAO;AAClD;AACO,IAAI,cAAc,SAAU,OAAO;IACtC,IAAI,YAAY,KAAK,GAAG;QAAE,UAAU;IAAU;IAC9C,IAAI,OAAO,WAAW,aAAa;QAC/B,OAAO;IACX;IACA,IAAI,UAAU,UAAU;IACxB,IAAI,gBAAgB,SAAS,eAAe,CAAC,WAAW;IACxD,IAAI,cAAc,OAAO,UAAU;IACnC,OAAO;QACH,MAAM,OAAO,CAAC,EAAE;QAChB,KAAK,OAAO,CAAC,EAAE;QACf,OAAO,OAAO,CAAC,EAAE;QACjB,KAAK,KAAK,GAAG,CAAC,GAAG,cAAc,gBAAgB,OAAO,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE;IAC1E;AACJ","ignoreList":[0]}},
    {"offset": {"line": 2209, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll-bar/dist/es2015/component.js"],"sourcesContent":["import * as React from 'react';\nimport { styleSingleton } from 'react-style-singleton';\nimport { fullWidthClassName, zeroRightClassName, noScrollbarsClassName, removedBarSizeVariable } from './constants';\nimport { getGapWidth } from './utils';\nvar Style = styleSingleton();\nexport var lockAttribute = 'data-scroll-locked';\n// important tip - once we measure scrollBar width and remove them\n// we could not repeat this operation\n// thus we are using style-singleton - only the first \"yet correct\" style will be applied.\nvar getStyles = function (_a, allowRelative, gapMode, important) {\n    var left = _a.left, top = _a.top, right = _a.right, gap = _a.gap;\n    if (gapMode === void 0) { gapMode = 'margin'; }\n    return \"\\n  .\".concat(noScrollbarsClassName, \" {\\n   overflow: hidden \").concat(important, \";\\n   padding-right: \").concat(gap, \"px \").concat(important, \";\\n  }\\n  body[\").concat(lockAttribute, \"] {\\n    overflow: hidden \").concat(important, \";\\n    overscroll-behavior: contain;\\n    \").concat([\n        allowRelative && \"position: relative \".concat(important, \";\"),\n        gapMode === 'margin' &&\n            \"\\n    padding-left: \".concat(left, \"px;\\n    padding-top: \").concat(top, \"px;\\n    padding-right: \").concat(right, \"px;\\n    margin-left:0;\\n    margin-top:0;\\n    margin-right: \").concat(gap, \"px \").concat(important, \";\\n    \"),\n        gapMode === 'padding' && \"padding-right: \".concat(gap, \"px \").concat(important, \";\"),\n    ]\n        .filter(Boolean)\n        .join(''), \"\\n  }\\n  \\n  .\").concat(zeroRightClassName, \" {\\n    right: \").concat(gap, \"px \").concat(important, \";\\n  }\\n  \\n  .\").concat(fullWidthClassName, \" {\\n    margin-right: \").concat(gap, \"px \").concat(important, \";\\n  }\\n  \\n  .\").concat(zeroRightClassName, \" .\").concat(zeroRightClassName, \" {\\n    right: 0 \").concat(important, \";\\n  }\\n  \\n  .\").concat(fullWidthClassName, \" .\").concat(fullWidthClassName, \" {\\n    margin-right: 0 \").concat(important, \";\\n  }\\n  \\n  body[\").concat(lockAttribute, \"] {\\n    \").concat(removedBarSizeVariable, \": \").concat(gap, \"px;\\n  }\\n\");\n};\nvar getCurrentUseCounter = function () {\n    var counter = parseInt(document.body.getAttribute(lockAttribute) || '0', 10);\n    return isFinite(counter) ? counter : 0;\n};\nexport var useLockAttribute = function () {\n    React.useEffect(function () {\n        document.body.setAttribute(lockAttribute, (getCurrentUseCounter() + 1).toString());\n        return function () {\n            var newCounter = getCurrentUseCounter() - 1;\n            if (newCounter <= 0) {\n                document.body.removeAttribute(lockAttribute);\n            }\n            else {\n                document.body.setAttribute(lockAttribute, newCounter.toString());\n            }\n        };\n    }, []);\n};\n/**\n * Removes page scrollbar and blocks page scroll when mounted\n */\nexport var RemoveScrollBar = function (_a) {\n    var noRelative = _a.noRelative, noImportant = _a.noImportant, _b = _a.gapMode, gapMode = _b === void 0 ? 'margin' : _b;\n    useLockAttribute();\n    /*\n     gap will be measured on every component mount\n     however it will be used only by the \"first\" invocation\n     due to singleton nature of <Style\n     */\n    var gap = React.useMemo(function () { return getGapWidth(gapMode); }, [gapMode]);\n    return React.createElement(Style, { styles: getStyles(gap, !noRelative, gapMode, !noImportant ? '!important' : '') });\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AACA,IAAI,QAAQ,IAAA,+LAAc;AACnB,IAAI,gBAAgB;AAC3B,kEAAkE;AAClE,qCAAqC;AACrC,0FAA0F;AAC1F,IAAI,YAAY,SAAU,EAAE,EAAE,aAAa,EAAE,OAAO,EAAE,SAAS;IAC3D,IAAI,OAAO,GAAG,IAAI,EAAE,MAAM,GAAG,GAAG,EAAE,QAAQ,GAAG,KAAK,EAAE,MAAM,GAAG,GAAG;IAChE,IAAI,YAAY,KAAK,GAAG;QAAE,UAAU;IAAU;IAC9C,OAAO,QAAQ,MAAM,CAAC,2MAAqB,EAAE,4BAA4B,MAAM,CAAC,WAAW,yBAAyB,MAAM,CAAC,KAAK,OAAO,MAAM,CAAC,WAAW,mBAAmB,MAAM,CAAC,eAAe,8BAA8B,MAAM,CAAC,WAAW,8CAA8C,MAAM,CAAC;QACnS,iBAAiB,sBAAsB,MAAM,CAAC,WAAW;QACzD,YAAY,YACR,uBAAuB,MAAM,CAAC,MAAM,0BAA0B,MAAM,CAAC,KAAK,4BAA4B,MAAM,CAAC,OAAO,kEAAkE,MAAM,CAAC,KAAK,OAAO,MAAM,CAAC,WAAW;QAC/N,YAAY,aAAa,kBAAkB,MAAM,CAAC,KAAK,OAAO,MAAM,CAAC,WAAW;KACnF,CACI,MAAM,CAAC,SACP,IAAI,CAAC,KAAK,kBAAkB,MAAM,CAAC,wMAAkB,EAAE,mBAAmB,MAAM,CAAC,KAAK,OAAO,MAAM,CAAC,WAAW,mBAAmB,MAAM,CAAC,wMAAkB,EAAE,0BAA0B,MAAM,CAAC,KAAK,OAAO,MAAM,CAAC,WAAW,mBAAmB,MAAM,CAAC,wMAAkB,EAAE,MAAM,MAAM,CAAC,wMAAkB,EAAE,qBAAqB,MAAM,CAAC,WAAW,mBAAmB,MAAM,CAAC,wMAAkB,EAAE,MAAM,MAAM,CAAC,wMAAkB,EAAE,4BAA4B,MAAM,CAAC,WAAW,uBAAuB,MAAM,CAAC,eAAe,aAAa,MAAM,CAAC,4MAAsB,EAAE,MAAM,MAAM,CAAC,KAAK;AACnkB;AACA,IAAI,uBAAuB;IACvB,IAAI,UAAU,SAAS,SAAS,IAAI,CAAC,YAAY,CAAC,kBAAkB,KAAK;IACzE,OAAO,SAAS,WAAW,UAAU;AACzC;AACO,IAAI,mBAAmB;IAC1B,0KAAe;sCAAC;YACZ,SAAS,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,yBAAyB,CAAC,EAAE,QAAQ;YAC/E;8CAAO;oBACH,IAAI,aAAa,yBAAyB;oBAC1C,IAAI,cAAc,GAAG;wBACjB,SAAS,IAAI,CAAC,eAAe,CAAC;oBAClC,OACK;wBACD,SAAS,IAAI,CAAC,YAAY,CAAC,eAAe,WAAW,QAAQ;oBACjE;gBACJ;;QACJ;qCAAG,EAAE;AACT;AAIO,IAAI,kBAAkB,SAAU,EAAE;IACrC,IAAI,aAAa,GAAG,UAAU,EAAE,cAAc,GAAG,WAAW,EAAE,KAAK,GAAG,OAAO,EAAE,UAAU,OAAO,KAAK,IAAI,WAAW;IACpH;IACA;;;;KAIC,GACD,IAAI,MAAM,wKAAa;wCAAC;YAAc,OAAO,IAAA,6LAAW,EAAC;QAAU;uCAAG;QAAC;KAAQ;IAC/E,OAAO,8KAAmB,CAAC,OAAO;QAAE,QAAQ,UAAU,KAAK,CAAC,YAAY,SAAS,CAAC,cAAc,eAAe;IAAI;AACvH","ignoreList":[0]}},
    {"offset": {"line": 2285, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll-bar/dist/es2015/index.js"],"sourcesContent":["import { RemoveScrollBar } from './component';\nimport { zeroRightClassName, fullWidthClassName, noScrollbarsClassName, removedBarSizeVariable } from './constants';\nimport { getGapWidth } from './utils';\nexport { RemoveScrollBar, zeroRightClassName, fullWidthClassName, noScrollbarsClassName, removedBarSizeVariable, getGapWidth, };\n"],"names":[],"mappings":";AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 2297, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/use-callback-ref/dist/es2015/assignRef.js"],"sourcesContent":["/**\n * Assigns a value for a given ref, no matter of the ref format\n * @param {RefObject} ref - a callback function or ref object\n * @param value - a new value\n *\n * @see https://github.com/theKashey/use-callback-ref#assignref\n * @example\n * const refObject = useRef();\n * const refFn = (ref) => {....}\n *\n * assignRef(refObject, \"refValue\");\n * assignRef(refFn, \"refValue\");\n */\nexport function assignRef(ref, value) {\n    if (typeof ref === 'function') {\n        ref(value);\n    }\n    else if (ref) {\n        ref.current = value;\n    }\n    return ref;\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;CAYC;;;;AACM,SAAS,UAAU,GAAG,EAAE,KAAK;IAChC,IAAI,OAAO,QAAQ,YAAY;QAC3B,IAAI;IACR,OACK,IAAI,KAAK;QACV,IAAI,OAAO,GAAG;IAClB;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 2325, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/use-callback-ref/dist/es2015/useRef.js"],"sourcesContent":["import { useState } from 'react';\n/**\n * creates a MutableRef with ref change callback\n * @param initialValue - initial ref value\n * @param {Function} callback - a callback to run when value changes\n *\n * @example\n * const ref = useCallbackRef(0, (newValue, oldValue) => console.log(oldValue, '->', newValue);\n * ref.current = 1;\n * // prints 0 -> 1\n *\n * @see https://reactjs.org/docs/hooks-reference.html#useref\n * @see https://github.com/theKashey/use-callback-ref#usecallbackref---to-replace-reactuseref\n * @returns {MutableRefObject}\n */\nexport function useCallbackRef(initialValue, callback) {\n    var ref = useState(function () { return ({\n        // value\n        value: initialValue,\n        // last callback\n        callback: callback,\n        // \"memoized\" public interface\n        facade: {\n            get current() {\n                return ref.value;\n            },\n            set current(value) {\n                var last = ref.value;\n                if (last !== value) {\n                    ref.value = value;\n                    ref.callback(value, last);\n                }\n            },\n        },\n    }); })[0];\n    // update callback\n    ref.callback = callback;\n    return ref.facade;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAeO,SAAS,eAAe,YAAY,EAAE,QAAQ;IACjD,IAAI,MAAM,IAAA,yKAAQ;mCAAC;YAAc,OAAQ;gBACrC,QAAQ;gBACR,OAAO;gBACP,gBAAgB;gBAChB,UAAU;gBACV,8BAA8B;gBAC9B,QAAQ;oBACJ,IAAI,WAAU;wBACV,OAAO,IAAI,KAAK;oBACpB;oBACA,IAAI,SAAQ,MAAO;wBACf,IAAI,OAAO,IAAI,KAAK;wBACpB,IAAI,SAAS,OAAO;4BAChB,IAAI,KAAK,GAAG;4BACZ,IAAI,QAAQ,CAAC,OAAO;wBACxB;oBACJ;gBACJ;YACJ;QAAI;iCAAE,CAAC,EAAE;IACT,kBAAkB;IAClB,IAAI,QAAQ,GAAG;IACf,OAAO,IAAI,MAAM;AACrB","ignoreList":[0]}},
    {"offset": {"line": 2363, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/use-callback-ref/dist/es2015/useMergeRef.js"],"sourcesContent":["import * as React from 'react';\nimport { assignRef } from './assignRef';\nimport { useCallbackRef } from './useRef';\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\nvar currentValues = new WeakMap();\n/**\n * Merges two or more refs together providing a single interface to set their value\n * @param {RefObject|Ref} refs\n * @returns {MutableRefObject} - a new ref, which translates all changes to {refs}\n *\n * @see {@link mergeRefs} a version without buit-in memoization\n * @see https://github.com/theKashey/use-callback-ref#usemergerefs\n * @example\n * const Component = React.forwardRef((props, ref) => {\n *   const ownRef = useRef();\n *   const domRef = useMergeRefs([ref, ownRef]); // ðŸ‘ˆ merge together\n *   return <div ref={domRef}>...</div>\n * }\n */\nexport function useMergeRefs(refs, defaultValue) {\n    var callbackRef = useCallbackRef(defaultValue || null, function (newValue) {\n        return refs.forEach(function (ref) { return assignRef(ref, newValue); });\n    });\n    // handle refs changes - added or removed\n    useIsomorphicLayoutEffect(function () {\n        var oldValue = currentValues.get(callbackRef);\n        if (oldValue) {\n            var prevRefs_1 = new Set(oldValue);\n            var nextRefs_1 = new Set(refs);\n            var current_1 = callbackRef.current;\n            prevRefs_1.forEach(function (ref) {\n                if (!nextRefs_1.has(ref)) {\n                    assignRef(ref, null);\n                }\n            });\n            nextRefs_1.forEach(function (ref) {\n                if (!prevRefs_1.has(ref)) {\n                    assignRef(ref, current_1);\n                }\n            });\n        }\n        currentValues.set(callbackRef, refs);\n    }, [refs]);\n    return callbackRef;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACA,IAAI,4BAA4B,OAAO,WAAW,cAAc,gLAAqB,GAAG,0KAAe;AACvG,IAAI,gBAAgB,IAAI;AAejB,SAAS,aAAa,IAAI,EAAE,YAAY;IAC3C,IAAI,cAAc,IAAA,uLAAc,EAAC,gBAAgB;oDAAM,SAAU,QAAQ;YACrE,OAAO,KAAK,OAAO;4DAAC,SAAU,GAAG;oBAAI,OAAO,IAAA,qLAAS,EAAC,KAAK;gBAAW;;QAC1E;;IACA,yCAAyC;IACzC;kDAA0B;YACtB,IAAI,WAAW,cAAc,GAAG,CAAC;YACjC,IAAI,UAAU;gBACV,IAAI,aAAa,IAAI,IAAI;gBACzB,IAAI,aAAa,IAAI,IAAI;gBACzB,IAAI,YAAY,YAAY,OAAO;gBACnC,WAAW,OAAO;8DAAC,SAAU,GAAG;wBAC5B,IAAI,CAAC,WAAW,GAAG,CAAC,MAAM;4BACtB,IAAA,qLAAS,EAAC,KAAK;wBACnB;oBACJ;;gBACA,WAAW,OAAO;8DAAC,SAAU,GAAG;wBAC5B,IAAI,CAAC,WAAW,GAAG,CAAC,MAAM;4BACtB,IAAA,qLAAS,EAAC,KAAK;wBACnB;oBACJ;;YACJ;YACA,cAAc,GAAG,CAAC,aAAa;QACnC;iDAAG;QAAC;KAAK;IACT,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 2419, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/use-sidecar/dist/es2015/medium.js"],"sourcesContent":["import { __assign } from \"tslib\";\nfunction ItoI(a) {\n    return a;\n}\nfunction innerCreateMedium(defaults, middleware) {\n    if (middleware === void 0) { middleware = ItoI; }\n    var buffer = [];\n    var assigned = false;\n    var medium = {\n        read: function () {\n            if (assigned) {\n                throw new Error('Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.');\n            }\n            if (buffer.length) {\n                return buffer[buffer.length - 1];\n            }\n            return defaults;\n        },\n        useMedium: function (data) {\n            var item = middleware(data, assigned);\n            buffer.push(item);\n            return function () {\n                buffer = buffer.filter(function (x) { return x !== item; });\n            };\n        },\n        assignSyncMedium: function (cb) {\n            assigned = true;\n            while (buffer.length) {\n                var cbs = buffer;\n                buffer = [];\n                cbs.forEach(cb);\n            }\n            buffer = {\n                push: function (x) { return cb(x); },\n                filter: function () { return buffer; },\n            };\n        },\n        assignMedium: function (cb) {\n            assigned = true;\n            var pendingQueue = [];\n            if (buffer.length) {\n                var cbs = buffer;\n                buffer = [];\n                cbs.forEach(cb);\n                pendingQueue = buffer;\n            }\n            var executeQueue = function () {\n                var cbs = pendingQueue;\n                pendingQueue = [];\n                cbs.forEach(cb);\n            };\n            var cycle = function () { return Promise.resolve().then(executeQueue); };\n            cycle();\n            buffer = {\n                push: function (x) {\n                    pendingQueue.push(x);\n                    cycle();\n                },\n                filter: function (filter) {\n                    pendingQueue = pendingQueue.filter(filter);\n                    return buffer;\n                },\n            };\n        },\n    };\n    return medium;\n}\nexport function createMedium(defaults, middleware) {\n    if (middleware === void 0) { middleware = ItoI; }\n    return innerCreateMedium(defaults, middleware);\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function createSidecarMedium(options) {\n    if (options === void 0) { options = {}; }\n    var medium = innerCreateMedium(null);\n    medium.options = __assign({ async: true, ssr: false }, options);\n    return medium;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AACA,SAAS,KAAK,CAAC;IACX,OAAO;AACX;AACA,SAAS,kBAAkB,QAAQ,EAAE,UAAU;IAC3C,IAAI,eAAe,KAAK,GAAG;QAAE,aAAa;IAAM;IAChD,IAAI,SAAS,EAAE;IACf,IAAI,WAAW;IACf,IAAI,SAAS;QACT,MAAM;YACF,IAAI,UAAU;gBACV,MAAM,IAAI,MAAM;YACpB;YACA,IAAI,OAAO,MAAM,EAAE;gBACf,OAAO,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE;YACpC;YACA,OAAO;QACX;QACA,WAAW,SAAU,IAAI;YACrB,IAAI,OAAO,WAAW,MAAM;YAC5B,OAAO,IAAI,CAAC;YACZ,OAAO;gBACH,SAAS,OAAO,MAAM,CAAC,SAAU,CAAC;oBAAI,OAAO,MAAM;gBAAM;YAC7D;QACJ;QACA,kBAAkB,SAAU,EAAE;YAC1B,WAAW;YACX,MAAO,OAAO,MAAM,CAAE;gBAClB,IAAI,MAAM;gBACV,SAAS,EAAE;gBACX,IAAI,OAAO,CAAC;YAChB;YACA,SAAS;gBACL,MAAM,SAAU,CAAC;oBAAI,OAAO,GAAG;gBAAI;gBACnC,QAAQ;oBAAc,OAAO;gBAAQ;YACzC;QACJ;QACA,cAAc,SAAU,EAAE;YACtB,WAAW;YACX,IAAI,eAAe,EAAE;YACrB,IAAI,OAAO,MAAM,EAAE;gBACf,IAAI,MAAM;gBACV,SAAS,EAAE;gBACX,IAAI,OAAO,CAAC;gBACZ,eAAe;YACnB;YACA,IAAI,eAAe;gBACf,IAAI,MAAM;gBACV,eAAe,EAAE;gBACjB,IAAI,OAAO,CAAC;YAChB;YACA,IAAI,QAAQ;gBAAc,OAAO,QAAQ,OAAO,GAAG,IAAI,CAAC;YAAe;YACvE;YACA,SAAS;gBACL,MAAM,SAAU,CAAC;oBACb,aAAa,IAAI,CAAC;oBAClB;gBACJ;gBACA,QAAQ,SAAU,MAAM;oBACpB,eAAe,aAAa,MAAM,CAAC;oBACnC,OAAO;gBACX;YACJ;QACJ;IACJ;IACA,OAAO;AACX;AACO,SAAS,aAAa,QAAQ,EAAE,UAAU;IAC7C,IAAI,eAAe,KAAK,GAAG;QAAE,aAAa;IAAM;IAChD,OAAO,kBAAkB,UAAU;AACvC;AAEO,SAAS,oBAAoB,OAAO;IACvC,IAAI,YAAY,KAAK,GAAG;QAAE,UAAU,CAAC;IAAG;IACxC,IAAI,SAAS,kBAAkB;IAC/B,OAAO,OAAO,GAAG,IAAA,qJAAQ,EAAC;QAAE,OAAO;QAAM,KAAK;IAAM,GAAG;IACvD,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 2524, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/use-sidecar/dist/es2015/exports.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport * as React from 'react';\nvar SideCar = function (_a) {\n    var sideCar = _a.sideCar, rest = __rest(_a, [\"sideCar\"]);\n    if (!sideCar) {\n        throw new Error('Sidecar: please provide `sideCar` property to import the right car');\n    }\n    var Target = sideCar.read();\n    if (!Target) {\n        throw new Error('Sidecar medium not found');\n    }\n    return React.createElement(Target, __assign({}, rest));\n};\nSideCar.isSideCarExport = true;\nexport function exportSidecar(medium, exported) {\n    medium.useMedium(exported);\n    return SideCar;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACA,IAAI,UAAU,SAAU,EAAE;IACtB,IAAI,UAAU,GAAG,OAAO,EAAE,OAAO,IAAA,mJAAM,EAAC,IAAI;QAAC;KAAU;IACvD,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,IAAI,SAAS,QAAQ,IAAI;IACzB,IAAI,CAAC,QAAQ;QACT,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,8KAAmB,CAAC,QAAQ,IAAA,qJAAQ,EAAC,CAAC,GAAG;AACpD;AACA,QAAQ,eAAe,GAAG;AACnB,SAAS,cAAc,MAAM,EAAE,QAAQ;IAC1C,OAAO,SAAS,CAAC;IACjB,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 2554, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll/dist/es2015/medium.js"],"sourcesContent":["import { createSidecarMedium } from 'use-sidecar';\nexport var effectCar = createSidecarMedium();\n"],"names":[],"mappings":";;;;AAAA;;AACO,IAAI,YAAY,IAAA,oLAAmB","ignoreList":[0]}},
    {"offset": {"line": 2565, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll/dist/es2015/UI.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport * as React from 'react';\nimport { fullWidthClassName, zeroRightClassName } from 'react-remove-scroll-bar/constants';\nimport { useMergeRefs } from 'use-callback-ref';\nimport { effectCar } from './medium';\nvar nothing = function () {\n    return;\n};\n/**\n * Removes scrollbar from the page and contain the scroll within the Lock\n */\nvar RemoveScroll = React.forwardRef(function (props, parentRef) {\n    var ref = React.useRef(null);\n    var _a = React.useState({\n        onScrollCapture: nothing,\n        onWheelCapture: nothing,\n        onTouchMoveCapture: nothing,\n    }), callbacks = _a[0], setCallbacks = _a[1];\n    var forwardProps = props.forwardProps, children = props.children, className = props.className, removeScrollBar = props.removeScrollBar, enabled = props.enabled, shards = props.shards, sideCar = props.sideCar, noRelative = props.noRelative, noIsolation = props.noIsolation, inert = props.inert, allowPinchZoom = props.allowPinchZoom, _b = props.as, Container = _b === void 0 ? 'div' : _b, gapMode = props.gapMode, rest = __rest(props, [\"forwardProps\", \"children\", \"className\", \"removeScrollBar\", \"enabled\", \"shards\", \"sideCar\", \"noRelative\", \"noIsolation\", \"inert\", \"allowPinchZoom\", \"as\", \"gapMode\"]);\n    var SideCar = sideCar;\n    var containerRef = useMergeRefs([ref, parentRef]);\n    var containerProps = __assign(__assign({}, rest), callbacks);\n    return (React.createElement(React.Fragment, null,\n        enabled && (React.createElement(SideCar, { sideCar: effectCar, removeScrollBar: removeScrollBar, shards: shards, noRelative: noRelative, noIsolation: noIsolation, inert: inert, setCallbacks: setCallbacks, allowPinchZoom: !!allowPinchZoom, lockRef: ref, gapMode: gapMode })),\n        forwardProps ? (React.cloneElement(React.Children.only(children), __assign(__assign({}, containerProps), { ref: containerRef }))) : (React.createElement(Container, __assign({}, containerProps, { className: className, ref: containerRef }), children))));\n});\nRemoveScroll.defaultProps = {\n    enabled: true,\n    removeScrollBar: true,\n    inert: false,\n};\nRemoveScroll.classNames = {\n    fullWidth: fullWidthClassName,\n    zeroRight: zeroRightClassName,\n};\nexport { RemoveScroll };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AACA,IAAI,UAAU;IACV;AACJ;AACA;;CAEC,GACD,IAAI,eAAe,2KAAgB,CAAC,SAAU,KAAK,EAAE,SAAS;IAC1D,IAAI,MAAM,uKAAY,CAAC;IACvB,IAAI,KAAK,yKAAc,CAAC;QACpB,iBAAiB;QACjB,gBAAgB;QAChB,oBAAoB;IACxB,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE,eAAe,EAAE,CAAC,EAAE;IAC3C,IAAI,eAAe,MAAM,YAAY,EAAE,WAAW,MAAM,QAAQ,EAAE,YAAY,MAAM,SAAS,EAAE,kBAAkB,MAAM,eAAe,EAAE,UAAU,MAAM,OAAO,EAAE,SAAS,MAAM,MAAM,EAAE,UAAU,MAAM,OAAO,EAAE,aAAa,MAAM,UAAU,EAAE,cAAc,MAAM,WAAW,EAAE,QAAQ,MAAM,KAAK,EAAE,iBAAiB,MAAM,cAAc,EAAE,KAAK,MAAM,EAAE,EAAE,YAAY,OAAO,KAAK,IAAI,QAAQ,IAAI,UAAU,MAAM,OAAO,EAAE,OAAO,IAAA,mJAAM,EAAC,OAAO;QAAC;QAAgB;QAAY;QAAa;QAAmB;QAAW;QAAU;QAAW;QAAc;QAAe;QAAS;QAAkB;QAAM;KAAU;IACvlB,IAAI,UAAU;IACd,IAAI,eAAe,IAAA,0LAAY,EAAC;QAAC;QAAK;KAAU;IAChD,IAAI,iBAAiB,IAAA,qJAAQ,EAAC,IAAA,qJAAQ,EAAC,CAAC,GAAG,OAAO;IAClD,OAAQ,8KAAmB,CAAC,yKAAc,EAAE,MACxC,WAAY,8KAAmB,CAAC,SAAS;QAAE,SAAS,qLAAS;QAAE,iBAAiB;QAAiB,QAAQ;QAAQ,YAAY;QAAY,aAAa;QAAa,OAAO;QAAO,cAAc;QAAc,gBAAgB,CAAC,CAAC;QAAgB,SAAS;QAAK,SAAS;IAAQ,IAC9Q,eAAgB,6KAAkB,CAAC,yKAAc,CAAC,IAAI,CAAC,WAAW,IAAA,qJAAQ,EAAC,IAAA,qJAAQ,EAAC,CAAC,GAAG,iBAAiB;QAAE,KAAK;IAAa,MAAQ,8KAAmB,CAAC,WAAW,IAAA,qJAAQ,EAAC,CAAC,GAAG,gBAAgB;QAAE,WAAW;QAAW,KAAK;IAAa,IAAI;AACvP;AACA,aAAa,YAAY,GAAG;IACxB,SAAS;IACT,iBAAiB;IACjB,OAAO;AACX;AACA,aAAa,UAAU,GAAG;IACtB,WAAW,wMAAkB;IAC7B,WAAW,wMAAkB;AACjC","ignoreList":[0]}},
    {"offset": {"line": 2644, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll/dist/es2015/aggresiveCapture.js"],"sourcesContent":["var passiveSupported = false;\nif (typeof window !== 'undefined') {\n    try {\n        var options = Object.defineProperty({}, 'passive', {\n            get: function () {\n                passiveSupported = true;\n                return true;\n            },\n        });\n        // @ts-ignore\n        window.addEventListener('test', options, options);\n        // @ts-ignore\n        window.removeEventListener('test', options, options);\n    }\n    catch (err) {\n        passiveSupported = false;\n    }\n}\nexport var nonPassive = passiveSupported ? { passive: false } : false;\n"],"names":[],"mappings":";;;;AAAA,IAAI,mBAAmB;AACvB,IAAI,OAAO,WAAW,aAAa;IAC/B,IAAI;QACA,IAAI,UAAU,OAAO,cAAc,CAAC,CAAC,GAAG,WAAW;YAC/C,KAAK;gBACD,mBAAmB;gBACnB,OAAO;YACX;QACJ;QACA,aAAa;QACb,OAAO,gBAAgB,CAAC,QAAQ,SAAS;QACzC,aAAa;QACb,OAAO,mBAAmB,CAAC,QAAQ,SAAS;IAChD,EACA,OAAO,KAAK;QACR,mBAAmB;IACvB;AACJ;AACO,IAAI,aAAa,mBAAmB;IAAE,SAAS;AAAM,IAAI","ignoreList":[0]}},
    {"offset": {"line": 2672, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll/dist/es2015/handleScroll.js"],"sourcesContent":["var alwaysContainsScroll = function (node) {\n    // textarea will always _contain_ scroll inside self. It only can be hidden\n    return node.tagName === 'TEXTAREA';\n};\nvar elementCanBeScrolled = function (node, overflow) {\n    if (!(node instanceof Element)) {\n        return false;\n    }\n    var styles = window.getComputedStyle(node);\n    return (\n    // not-not-scrollable\n    styles[overflow] !== 'hidden' &&\n        // contains scroll inside self\n        !(styles.overflowY === styles.overflowX && !alwaysContainsScroll(node) && styles[overflow] === 'visible'));\n};\nvar elementCouldBeVScrolled = function (node) { return elementCanBeScrolled(node, 'overflowY'); };\nvar elementCouldBeHScrolled = function (node) { return elementCanBeScrolled(node, 'overflowX'); };\nexport var locationCouldBeScrolled = function (axis, node) {\n    var ownerDocument = node.ownerDocument;\n    var current = node;\n    do {\n        // Skip over shadow root\n        if (typeof ShadowRoot !== 'undefined' && current instanceof ShadowRoot) {\n            current = current.host;\n        }\n        var isScrollable = elementCouldBeScrolled(axis, current);\n        if (isScrollable) {\n            var _a = getScrollVariables(axis, current), scrollHeight = _a[1], clientHeight = _a[2];\n            if (scrollHeight > clientHeight) {\n                return true;\n            }\n        }\n        current = current.parentNode;\n    } while (current && current !== ownerDocument.body);\n    return false;\n};\nvar getVScrollVariables = function (_a) {\n    var scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight, clientHeight = _a.clientHeight;\n    return [\n        scrollTop,\n        scrollHeight,\n        clientHeight,\n    ];\n};\nvar getHScrollVariables = function (_a) {\n    var scrollLeft = _a.scrollLeft, scrollWidth = _a.scrollWidth, clientWidth = _a.clientWidth;\n    return [\n        scrollLeft,\n        scrollWidth,\n        clientWidth,\n    ];\n};\nvar elementCouldBeScrolled = function (axis, node) {\n    return axis === 'v' ? elementCouldBeVScrolled(node) : elementCouldBeHScrolled(node);\n};\nvar getScrollVariables = function (axis, node) {\n    return axis === 'v' ? getVScrollVariables(node) : getHScrollVariables(node);\n};\nvar getDirectionFactor = function (axis, direction) {\n    /**\n     * If the element's direction is rtl (right-to-left), then scrollLeft is 0 when the scrollbar is at its rightmost position,\n     * and then increasingly negative as you scroll towards the end of the content.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft\n     */\n    return axis === 'h' && direction === 'rtl' ? -1 : 1;\n};\nexport var handleScroll = function (axis, endTarget, event, sourceDelta, noOverscroll) {\n    var directionFactor = getDirectionFactor(axis, window.getComputedStyle(endTarget).direction);\n    var delta = directionFactor * sourceDelta;\n    // find scrollable target\n    var target = event.target;\n    var targetInLock = endTarget.contains(target);\n    var shouldCancelScroll = false;\n    var isDeltaPositive = delta > 0;\n    var availableScroll = 0;\n    var availableScrollTop = 0;\n    do {\n        if (!target) {\n            break;\n        }\n        var _a = getScrollVariables(axis, target), position = _a[0], scroll_1 = _a[1], capacity = _a[2];\n        var elementScroll = scroll_1 - capacity - directionFactor * position;\n        if (position || elementScroll) {\n            if (elementCouldBeScrolled(axis, target)) {\n                availableScroll += elementScroll;\n                availableScrollTop += position;\n            }\n        }\n        var parent_1 = target.parentNode;\n        // we will \"bubble\" from ShadowDom in case we are, or just to the parent in normal case\n        // this is the same logic used in focus-lock\n        target = (parent_1 && parent_1.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? parent_1.host : parent_1);\n    } while (\n    // portaled content\n    (!targetInLock && target !== document.body) ||\n        // self content\n        (targetInLock && (endTarget.contains(target) || endTarget === target)));\n    // handle epsilon around 0 (non standard zoom levels)\n    if (isDeltaPositive &&\n        ((noOverscroll && Math.abs(availableScroll) < 1) || (!noOverscroll && delta > availableScroll))) {\n        shouldCancelScroll = true;\n    }\n    else if (!isDeltaPositive &&\n        ((noOverscroll && Math.abs(availableScrollTop) < 1) || (!noOverscroll && -delta > availableScrollTop))) {\n        shouldCancelScroll = true;\n    }\n    return shouldCancelScroll;\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2785, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll/dist/es2015/SideEffect.js"],"sourcesContent":["import { __spreadArray } from \"tslib\";\nimport * as React from 'react';\nimport { RemoveScrollBar } from 'react-remove-scroll-bar';\nimport { styleSingleton } from 'react-style-singleton';\nimport { nonPassive } from './aggresiveCapture';\nimport { handleScroll, locationCouldBeScrolled } from './handleScroll';\nexport var getTouchXY = function (event) {\n    return 'changedTouches' in event ? [event.changedTouches[0].clientX, event.changedTouches[0].clientY] : [0, 0];\n};\nexport var getDeltaXY = function (event) { return [event.deltaX, event.deltaY]; };\nvar extractRef = function (ref) {\n    return ref && 'current' in ref ? ref.current : ref;\n};\nvar deltaCompare = function (x, y) { return x[0] === y[0] && x[1] === y[1]; };\nvar generateStyle = function (id) { return \"\\n  .block-interactivity-\".concat(id, \" {pointer-events: none;}\\n  .allow-interactivity-\").concat(id, \" {pointer-events: all;}\\n\"); };\nvar idCounter = 0;\nvar lockStack = [];\nexport function RemoveScrollSideCar(props) {\n    var shouldPreventQueue = React.useRef([]);\n    var touchStartRef = React.useRef([0, 0]);\n    var activeAxis = React.useRef();\n    var id = React.useState(idCounter++)[0];\n    var Style = React.useState(styleSingleton)[0];\n    var lastProps = React.useRef(props);\n    React.useEffect(function () {\n        lastProps.current = props;\n    }, [props]);\n    React.useEffect(function () {\n        if (props.inert) {\n            document.body.classList.add(\"block-interactivity-\".concat(id));\n            var allow_1 = __spreadArray([props.lockRef.current], (props.shards || []).map(extractRef), true).filter(Boolean);\n            allow_1.forEach(function (el) { return el.classList.add(\"allow-interactivity-\".concat(id)); });\n            return function () {\n                document.body.classList.remove(\"block-interactivity-\".concat(id));\n                allow_1.forEach(function (el) { return el.classList.remove(\"allow-interactivity-\".concat(id)); });\n            };\n        }\n        return;\n    }, [props.inert, props.lockRef.current, props.shards]);\n    var shouldCancelEvent = React.useCallback(function (event, parent) {\n        if (('touches' in event && event.touches.length === 2) || (event.type === 'wheel' && event.ctrlKey)) {\n            return !lastProps.current.allowPinchZoom;\n        }\n        var touch = getTouchXY(event);\n        var touchStart = touchStartRef.current;\n        var deltaX = 'deltaX' in event ? event.deltaX : touchStart[0] - touch[0];\n        var deltaY = 'deltaY' in event ? event.deltaY : touchStart[1] - touch[1];\n        var currentAxis;\n        var target = event.target;\n        var moveDirection = Math.abs(deltaX) > Math.abs(deltaY) ? 'h' : 'v';\n        // allow horizontal touch move on Range inputs. They will not cause any scroll\n        if ('touches' in event && moveDirection === 'h' && target.type === 'range') {\n            return false;\n        }\n        var canBeScrolledInMainDirection = locationCouldBeScrolled(moveDirection, target);\n        if (!canBeScrolledInMainDirection) {\n            return true;\n        }\n        if (canBeScrolledInMainDirection) {\n            currentAxis = moveDirection;\n        }\n        else {\n            currentAxis = moveDirection === 'v' ? 'h' : 'v';\n            canBeScrolledInMainDirection = locationCouldBeScrolled(moveDirection, target);\n            // other axis might be not scrollable\n        }\n        if (!canBeScrolledInMainDirection) {\n            return false;\n        }\n        if (!activeAxis.current && 'changedTouches' in event && (deltaX || deltaY)) {\n            activeAxis.current = currentAxis;\n        }\n        if (!currentAxis) {\n            return true;\n        }\n        var cancelingAxis = activeAxis.current || currentAxis;\n        return handleScroll(cancelingAxis, parent, event, cancelingAxis === 'h' ? deltaX : deltaY, true);\n    }, []);\n    var shouldPrevent = React.useCallback(function (_event) {\n        var event = _event;\n        if (!lockStack.length || lockStack[lockStack.length - 1] !== Style) {\n            // not the last active\n            return;\n        }\n        var delta = 'deltaY' in event ? getDeltaXY(event) : getTouchXY(event);\n        var sourceEvent = shouldPreventQueue.current.filter(function (e) { return e.name === event.type && (e.target === event.target || event.target === e.shadowParent) && deltaCompare(e.delta, delta); })[0];\n        // self event, and should be canceled\n        if (sourceEvent && sourceEvent.should) {\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n            return;\n        }\n        // outside or shard event\n        if (!sourceEvent) {\n            var shardNodes = (lastProps.current.shards || [])\n                .map(extractRef)\n                .filter(Boolean)\n                .filter(function (node) { return node.contains(event.target); });\n            var shouldStop = shardNodes.length > 0 ? shouldCancelEvent(event, shardNodes[0]) : !lastProps.current.noIsolation;\n            if (shouldStop) {\n                if (event.cancelable) {\n                    event.preventDefault();\n                }\n            }\n        }\n    }, []);\n    var shouldCancel = React.useCallback(function (name, delta, target, should) {\n        var event = { name: name, delta: delta, target: target, should: should, shadowParent: getOutermostShadowParent(target) };\n        shouldPreventQueue.current.push(event);\n        setTimeout(function () {\n            shouldPreventQueue.current = shouldPreventQueue.current.filter(function (e) { return e !== event; });\n        }, 1);\n    }, []);\n    var scrollTouchStart = React.useCallback(function (event) {\n        touchStartRef.current = getTouchXY(event);\n        activeAxis.current = undefined;\n    }, []);\n    var scrollWheel = React.useCallback(function (event) {\n        shouldCancel(event.type, getDeltaXY(event), event.target, shouldCancelEvent(event, props.lockRef.current));\n    }, []);\n    var scrollTouchMove = React.useCallback(function (event) {\n        shouldCancel(event.type, getTouchXY(event), event.target, shouldCancelEvent(event, props.lockRef.current));\n    }, []);\n    React.useEffect(function () {\n        lockStack.push(Style);\n        props.setCallbacks({\n            onScrollCapture: scrollWheel,\n            onWheelCapture: scrollWheel,\n            onTouchMoveCapture: scrollTouchMove,\n        });\n        document.addEventListener('wheel', shouldPrevent, nonPassive);\n        document.addEventListener('touchmove', shouldPrevent, nonPassive);\n        document.addEventListener('touchstart', scrollTouchStart, nonPassive);\n        return function () {\n            lockStack = lockStack.filter(function (inst) { return inst !== Style; });\n            document.removeEventListener('wheel', shouldPrevent, nonPassive);\n            document.removeEventListener('touchmove', shouldPrevent, nonPassive);\n            document.removeEventListener('touchstart', scrollTouchStart, nonPassive);\n        };\n    }, []);\n    var removeScrollBar = props.removeScrollBar, inert = props.inert;\n    return (React.createElement(React.Fragment, null,\n        inert ? React.createElement(Style, { styles: generateStyle(id) }) : null,\n        removeScrollBar ? React.createElement(RemoveScrollBar, { noRelative: props.noRelative, gapMode: props.gapMode }) : null));\n}\nfunction getOutermostShadowParent(node) {\n    var shadowParent = null;\n    while (node !== null) {\n        if (node instanceof ShadowRoot) {\n            shadowParent = node.host;\n            node = node.host;\n        }\n        node = node.parentNode;\n    }\n    return shadowParent;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3041, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll/dist/es2015/sidecar.js"],"sourcesContent":["import { exportSidecar } from 'use-sidecar';\nimport { RemoveScrollSideCar } from './SideEffect';\nimport { effectCar } from './medium';\nexport default exportSidecar(effectCar, RemoveScrollSideCar);\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;uCACe,IAAA,+KAAa,EAAC,qLAAS,EAAE,mMAAmB","ignoreList":[0]}},
    {"offset": {"line": 3056, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-remove-scroll/dist/es2015/Combination.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { RemoveScroll } from './UI';\nimport SideCar from './sidecar';\nvar ReactRemoveScroll = React.forwardRef(function (props, ref) { return (React.createElement(RemoveScroll, __assign({}, props, { ref: ref, sideCar: SideCar }))); });\nReactRemoveScroll.classNames = RemoveScroll.classNames;\nexport default ReactRemoveScroll;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AACA,IAAI,oBAAoB,2KAAgB,CAAC,SAAU,KAAK,EAAE,GAAG;IAAI,OAAQ,8KAAmB,CAAC,oLAAY,EAAE,IAAA,qJAAQ,EAAC,CAAC,GAAG,OAAO;QAAE,KAAK;QAAK,SAAS,oLAAO;IAAC;AAAM;AAClK,kBAAkB,UAAU,GAAG,oLAAY,CAAC,UAAU;uCACvC","ignoreList":[0]}},
    {"offset": {"line": 3089, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/get-nonce/dist/es2015/index.js"],"sourcesContent":["var currentNonce;\nexport var setNonce = function (nonce) {\n    currentNonce = nonce;\n};\nexport var getNonce = function () {\n    if (currentNonce) {\n        return currentNonce;\n    }\n    if (typeof __webpack_nonce__ !== 'undefined') {\n        return __webpack_nonce__;\n    }\n    return undefined;\n};\n"],"names":[],"mappings":";;;;;;AAAA,IAAI;AACG,IAAI,WAAW,SAAU,KAAK;IACjC,eAAe;AACnB;AACO,IAAI,WAAW;IAClB,IAAI,cAAc;QACd,OAAO;IACX;IACA,IAAI,OAAO,sBAAsB,aAAa;QAC1C,OAAO;IACX;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 3112, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-style-singleton/dist/es2015/singleton.js"],"sourcesContent":["import { getNonce } from 'get-nonce';\nfunction makeStyleTag() {\n    if (!document)\n        return null;\n    var tag = document.createElement('style');\n    tag.type = 'text/css';\n    var nonce = getNonce();\n    if (nonce) {\n        tag.setAttribute('nonce', nonce);\n    }\n    return tag;\n}\nfunction injectStyles(tag, css) {\n    // @ts-ignore\n    if (tag.styleSheet) {\n        // @ts-ignore\n        tag.styleSheet.cssText = css;\n    }\n    else {\n        tag.appendChild(document.createTextNode(css));\n    }\n}\nfunction insertStyleTag(tag) {\n    var head = document.head || document.getElementsByTagName('head')[0];\n    head.appendChild(tag);\n}\nexport var stylesheetSingleton = function () {\n    var counter = 0;\n    var stylesheet = null;\n    return {\n        add: function (style) {\n            if (counter == 0) {\n                if ((stylesheet = makeStyleTag())) {\n                    injectStyles(stylesheet, style);\n                    insertStyleTag(stylesheet);\n                }\n            }\n            counter++;\n        },\n        remove: function () {\n            counter--;\n            if (!counter && stylesheet) {\n                stylesheet.parentNode && stylesheet.parentNode.removeChild(stylesheet);\n                stylesheet = null;\n            }\n        },\n    };\n};\n"],"names":[],"mappings":";;;;AAAA;;AACA,SAAS;IACL,IAAI,CAAC,UACD,OAAO;IACX,IAAI,MAAM,SAAS,aAAa,CAAC;IACjC,IAAI,IAAI,GAAG;IACX,IAAI,QAAQ,IAAA,sKAAQ;IACpB,IAAI,OAAO;QACP,IAAI,YAAY,CAAC,SAAS;IAC9B;IACA,OAAO;AACX;AACA,SAAS,aAAa,GAAG,EAAE,GAAG;IAC1B,aAAa;IACb,IAAI,IAAI,UAAU,EAAE;QAChB,aAAa;QACb,IAAI,UAAU,CAAC,OAAO,GAAG;IAC7B,OACK;QACD,IAAI,WAAW,CAAC,SAAS,cAAc,CAAC;IAC5C;AACJ;AACA,SAAS,eAAe,GAAG;IACvB,IAAI,OAAO,SAAS,IAAI,IAAI,SAAS,oBAAoB,CAAC,OAAO,CAAC,EAAE;IACpE,KAAK,WAAW,CAAC;AACrB;AACO,IAAI,sBAAsB;IAC7B,IAAI,UAAU;IACd,IAAI,aAAa;IACjB,OAAO;QACH,KAAK,SAAU,KAAK;YAChB,IAAI,WAAW,GAAG;gBACd,IAAK,aAAa,gBAAiB;oBAC/B,aAAa,YAAY;oBACzB,eAAe;gBACnB;YACJ;YACA;QACJ;QACA,QAAQ;YACJ;YACA,IAAI,CAAC,WAAW,YAAY;gBACxB,WAAW,UAAU,IAAI,WAAW,UAAU,CAAC,WAAW,CAAC;gBAC3D,aAAa;YACjB;QACJ;IACJ;AACJ","ignoreList":[0]}},
    {"offset": {"line": 3167, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-style-singleton/dist/es2015/hook.js"],"sourcesContent":["import * as React from 'react';\nimport { stylesheetSingleton } from './singleton';\n/**\n * creates a hook to control style singleton\n * @see {@link styleSingleton} for a safer component version\n * @example\n * ```tsx\n * const useStyle = styleHookSingleton();\n * ///\n * useStyle('body { overflow: hidden}');\n */\nexport var styleHookSingleton = function () {\n    var sheet = stylesheetSingleton();\n    return function (styles, isDynamic) {\n        React.useEffect(function () {\n            sheet.add(styles);\n            return function () {\n                sheet.remove();\n            };\n        }, [styles && isDynamic]);\n    };\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAUO,IAAI,qBAAqB;IAC5B,IAAI,QAAQ,IAAA,oMAAmB;IAC/B,OAAO,SAAU,MAAM,EAAE,SAAS;QAC9B,0KAAe;4CAAC;gBACZ,MAAM,GAAG,CAAC;gBACV;oDAAO;wBACH,MAAM,MAAM;oBAChB;;YACJ;2CAAG;YAAC,UAAU;SAAU;IAC5B;AACJ","ignoreList":[0]}},
    {"offset": {"line": 3196, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-style-singleton/dist/es2015/component.js"],"sourcesContent":["import { styleHookSingleton } from './hook';\n/**\n * create a Component to add styles on demand\n * - styles are added when first instance is mounted\n * - styles are removed when the last instance is unmounted\n * - changing styles in runtime does nothing unless dynamic is set. But with multiple components that can lead to the undefined behavior\n */\nexport var styleSingleton = function () {\n    var useStyle = styleHookSingleton();\n    var Sheet = function (_a) {\n        var styles = _a.styles, dynamic = _a.dynamic;\n        useStyle(styles, dynamic);\n        return null;\n    };\n    return Sheet;\n};\n"],"names":[],"mappings":";;;;AAAA;;AAOO,IAAI,iBAAiB;IACxB,IAAI,WAAW,IAAA,8LAAkB;IACjC,IAAI,QAAQ,SAAU,EAAE;QACpB,IAAI,SAAS,GAAG,MAAM,EAAE,UAAU,GAAG,OAAO;QAC5C,SAAS,QAAQ;QACjB,OAAO;IACX;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 3215, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/react-style-singleton/dist/es2015/index.js"],"sourcesContent":["export { styleSingleton } from './component';\nexport { stylesheetSingleton } from './singleton';\nexport { styleHookSingleton } from './hook';\n"],"names":[],"mappings":";AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 3226, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/aria-hidden/dist/es2015/index.js"],"sourcesContent":["var getDefaultParent = function (originalTarget) {\n    if (typeof document === 'undefined') {\n        return null;\n    }\n    var sampleTarget = Array.isArray(originalTarget) ? originalTarget[0] : originalTarget;\n    return sampleTarget.ownerDocument.body;\n};\nvar counterMap = new WeakMap();\nvar uncontrolledNodes = new WeakMap();\nvar markerMap = {};\nvar lockCount = 0;\nvar unwrapHost = function (node) {\n    return node && (node.host || unwrapHost(node.parentNode));\n};\nvar correctTargets = function (parent, targets) {\n    return targets\n        .map(function (target) {\n        if (parent.contains(target)) {\n            return target;\n        }\n        var correctedTarget = unwrapHost(target);\n        if (correctedTarget && parent.contains(correctedTarget)) {\n            return correctedTarget;\n        }\n        console.error('aria-hidden', target, 'in not contained inside', parent, '. Doing nothing');\n        return null;\n    })\n        .filter(function (x) { return Boolean(x); });\n};\n/**\n * Marks everything except given node(or nodes) as aria-hidden\n * @param {Element | Element[]} originalTarget - elements to keep on the page\n * @param [parentNode] - top element, defaults to document.body\n * @param {String} [markerName] - a special attribute to mark every node\n * @param {String} [controlAttribute] - html Attribute to control\n * @return {Undo} undo command\n */\nvar applyAttributeToOthers = function (originalTarget, parentNode, markerName, controlAttribute) {\n    var targets = correctTargets(parentNode, Array.isArray(originalTarget) ? originalTarget : [originalTarget]);\n    if (!markerMap[markerName]) {\n        markerMap[markerName] = new WeakMap();\n    }\n    var markerCounter = markerMap[markerName];\n    var hiddenNodes = [];\n    var elementsToKeep = new Set();\n    var elementsToStop = new Set(targets);\n    var keep = function (el) {\n        if (!el || elementsToKeep.has(el)) {\n            return;\n        }\n        elementsToKeep.add(el);\n        keep(el.parentNode);\n    };\n    targets.forEach(keep);\n    var deep = function (parent) {\n        if (!parent || elementsToStop.has(parent)) {\n            return;\n        }\n        Array.prototype.forEach.call(parent.children, function (node) {\n            if (elementsToKeep.has(node)) {\n                deep(node);\n            }\n            else {\n                try {\n                    var attr = node.getAttribute(controlAttribute);\n                    var alreadyHidden = attr !== null && attr !== 'false';\n                    var counterValue = (counterMap.get(node) || 0) + 1;\n                    var markerValue = (markerCounter.get(node) || 0) + 1;\n                    counterMap.set(node, counterValue);\n                    markerCounter.set(node, markerValue);\n                    hiddenNodes.push(node);\n                    if (counterValue === 1 && alreadyHidden) {\n                        uncontrolledNodes.set(node, true);\n                    }\n                    if (markerValue === 1) {\n                        node.setAttribute(markerName, 'true');\n                    }\n                    if (!alreadyHidden) {\n                        node.setAttribute(controlAttribute, 'true');\n                    }\n                }\n                catch (e) {\n                    console.error('aria-hidden: cannot operate on ', node, e);\n                }\n            }\n        });\n    };\n    deep(parentNode);\n    elementsToKeep.clear();\n    lockCount++;\n    return function () {\n        hiddenNodes.forEach(function (node) {\n            var counterValue = counterMap.get(node) - 1;\n            var markerValue = markerCounter.get(node) - 1;\n            counterMap.set(node, counterValue);\n            markerCounter.set(node, markerValue);\n            if (!counterValue) {\n                if (!uncontrolledNodes.has(node)) {\n                    node.removeAttribute(controlAttribute);\n                }\n                uncontrolledNodes.delete(node);\n            }\n            if (!markerValue) {\n                node.removeAttribute(markerName);\n            }\n        });\n        lockCount--;\n        if (!lockCount) {\n            // clear\n            counterMap = new WeakMap();\n            counterMap = new WeakMap();\n            uncontrolledNodes = new WeakMap();\n            markerMap = {};\n        }\n    };\n};\n/**\n * Marks everything except given node(or nodes) as aria-hidden\n * @param {Element | Element[]} originalTarget - elements to keep on the page\n * @param [parentNode] - top element, defaults to document.body\n * @param {String} [markerName] - a special attribute to mark every node\n * @return {Undo} undo command\n */\nexport var hideOthers = function (originalTarget, parentNode, markerName) {\n    if (markerName === void 0) { markerName = 'data-aria-hidden'; }\n    var targets = Array.from(Array.isArray(originalTarget) ? originalTarget : [originalTarget]);\n    var activeParentNode = parentNode || getDefaultParent(originalTarget);\n    if (!activeParentNode) {\n        return function () { return null; };\n    }\n    // we should not hide aria-live elements - https://github.com/theKashey/aria-hidden/issues/10\n    // and script elements, as they have no impact on accessibility.\n    targets.push.apply(targets, Array.from(activeParentNode.querySelectorAll('[aria-live], script')));\n    return applyAttributeToOthers(targets, activeParentNode, markerName, 'aria-hidden');\n};\n/**\n * Marks everything except given node(or nodes) as inert\n * @param {Element | Element[]} originalTarget - elements to keep on the page\n * @param [parentNode] - top element, defaults to document.body\n * @param {String} [markerName] - a special attribute to mark every node\n * @return {Undo} undo command\n */\nexport var inertOthers = function (originalTarget, parentNode, markerName) {\n    if (markerName === void 0) { markerName = 'data-inert-ed'; }\n    var activeParentNode = parentNode || getDefaultParent(originalTarget);\n    if (!activeParentNode) {\n        return function () { return null; };\n    }\n    return applyAttributeToOthers(originalTarget, activeParentNode, markerName, 'inert');\n};\n/**\n * @returns if current browser supports inert\n */\nexport var supportsInert = function () {\n    return typeof HTMLElement !== 'undefined' && HTMLElement.prototype.hasOwnProperty('inert');\n};\n/**\n * Automatic function to \"suppress\" DOM elements - _hide_ or _inert_ in the best possible way\n * @param {Element | Element[]} originalTarget - elements to keep on the page\n * @param [parentNode] - top element, defaults to document.body\n * @param {String} [markerName] - a special attribute to mark every node\n * @return {Undo} undo command\n */\nexport var suppressOthers = function (originalTarget, parentNode, markerName) {\n    if (markerName === void 0) { markerName = 'data-suppressed'; }\n    return (supportsInert() ? inertOthers : hideOthers)(originalTarget, parentNode, markerName);\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3394, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@ably/chat/dist/chat/ably-chat.js","sources":["file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/logger.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/config.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/realtime-subscriptions.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/utils/event-emitter.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/connection.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/id.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/node_modules/dequal/dist/index.mjs","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/events.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/node_modules/lodash.clonedeep/index.js","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/message.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/message-parser.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/serial.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/messages-reactions.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/rest-types.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/messages.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/chat-api.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/errors.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/channel.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/version.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/channel-manager.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/occupancy-parser.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/occupancy.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/presence.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/node_modules/async-mutex/index.mjs","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/room-status.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/room-lifecycle-manager.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/room-options.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/realtime.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/room-reaction.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/room-reaction-parser.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/room-reactions.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/typing.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/room.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/rooms.ts","file:///Users/mohammedvepari/Documents/Algoma%20University/Fall%202025/COSC%204086/move-y-splash-new/node_modules/%40ably/chat/src/core/chat-client.ts"],"sourcesContent":["import * as Ably from 'ably';\n\nimport { NormalizedChatClientOptions } from './config.js';\n\n/**\n * Interface for loggers.\n */\nexport interface Logger {\n  /**\n   * Log a message at the trace level.\n   * @param message The message to log.\n   * @param context The context of the log message as key-value pairs.\n   */\n  trace(message: string, context?: LogContext): void;\n\n  /**\n   * Log a message at the debug level.\n   * @param message The message to log.\n   * @param context The context of the log message as key-value pairs.\n   */\n  debug(message: string, context?: LogContext): void;\n\n  /**\n   * Log a message at the info level.\n   * @param message The message to log.\n   * @param context The context of the log message as key-value pairs.\n   */\n  info(message: string, context?: LogContext): void;\n\n  /**\n   * Log a message at the warn level.\n   * @param message The message to log.\n   * @param context The context of the log message as key-value pairs.\n   */\n  warn(message: string, context?: LogContext): void;\n\n  /**\n   * Log a message at the error level.\n   * @param message The message to log.\n   * @param context The context of the log message as key-value pairs.\n   */\n  error(message: string, context?: LogContext): void;\n\n  /**\n   * Creates a new logger with a context that will be merged with any context provided to individual log calls.\n   * The context will be overridden by any matching keys in the individual log call's context.\n   * @param context The context to use for all log calls.\n   * @returns A new logger instance with the context.\n   */\n  withContext(context: LogContext): Logger;\n}\n\n/**\n * Represents the different levels of logging that can be used.\n */\nexport enum LogLevel {\n  /**\n   * Something routine and expected has occurred. This level will provide logs for the vast majority of operations\n   * and function calls.\n   */\n  Trace = 'trace',\n\n  /**\n   * Development information, messages that are useful when trying to debug library behavior,\n   * but superfluous to normal operation.\n   */\n  Debug = 'debug',\n\n  /**\n   * Informational messages. Operationally significant to the library but not out of the ordinary.\n   */\n  Info = 'info',\n\n  /**\n   * Anything that is not immediately an error, but could cause unexpected behavior in the future. For example,\n   * passing an invalid value to an option. Indicates that some action should be taken to prevent future errors.\n   */\n  Warn = 'warn',\n\n  /**\n   * A given operation has failed and cannot be automatically recovered. The error may threaten the continuity\n   * of operation.\n   */\n  Error = 'error',\n\n  /**\n   * No logging will be performed.\n   */\n  Silent = 'silent',\n}\n\n/**\n * Represents the context of a log message.\n * It is an object of key-value pairs that can be used to provide additional context to a log message.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type LogContext = Record<string, any>;\n\n/**\n * A function that can be used to handle log messages.\n * @param message The message to log.\n * @param level The log level of the message.\n * @param context The context of the log message as key-value pairs.\n */\nexport type LogHandler = (message: string, level: LogLevel, context?: LogContext) => void;\n\n/**\n * A simple console logger that logs messages to the console.\n * @param message The message to log.\n * @param level The log level of the message.\n * @param context - The context of the log message as key-value pairs.\n */\nexport const consoleLogger = (message: string, level: LogLevel, context?: LogContext) => {\n  const contextString = context ? `, context: ${JSON.stringify(context)}` : '';\n  const formattedMessage = `[${new Date().toISOString()}] ${level.valueOf().toUpperCase()} ably-chat: ${message}${contextString}`;\n\n  switch (level) {\n    case LogLevel.Trace:\n    case LogLevel.Debug: {\n      console.log(formattedMessage);\n      break;\n    }\n    case LogLevel.Info: {\n      console.info(formattedMessage);\n      break;\n    }\n    case LogLevel.Warn: {\n      console.warn(formattedMessage);\n      break;\n    }\n    case LogLevel.Error: {\n      console.error(formattedMessage);\n      break;\n    }\n    case LogLevel.Silent: {\n      break;\n    }\n  }\n};\n\nexport const makeLogger = (options: NormalizedChatClientOptions): Logger => {\n  const logHandler = options.logHandler ?? consoleLogger;\n\n  return new DefaultLogger(logHandler, options.logLevel);\n};\n\n/**\n * A convenient list of log levels as numbers that can be used for easier comparison.\n */\nenum LogLevelNumber {\n  Trace = 0,\n  Debug = 1,\n  Info = 2,\n  Warn = 3,\n  Error = 4,\n  Silent = 5,\n}\n\n/**\n * A mapping of log levels to their numeric equivalents.\n */\nconst logLevelNumberMap = new Map<LogLevel, LogLevelNumber>([\n  [LogLevel.Trace, LogLevelNumber.Trace],\n  [LogLevel.Debug, LogLevelNumber.Debug],\n  [LogLevel.Info, LogLevelNumber.Info],\n  [LogLevel.Warn, LogLevelNumber.Warn],\n  [LogLevel.Error, LogLevelNumber.Error],\n  [LogLevel.Silent, LogLevelNumber.Silent],\n]);\n\n/**\n * A default logger implementation.\n */\nclass DefaultLogger implements Logger {\n  private readonly _handler: LogHandler;\n  private readonly _levelNumber: LogLevelNumber;\n  private readonly _context?: LogContext;\n\n  constructor(handler: LogHandler, level: LogLevel, context?: LogContext) {\n    this._handler = handler;\n    this._context = context;\n\n    const levelNumber = logLevelNumberMap.get(level);\n    if (levelNumber === undefined) {\n      throw new Ably.ErrorInfo(`Invalid log level: ${level}`, 50000, 500);\n    }\n\n    this._levelNumber = levelNumber;\n  }\n\n  trace(message: string, context?: LogContext): void {\n    this._write(message, LogLevel.Trace, LogLevelNumber.Trace, context);\n  }\n\n  debug(message: string, context?: LogContext): void {\n    this._write(message, LogLevel.Debug, LogLevelNumber.Debug, context);\n  }\n\n  info(message: string, context?: LogContext): void {\n    this._write(message, LogLevel.Info, LogLevelNumber.Info, context);\n  }\n\n  warn(message: string, context?: LogContext): void {\n    this._write(message, LogLevel.Warn, LogLevelNumber.Warn, context);\n  }\n\n  error(message: string, context?: LogContext): void {\n    this._write(message, LogLevel.Error, LogLevelNumber.Error, context);\n  }\n\n  withContext(context: LogContext): Logger {\n    // Get the original log level by finding the key in logLevelNumberMap that matches this._levelNumber\n    const originalLevel =\n      [...logLevelNumberMap.entries()].find(([, value]) => value === this._levelNumber)?.[0] ?? LogLevel.Error;\n\n    return new DefaultLogger(this._handler, originalLevel, this._mergeContext(context));\n  }\n\n  private _write(message: string, level: LogLevel, levelNumber: LogLevelNumber, context?: LogContext): void {\n    if (levelNumber >= this._levelNumber) {\n      this._handler(message, level, this._mergeContext(context));\n    }\n  }\n\n  private _mergeContext(context?: LogContext): LogContext | undefined {\n    if (!this._context) {\n      return context ?? undefined;\n    }\n\n    return context ? { ...this._context, ...context } : this._context;\n  }\n}\n","import { LogHandler, LogLevel } from './logger.js';\n\n/**\n * Configuration options for the chat client.\n */\nexport interface ChatClientOptions {\n  /**\n   * A custom log handler that will be used to log messages from the client.\n   * @defaultValue The client will log messages to the console.\n   */\n  logHandler?: LogHandler;\n\n  /**\n   * The minimum log level at which messages will be logged.\n   * @defaultValue LogLevel.error\n   */\n  logLevel?: LogLevel;\n}\n\n/**\n * Default configuration options for the chat client.\n */\nconst defaultClientOptions = {\n  logLevel: LogLevel.Error,\n};\n\n/**\n * This type is used to modify the properties of one type with the properties of another type and thus\n * can be used to turn client options into normalized client options.\n */\ntype Modify<T, R> = Omit<T, keyof R> & R;\n\n/**\n * These are the normalized client options, with default values filled in for any missing properties.\n */\nexport type NormalizedChatClientOptions = Modify<\n  ChatClientOptions,\n  {\n    logLevel: LogLevel;\n  }\n>;\n\nexport const normalizeClientOptions = (options?: ChatClientOptions): NormalizedChatClientOptions => {\n  options = options ?? {};\n\n  return {\n    ...options,\n    logLevel: options.logLevel ?? defaultClientOptions.logLevel,\n  };\n};\n","/**\n * Interface for objects that support listeners via the on/off pattern.\n */\nexport interface Onable<T> {\n  /**\n   * Subscribe to events with a callback.\n   * @param callback The callback function to be called when events occur.\n   */\n  on(callback: (data: T) => void): void;\n\n  /**\n   * Subscribe to specific events, with a callback.\n   * @param events The events to subscribe to.\n   * @param callback The callback function to be called when events occur.\n   */\n  on(events: string[] | string, callback: (data: T) => void): void;\n\n  /**\n   * Subscribe to all events, once.\n   */\n  once(callback: (data: T) => void): void;\n\n  /**\n   * Subscribe to specific events, once.\n   */\n  once(events: string[] | string, callback: (data: T) => void): void;\n\n  /**\n   * Unsubscribe from events with a callback.\n   * @param callback The callback function to remove from the subscription.\n   */\n  off(callback: (data: T) => void): void;\n}\n\n/**\n * Interface for objects that support listeners via the subscribe/unsubscribe pattern.\n */\nexport interface Subscribable<T> {\n  /**\n   * Subscribe to events with a callback.\n   * @param callback The callback function to be called when events occur.\n   */\n  subscribe(callback: (data: T) => void): Promise<unknown>;\n\n  /**\n   * Subscribe to specific events, with a callback.\n   * @param events The events to subscribe to.\n   * @param callback The callback function to be called when events occur.\n   */\n  subscribe(events: string[] | string, callback: (data: T) => void): Promise<unknown>;\n\n  /**\n   * Unsubscribe from events with a callback.\n   * @param callback The callback function to remove from the subscription.\n   */\n  unsubscribe(callback: (data: T) => void): void;\n}\n\n/**\n * Subscribe to events on an emitter and return a cleanup function.\n *\n * Overload 1: Subscribe to all events.\n * Overload 2: Subscribe to specific events (string or string[]).\n * @param emitter The event emitter object that has `on` and `off` methods.\n * @param callback The callback function to be called when events occur.\n * @returns A cleanup function that when called will unsubscribe the callback.\n */\nexport function on<T>(emitter: Onable<T>, callback: (data: T) => void): () => void;\nexport function on<T>(emitter: Onable<T>, events: string | string[], callback: (data: T) => void): () => void;\n\n/**\n * @param emitter The event emitter object that has `on` and `off` methods.\n * @param arg2 Either a callback function (for subscribing to all events) or event names (string or string[]) to subscribe to specific events.\n * @param arg3 The callback function to be called when events occur (only used when arg2 is event names).\n * @returns A cleanup function that when called will unsubscribe the callback.\n * @throws {TypeError} If the arguments passed are invalid.\n * @example\n * ```typescript\n * // Subscribe to all events\n * const cleanup = on(emitter, (data) => console.log(data));\n * // Subscribe to specific events\n * const cleanup = on(emitter, 'eventName', (data) => console.log(data));\n * const cleanup = on(emitter, ['event1', 'event2'], (data) => console.log(data));\n * ```\n */\nexport function on<T>(\n  emitter: Onable<T>,\n  arg2: ((data: T) => void) | string | string[],\n  arg3?: (data: T) => void,\n): () => void {\n  if ((Array.isArray(arg2) || typeof arg2 === 'string') && arg3) {\n    emitter.on(arg2, arg3);\n    return () => {\n      emitter.off(arg3);\n    };\n  } else if (typeof arg2 === 'function') {\n    emitter.on(arg2);\n    return () => {\n      emitter.off(arg2);\n    };\n  } else {\n    throw new TypeError('Invalid arguments passed to on()');\n  }\n}\n\n/**\n * Subscribe to events on an emitter and return a cleanup function.\n *\n * Overload 1: Subscribe to all events once.\n * Overload 2: Subscribe to specific events (string or string[]) once.\n * @param emitter The event emitter object that has `once` and `off` methods.\n * @param callback The callback function to be called when events occur.\n * @returns A cleanup function that when called will unsubscribe the callback.\n * @example\n * ```typescript\n * // Subscribe to all events once\n * const cleanup = once(emitter, (data) => console.log(data));\n * // Subscribe to specific events once\n * const cleanup = once(emitter, 'eventName', (data) => console.log(data));\n * const cleanup = once(emitter, ['event1', 'event2'], (data) => console.log(data));\n * ```\n */\nexport function once<T>(emitter: Onable<T>, callback: (data: T) => void): () => void;\nexport function once<T>(emitter: Onable<T>, events: string | string[], callback: (data: T) => void): () => void;\n/**\n * @param emitter The event emitter object that has `once` and `off` methods.\n * @param arg2 Either a callback function (for subscribing to all events) or event names (string or string[]) to subscribe to specific events.\n * @param arg3 The callback function to be called when events occur (only used when arg2 is event names).\n * @returns A cleanup function that when called will unsubscribe the callback.\n */\nexport function once<T>(\n  emitter: Onable<T>,\n  arg2: ((data: T) => void) | string | string[],\n  arg3?: (data: T) => void,\n): () => void {\n  if ((Array.isArray(arg2) || typeof arg2 === 'string') && arg3) {\n    emitter.once(arg2, arg3);\n    return () => {\n      emitter.off(arg3);\n    };\n  } else if (typeof arg2 === 'function') {\n    emitter.once(arg2);\n    return () => {\n      emitter.off(arg2);\n    };\n  } else {\n    throw new TypeError('Invalid arguments passed to once()');\n  }\n}\n\n/**\n * Subscribe to events on an emitter and return a cleanup function.\n *\n * Overload 1: Subscribe to all events.\n * Overload 2: Subscribe to specific events (string or string[]).\n * @param emitter The event emitter object that has `subscribe` and `unsubscribe` methods.\n * @param callback The callback function to be called when events occur (only used when first parameter is event names).\n * @returns A cleanup function that when called will unsubscribe the callback.\n * @example\n * ```typescript\n * // Subscribe to all events\n * const unsubscribe = subscribe(emitter, (data) => console.log(data));\n *\n * // Subscribe to specific events\n * const unsubscribe = subscribe(emitter, 'eventName', (data) => console.log(data));\n * const unsubscribe = subscribe(emitter, ['event1', 'event2'], (data) => console.log(data));\n * ```\n */\nexport function subscribe<T>(emitter: Subscribable<T>, callback: (data: T) => void): () => void;\nexport function subscribe<T>(\n  emitter: Subscribable<T>,\n  events: string | string[],\n  callback: (data: T) => void,\n): () => void;\n/**\n * Subscribe to events on an emitter and return a cleanup function.\n * This is the implementation function that handles both overloads.\n * @param emitter The event emitter object that has `subscribe` and `unsubscribe` methods.\n * @param arg2 Either a callback function (for subscribing to all events) or event names (string or string[]) to subscribe to specific events.\n * @param arg3 The callback function to be called when events occur (only used when arg2 is event names).\n * @returns A cleanup function that when called will unsubscribe the callback.\n */\nexport function subscribe<T>(\n  emitter: Subscribable<T>,\n  arg2: ((data: T) => void) | string | string[],\n  arg3?: (data: T) => void,\n): () => void {\n  if ((Array.isArray(arg2) || typeof arg2 === 'string') && arg3) {\n    const subscribePromise = emitter.subscribe(arg2, arg3);\n    return () => {\n      subscribePromise\n        .then(() => {\n          emitter.unsubscribe(arg3);\n        })\n        .catch((error: unknown) => {\n          console.error('Error subscribing to events:', error);\n        });\n    };\n  } else if (typeof arg2 === 'function') {\n    const subscribePromise = emitter.subscribe(arg2);\n    return () => {\n      subscribePromise\n        .then(() => {\n          emitter.unsubscribe(arg2);\n        })\n        .catch((error: unknown) => {\n          console.error('Error subscribing to events:', error);\n        });\n    };\n  } else {\n    throw new TypeError('Invalid arguments passed to subscribe()');\n  }\n}\n","import * as Ably from 'ably';\n\n/**\n * This type represents a callback that can be registered with an EventEmitter.\n *\n * The EventsMap is an interface of event names to the types of the payloads of\n * those events. For example:\n *\n *     interface MyEvents {\n *         reaction: {emoji: string}\n *     }\n *\n * There is no need to use this type directly, it is used for defining the\n * InterfaceEventEmitter.\n */\ntype Callback<EventsMap> = (arg: EventsMap[keyof EventsMap]) => void;\ntype CallbackSingle<K> = (arg: K) => void;\n\n/**\n * This interface extends the Ably.EventEmitter interface to add a type-safe\n * emit method as well as convert an EventsMap into the type parameters used by\n * Ably.EventEmitter.\n */\ninterface InterfaceEventEmitter<EventsMap> extends Ably.EventEmitter<Callback<EventsMap>, void, keyof EventsMap> {\n  emit<K extends keyof EventsMap>(event: K, arg: EventsMap[K]): void;\n\n  on<K extends keyof EventsMap>(event: K, callback: CallbackSingle<EventsMap[K]>): void;\n  on<K1 extends keyof EventsMap, K2 extends keyof EventsMap>(\n    events: [K1, K2],\n    callback: CallbackSingle<EventsMap[K1] | EventsMap[K2]>,\n  ): void;\n  on<K1 extends keyof EventsMap, K2 extends keyof EventsMap, K3 extends keyof EventsMap>(\n    events: [K1, K2, K3],\n    callback: CallbackSingle<EventsMap[K1] | EventsMap[K2] | EventsMap[K3]>,\n  ): void;\n  on(events: (keyof EventsMap)[], callback: Callback<EventsMap>): void;\n  on(callback: Callback<EventsMap>): void;\n\n  off<K extends keyof EventsMap>(event: K, listener: CallbackSingle<EventsMap[K]>): void;\n  off(listener?: Callback<EventsMap>): void;\n  off<K extends EventsMap[keyof EventsMap]>(listener: CallbackSingle<K>): void;\n}\n\n/**\n * This is a workaround for the fact that the EventEmitter constructor is only\n * exported from the ably-js package for internal use by other Ably SDKs (like\n * this one).\n *\n * It is a correctly-typed constructor for the ably-js EventEmitter.\n *\n * We do not export this directly because we prefer to export a class, which is\n * what we normally expect EventEmitter to be.\n */\nconst InternalEventEmitter: new <EventsMap>() => InterfaceEventEmitter<EventsMap> = (\n  Ably.Realtime as unknown as { EventEmitter: new <EventsMap>() => InterfaceEventEmitter<EventsMap> }\n).EventEmitter;\n\n/**\n * EventEmitter class based on the internal ably-js EventEmitter. It is\n * different from the ably-js EventEmitter because it takes an EventsMap type\n * parameter as opposed to the three type parameters required by\n * {@link Ably.EventEmitter}.\n *\n * We find the EventsMap type parameter to be more convenient to use in this\n * Chat SDK.\n *\n * The EventsMap is an interface of event names to the types of the payloads of\n * those events. For example:\n *\n *     interface MyEvents {\n *         reaction: {emoji: string}\n *     }\n *\n * There is no need to use this type directly, it is used for defining the\n * InterfaceEventEmitter.\n */\nclass EventEmitter<EventsMap> extends InternalEventEmitter<EventsMap> {}\n\nexport default EventEmitter;\n\n/**\n * Creates a wrapper function that forwards all arguments to the provided function.\n * @param fn The function to wrap\n * @returns A new function with the same signature as the input function\n */\nexport const wrap =\n  <Args extends unknown[], Return>(fn: (...args: Args) => Return): ((...args: Args) => Return) =>\n  (...args: Args) =>\n    fn(...args);\n\n/**\n * Checks if an EventEmitter has any listeners registered.\n * @param emitter The EventEmitter instance to check\n * @returns true if the emitter has listeners, false otherwise\n */\nexport const emitterHasListeners = <EventsMap>(emitter: EventEmitter<EventsMap>): boolean => {\n  const destructured = emitter as unknown as {\n    events: Record<string, unknown[]>;\n    any: unknown[];\n    eventsOnce: Record<string, unknown[]>;\n    anyOnce: unknown[];\n  };\n\n  const numListeners =\n    Object.values(destructured.events).flat().length +\n    destructured.any.length +\n    Object.values(destructured.eventsOnce).flat().length +\n    destructured.anyOnce.length;\n\n  return numListeners ? numListeners > 0 : false;\n};\n","import * as Ably from 'ably';\n\nimport { Logger } from './logger.js';\nimport { on } from './realtime-subscriptions.js';\nimport { StatusSubscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * The different states that the connection can be in through its lifecycle.\n */\nexport enum ConnectionStatus {\n  /**\n   * A temporary state for when the library is first initialized.\n   */\n  Initialized = 'initialized',\n\n  /**\n   * The library is currently connecting to Ably.\n   */\n  Connecting = 'connecting',\n\n  /**\n   * The library is currently connected to Ably.\n   */\n  Connected = 'connected',\n\n  /**\n   * The library is currently disconnected from Ably, but will attempt to reconnect.\n   */\n  Disconnected = 'disconnected',\n\n  /**\n   * The library is in an extended state of disconnection, but will attempt to reconnect.\n   */\n  Suspended = 'suspended',\n\n  /**\n   * The library is currently disconnected from Ably and will not attempt to reconnect.\n   */\n  Failed = 'failed',\n}\n\n/**\n * Represents a change in the status of the connection.\n */\nexport interface ConnectionStatusChange {\n  /**\n   * The new status of the connection.\n   */\n  current: ConnectionStatus;\n\n  /**\n   * The previous status of the connection.\n   */\n  previous: ConnectionStatus;\n\n  /**\n   * An error that provides a reason why the connection has\n   * entered the new status, if applicable.\n   */\n  error?: Ably.ErrorInfo;\n\n  /**\n   * The time in milliseconds that the client will wait before attempting to reconnect.\n   */\n  retryIn?: number;\n}\n\n/**\n * A function that can be called when the connection status changes.\n * @param change The change in status.\n */\nexport type ConnectionStatusListener = (change: ConnectionStatusChange) => void;\n\n/**\n * Represents a connection to Ably.\n */\nexport interface Connection {\n  /**\n   * The current status of the connection.\n   */\n  get status(): ConnectionStatus;\n\n  /**\n   * The current error, if any, that caused the connection to enter the current status.\n   */\n  get error(): Ably.ErrorInfo | undefined;\n\n  /**\n   * Registers a listener that will be called whenever the connection status changes.\n   * @param listener The function to call when the status changes.\n   * @returns An object that can be used to unregister the listener.\n   */\n  onStatusChange(listener: ConnectionStatusListener): StatusSubscription;\n}\n\n/**\n * An internal interface for the connection with additional methods.\n */\nexport interface InternalConnection extends Connection {\n  /**\n   * Disposes of the connection instance, cleaning up any registered listeners.\n   * This method should be called when the connection is no longer needed.\n   * @internal\n   */\n  dispose(): void;\n}\n\ntype ConnectionEventsMap = Record<ConnectionStatus, ConnectionStatusChange>;\n\n/**\n * An implementation of the `Connection` interface.\n * @internal\n */\nexport class DefaultConnection implements InternalConnection {\n  private _status: ConnectionStatus = ConnectionStatus.Initialized;\n  private _error?: Ably.ErrorInfo;\n  private readonly _logger: Logger;\n  private _emitter = new EventEmitter<ConnectionEventsMap>();\n  private readonly _clearAblyConnectionListener: () => void;\n\n  /**\n   * Constructs a new `DefaultConnection` instance.\n   * @param ably The Ably Realtime client.\n   * @param logger The logger to use.\n   */\n  constructor(ably: Ably.Realtime, logger: Logger) {\n    this._logger = logger;\n\n    // Set our initial status and error\n    // CHA-RS5\n    this._status = this._mapAblyStatusToChat(ably.connection.state);\n    this._error = ably.connection.errorReason;\n\n    // Store the listener function so we can dispose of it later\n    const connectionListener = (change: Ably.ConnectionStateChange) => {\n      const chatState = this._mapAblyStatusToChat(change.current);\n      if (chatState === this._status) {\n        return;\n      }\n\n      const stateChange: ConnectionStatusChange = {\n        current: chatState,\n        previous: this._status,\n        error: change.reason,\n        retryIn: change.retryIn,\n      };\n\n      this._applyStatusChange(stateChange);\n    };\n\n    // Use subscription helper to create cleanup function\n    this._clearAblyConnectionListener = on(ably.connection, connectionListener);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get status(): ConnectionStatus {\n    return this._status;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get error(): Ably.ErrorInfo | undefined {\n    return this._error;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  onStatusChange(listener: ConnectionStatusListener): StatusSubscription {\n    const wrapped = wrap(listener);\n    this._emitter.on(wrapped);\n\n    return {\n      off: () => {\n        this._emitter.off(wrapped);\n      },\n    };\n  }\n\n  /**\n   * @inheritdoc\n   */\n  dispose(): void {\n    this._logger.trace('DefaultConnection.dispose();');\n    // Remove the connection state listener from the Ably connection\n    this._clearAblyConnectionListener();\n    // Clear all listeners from the internal emitter\n    this._emitter.off();\n  }\n\n  /**\n   * Checks if there are any listeners registered on the connection.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._emitter);\n  }\n\n  private _applyStatusChange(change: ConnectionStatusChange): void {\n    this._status = change.current;\n    this._error = change.error;\n    this._logger.info(`Connection state changed`, change);\n    this._emitter.emit(change.current, change);\n  }\n\n  private _mapAblyStatusToChat(status: Ably.ConnectionState): ConnectionStatus {\n    switch (status) {\n      case 'closing':\n      case 'closed': {\n        return ConnectionStatus.Failed;\n      }\n      default: {\n        return status as ConnectionStatus;\n      }\n    }\n  }\n}\n","/**\n * Generates a random string that can be used as an identifier, for instance, in identifying specific room\n * objects.\n * @returns A random string that can be used as an identifier.\n */\nexport const randomId = (): string => Math.random().toString(36).slice(2);\n","var has = Object.prototype.hasOwnProperty;\n\nfunction find(iter, tar, key) {\n\tfor (key of iter.keys()) {\n\t\tif (dequal(key, tar)) return key;\n\t}\n}\n\nexport function dequal(foo, bar) {\n\tvar ctor, len, tmp;\n\tif (foo === bar) return true;\n\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\n\t\tif (ctor === Array) {\n\t\t\tif ((len=foo.length) === bar.length) {\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (ctor === Set) {\n\t\t\tif (foo.size !== bar.size) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (len of foo) {\n\t\t\t\ttmp = len;\n\t\t\t\tif (tmp && typeof tmp === 'object') {\n\t\t\t\t\ttmp = find(bar, tmp);\n\t\t\t\t\tif (!tmp) return false;\n\t\t\t\t}\n\t\t\t\tif (!bar.has(tmp)) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (ctor === Map) {\n\t\t\tif (foo.size !== bar.size) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (len of foo) {\n\t\t\t\ttmp = len[0];\n\t\t\t\tif (tmp && typeof tmp === 'object') {\n\t\t\t\t\ttmp = find(bar, tmp);\n\t\t\t\t\tif (!tmp) return false;\n\t\t\t\t}\n\t\t\t\tif (!dequal(len[1], bar.get(tmp))) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (ctor === ArrayBuffer) {\n\t\t\tfoo = new Uint8Array(foo);\n\t\t\tbar = new Uint8Array(bar);\n\t\t} else if (ctor === DataView) {\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\n\t\t\t\twhile (len-- && foo.getInt8(len) === bar.getInt8(len));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (ArrayBuffer.isView(foo)) {\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\n\t\t\t\twhile (len-- && foo[len] === bar[len]);\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (!ctor || typeof foo === 'object') {\n\t\t\tlen = 0;\n\t\t\tfor (ctor in foo) {\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\n\t\t\t}\n\t\t\treturn Object.keys(bar).length === len;\n\t\t}\n\t}\n\n\treturn foo !== foo && bar !== bar;\n}\n","import * as Ably from 'ably';\n\nimport { Message } from './message.js';\nimport { RoomReaction } from './room-reaction.js';\n\n/**\n * All chat message events.\n */\nexport enum ChatMessageEventType {\n  /** Fires when a new chat message is received. */\n  Created = 'message.created',\n\n  /** Fires when a chat message is updated. */\n  Updated = 'message.updated',\n\n  /** Fires when a chat message is deleted. */\n  Deleted = 'message.deleted',\n}\n\n/**\n * Realtime chat message names.\n */\nexport enum RealtimeMessageName {\n  /** Represents a regular chat message. */\n  ChatMessage = 'chat.message',\n}\n\n/**\n * Realtime meta event types.\n */\nexport enum RealtimeMetaEventType {\n  /** Represents a meta occupancy event. */\n  Occupancy = '[meta]occupancy',\n}\n\n/**\n * Chat Message Actions.\n */\nexport enum ChatMessageAction {\n  /** Action applied to a new message. */\n  MessageCreate = 'message.create',\n\n  /** Action applied to an updated message. */\n  MessageUpdate = 'message.update',\n\n  /** Action applied to a deleted message. */\n  MessageDelete = 'message.delete',\n\n  /** Action applied to an annotation summary message. */\n  MessageAnnotationSummary = 'message.summary',\n\n  /** Action applied to a meta occupancy message. */\n  MessageMetaOccupancy = 'meta.occupancy',\n}\n\n/**\n * Enum representing presence events.\n */\nexport enum PresenceEventType {\n  /**\n   * Event triggered when a user enters.\n   */\n  Enter = 'enter',\n\n  /**\n   * Event triggered when a user leaves.\n   */\n  Leave = 'leave',\n\n  /**\n   * Event triggered when a user updates their presence data.\n   */\n  Update = 'update',\n  /**\n   * Event triggered when a user initially subscribes to presence.\n   */\n  Present = 'present',\n}\n\n/**\n * Enum representing the typing event types.\n */\nexport enum TypingEventType {\n  /**\n   * Event triggered when a user is typing.\n   */\n  Started = 'typing.started',\n\n  /**\n   * Event triggered when a user stops typing.\n   */\n  Stopped = 'typing.stopped',\n}\n\n/**\n * Enum representing the typing set event types.\n */\nexport enum TypingSetEventType {\n  /**\n   * Event triggered when a change occurs in the set of typers.\n   */\n  SetChanged = 'typing.set.changed',\n}\n\n/**\n * Represents a change in the state of current typers.\n */\nexport interface TypingSetEvent {\n  /**\n   * The type of the event.\n   */\n  type: TypingSetEventType;\n\n  /**\n   * The set of clientIds that are currently typing.\n   */\n  currentlyTyping: Set<string>;\n\n  /**\n   * Represents the change that resulted in the new set of typers.\n   */\n  change: {\n    /**\n     * The client ID of the user who stopped/started typing.\n     */\n    clientId: string;\n\n    /**\n     * Type of the change.\n     */\n    type: TypingEventType;\n  };\n}\n\n/**\n * Room reaction events. This is used for the realtime system since room reactions\n * have only one event: \"roomReaction\".\n */\nexport enum RoomReactionRealtimeEventType {\n  /**\n   * Event triggered when a room reaction was received.\n   */\n  Reaction = 'roomReaction',\n}\n\n/**\n * The type of room reaction events.\n */\nexport enum RoomReactionEventType {\n  /**\n   * Event triggered when a room reaction was received.\n   */\n  Reaction = 'reaction',\n}\n\n/**\n * Event that is emitted when a room reaction is received.\n */\nexport interface RoomReactionEvent {\n  /**\n   * The type of the event.\n   */\n  readonly type: RoomReactionEventType;\n\n  /**\n   * The reaction that was received.\n   */\n  readonly reaction: RoomReaction;\n}\n\n/**\n * Payload for a message event.\n */\nexport interface ChatMessageEvent {\n  /**\n   * The type of the message event.\n   */\n  type: ChatMessageEventType;\n\n  /**\n   * The message that was received.\n   */\n  message: Message;\n}\n\n/**\n * All annotation types supported by Chat Message Reactions.\n */\nexport enum MessageReactionType {\n  /**\n   * Allows for at most one reaction per client per message. If a client reacts\n   * to a message a second time, only the second reaction is counted in the\n   * summary.\n   *\n   * This is similar to reactions on iMessage, Facebook Messenger or WhatsApp.\n   */\n  Unique = 'unique',\n\n  /**\n   * Allows for at most one reaction of each type per client per message. It is\n   * possible for a client to add multiple reactions to the same message as\n   * long as they are different (eg different emojis). Duplicates are not\n   * counted in the summary.\n   *\n   * This is similar to reactions on Slack.\n   */\n  Distinct = 'distinct',\n\n  /**\n   * Allows any number of reactions, including repeats, and they are counted in\n   * the summary. The reaction payload also includes a count of how many times\n   * each reaction should be counted (defaults to 1 if not set).\n   *\n   * This is similar to the clap feature on Medium or how room reactions work.\n   */\n  Multiple = 'multiple',\n}\n\n/**\n * Enum representing the different annotation types used for message reactions.\n */\nexport enum ReactionAnnotationType {\n  Unique = 'reaction:unique.v1',\n  Distinct = 'reaction:distinct.v1',\n  Multiple = 'reaction:multiple.v1',\n}\n\n/**\n * Maps Ably PubSub annotation types to Ably Chat message reaction types.\n *\n * The key type is string because we use it to lookup by PubSub event.type, which is a string.\n */\nexport const AnnotationTypeToReactionType: Record<string, MessageReactionType> = {\n  [ReactionAnnotationType.Unique]: MessageReactionType.Unique,\n  [ReactionAnnotationType.Distinct]: MessageReactionType.Distinct,\n  [ReactionAnnotationType.Multiple]: MessageReactionType.Multiple,\n} as const;\n\n/**\n * Enum representing different message reaction events in the chat system.\n */\nexport enum MessageReactionEventType {\n  /**\n   * A reaction was added to a message.\n   */\n  Create = 'reaction.create',\n  /**\n   * A reaction was removed from a message.\n   */\n  Delete = 'reaction.delete',\n  /**\n   * A reactions summary was updated for a message.\n   */\n  Summary = 'reaction.summary',\n}\n\n/**\n * Represents an individual message reaction event.\n */\nexport interface MessageReactionRawEvent {\n  /** Whether reaction was added or removed */\n  type: MessageReactionEventType.Create | MessageReactionEventType.Delete;\n\n  /** The timestamp of this event */\n  timestamp: Date;\n\n  /** The message reaction that was received. */\n  reaction: {\n    /** Serial of the message this reaction is for */\n    messageSerial: string;\n\n    /** Type of reaction */\n    type: MessageReactionType;\n\n    /** The reaction name (typically an emoji) */\n    name: string;\n\n    /** Count of the reaction (only for type Multiple, if set) */\n    count?: number;\n\n    /** The client ID of the user who added/removed the reaction */\n    clientId: string;\n  };\n}\n\n/**\n * Event interface representing a summary of message reactions.\n * This event aggregates different types of reactions (single, distinct, counter) for a specific message.\n */\nexport interface MessageReactionSummaryEvent {\n  /** The type of the event */\n  type: MessageReactionEventType.Summary;\n\n  /** The message reactions summary. */\n  summary: {\n    /** Reference to the original message's serial number */\n    messageSerial: string;\n\n    /** Map of unique-type reactions summaries */\n    unique: Ably.SummaryUniqueValues;\n\n    /** Map of distinct-type reactions summaries */\n    distinct: Ably.SummaryDistinctValues;\n\n    /** Map of multiple-type reactions summaries */\n    multiple: Ably.SummaryMultipleValues;\n  };\n}\n\n/**\n * Enum representing occupancy events.\n */\nexport enum OccupancyEventType {\n  /**\n   * Event triggered when occupancy is updated.\n   */\n  Updated = 'occupancy.updated',\n}\n\n/**\n * Represents an occupancy event.\n */\nexport interface OccupancyEvent {\n  /**\n   * The type of the occupancy event.\n   */\n  type: OccupancyEventType;\n\n  /**\n   * The occupancy data.\n   */\n  occupancy: {\n    /**\n     * The number of connections to the chat room.\n     */\n    connections: number;\n\n    /**\n     * The number of presence members in the chat room - members who have entered presence.\n     */\n    presenceMembers: number;\n  };\n}\n\n/**\n * Room events.\n */\nexport enum RoomEventType {\n  /**\n   * Event triggered when a discontinuity is detected in the room's channel connection.\n   * A discontinuity occurs when an attached or update event comes from the channel with resume=false,\n   * except for the first attach or attaches after explicit detach calls.\n   */\n  Discontinuity = 'room.discontinuity',\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","import * as Ably from 'ably';\nimport cloneDeep from 'lodash.clonedeep';\n\nimport {\n  ChatMessageAction,\n  ChatMessageEvent,\n  ChatMessageEventType,\n  MessageReactionEventType,\n  MessageReactionSummaryEvent,\n} from './events.js';\nimport { Headers } from './headers.js';\nimport { Metadata } from './metadata.js';\nimport { OperationMetadata } from './operation-metadata.js';\n\n/**\n * {@link Headers} type for chat messages.\n */\nexport type MessageHeaders = Headers;\n\n/**\n * {@link Metadata} type for chat messages.\n */\nexport type MessageMetadata = Metadata;\n\n/**\n * {@link OperationMetadata} type for a chat message. Contains information about an update or deletion operation.\n */\nexport type MessageOperationMetadata = OperationMetadata;\n\n/**\n * Represents the detail of a message deletion or update.\n */\nexport interface MessageVersion {\n  /**\n   * A unique identifier for the latest version of this message.\n   */\n  serial: string;\n\n  /**\n   * The timestamp at which this version was updated, deleted, or created.\n   */\n  timestamp: Date;\n\n  /**\n   * The optional clientId of the user who performed an update or deletion.\n   */\n  clientId?: string;\n\n  /**\n   * The optional description for an update or deletion.\n   */\n  description?: string;\n\n  /**\n   * The optional metadata associated with an update or deletion.\n   */\n  metadata?: MessageOperationMetadata;\n}\n\n/**\n * Represents a single message in a chat room.\n */\nexport interface Message {\n  /**\n   * The unique identifier of the message.\n   */\n  readonly serial: string;\n\n  /**\n   * The clientId of the user who created the message.\n   */\n  readonly clientId: string;\n\n  /**\n   * The text of the message.\n   */\n  readonly text: string;\n\n  /**\n   * The timestamp at which the message was created.\n   */\n  readonly timestamp: Date;\n\n  /**\n   * The metadata of a chat message. Allows for attaching extra info to a message,\n   * which can be used for various features such as animations, effects, or simply\n   * to link it to other resources such as images, relative points in time, etc.\n   *\n   * Metadata is part of the Ably Pub/sub message content and is not read by Ably.\n   *\n   * This value is always set. If there is no metadata, this is an empty object.\n   *\n   * Do not use metadata for authoritative information. There is no server-side\n   * validation. When reading the metadata treat it like user input.\n   */\n  readonly metadata: MessageMetadata;\n\n  /**\n   * The headers of a chat message. Headers enable attaching extra info to a message,\n   * which can be used for various features such as linking to a relative point in\n   * time of a livestream video or flagging this message as important or pinned.\n   *\n   * Headers are part of the Ably realtime message extras.headers and they can be used\n   * for Filtered Subscriptions and similar.\n   *\n   * This value is always set. If there are no headers, this is an empty object.\n   *\n   * Do not use the headers for authoritative information. There is no server-side\n   * validation. When reading the headers, treat them like user input.\n   */\n  readonly headers: MessageHeaders;\n\n  /**\n   * The action type of the message. This can be used to determine if the message was created, updated, or deleted.\n   */\n  readonly action: ChatMessageAction;\n\n  /**\n   * Information about the latest version of this message.\n   */\n  readonly version: MessageVersion;\n\n  /**\n   * The reactions summary for this message.\n   */\n  readonly reactions: MessageReactions;\n\n  /**\n   * Indicates if the message has been updated.\n   */\n  get isUpdated(): boolean;\n\n  /**\n   * Indicates if the message has been deleted.\n   */\n  get isDeleted(): boolean;\n\n  /**\n   * The clientId of the user who deleted the message.\n   */\n  get deletedBy(): string | undefined;\n\n  /**\n   * The clientId of the user who updated the message.\n   */\n  get updatedBy(): string | undefined;\n\n  /**\n   * The timestamp at which the message was deleted.\n   */\n  get deletedAt(): Date | undefined;\n\n  /**\n   * The timestamp at which the message was updated.\n   */\n  get updatedAt(): Date | undefined;\n\n  /**\n   * Determines if this message is an older version of the given message.\n   *\n   * **Note** that negating this function does not mean that the message is a newer\n   * version of the same message, as the two may be different messages entirely.\n   *\n   * ```ts\n   *  !message.isOlderVersionOf(other) !== message.isNewerVersionOf(other)\n   * ```\n   * @param message The message to compare against.\n   * @returns true if the two messages are the same message (isSameAs returns true) and this message is an older version.\n   */\n  isOlderVersionOf(message: Message): boolean;\n\n  /**\n   * Determines if this message is a newer version of the given message.\n   *\n   * **Note** that negating this function does not mean that the message is an older\n   * version of the same message, as the two may be different messages entirely.\n   *\n   * ```ts\n   * !message.isNewerVersionOf(other) !== message.isOlderVersionOf(other)\n   * ```\n   * @param message The message to compare against.\n   * @returns true if the two messages are the same message (isSameAs returns true) and this message is a newer version.\n   */\n  isNewerVersionOf(message: Message): boolean;\n\n  /**\n   * Determines if this message is the same version as the given message.\n   * @param message The message to compare against.\n   * @returns true if the two messages are the same message and have the same version.\n   */\n  isSameVersionAs(message: Message): boolean;\n\n  /**\n   * Determines if this message was created before the given message. This comparison is based on\n   * global order, so does not necessarily represent the order that messages are received in realtime\n   * from the backend.\n   * @param message The message to compare against.\n   * @returns true if this message was created before the given message, in global order.\n   * @throws {@link ErrorInfo} if serials of either message is invalid.\n   */\n  before(message: Message): boolean;\n\n  /**\n   * Determines if this message was created after the given message. This comparison is based on\n   * global order, so does not necessarily represent the order that messages are received in realtime\n   * from the backend.\n   * @param message The message to compare against.\n   * @returns true if this message was created after the given message, in global order.\n   * @throws {@link ErrorInfo} if serials of either message is invalid.\n   */\n  after(message: Message): boolean;\n\n  /**\n   * Determines if this message is equal to the given message.\n   *\n   * Note that this method compares messages based on {@link Message.serial} alone. It returns true if the\n   * two messages represent different versions of the same message.\n   * @param message The message to compare against.\n   * @returns true if the two messages are the same message.\n   */\n  equal(message: Message): boolean;\n\n  /**\n   * Alias for {@link equal}.\n   * @param message The message to compare against.\n   * @returns true if the two messages are the same message.\n   */\n  isSameAs(message: Message): boolean;\n\n  /**\n   * Creates a new message instance with the event applied.\n   *\n   * NOTE: This method will not replace the message reactions if the event is of type `Message`.\n   * @param event The event to be applied to the returned message.\n   * @throws {@link ErrorInfo} if the event is for a different message.\n   * @throws {@link ErrorInfo} if the event is a {@link ChatMessageEventType.Created}.\n   * @returns A new message instance with the event applied. If the event is a no-op, such\n   *    as an event for an old version, the same message is returned (not a copy).\n   */\n  with(event: Message | ChatMessageEvent | MessageReactionSummaryEvent): Message;\n\n  /**\n   * Creates a copy of the message with fields replaced per the parameters.\n   * @param params The parameters to replace in the message.\n   * @returns The message copy.\n   */\n  copy(params?: MessageCopyParams): Message;\n}\n\n/**\n * Parameters for copying a message.\n */\nexport interface MessageCopyParams {\n  /**\n   * The text of the copied message.\n   */\n  text?: string;\n\n  /**\n   * The metadata of the copied message.\n   */\n  metadata?: MessageMetadata;\n\n  /**\n   * The headers of the copied message.\n   */\n  headers?: MessageHeaders;\n}\n\n/**\n * Represents a summary of all reactions on a message.\n */\nexport interface MessageReactions {\n  /**\n   * Map of reaction to the summary (total and clients) for reactions of type {@link MessageReactionType.Unique}.\n   */\n  unique: Ably.SummaryUniqueValues;\n\n  /**\n   * Map of reaction to the summary (total and clients) for reactions of type {@link MessageReactionType.Distinct}.\n   */\n  distinct: Ably.SummaryDistinctValues;\n\n  /**\n   * Map of reaction to the summary (total and clients) for reactions of type {@link MessageReactionType.Multiple}.\n   */\n  multiple: Ably.SummaryMultipleValues;\n}\n\n/**\n * Parameters for creating a new DefaultMessage instance.\n */\nexport interface DefaultMessageParams {\n  serial: string;\n  clientId: string;\n  text: string;\n  metadata: MessageMetadata;\n  headers: MessageHeaders;\n  action: ChatMessageAction;\n  version: MessageVersion;\n  timestamp: Date;\n  reactions: MessageReactions;\n}\n\n/**\n * An implementation of the Message interface for chat messages.\n *\n * Allows for comparison of messages based on their serials.\n */\nexport class DefaultMessage implements Message {\n  public readonly serial: string;\n  public readonly clientId: string;\n  public readonly text: string;\n  public readonly metadata: MessageMetadata;\n  public readonly headers: MessageHeaders;\n  public readonly action: ChatMessageAction;\n  public readonly version: MessageVersion;\n  public readonly timestamp: Date;\n  public readonly reactions: MessageReactions;\n\n  constructor({\n    serial,\n    clientId,\n    text,\n    metadata,\n    headers,\n    action,\n    version,\n    timestamp,\n    reactions,\n  }: DefaultMessageParams) {\n    this.serial = serial;\n    this.clientId = clientId;\n    this.text = text;\n    this.metadata = metadata;\n    this.headers = headers;\n    this.action = action;\n    this.version = version;\n    this.timestamp = timestamp;\n    this.reactions = reactions;\n    // The object is frozen after constructing to enforce readonly at runtime too\n    Object.freeze(this.version);\n    Object.freeze(this.reactions);\n    Object.freeze(this.reactions.multiple);\n    Object.freeze(this.reactions.distinct);\n    Object.freeze(this.reactions.unique);\n    Object.freeze(this);\n  }\n\n  get isUpdated(): boolean {\n    return this.action === ChatMessageAction.MessageUpdate;\n  }\n\n  get isDeleted(): boolean {\n    return this.action === ChatMessageAction.MessageDelete;\n  }\n\n  get updatedBy(): string | undefined {\n    return this.isUpdated ? this.version.clientId : undefined;\n  }\n\n  get deletedBy(): string | undefined {\n    return this.isDeleted ? this.version.clientId : undefined;\n  }\n\n  get updatedAt(): Date | undefined {\n    return this.isUpdated ? this.version.timestamp : undefined;\n  }\n\n  get deletedAt(): Date | undefined {\n    return this.isDeleted ? this.version.timestamp : undefined;\n  }\n\n  isOlderVersionOf(message: Message): boolean {\n    return this._compareVersions(\n      this,\n      message,\n      (first: MessageVersion, second: MessageVersion) => first.serial < second.serial,\n    );\n  }\n\n  isNewerVersionOf(message: Message): boolean {\n    return this._compareVersions(\n      this,\n      message,\n      (first: MessageVersion, second: MessageVersion) => first.serial > second.serial,\n    );\n  }\n\n  isSameVersionAs(message: Message): boolean {\n    return this._compareVersions(\n      this,\n      message,\n      (first: MessageVersion, second: MessageVersion) => first.serial === second.serial,\n    );\n  }\n\n  _isNewerOrSameVersionOf(message: Message): boolean {\n    return this._compareVersions(\n      this,\n      message,\n      (first: MessageVersion, second: MessageVersion) => first.serial >= second.serial,\n    );\n  }\n\n  before(message: Message): boolean {\n    return this.serial < message.serial;\n  }\n\n  after(message: Message): boolean {\n    return this.serial > message.serial;\n  }\n\n  equal(message: Message): boolean {\n    return this.serial === message.serial;\n  }\n\n  isSameAs(message: Message): boolean {\n    return this.equal(message);\n  }\n\n  with(event: Message | ChatMessageEvent | MessageReactionSummaryEvent): Message {\n    // If event has the property \"serial\", then it's a message\n    if ('serial' in event) {\n      return this._getLatestMessageVersion(event);\n    }\n\n    // If the event is a created event, throw an error\n    if (event.type === ChatMessageEventType.Created) {\n      throw new Ably.ErrorInfo('cannot apply a created event to a message', 40000, 400);\n    }\n\n    // reaction summary\n    if (event.type === MessageReactionEventType.Summary) {\n      if (event.summary.messageSerial !== this.serial) {\n        throw new Ably.ErrorInfo('cannot apply event for a different message', 40000, 400);\n      }\n\n      const newReactions: MessageReactions = {\n        unique: cloneDeep(event.summary.unique),\n        distinct: cloneDeep(event.summary.distinct),\n        multiple: cloneDeep(event.summary.multiple),\n      };\n\n      return DefaultMessage._clone(this, { reactions: newReactions });\n    }\n\n    // Message event (update or delete)\n    return this._getLatestMessageVersion(event.message);\n  }\n\n  private _compareVersions(\n    first: Message,\n    second: Message,\n    comparator: (first: MessageVersion, second: MessageVersion) => boolean,\n  ): boolean {\n    // If our serials aren't the same, not same message and cannot compare1\n    if (!first.equal(second)) {\n      return false;\n    }\n\n    return first.equal(second) && comparator(first.version, second.version);\n  }\n\n  /**\n   * Get the latest message version, based on the event.\n   * If \"this\" is the latest version, return \"this\", otherwise clone the message and apply the reactions.\n   * @param message The message to get the latest version of\n   * @returns The latest message version\n   */\n  private _getLatestMessageVersion(message: Message): Message {\n    // message event (update or delete)\n    if (message.serial !== this.serial) {\n      throw new Ably.ErrorInfo('cannot apply event for a different message', 40000, 400);\n    }\n\n    // event is older, keep this instead\n    if (this._isNewerOrSameVersionOf(message)) {\n      return this;\n    }\n\n    // event is newer, copy reactions from this and make new message from event\n    // TODO: This ignores summaries being newer on the message passed in, and is something we need to address\n    return DefaultMessage._clone(message, { reactions: this.reactions });\n  }\n\n  // Clone a message, optionally replace the given fields\n  private static _clone(source: Message, replace?: Partial<Message>): DefaultMessage {\n    return new DefaultMessage({\n      serial: replace?.serial ?? source.serial,\n      clientId: replace?.clientId ?? source.clientId,\n      text: replace?.text ?? source.text,\n      metadata: replace?.metadata ?? cloneDeep(source.metadata),\n      headers: replace?.headers ?? cloneDeep(source.headers),\n      action: replace?.action ?? source.action,\n      version: replace?.version ?? cloneDeep(source.version),\n      timestamp: replace?.timestamp ?? source.timestamp,\n      reactions: replace?.reactions ?? cloneDeep(source.reactions),\n    });\n  }\n\n  copy(params: MessageCopyParams = {}): Message {\n    return DefaultMessage._clone(this, params);\n  }\n}\n\n/**\n * Creates an empty MessageReactions object with empty unique and distinct reaction collections.\n * @returns An empty MessageReactions object.\n */\nexport const emptyMessageReactions = (): MessageReactions => ({\n  unique: {},\n  distinct: {},\n  multiple: {},\n});\n","import * as Ably from 'ably';\n\nimport { ChatMessageAction } from './events.js';\nimport { DefaultMessage, emptyMessageReactions, Message, MessageHeaders, MessageMetadata } from './message.js';\n\ninterface MessagePayload {\n  data?: {\n    text?: string;\n    metadata?: MessageMetadata;\n  };\n  clientId?: string;\n  timestamp: number;\n  extras?: {\n    headers?: MessageHeaders;\n  };\n\n  serial: string;\n  action: Ably.MessageAction;\n  version: Ably.MessageVersion;\n  annotations: Ably.MessageAnnotations;\n}\n\n// Parse a realtime message to a chat message\nexport const parseMessage = (inboundMessage: Ably.InboundMessage): Message => {\n  const message = inboundMessage as MessagePayload;\n\n  // Provide default values for all fields\n  const data = message.data && typeof message.data === 'object' ? message.data : {};\n  const extras = message.extras && typeof message.extras === 'object' ? message.extras : {};\n  const clientId = message.clientId || '';\n  const text = data.text || '';\n  // Spec: CHA-M4k5\n  const timestamp = new Date(message.timestamp || 0);\n  const serial = message.serial || '';\n  const metadata = data.metadata && typeof data.metadata === 'object' ? data.metadata : {};\n  const headers = extras.headers || {};\n\n  // Create the version, using defaults as required\n  const version = {\n    ...message.version,\n    // Spec: CHA-M4k6\n    serial: message.version.serial || serial,\n    // Spec: CHA-M4k7\n    timestamp: new Date(message.version.timestamp || timestamp),\n  };\n\n  // Convert the action to a ChatMessageAction enum, defaulting to MessageCreate if the action is not found.\n  const action = Object.values(ChatMessageAction).includes(message.action as ChatMessageAction)\n    ? (message.action as ChatMessageAction)\n    : ChatMessageAction.MessageCreate;\n\n  return new DefaultMessage({\n    serial,\n    clientId,\n    text,\n    metadata,\n    headers,\n    action,\n    version,\n    timestamp,\n    reactions: emptyMessageReactions(),\n  });\n};\n","import * as Ably from 'ably';\n\nimport { Message } from './message.js';\n\n/**\n * A serial is used to identify a particular message, reaction or other chat event. It is the identifier\n * for that event in the chat history.\n *\n * Serials can be conveyed either as a string, or an object that contains `serial` as a property. Message is included\n * for type hinting and LLM purposes.\n *\n * The string-form of the serial should not be parsed or interpreted in any way, as it is subject to change without\n * warning.\n */\nexport type Serial =\n  | Message\n  | string\n  | {\n      /**\n       * The serial of the message.\n       */\n      serial: string;\n    };\n\n/**\n * Convert a type that may contain a serial into a string.\n * @param serial - The serial to convert.\n * @returns The serial as a string.\n */\nexport const serialToString = (serial: Serial): string => {\n  let serialString = '';\n  if (typeof serial === 'string') {\n    serialString = serial;\n  } else {\n    try {\n      if ('serial' in serial) {\n        serialString = serial.serial;\n      }\n    } catch {\n      // 'in' operator failed, fall through to error\n    }\n  }\n\n  if (serialString === '') {\n    throw new Ably.ErrorInfo('invalid serial; must be string or object with serial property', 40000, 400);\n  }\n\n  return serialString;\n};\n","import * as Ably from 'ably';\n\nimport { ChannelOptionsMerger } from './channel-manager.js';\nimport {\n  ChatApi,\n  DeleteMessageReactionParams as APIDeleteMessageReactionParams,\n  SendMessageReactionParams as APISendMessageReactionParams,\n} from './chat-api.js';\nimport {\n  AnnotationTypeToReactionType,\n  ChatMessageAction,\n  MessageReactionEventType,\n  MessageReactionRawEvent,\n  MessageReactionSummaryEvent,\n  MessageReactionType,\n  ReactionAnnotationType,\n} from './events.js';\nimport { Logger } from './logger.js';\nimport { Message } from './message.js';\nimport { subscribe } from './realtime-subscriptions.js';\nimport { InternalRoomOptions, MessageOptions } from './room-options.js';\nimport { Serial, serialToString } from './serial.js';\nimport { Subscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * A listener for summary message reaction events.\n * @param event The message reaction summary event that was received. Use it\n *   with {@link Message.with} to keep an up-to-date reaction count.\n */\nexport type MessageReactionListener = (event: MessageReactionSummaryEvent) => void;\n\n/**\n * A listener for individual message reaction events.\n * @param event The message reaction event that was received.\n */\nexport type MessageRawReactionListener = (event: MessageReactionRawEvent) => void;\n\n/**\n * Parameters for sending a message reaction.\n */\nexport interface SendMessageReactionParams {\n  /**\n   * The reaction name to send; ie. the emoji.\n   */\n  name: string;\n\n  /**\n   * The type of reaction, must be one of {@link MessageReactionType}.\n   * If not set, the default type will be used which is configured in the {@link MessageOptions.defaultMessageReactionType} of the room.\n   */\n  type?: MessageReactionType;\n\n  /**\n   * The count of the reaction for type {@link MessageReactionType.Multiple}.\n   * Defaults to 1 if not set. Not supported for other reaction types.\n   * @defaultValue 1\n   */\n  count?: number;\n}\n\n/**\n * Parameters for deleting a message reaction.\n */\nexport interface DeleteMessageReactionParams {\n  /**\n   * The reaction name to delete; ie. the emoji. Required for all reaction types\n   * except {@link MessageReactionType.Unique}.\n   */\n  name?: string;\n\n  /**\n   * The type of reaction, must be one of {@link MessageReactionType}.\n   * If not set, the default type will be used which is configured in the {@link MessageOptions.defaultMessageReactionType} of the room.\n   */\n  type?: MessageReactionType;\n}\n\n/**\n * Send, delete, and subscribe to message reactions.\n */\nexport interface MessagesReactions {\n  /**\n   * Send a message reaction.\n   * @param messageSerial The serial of the message to react to.\n   * @param params Describe the reaction to send.\n   * @returns A promise that resolves when the reaction is sent.\n   */\n  send(messageSerial: Serial, params: SendMessageReactionParams): Promise<void>;\n\n  /**\n   * Delete a message reaction\n   * @param messageSerial The serial of the message to remove the reaction from.\n   * @param params The type of reaction annotation and the specific reaction to remove. The reaction to remove is required for all types except {@link MessageReactionType.Unique}.\n   * @returns A promise that resolves when the reaction is deleted.\n   */\n  delete(messageSerial: Serial, params?: DeleteMessageReactionParams): Promise<void>;\n\n  /**\n   * Subscribe to message reaction summaries. Use this to keep message reaction\n   * counts up to date efficiently in the UI.\n   * @param listener The listener to call when a message reaction summary is received.\n   * @returns A subscription object that should be used to unsubscribe.\n   */\n  subscribe(listener: MessageReactionListener): Subscription;\n\n  /**\n   * Subscribe to individual reaction events.\n   *\n   * If you only need to keep track of reaction counts and clients, use\n   * {@link subscribe} instead.\n   * @param listener The listener to call when a message reaction event is received.\n   * @returns A subscription object that should be used to unsubscribe.\n   */\n  subscribeRaw(listener: MessageRawReactionListener): Subscription;\n\n  /**\n   * Get the reaction count for a message for a particular client.\n   * @param messageSerial The serial of the message to remove the reaction from.\n   * @param clientId The client to fetch the reaction summary for (leave unset for current client).\n   * @returns A clipped reaction summary containing only the requested clientId.\n   * @example\n   * ```typescript\n   * // Subscribe to reaction summaries and check for specific client reactions\n   * room.messages.reactions.subscribe(async (event) => {\n   *   // For brevity of example, we check unique ðŸ‘ (normally iterate for all relevant reactions)\n   *   const uniqueLikes = event.summary.unique['ðŸ‘'];\n   *   if (uniqueLikes && uniqueLikes.clipped && !uniqueLikes.clientIds.includes(myClientId)) {\n   *     // summary is clipped and doesn't include myClientId, so we need to fetch a clientSummary\n   *     const clientReactions = await room.messages.reactions.clientReactions(\n   *       event.summary.messageSerial,\n   *       myClientId\n   *     );\n   *     if (clientReactions.unique && clientReactions.unique['ðŸ‘']) {\n   *       // client has reacted with ðŸ‘\n   *       event.summary.unique['ðŸ‘'].clientIds.push(myClientId);\n   *     }\n   *   }\n   *   // from here, process the summary as usual\n   * });\n   * ```\n   */\n  clientReactions(messageSerial: Serial, clientId?: string): Promise<Message['reactions']>;\n}\n\n/**\n * Maps Ably PubSub annotation action to message reaction event type.\n */\nconst eventTypeMap: Record<string, MessageReactionEventType.Create | MessageReactionEventType.Delete> = {\n  'annotation.create': MessageReactionEventType.Create,\n  'annotation.delete': MessageReactionEventType.Delete,\n};\n\n/**\n * @inheritDoc\n */\nexport class DefaultMessageReactions implements MessagesReactions {\n  private _emitter = new EventEmitter<{\n    [MessageReactionEventType.Create]: MessageReactionRawEvent;\n    [MessageReactionEventType.Delete]: MessageReactionRawEvent;\n    [MessageReactionEventType.Summary]: MessageReactionSummaryEvent;\n  }>();\n\n  private readonly _defaultType: MessageReactionType;\n  private readonly _unsubscribeMessageEvents: () => void;\n  private readonly _unsubscribeAnnotationEvents?: () => void;\n\n  constructor(\n    private readonly _logger: Logger,\n    private readonly _options: MessageOptions | undefined,\n    private readonly _api: ChatApi,\n    private readonly _roomName: string,\n    private readonly _channel: Ably.RealtimeChannel,\n  ) {\n    // Use subscription helper to create cleanup function\n    this._unsubscribeMessageEvents = subscribe(_channel, this._processMessageEvent.bind(this));\n\n    if (this._options?.rawMessageReactions) {\n      this._unsubscribeAnnotationEvents = subscribe(_channel.annotations, this._processAnnotationEvent.bind(this));\n    }\n    this._defaultType = this._options?.defaultMessageReactionType ?? MessageReactionType.Distinct;\n  }\n\n  private _processAnnotationEvent(event: Ably.Annotation) {\n    this._logger.trace('MessagesReactions._processAnnotationEvent();', { event });\n\n    // If we don't know the reaction type, ignore it\n    const reactionType = AnnotationTypeToReactionType[event.type];\n    if (!reactionType) {\n      this._logger.info('MessagesReactions._processAnnotationEvent(); ignoring unknown reaction type', { event });\n      return;\n    }\n\n    // If we don't know the event type, ignore it\n    const eventType = eventTypeMap[event.action];\n    if (!eventType) {\n      this._logger.info('MessagesReactions._processAnnotationEvent(); ignoring unknown reaction event type', { event });\n      return;\n    }\n\n    const name = event.name ?? '';\n    const reactionEvent: MessageReactionRawEvent = {\n      type: eventType,\n      timestamp: new Date(event.timestamp),\n      reaction: {\n        messageSerial: event.messageSerial,\n        type: reactionType,\n        name: name,\n        clientId: event.clientId ?? '',\n      },\n    };\n\n    if (event.count) {\n      reactionEvent.reaction.count = event.count;\n    } else if (eventType === MessageReactionEventType.Create && reactionType === MessageReactionType.Multiple) {\n      reactionEvent.reaction.count = 1; // count defaults to 1 for multiple if not set\n    }\n\n    this._emitter.emit(eventType, reactionEvent);\n  }\n\n  private _processMessageEvent(event: Ably.InboundMessage) {\n    this._logger.trace('MessagesReactions._processMessageEvent();', { event });\n\n    // only process summary events\n    if (event.action !== ChatMessageAction.MessageAnnotationSummary.valueOf()) {\n      return;\n    }\n\n    // As Chat uses mutable messages, we know that `serial` will be defined, so this cast is ok\n    const serial = event.serial as unknown as string;\n\n    // Set the reaction types from the summary\n    const summary = event.annotations.summary;\n\n    const unique = (summary[ReactionAnnotationType.Unique] ?? {}) as unknown as Ably.SummaryUniqueValues;\n    const distinct = (summary[ReactionAnnotationType.Distinct] ?? {}) as unknown as Ably.SummaryDistinctValues;\n    const multiple = (summary[ReactionAnnotationType.Multiple] ?? {}) as Ably.SummaryMultipleValues;\n\n    this._emitter.emit(MessageReactionEventType.Summary, {\n      type: MessageReactionEventType.Summary,\n      summary: {\n        messageSerial: serial,\n        unique: unique,\n        distinct: distinct,\n        multiple: multiple,\n      },\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  send(messageSerial: Serial, params: SendMessageReactionParams): Promise<void> {\n    this._logger.trace('MessagesReactions.send();', { messageSerial, params });\n    const serial = serialToString(messageSerial);\n\n    let { type, count } = params;\n    if (!type) {\n      type = this._defaultType;\n    }\n    if (type === MessageReactionType.Multiple && !count) {\n      count = 1;\n    }\n    const apiParams: APISendMessageReactionParams = { type, name: params.name };\n    if (count) {\n      apiParams.count = count;\n    }\n    return this._api.sendMessageReaction(this._roomName, serial, apiParams);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  delete(messageSerial: Serial, params?: DeleteMessageReactionParams): Promise<void> {\n    this._logger.trace('MessagesReactions.delete();', { messageSerial, params });\n    const serial = serialToString(messageSerial);\n\n    let type = params?.type;\n    if (!type) {\n      type = this._defaultType;\n    }\n    if (type !== MessageReactionType.Unique && !params?.name) {\n      throw new Ably.ErrorInfo(`cannot delete reaction of type ${type} without a name`, 40001, 400);\n    }\n    const apiParams: APIDeleteMessageReactionParams = { type };\n    if (type !== MessageReactionType.Unique) {\n      apiParams.name = params?.name;\n    }\n    return this._api.deleteMessageReaction(this._roomName, serial, apiParams);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  subscribe(listener: MessageReactionListener): Subscription {\n    this._logger.trace('MessagesReactions.subscribe();');\n\n    const wrapped = wrap(listener);\n    this._emitter.on(MessageReactionEventType.Summary, wrapped);\n    return {\n      unsubscribe: () => {\n        this._emitter.off(wrapped);\n      },\n    };\n  }\n\n  /**\n   * @inheritDoc\n   */\n  subscribeRaw(listener: MessageRawReactionListener): Subscription {\n    this._logger.trace('MessagesReactions.subscribeRaw();');\n\n    if (!this._options?.rawMessageReactions) {\n      throw new Ably.ErrorInfo('Raw message reactions are not enabled', 40001, 400);\n    }\n    const wrapped = wrap(listener);\n    this._emitter.on([MessageReactionEventType.Create, MessageReactionEventType.Delete], wrapped);\n    return {\n      unsubscribe: () => {\n        this._emitter.off(wrapped);\n      },\n    };\n  }\n\n  /**\n   * Merges the channel options to add support for message reactions.\n   * @param roomOptions The room options to merge for.\n   * @returns A function that merges the channel options for the room with the ones required for presence.\n   */\n  static channelOptionMerger(roomOptions: InternalRoomOptions): ChannelOptionsMerger {\n    return (options) => {\n      // annotation publish is always required for message reactions\n      if (!options.modes.includes('ANNOTATION_PUBLISH')) {\n        options.modes.push('ANNOTATION_PUBLISH');\n      }\n      // annotation subscribe is only required if the room has raw message reactions\n      if (roomOptions.messages.rawMessageReactions && !options.modes.includes('ANNOTATION_SUBSCRIBE')) {\n        options.modes.push('ANNOTATION_SUBSCRIBE');\n      }\n      return options;\n    };\n  }\n\n  clientReactions(messageSerial: Serial, clientId?: string): Promise<Message['reactions']> {\n    this._logger.trace('MessagesReactions.clientReactions();', { messageSerial, clientId });\n    const serial = serialToString(messageSerial);\n    return this._api.getClientReactions(this._roomName, serial, clientId);\n  }\n\n  /**\n   * Disposes of the message reactions instance, removing all listeners and subscriptions.\n   * This method should be called when the room is being released to ensure proper cleanup.\n   * @internal\n   */\n  dispose(): void {\n    this._logger.trace('DefaultMessageReactions.dispose();');\n\n    // Remove all user-level listeners from the emitter\n    this._emitter.off();\n\n    // Unsubscribe from channel events using stored unsubscribe functions\n    this._unsubscribeMessageEvents();\n\n    // Unsubscribe from annotations if they were enabled\n    this._unsubscribeAnnotationEvents?.();\n\n    this._logger.debug('DefaultMessageReactions.dispose(); disposed successfully');\n  }\n\n  /**\n   * Checks if there are any listeners registered by users.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._emitter);\n  }\n}\n","import { ChatMessageAction } from './events.js';\nimport { DefaultMessage, emptyMessageReactions, Message } from './message.js';\n\n// RestClientIdList represents a list of client IDs with aggregation data\nexport interface RestClientIdList {\n  total: number;\n  clientIds: string[];\n}\n\n// RestClientIdCounts represents client ID counts with aggregation data\nexport interface RestClientIdCounts {\n  total: number;\n  clientIds: Record<string, number>;\n  totalUnidentified: number;\n}\n\n// RestVersion represents the version information of a message. (i.e. an update or delete)\nexport interface RestVersion {\n  serial: string;\n  timestamp: number;\n  clientId?: string;\n  description?: string;\n  metadata?: Record<string, string>;\n}\n\n// ChatMessageReactions represents reactions on a chat message\nexport interface RestChatMessageReactions {\n  unique?: Record<string, RestClientIdList>;\n  distinct?: Record<string, RestClientIdList>;\n  multiple?: Record<string, RestClientIdCounts>;\n}\n\n// RestMessage represents a message in V4 of the REST API.\nexport interface RestMessage {\n  serial: string;\n  version: RestVersion;\n  text: string;\n  clientId: string;\n  action: 'message.create' | 'message.update' | 'message.delete';\n  metadata: Record<string, unknown>;\n  headers: Record<string, string>;\n  timestamp: number;\n  reactions?: RestChatMessageReactions;\n}\n\n/**\n * Converts a message object from its REST representation to the standard message object in the SDK.\n * @param message The message to convert from REST.\n * @returns The converted message.\n */\nexport const messageFromRest = (message: RestMessage): Message => {\n  const reactions = {\n    ...emptyMessageReactions(),\n    ...message.reactions,\n  };\n\n  // Convert the action to a ChatMessageAction enum, defaulting to MessageCreate if the action is not found.\n  const action = Object.values(ChatMessageAction).includes(message.action as ChatMessageAction)\n    ? (message.action as ChatMessageAction)\n    : ChatMessageAction.MessageCreate;\n\n  // Create version information from the message\n  const version = {\n    serial: message.version.serial,\n    timestamp: new Date(message.version.timestamp),\n    clientId: message.version.clientId,\n    description: message.version.description,\n    metadata: message.version.metadata,\n  };\n\n  return new DefaultMessage({\n    serial: message.serial,\n    clientId: message.clientId,\n    text: message.text,\n    metadata: message.metadata,\n    headers: message.headers,\n    action,\n    version,\n    timestamp: new Date(message.timestamp),\n    reactions: reactions,\n  });\n};\n","import * as Ably from 'ably';\n\nimport { ChatApi } from './chat-api.js';\nimport { ChatMessageAction, ChatMessageEvent, ChatMessageEventType, RealtimeMessageName } from './events.js';\nimport { Logger } from './logger.js';\nimport {\n  DefaultMessage,\n  emptyMessageReactions,\n  Message,\n  MessageHeaders,\n  MessageMetadata,\n  MessageOperationMetadata,\n} from './message.js';\nimport { parseMessage } from './message-parser.js';\nimport { DefaultMessageReactions, MessagesReactions } from './messages-reactions.js';\nimport { PaginatedResult } from './query.js';\nimport { on, once, subscribe } from './realtime-subscriptions.js';\nimport { messageFromRest } from './rest-types.js';\nimport { MessageOptions } from './room-options.js';\nimport { Serial, serialToString } from './serial.js';\nimport { Subscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * Event names and their respective payloads emitted by the messages feature.\n */\ninterface MessageEventsMap {\n  [ChatMessageEventType.Created]: ChatMessageEvent;\n  [ChatMessageEventType.Updated]: ChatMessageEvent;\n  [ChatMessageEventType.Deleted]: ChatMessageEvent;\n}\n\n/**\n * Mapping of chat message actions to message events.\n */\nconst MessageActionsToEventsMap: Map<ChatMessageAction, ChatMessageEventType> = new Map<\n  ChatMessageAction,\n  ChatMessageEventType\n>([\n  [ChatMessageAction.MessageCreate, ChatMessageEventType.Created],\n  [ChatMessageAction.MessageUpdate, ChatMessageEventType.Updated],\n  [ChatMessageAction.MessageDelete, ChatMessageEventType.Deleted],\n]);\n\n/**\n * The order in which results should be returned when performing a paginated query (e.g. message history).\n */\nexport enum OrderBy {\n  /**\n   * Return results in ascending order (oldest first).\n   */\n  OldestFirst = 'oldestFirst',\n\n  /**\n   * Return results in descending order (newest first).\n   */\n  NewestFirst = 'newestFirst',\n}\n\n/**\n * Options for querying messages in a chat room.\n */\nexport interface QueryOptions {\n  /**\n   * The start of the time window to query from. If provided, the response will include\n   * messages with timestamps equal to or greater than this value.\n   * @defaultValue The beginning of time\n   */\n  start?: number;\n\n  /**\n   * The end of the time window to query from. If provided, the response will include\n   * messages with timestamps less than this value.\n   * @defaultValue Now\n   */\n  end?: number;\n\n  /**\n   * The maximum number of messages to return in the response.\n   * @defaultValue 100\n   */\n  limit?: number;\n\n  /**\n   * The direction to query messages in.\n   * If {@link OrderBy.OldestFirst}, the response will include messages from the start of the time window to the end.\n   * If {@link OrderBy.NewestFirst}, the response will include messages from the end of the time window to the start.\n   * If not provided, the default is {@link OrderBy.NewestFirst}.\n   * @defaultValue {@link OrderBy.NewestFirst}\n   */\n  orderBy?: OrderBy;\n}\n\n/**\n * The parameters supplied to a message action like delete or update.\n */\nexport interface OperationDetails {\n  /**\n   * Optional description for the message action.\n   */\n  description?: string;\n\n  /**\n   * Optional metadata that will be added to the action. Defaults to empty.\n   *\n   */\n  metadata?: MessageOperationMetadata;\n}\n\n/**\n * Parameters for updating a message.\n */\nexport interface UpdateMessageParams {\n  /**\n   * The new text of the message.\n   */\n  text: string;\n\n  /**\n   * Optional metadata of the message.\n   */\n  metadata?: MessageMetadata;\n\n  /**\n   * Optional headers of the message.\n   */\n  headers?: MessageHeaders;\n}\n\n/**\n * Parameters for deleting a message.\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport interface DeleteMessageParams extends OperationDetails {}\n\n/**\n * Params for sending a text message. Only `text` is mandatory.\n */\nexport interface SendMessageParams {\n  /**\n   * The text of the message.\n   */\n  text: string;\n\n  /**\n   * Optional metadata of the message.\n   *\n   * The metadata is a map of extra information that can be attached to chat\n   * messages. It is not used by Ably and is sent as part of the realtime\n   * message payload. Example use cases are setting custom styling like\n   * background or text colors or fonts, adding links to external images,\n   * emojis, etc.\n   *\n   * Do not use metadata for authoritative information. There is no server-side\n   * validation. When reading the metadata, treat it like user input.\n   *\n   */\n  metadata?: MessageMetadata;\n\n  /**\n   * Optional headers of the message.\n   *\n   * The headers are a flat key-value map and are sent as part of the realtime\n   * message's extras inside the `headers` property. They can serve similar\n   * purposes as the metadata, but they are read by Ably and can be used for\n   * features such as\n   * [subscription filters](https://faqs.ably.com/subscription-filters).\n   *\n   * Do not use the headers for authoritative information. There is no\n   * server-side validation. When reading the headers, treat them like user\n   * input.\n   *\n   */\n  headers?: MessageHeaders;\n}\n\n/**\n * A listener for message events in a chat room.\n * @param event The message event that was received.\n */\nexport type MessageListener = (event: ChatMessageEvent) => void;\n\n/**\n * A response object that allows you to control a message subscription.\n */\nexport interface MessageSubscriptionResponse extends Subscription {\n  /**\n   * Get the previous messages that were sent to the room before the listener was subscribed.\n   *\n   * If the client experiences a discontinuity event (i.e. the connection was lost and could not be resumed), the starting point of\n   * historyBeforeSubscribe will be reset.\n   *\n   * Calls to historyBeforeSubscribe will wait for continuity to be restored before resolving.\n   *\n   * Once continuity is restored, the subscription point will be set to the beginning of this new period of continuity. To\n   * ensure that no messages are missed, you should call historyBeforeSubscribe after any period of discontinuity to\n   * fill any gaps in the message history.\n   *\n   * ```typescript\n   * const { historyBeforeSubscribe } = room.messages.subscribe(listener);\n   * await historyBeforeSubscribe({ limit: 10 });\n   * ```\n   * @param params Options for the history query.\n   * @returns A promise that resolves with the paginated result of messages, in newest-to-oldest order.\n   */\n  historyBeforeSubscribe(params: Omit<QueryOptions, 'orderBy'>): Promise<PaginatedResult<Message>>;\n}\n\n/**\n * This interface is used to interact with messages in a chat room: subscribing\n * to new messages, fetching history, or sending messages.\n *\n * Get an instance via {@link Room.messages}.\n */\nexport interface Messages {\n  /**\n   * Subscribe to new messages in this chat room.\n   * @param listener callback that will be called\n   * @returns A response object that allows you to control the subscription.\n   */\n  subscribe(listener: MessageListener): MessageSubscriptionResponse;\n\n  /**\n   * Get messages that have been previously sent to the chat room, based on the provided options.\n   * @param options Options for the query.\n   * @returns A promise that resolves with the paginated result of messages. This paginated result can\n   * be used to fetch more messages if available.\n   */\n  history(options: QueryOptions): Promise<PaginatedResult<Message>>;\n\n  /**\n   * Get a message by its serial.\n   * @param serial The serial of the message to get.\n   * @returns A promise that resolves with the message.\n   */\n  get(serial: Serial): Promise<Message>;\n\n  /**\n   * Send a message in the chat room.\n   *\n   * This method uses the Ably Chat API endpoint for sending messages.\n   *\n   * Note that the Promise may resolve before OR after the message is received\n   * from the realtime channel. This means you may see the message that was just\n   * sent in a callback to `subscribe` before the returned promise resolves.\n   * @param params an object containing {text, headers, metadata} for the message\n   * to be sent. Text is required, metadata and headers are optional.\n   * @returns A promise that resolves when the message was published.\n   */\n  send(params: SendMessageParams): Promise<Message>;\n\n  /**\n   * Delete a message in the chat room.\n   *\n   * This method uses the Ably Chat API REST endpoint for deleting messages.\n   * It performs a `soft` delete, meaning the message is marked as deleted.\n   *\n   * Note that the Promise may resolve before OR after the message is deleted\n   * from the realtime channel. This means you may see the message that was just\n   * deleted in a callback to `subscribe` before the returned promise resolves.\n   *\n   * NOTE: The Message instance returned by this method is the state of the message as a result of the delete operation.\n   * If you have a subscription to message events via `subscribe`, you should discard the message instance returned by\n   * this method and use the event payloads from the subscription instead.\n   *\n   * Should you wish to restore a deleted message, and providing you have the appropriate permissions,\n   * you can simply send an update to the original message.\n   * Note: This is subject to change in future versions, whereby a new permissions model will be introduced\n   * and a deleted message may not be restorable in this way.\n   * @returns A promise that resolves when the message was deleted.\n   * @param serial - A string or object that conveys the serial of the message to delete.\n   * @param deleteMessageParams - Optional details to record about the delete action.\n   * @returns A promise that resolves to the deleted message.\n   */\n  delete(serial: Serial, deleteMessageParams?: DeleteMessageParams): Promise<Message>;\n\n  /**\n   * Update a message in the chat room.\n   *\n   * Note that the Promise may resolve before OR after the updated message is\n   * received from the realtime channel. This means you may see the update that\n   * was just sent in a callback to `subscribe` before the returned promise\n   * resolves.\n   *\n   * NOTE: The Message instance returned by this method is the state of the message as a result of the update operation.\n   * If you have a subscription to message events via `subscribe`, you should discard the message instance returned by\n   * this method and use the event payloads from the subscription instead.\n   *\n   * This method uses PUT-like semantics: if headers and metadata are omitted from the updateParams, then\n   * the existing headers and metadata are replaced with the empty objects.\n   * @param serial - A string or object that conveys the serial of the message to update.\n   * @param updateParams - The parameters for updating the message.\n   * @param details - Optional details to record about the update action.\n   * @returns A promise of the updated message.\n   */\n  update(serial: Serial, updateParams: UpdateMessageParams, details?: OperationDetails): Promise<Message>;\n\n  /**\n   * Send, delete, and subscribe to message reactions.\n   */\n  reactions: MessagesReactions;\n}\n\n/**\n * @inheritDoc\n */\nexport class DefaultMessages implements Messages {\n  private readonly _roomName: string;\n  private readonly _options: MessageOptions;\n  private readonly _channel: Ably.RealtimeChannel;\n  private readonly _chatApi: ChatApi;\n  private readonly _clientId: string;\n  private readonly _listenerSubscriptionPoints: Map<\n    MessageListener,\n    Promise<{\n      fromSerial: string;\n    }>\n  >;\n  private readonly _pendingPromiseRejecters = new Set<(error: Error) => void>();\n  private readonly _pendingAttachListeners = new Set<() => void>();\n  private readonly _logger: Logger;\n  private readonly _emitter = new EventEmitter<MessageEventsMap>();\n  private readonly _unsubscribeMessageEvents: () => void;\n  private readonly _offChannelAttached: () => void;\n  private readonly _offChannelUpdate: () => void;\n  private readonly _reactions: DefaultMessageReactions;\n\n  /**\n   * Constructs a new `DefaultMessages` instance.\n   * @param roomName The unique identifier of the room.\n   * @param options The room options for the messages.\n   * @param channel An instance of the Realtime channel for the room.\n   * @param chatApi An instance of the ChatApi.\n   * @param clientId The client ID of the user.\n   * @param logger An instance of the Logger.\n   */\n  constructor(\n    roomName: string,\n    options: MessageOptions,\n    channel: Ably.RealtimeChannel,\n    chatApi: ChatApi,\n    clientId: string,\n    logger: Logger,\n  ) {\n    this._roomName = roomName;\n    this._options = options;\n    this._channel = channel;\n    this._chatApi = chatApi;\n    this._clientId = clientId;\n    this._logger = logger;\n    this._listenerSubscriptionPoints = new Map<MessageListener, Promise<{ fromSerial: string }>>();\n\n    this._reactions = new DefaultMessageReactions(this._logger, options, this._chatApi, this._roomName, this._channel);\n\n    // Create bound listeners\n    const messageEventsListener = this._processEvent.bind(this);\n    const channelAttachedListener = (stateChange: Ably.ChannelStateChange) => {\n      this._handleAttach(stateChange.resumed);\n    };\n    const channelUpdateListener = (stateChange: Ably.ChannelStateChange) => {\n      if (stateChange.current === 'attached' && stateChange.previous === 'attached') {\n        this._handleAttach(stateChange.resumed);\n      }\n    };\n\n    // Use subscription helpers to create cleanup functions\n    this._unsubscribeMessageEvents = subscribe(this._channel, [RealtimeMessageName.ChatMessage], messageEventsListener);\n    this._offChannelAttached = on(this._channel, 'attached', channelAttachedListener);\n    this._offChannelUpdate = on(this._channel, 'update', channelUpdateListener);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get reactions(): MessagesReactions {\n    return this._reactions;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  private async _getBeforeSubscriptionStart(\n    listener: MessageListener,\n    params: Omit<QueryOptions, 'orderBy'>,\n  ): Promise<PaginatedResult<Message>> {\n    this._logger.trace(`DefaultSubscriptionManager.getBeforeSubscriptionStart();`);\n\n    const subscriptionPoint = this._listenerSubscriptionPoints.get(listener);\n\n    if (subscriptionPoint === undefined) {\n      this._logger.error(\n        `DefaultSubscriptionManager.getBeforeSubscriptionStart(); listener has not been subscribed yet`,\n      );\n      throw new Ably.ErrorInfo(\n        'cannot query history; listener has not been subscribed yet',\n        40000,\n        400,\n      ) as unknown as Error;\n    }\n\n    // Get the subscription point of the listener\n    const subscriptionPointParams = await subscriptionPoint;\n\n    // Query messages from the subscription point to the start of the time window\n    return this._chatApi.history(this._roomName, {\n      ...params,\n      orderBy: OrderBy.NewestFirst,\n      ...subscriptionPointParams,\n    });\n  }\n\n  /**\n   * Handle the case where the channel experiences a detach and reattaches.\n   * @param fromResume Whether the attach is from a resume operation.\n   */\n  private _handleAttach(fromResume: boolean) {\n    this._logger.trace(`DefaultSubscriptionManager.handleAttach();`);\n\n    // Do nothing if we have resumed as there is no discontinuity in the message stream\n    if (fromResume) return;\n\n    // Reset subscription points for all listeners\n    const newSubscriptionStartResolver = this._subscribeAtChannelAttach();\n    for (const [listener] of this._listenerSubscriptionPoints.entries()) {\n      this._listenerSubscriptionPoints.set(listener, newSubscriptionStartResolver);\n    }\n  }\n\n  /**\n   * Create a promise that resolves with the attachSerial of the channel or the serial of the latest message.\n   * @returns A promise that resolves to an object containing fromSerial and subscriptionPoint.\n   */\n  private async _resolveSubscriptionStart(): Promise<{\n    fromSerial: string;\n  }> {\n    const channelWithProperties = this._getChannelProperties();\n\n    // If we are attached, we can resolve with the channelSerial\n    if (channelWithProperties.state === 'attached') {\n      if (channelWithProperties.properties.channelSerial) {\n        return { fromSerial: channelWithProperties.properties.channelSerial };\n      }\n      this._logger.error(`DefaultSubscriptionManager.handleAttach(); channelSerial is undefined`);\n      throw new Ably.ErrorInfo('channel is attached, but channelSerial is not defined', 40000, 400) as unknown as Error;\n    }\n\n    return this._subscribeAtChannelAttach();\n  }\n\n  private _getChannelProperties(): Ably.RealtimeChannel & {\n    properties: { attachSerial: string | undefined; channelSerial: string | undefined };\n  } {\n    // Get the attachSerial from the channel properties\n    return this._channel as Ably.RealtimeChannel & {\n      properties: {\n        attachSerial: string | undefined;\n        channelSerial: string | undefined;\n      };\n    };\n  }\n\n  private async _subscribeAtChannelAttach(): Promise<{ fromSerial: string }> {\n    const channelWithProperties = this._getChannelProperties();\n    return new Promise((resolve, reject) => {\n      // Store the reject function so we can call it during disposal\n      this._pendingPromiseRejecters.add(reject);\n\n      const cleanup = () => {\n        this._pendingPromiseRejecters.delete(reject);\n      };\n\n      // Check if the state is now attached\n      if (channelWithProperties.state === 'attached') {\n        // Get the attachSerial from the channel properties\n        // AttachSerial should always be defined at this point, but we check just in case\n        this._logger.debug('Messages._subscribeAtChannelAttach(); channel is attached already, using attachSerial', {\n          attachSerial: channelWithProperties.properties.attachSerial,\n        });\n        cleanup();\n\n        if (channelWithProperties.properties.attachSerial) {\n          resolve({ fromSerial: channelWithProperties.properties.attachSerial });\n        } else {\n          this._logger.error(`DefaultSubscriptionManager.handleAttach(); attachSerial is undefined`);\n          cleanup();\n          reject(\n            new Ably.ErrorInfo('channel is attached, but attachSerial is not defined', 40000, 400) as unknown as Error,\n          );\n        }\n        return;\n      }\n\n      const offAttachedListener = once(channelWithProperties, 'attached', () => {\n        // Get the attachSerial from the channel properties\n        // AttachSerial should always be defined at this point, but we check just in case\n        this._logger.debug('Messages._subscribeAtChannelAttach(); channel is now attached, using attachSerial', {\n          attachSerial: channelWithProperties.properties.attachSerial,\n        });\n        cleanup();\n        this._pendingAttachListeners.delete(offAttachedListener);\n\n        if (channelWithProperties.properties.attachSerial) {\n          resolve({ fromSerial: channelWithProperties.properties.attachSerial });\n        } else {\n          this._logger.error(`DefaultSubscriptionManager.handleAttach(); attachSerial is undefined`);\n          reject(\n            new Ably.ErrorInfo('channel is attached, but attachSerial is not defined', 40000, 400) as unknown as Error,\n          );\n        }\n      });\n\n      this._pendingAttachListeners.add(offAttachedListener);\n    });\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async history(options: QueryOptions): Promise<PaginatedResult<Message>> {\n    this._logger.trace('Messages.query();');\n    return this._chatApi.history(this._roomName, options);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get(serial: Serial): Promise<Message> {\n    this._logger.trace('Messages.get();', { serial });\n    return this._chatApi.getMessage(this._roomName, serialToString(serial));\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async send(params: SendMessageParams): Promise<Message> {\n    this._logger.trace('Messages.send();', { params });\n\n    const { text, metadata, headers } = params;\n\n    const response = await this._chatApi.sendMessage(this._roomName, { text, headers, metadata });\n    // We apply the timestamp to both the message and the version, since they are the same for a newly created message.\n    const timestamp = new Date(response.timestamp);\n    return new DefaultMessage({\n      serial: response.serial,\n      clientId: this._clientId,\n      text: text,\n      metadata: metadata ?? {},\n      headers: headers ?? {},\n      action: ChatMessageAction.MessageCreate,\n      version: {\n        serial: response.serial,\n        timestamp,\n      },\n      timestamp,\n      reactions: emptyMessageReactions(),\n    });\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async delete(serial: Serial, params?: DeleteMessageParams): Promise<Message> {\n    this._logger.trace('Messages.delete();', { params });\n\n    serial = serialToString(serial);\n    this._logger.debug('Messages.delete(); serial', { serial });\n    const response = await this._chatApi.deleteMessage(this._roomName, serial, params);\n\n    return messageFromRest(response);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async update(serial: Serial, updateParams: UpdateMessageParams, details?: OperationDetails): Promise<Message> {\n    this._logger.trace('Messages.update();', { updateParams, details });\n\n    serial = serialToString(serial);\n    this._logger.debug('Messages.update(); serial', { serial });\n    const response = await this._chatApi.updateMessage(this._roomName, serial, {\n      message: {\n        text: updateParams.text,\n        metadata: updateParams.metadata,\n        headers: updateParams.headers,\n      },\n      ...details,\n    });\n\n    this._logger.debug('Messages.update(); message update successfully', { updateParams });\n    return messageFromRest(response);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  subscribe(listener: MessageListener): MessageSubscriptionResponse {\n    this._logger.trace('Messages.subscribe();');\n    const wrapped = wrap(listener);\n    this._emitter.on(\n      [ChatMessageEventType.Created, ChatMessageEventType.Updated, ChatMessageEventType.Deleted],\n      wrapped,\n    );\n\n    // Set the subscription point to a promise that resolves when the channel attaches or with the latest message\n    const resolvedSubscriptionStart = this._resolveSubscriptionStart();\n\n    // Add a handler for unhandled rejections in case the room is released before the subscription point is resolved\n    resolvedSubscriptionStart.catch(() => {\n      this._logger.debug('Messages.subscribe(); subscription point was not resolved before the room was released');\n    });\n\n    this._listenerSubscriptionPoints.set(wrapped, resolvedSubscriptionStart);\n\n    return {\n      unsubscribe: () => {\n        // Remove the wrapped listener from the subscription points\n        this._listenerSubscriptionPoints.delete(wrapped);\n        this._logger.trace('Messages.unsubscribe();');\n        this._emitter.off(wrapped);\n      },\n      historyBeforeSubscribe: (params: Omit<QueryOptions, 'orderBy'>) =>\n        this._getBeforeSubscriptionStart(wrapped, params),\n    };\n  }\n\n  private _processEvent(channelEventMessage: Ably.InboundMessage) {\n    this._logger.trace('Messages._processEvent();', {\n      channelEventMessage,\n    });\n    const { action } = channelEventMessage;\n    const event = MessageActionsToEventsMap.get(action as ChatMessageAction);\n    if (!event) {\n      this._logger.debug('Messages._processEvent(); received unknown message action', { action });\n      return;\n    }\n    // Send the message to the listeners\n    const message = parseMessage(channelEventMessage);\n    this._emitter.emit(event, { type: event, message: message });\n  }\n\n  /**\n   * Disposes of the messages instance, removing all listeners and subscriptions.\n   * This method should be called when the room is being released to ensure proper cleanup.\n   * @internal\n   */\n  dispose(): void {\n    this._logger.trace('DefaultMessages.dispose();');\n\n    // Remove all user-level listeners from the emitter\n    this._emitter.off();\n\n    // Reject all pending subscription point promises to break circular references\n    const disposalError = new Ably.ErrorInfo('room has been disposed', 40000, 400) as unknown as Error;\n    for (const rejectFn of this._pendingPromiseRejecters) {\n      try {\n        rejectFn(disposalError);\n      } catch {\n        // Ignore errors from already resolved/rejected promises\n      }\n    }\n    this._pendingPromiseRejecters.clear();\n\n    // Clear all subscription points\n    this._listenerSubscriptionPoints.clear();\n\n    // Remove all pending attach listeners\n    for (const offAttachedListener of this._pendingAttachListeners) {\n      offAttachedListener();\n    }\n    this._pendingAttachListeners.clear();\n\n    // Unsubscribe from channel events using stored unsubscribe functions\n    this._unsubscribeMessageEvents();\n\n    // Remove specific channel state listeners using stored unsubscribe functions\n    this._offChannelAttached();\n    this._offChannelUpdate();\n\n    // Dispose of the reactions instance\n    this._reactions.dispose();\n\n    this._logger.debug('DefaultMessages.dispose(); disposed successfully');\n  }\n\n  /**\n   * Checks if there are any listeners registered by users.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._emitter);\n  }\n}\n","import * as Ably from 'ably';\n\nimport { Logger } from './logger.js';\nimport { Message, MessageHeaders, MessageMetadata, MessageOperationMetadata } from './message.js';\nimport { OrderBy } from './messages.js';\nimport { OccupancyData } from './occupancy-parser.js';\nimport { PaginatedResult } from './query.js';\nimport { messageFromRest, RestMessage } from './rest-types.js';\n\nexport interface HistoryQueryParams {\n  start?: number;\n  end?: number;\n  orderBy?: OrderBy;\n  limit?: number;\n  /**\n   * Serial indicating the starting point for message retrieval.\n   * This serial is specific to the region of the channel the client is connected to. Messages published within\n   * the same region of the channel are guaranteed to be received in increasing serial order.\n   * @defaultValue undefined (not used if not specified)\n   */\n  fromSerial?: string;\n}\n\n/**\n * In the REST API, we currently use the `direction` query parameter to specify the order of messages instead\n * of orderBy. So define this type for conversion purposes.\n */\ntype ApiHistoryQueryParams = Omit<HistoryQueryParams, 'orderBy'> & {\n  direction?: 'forwards' | 'backwards';\n};\n\nexport interface CreateMessageResponse {\n  /** The serial of the message */\n  serial: string;\n  /** The timestamp of the message */\n  timestamp: number;\n}\n\ninterface SendMessageParams {\n  text: string;\n  metadata?: MessageMetadata;\n  headers?: MessageHeaders;\n}\n\ntype UpdateMessageResponse = RestMessage;\n\ntype DeleteMessageResponse = RestMessage;\n\ninterface UpdateMessageParams {\n  /**\n   * Message data to update. All fields are updated and, if omitted, they are\n   * set to empty.\n   */\n  message: {\n    text: string;\n    metadata?: MessageMetadata;\n    headers?: MessageHeaders;\n  };\n\n  /** Description of the update action */\n  description?: string;\n\n  /** Metadata of the update action */\n  metadata?: MessageOperationMetadata;\n}\n\ninterface DeleteMessageParams {\n  /** Description of the delete action */\n  description?: string;\n\n  /** Metadata of the delete action */\n  metadata?: MessageOperationMetadata;\n}\n\n/**\n * Parameters for sending a message reaction.\n */\nexport interface SendMessageReactionParams {\n  /**\n   * The type of reaction, must be one of {@link MessageReactionType}.\n   */\n  type: string;\n\n  /**\n   * The reaction name to add; ie. the emoji.\n   */\n  name: string;\n\n  /**\n   * The count of the reaction for type {@link MessageReactionType.Multiple}.\n   * Defaults to 1 if not set. Not supported for other reaction types.\n   * @defaultValue 1\n   */\n  count?: number;\n}\n\n/**\n * Parameters for deleting a message reaction.\n */\nexport interface DeleteMessageReactionParams {\n  /**\n   * The type of reaction, must be one of {@link MessageReactionType}.\n   */\n  type: string;\n\n  /**\n   * The reaction name to remove, ie. the emoji. Required for all reaction types\n   * except {@link MessageReactionType.Unique}.\n   */\n  name?: string;\n}\n\n/**\n * Chat SDK Backend\n */\nexport class ChatApi {\n  private readonly _realtime: Ably.Realtime;\n  private readonly _logger: Logger;\n  private readonly _apiProtocolVersion: number = 4;\n\n  constructor(realtime: Ably.Realtime, logger: Logger) {\n    this._realtime = realtime;\n    this._logger = logger;\n  }\n\n  async history(roomName: string, params: HistoryQueryParams): Promise<PaginatedResult<Message>> {\n    // convert the params into internal format\n    const apiParams: ApiHistoryQueryParams = { ...params };\n    if (params.orderBy) {\n      switch (params.orderBy) {\n        case OrderBy.NewestFirst: {\n          apiParams.direction = 'backwards';\n          break;\n        }\n        case OrderBy.OldestFirst: {\n          apiParams.direction = 'forwards';\n          break;\n        }\n        default: {\n          // in vanilla JS use-cases, without types, we need to check non-enum values\n          // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n          throw new Ably.ErrorInfo(`invalid orderBy value: ${params.orderBy}`, 40000, 400);\n        }\n      }\n    }\n\n    const data = await this._makeAuthorizedPaginatedRequest<RestMessage>(\n      this._roomUrl(roomName, '/messages'),\n      apiParams,\n    );\n    return this._recursivePaginateMessages(data);\n  }\n\n  private _recursivePaginateMessages(data: PaginatedResult<RestMessage>): PaginatedResult<Message> {\n    const result: PaginatedResult<Message> = {} as PaginatedResult<Message>;\n    result.items = data.items.map((payload) => messageFromRest(payload));\n\n    // Recursively map the next paginated data\n    // eslint-disable-next-line unicorn/no-null\n    result.next = () => data.next().then((nextData) => (nextData ? this._recursivePaginateMessages(nextData) : null));\n\n    result.first = () => data.first().then((firstData) => this._recursivePaginateMessages(firstData));\n\n    result.current = () => data.current().then((currentData) => this._recursivePaginateMessages(currentData));\n\n    result.hasNext = () => data.hasNext();\n\n    result.isLast = () => data.isLast();\n\n    return { ...data, ...result };\n  }\n\n  async getMessage(roomName: string, serial: string): Promise<Message> {\n    const restMessage = await this._makeAuthorizedRequest<RestMessage>(this._messageUrl(roomName, serial), 'GET');\n    return messageFromRest(restMessage);\n  }\n\n  deleteMessage(roomName: string, serial: string, params?: DeleteMessageParams): Promise<DeleteMessageResponse> {\n    const body = {\n      ...(params?.description && { description: params.description }),\n      ...(params?.metadata && { metadata: params.metadata }),\n    };\n    return this._makeAuthorizedRequest<DeleteMessageResponse>(\n      this._messageUrl(roomName, serial, '/delete'),\n      'POST',\n      body,\n      {},\n    );\n  }\n\n  sendMessage(roomName: string, params: SendMessageParams): Promise<CreateMessageResponse> {\n    const body = {\n      text: params.text,\n      ...(params.metadata && { metadata: params.metadata }),\n      ...(params.headers && { headers: params.headers }),\n    };\n    return this._makeAuthorizedRequest<CreateMessageResponse>(this._roomUrl(roomName, '/messages'), 'POST', body);\n  }\n\n  updateMessage(roomName: string, serial: string, params: UpdateMessageParams): Promise<UpdateMessageResponse> {\n    return this._makeAuthorizedRequest<UpdateMessageResponse>(this._messageUrl(roomName, serial), 'PUT', params);\n  }\n\n  sendMessageReaction(roomName: string, serial: string, data: SendMessageReactionParams): Promise<void> {\n    return this._makeAuthorizedRequest(this._messageUrl(roomName, serial, '/reactions'), 'POST', data);\n  }\n\n  deleteMessageReaction(roomName: string, serial: string, data: DeleteMessageReactionParams): Promise<void> {\n    return this._makeAuthorizedRequest(this._messageUrl(roomName, serial, '/reactions'), 'DELETE', undefined, data);\n  }\n\n  getClientReactions(roomName: string, serial: string, clientId?: string): Promise<Message['reactions']> {\n    const params = clientId ? { forClientId: clientId } : {};\n    return this._makeAuthorizedRequest<Message['reactions']>(\n      this._messageUrl(roomName, serial, '/client-reactions'),\n      'GET',\n      undefined,\n      params,\n    );\n  }\n\n  getOccupancy(roomName: string): Promise<OccupancyData> {\n    return this._makeAuthorizedRequest<OccupancyData>(this._roomUrl(roomName, '/occupancy'), 'GET');\n  }\n\n  private async _makeAuthorizedRequest<RES = undefined>(\n    url: string,\n    method: 'POST' | 'GET' | 'PUT' | 'DELETE' | 'PATCH',\n    body?: unknown,\n    params?: unknown,\n  ): Promise<RES> {\n    const response = await this._doRequest(url, method, params, body);\n    return response.items[0] as RES;\n  }\n\n  private async _makeAuthorizedPaginatedRequest<RES>(\n    url: string,\n    params?: unknown,\n    body?: unknown,\n  ): Promise<PaginatedResult<RES>> {\n    return this._doRequest(url, 'GET', params, body);\n  }\n\n  private async _doRequest<RES>(\n    url: string,\n    method: 'POST' | 'GET' | 'PUT' | 'DELETE' | 'PATCH',\n    params?: unknown,\n    body?: unknown,\n  ): Promise<PaginatedResult<RES>> {\n    const response = await this._realtime.request(method, url, this._apiProtocolVersion, params, body);\n    if (!response.success) {\n      this._logger.error('ChatApi._doRequest(); failed to make request', {\n        url,\n        method,\n        statusCode: response.statusCode,\n        errorCode: response.errorCode,\n        errorMessage: response.errorMessage,\n      });\n      throw new Ably.ErrorInfo(response.errorMessage, response.errorCode, response.statusCode);\n    }\n\n    return response;\n  }\n\n  /**\n   * Returns a URL for a specific room.\n   * @param roomName Name of the room\n   * @param suffix The suffix to add to the room URL, prefixed with /\n   * @returns string The formatted URL\n   */\n  private _roomUrl(roomName: string, suffix = ''): string {\n    return `/chat/v4/rooms/${encodeURIComponent(roomName)}${suffix}`;\n  }\n\n  /**\n   * Returns a URL for a specific message in the room.\n   * @param roomName string Name of the room\n   * @param serial string The serial of the message\n   * @param suffix The suffix to add to the room URL, prefixed with /\n   * @returns string The formatted URL\n   */\n  private _messageUrl(roomName: string, serial: string, suffix = ''): string {\n    return `${this._roomUrl(roomName, '/messages')}/${encodeURIComponent(serial)}${suffix}`;\n  }\n}\n","import * as Ably from 'ably';\n\n/**\n * Error codes for the Chat SDK.\n */\nexport enum ErrorCode {\n  /**\n   * The request was invalid.\n   */\n  BadRequest = 40000,\n\n  /**\n   * The message was rejected before publishing by a rule on the chat room.\n   */\n  MessageRejectedByBeforePublishRule = 42211,\n\n  /**\n   * The message was rejected before publishing by a moderation rule on the chat room.\n   */\n  MessageRejectedByModeration = 42213,\n\n  /**\n   * Could not re-enter presence automatically after a room re-attach occurred.\n   */\n  PresenceAutoReentryFailed = 91004,\n\n  /**\n   * The room has experienced a discontinuity.\n   */\n  RoomDiscontinuity = 102100,\n\n  // Unable to perform operation;\n\n  /**\n   * Cannot perform operation because the room is in a failed state.\n   */\n  RoomInFailedState = 102101,\n\n  /**\n   * Cannot perform operation because the room is in a releasing state.\n   */\n  RoomIsReleasing = 102102,\n\n  /**\n   * Cannot perform operation because the room is in a released state.\n   */\n  RoomIsReleased = 102103,\n\n  /**\n   * Room was released before the operation could complete.\n   */\n  RoomReleasedBeforeOperationCompleted = 102106,\n}\n\n/**\n * Returns true if the {@link Ably.ErrorInfo} code matches the provided ErrorCode value.\n * @param errorInfo The error info to check.\n * @param error The error code to compare against.\n * @returns true if the error code matches, false otherwise.\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\nexport const errorInfoIs = (errorInfo: Ably.ErrorInfo, error: ErrorCode): boolean => errorInfo.code === error;\n","/**\n * Gets the single main channel for the chat room.\n * @param roomName The room name.\n * @returns  The channel name.\n */\nexport const roomChannelName = (roomName: string): string => `${roomName}::$chat`;\n","import * as Ably from 'ably';\n\n// Update this when you release a new version\nexport const VERSION = '0.14.1';\nexport const CHANNEL_OPTIONS_AGENT_STRING = `chat-js/${VERSION}`;\nexport const CHANNEL_OPTIONS_AGENT_STRING_REACT = `chat-react/${VERSION}`;\n// Modes required for basic message functionality\nexport const DEFAULT_CHANNEL_MODES: Ably.ChannelMode[] = ['PUBLISH', 'SUBSCRIBE'];\nexport const DEFAULT_CHANNEL_OPTIONS: Ably.ChannelOptions = {\n  params: { agent: CHANNEL_OPTIONS_AGENT_STRING },\n  attachOnSubscribe: false,\n  modes: DEFAULT_CHANNEL_MODES,\n};\n\nexport const DEFAULT_CHANNEL_OPTIONS_REACT: Ably.ChannelOptions = {\n  // Spec: CHA-IN1b1\n  params: { agent: `${CHANNEL_OPTIONS_AGENT_STRING} ${CHANNEL_OPTIONS_AGENT_STRING_REACT}` },\n  attachOnSubscribe: false,\n  modes: DEFAULT_CHANNEL_MODES,\n};\n","import * as Ably from 'ably';\n\nimport { roomChannelName } from './channel.js';\nimport { Logger } from './logger.js';\nimport { DEFAULT_CHANNEL_OPTIONS, DEFAULT_CHANNEL_OPTIONS_REACT } from './version.js';\n\nexport type ChannelOptionsWithModes = Omit<Ably.ChannelOptions, 'modes'> & Required<Pick<Ably.ChannelOptions, 'modes'>>;\n\nexport type ChannelOptionsMerger = (options: ChannelOptionsWithModes) => ChannelOptionsWithModes;\n\nexport class ChannelManager {\n  private readonly _realtime: Ably.Realtime;\n  private readonly _logger: Logger;\n  private _registeredOptions: ChannelOptionsWithModes;\n  private readonly _isReact: boolean;\n  private _resolvedChannel?: Ably.RealtimeChannel;\n  private readonly _channelId: string;\n\n  constructor(roomName: string, realtime: Ably.Realtime, logger: Logger, isReact: boolean) {\n    logger.trace('ChannelManager();', { isReact });\n    this._realtime = realtime;\n    this._logger = logger;\n    this._isReact = isReact;\n    this._registeredOptions = this._defaultChannelOptions();\n    this._channelId = roomChannelName(roomName);\n  }\n\n  mergeOptions(merger: ChannelOptionsMerger): void {\n    this._logger.trace('ChannelManager.mergeOptions();');\n    if (this._resolvedChannel) {\n      this._logger.error('channel options cannot be modified after the channel has been requested');\n      throw new Ably.ErrorInfo('channel options cannot be modified after the channel has been requested', 40000, 400);\n    }\n\n    this._registeredOptions = merger(this._registeredOptions);\n  }\n\n  get(): Ably.RealtimeChannel {\n    this._logger.trace('ChannelManager.get();');\n\n    this._resolvedChannel ??= this._realtime.channels.get(this._channelId, this._registeredOptions);\n\n    return this._resolvedChannel;\n  }\n\n  release(): void {\n    this._logger.trace('ChannelManager.release();', { channelId: this._channelId });\n    if (!this._resolvedChannel) {\n      return;\n    }\n\n    this._realtime.channels.release(this._channelId);\n  }\n\n  private _defaultChannelOptions(): ChannelOptionsWithModes {\n    this._logger.trace('ChannelManager._defaultChannelOptions();');\n\n    // Spec: CHA-IN1e\n    const baseOptions = this._isReact ? DEFAULT_CHANNEL_OPTIONS_REACT : DEFAULT_CHANNEL_OPTIONS;\n    this._logger.trace(this._isReact ? 'using react channel options' : 'using default channel options');\n\n    // Create a deep copy of the options, ensuring modes array is also copied\n    return { ...baseOptions, modes: [...(baseOptions.modes ?? [])] } as ChannelOptionsWithModes;\n  }\n}\n","import * as Ably from 'ably';\n\n/**\n * Represents the occupancy data of a chat room.\n */\nexport interface OccupancyData {\n  /**\n   * The number of connections to the chat room.\n   */\n  connections: number;\n\n  /**\n   * The number of presence members in the chat room - members who have entered presence.\n   */\n  presenceMembers: number;\n}\n\n/**\n * Represents the structure of an occupancy message payload.\n */\ninterface OccupancyPayload {\n  data?: {\n    metrics?: {\n      connections?: number;\n      presenceMembers?: number;\n    };\n  };\n}\n\n/**\n * Parses occupancy data from an Ably message, using fallback values of 0 for invalid data.\n * @param message The Ably message containing occupancy data\n * @returns Parsed occupancy data with fallback values for invalid fields\n */\nexport const parseOccupancyMessage = (message: Ably.InboundMessage): OccupancyData => {\n  const payload = message as OccupancyPayload;\n  let connections = 0;\n  let presenceMembers = 0;\n\n  // Check if data is a valid object\n  if (!payload.data || typeof payload.data !== 'object') {\n    return { connections, presenceMembers };\n  }\n\n  const { metrics } = payload.data;\n\n  // Check if metrics is undefined or null\n  if (!metrics || typeof metrics !== 'object') {\n    return { connections, presenceMembers };\n  }\n\n  // Parse connections\n  if (typeof metrics.connections === 'number' && Number.isInteger(metrics.connections)) {\n    connections = metrics.connections;\n  }\n\n  // Parse presenceMembers\n  if (typeof metrics.presenceMembers === 'number' && Number.isInteger(metrics.presenceMembers)) {\n    presenceMembers = metrics.presenceMembers;\n  }\n\n  return { connections, presenceMembers };\n};\n","import * as Ably from 'ably';\n\nimport { ChannelOptionsMerger } from './channel-manager.js';\nimport { ChatApi } from './chat-api.js';\nimport { OccupancyEvent, OccupancyEventType, RealtimeMetaEventType } from './events.js';\nimport { Logger } from './logger.js';\nimport { OccupancyData, parseOccupancyMessage } from './occupancy-parser.js';\nimport { subscribe } from './realtime-subscriptions.js';\nimport { InternalRoomOptions } from './room-options.js';\nimport { Subscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * This interface is used to interact with occupancy in a chat room: subscribing to occupancy updates and\n * fetching the current room occupancy metrics.\n *\n * Get an instance via {@link Room.occupancy}.\n */\nexport interface Occupancy {\n  /**\n   * Subscribe a given listener to occupancy updates of the chat room.\n   *\n   * Note: This requires occupancy events to be enabled via the `enableEvents` option in\n   * the {@link OccupancyOptions} options provided to the room. If this is not enabled, an error will be thrown.\n   * @param listener A listener to be called when the occupancy of the room changes.\n   * @returns A subscription object that can be used to unsubscribe the listener.\n   * @throws {Ably.ErrorInfo} If occupancy events are not enabled for this room.\n   */\n  subscribe(listener: OccupancyListener): Subscription;\n\n  /**\n   * Get the current occupancy of the chat room.\n   * @returns A promise that resolves to the current occupancy of the chat room.\n   */\n  get(): Promise<OccupancyData>;\n\n  /**\n   * Get the latest occupancy data received from realtime events.\n   * @returns The latest occupancy data, or undefined if no realtime events have been received yet.\n   * @throws {Ably.ErrorInfo} If occupancy events are not enabled for this room.\n   */\n  current(): OccupancyData | undefined;\n}\n\n/**\n * A listener that is called when the occupancy of a chat room changes.\n * @param event The occupancy event.\n */\nexport type OccupancyListener = (event: OccupancyEvent) => void;\n\ninterface OccupancyEventsMap {\n  [OccupancyEventType.Updated]: OccupancyEvent;\n}\n\n/**\n * @inheritDoc\n */\nexport class DefaultOccupancy implements Occupancy {\n  private readonly _roomName: string;\n  private readonly _channel: Ably.RealtimeChannel;\n  private readonly _chatApi: ChatApi;\n  private readonly _logger: Logger;\n  private readonly _emitter = new EventEmitter<OccupancyEventsMap>();\n  private readonly _roomOptions: InternalRoomOptions;\n  private _latestOccupancyData?: OccupancyData;\n  private readonly _unsubscribeOccupancyEvents: () => void;\n\n  /**\n   * Constructs a new `DefaultOccupancy` instance.\n   * @param roomName The unique identifier of the room.\n   * @param channel An instance of the Realtime channel.\n   * @param chatApi An instance of the ChatApi.\n   * @param logger An instance of the Logger.\n   * @param roomOptions The room options.\n   */\n  constructor(\n    roomName: string,\n    channel: Ably.RealtimeChannel,\n    chatApi: ChatApi,\n    logger: Logger,\n    roomOptions: InternalRoomOptions,\n  ) {\n    this._roomName = roomName;\n    this._channel = channel;\n    this._chatApi = chatApi;\n    this._logger = logger;\n    this._roomOptions = roomOptions;\n\n    // Create bound listener\n    const occupancyEventsListener = this._internalOccupancyListener.bind(this);\n\n    // Use subscription helper to create cleanup function\n    if (this._roomOptions.occupancy.enableEvents) {\n      this._logger.debug('DefaultOccupancy(); subscribing to occupancy events');\n      this._unsubscribeOccupancyEvents = subscribe(\n        this._channel,\n        [RealtimeMetaEventType.Occupancy],\n        occupancyEventsListener,\n      );\n    } else {\n      this._unsubscribeOccupancyEvents = () => {\n        // No-op function when events are not enabled\n      };\n    }\n  }\n\n  /**\n   * @inheritdoc\n   */\n  subscribe(listener: OccupancyListener): Subscription {\n    this._logger.trace('Occupancy.subscribe();');\n\n    if (!this._roomOptions.occupancy.enableEvents) {\n      throw new Ably.ErrorInfo(\n        'cannot subscribe to occupancy; occupancy events are not enabled in room options',\n        40000,\n        400,\n      ) as unknown as Error;\n    }\n\n    const wrapped = wrap(listener);\n    this._emitter.on(wrapped);\n\n    return {\n      unsubscribe: () => {\n        this._logger.trace('Occupancy.unsubscribe();');\n        this._emitter.off(wrapped);\n      },\n    };\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async get(): Promise<OccupancyData> {\n    this._logger.trace('Occupancy.get();');\n    return this._chatApi.getOccupancy(this._roomName);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  current(): OccupancyData | undefined {\n    this._logger.trace('Occupancy.current();');\n\n    // CHA-O7c\n    if (!this._roomOptions.occupancy.enableEvents) {\n      throw new Ably.ErrorInfo(\n        'cannot get current occupancy; occupancy events are not enabled in room options',\n        40000,\n        400,\n      ) as unknown as Error;\n    }\n\n    // CHA-07a\n    // CHA-07b\n    return this._latestOccupancyData;\n  }\n\n  /**\n   * An internal listener that listens for occupancy events from the underlying channel and translates them into\n   * occupancy events for the public API.\n   * @param message The inbound message containing occupancy data.\n   */\n  private _internalOccupancyListener(message: Ably.InboundMessage): void {\n    this._logger.trace('Occupancy._internalOccupancyListener();', message);\n\n    this._latestOccupancyData = parseOccupancyMessage(message);\n\n    this._emitter.emit(OccupancyEventType.Updated, {\n      type: OccupancyEventType.Updated,\n      occupancy: this._latestOccupancyData,\n    });\n  }\n\n  /**\n   * Merges the channel options for the room with the ones required for occupancy.\n   * @param roomOptions The internal room options.\n   * @returns A function that merges the channel options for the room with the ones required for occupancy.\n   */\n  static channelOptionMerger(roomOptions: InternalRoomOptions): ChannelOptionsMerger {\n    return (options) => {\n      // Occupancy not required, so we can skip this.\n      if (!roomOptions.occupancy.enableEvents) {\n        return options;\n      }\n\n      return { ...options, params: { ...options.params, occupancy: 'metrics' } };\n    };\n  }\n\n  /**\n   * Disposes of the occupancy instance, removing all listeners and subscriptions.\n   * This method should be called when the room is being released to ensure proper cleanup.\n   * @internal\n   */\n  dispose(): void {\n    this._logger.trace('DefaultOccupancy.dispose();');\n\n    // Remove occupancy event subscriptions using stored unsubscribe function\n    this._unsubscribeOccupancyEvents();\n\n    // Remove user-level listeners\n    this._emitter.off();\n\n    this._logger.debug('DefaultOccupancy.dispose(); disposed successfully');\n  }\n\n  /**\n   * Checks if there are any listeners registered by users.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._emitter);\n  }\n}\n","import * as Ably from 'ably';\n\nimport { ChannelOptionsMerger } from './channel-manager.js';\nimport { PresenceEventType } from './events.js';\nimport { JsonObject } from './json.js';\nimport { Logger } from './logger.js';\nimport { on, subscribe } from './realtime-subscriptions.js';\nimport { InternalRoomOptions } from './room-options.js';\nimport { Subscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * The state of presence in a room\n */\nexport interface PresenceState {\n  /**\n   * Whether the current user is present in the room\n   */\n  readonly present: boolean;\n}\n\n/**\n * A presence state change event\n */\nexport interface PresenceStateChange {\n  /**\n   * The presence state before this change\n   */\n  readonly previous: PresenceState;\n\n  /**\n   * The presence state after this change\n   */\n  readonly current: PresenceState;\n\n  /**\n   * Any error that occurred during this state change\n   * This will be set if there was an error fetching presence data or performing presence operations\n   */\n  readonly error?: Ably.ErrorInfo;\n}\n\n/**\n * Listener for presence state changes\n */\nexport type PresenceStateChangeListener = (change: PresenceStateChange) => void;\n\n/**\n * Interface for PresenceEventsMap\n */\ninterface PresenceEventsMap {\n  [PresenceEventType.Enter]: PresenceEvent;\n  [PresenceEventType.Leave]: PresenceEvent;\n  [PresenceEventType.Update]: PresenceEvent;\n  [PresenceEventType.Present]: PresenceEvent;\n}\n\n/**\n * Type for data that can be entered into presence as an object literal.\n * @example\n * ```ts\n * const foo: PresenceData = {\n *   bar: {\n *     baz: 1\n *   }\n * }\n * ```\n * @example\n * ```ts\n * // Defining a custom type for presence data. It must be a JSON serializable object.\n * interface MyPresenceData {\n *   [key: string]: JsonValue; // Type check for JSON compatibility.\n *   foo: string;\n *   bar: {\n *     baz: string;\n *   }\n *  }\n * ```\n */\nexport type PresenceData = JsonObject;\n\n/**\n * Type for PresenceEvent\n */\nexport interface PresenceEvent {\n  /**\n   * The type of the presence event.\n   */\n  type: PresenceEventType;\n\n  /**\n   * The presence member associated with this event.\n   */\n  member: PresenceMember;\n}\n\n/**\n * Type for PresenceMember.\n *\n * Presence members are unique based on their `connectionId` and `clientId`. It is possible for\n * multiple users to have the same `clientId` if they are connected to the room from different devices.\n */\nexport type PresenceMember = Omit<Ably.PresenceMessage, 'id' | 'action' | 'timestamp'> & {\n  /**\n   * The timestamp of when the last change in state occurred for this presence member.\n   */\n  updatedAt: Date;\n\n  /**\n   * The data associated with the presence member.\n   */\n  data: PresenceData | undefined;\n\n  /**\n   * The extras associated with the presence member.\n   */\n  extras: unknown;\n};\n\n/**\n * Type for PresenceListener\n * @param event The presence event that was received.\n */\nexport type PresenceListener = (event: PresenceEvent) => void;\n\n/**\n * This interface is used to interact with presence in a chat room: subscribing to presence events,\n * fetching presence members, or sending presence events (join,update,leave).\n *\n * Get an instance via {@link Room.presence}.\n */\nexport interface Presence {\n  /**\n   * Method to get list of the current online users and returns the latest presence messages associated to it.\n   * @param params - Parameters that control how the presence set is retrieved.\n   * @throws If the room is not in the `attached` or `attaching` state.\n   * @returns or upon failure, the promise will be rejected with an {@link Ably.ErrorInfo} object which explains the error.\n   */\n  get(params?: Ably.RealtimePresenceParams): Promise<PresenceMember[]>;\n\n  /**\n   * Method to check if user with supplied clientId is online\n   * @param clientId - The client ID to check if it is present in the room.\n   * @throws If the room is not in the `attached` or `attaching` state.\n   * @returns or upon failure, the promise will be rejected with an {@link Ably.ErrorInfo} object which explains the error.\n   */\n  isUserPresent(clientId: string): Promise<boolean>;\n\n  /**\n   * Method to join room presence, will emit an enter event to all subscribers. Repeat calls will trigger more enter events.\n   * @param data - The users data, a JSON serializable object that will be sent to all subscribers.\n   * @throws If the room is not in the `attached` or `attaching` state.\n   * @returns or upon failure, the promise will be rejected with an {@link Ably.ErrorInfo} object which explains the error.\n   */\n  enter(data?: PresenceData): Promise<void>;\n\n  /**\n   * Method to update room presence, will emit an update event to all subscribers. If the user is not present, it will be treated as a join event.\n   * @param data - The users data, a JSON serializable object that will be sent to all subscribers.\n   * @throws If the room is not in the `attached` or `attaching` state.\n   * @returns or upon failure, the promise will be rejected with an {@link Ably.ErrorInfo} object which explains the error.\n   */\n  update(data?: PresenceData): Promise<void>;\n\n  /**\n   * Method to leave room presence, will emit a leave event to all subscribers. If the user is not present, it will be treated as a no-op.\n   * @param data - The users data, a JSON serializable object that will be sent to all subscribers.\n   * @throws If the room is not in the `attached` or `attaching` state.\n   * @returns or upon failure, the promise will be rejected with an {@link Ably.ErrorInfo} object which explains the error.\n   */\n  leave(data?: PresenceData): Promise<void>;\n\n  /**\n   * Subscribe the given listener from the given list of events.\n   *\n   * Note: This requires presence events to be enabled via the `enableEvents` option in\n   * the {@link PresenceOptions} provided to the room. If this is not enabled, an error will be thrown.\n   * @param eventOrEvents {'enter' | 'leave' | 'update' | 'present'} single event name or array of events to subscribe to\n   * @param listener listener to subscribe\n   * @throws An {@link Ably.ErrorInfo} with code 40000 if presence events are not enabled\n   */\n  subscribe(eventOrEvents: PresenceEventType | PresenceEventType[], listener?: PresenceListener): Subscription;\n\n  /**\n   * Subscribe the given listener to all presence events.\n   *\n   * Note: This requires presence events to be enabled via the `enableEvents` option in\n   * the {@link PresenceOptions} provided to the room. If this is not enabled, an error will be thrown.\n   * @param listener listener to subscribe\n   * @throws An {@link Ably.ErrorInfo} with code 40000 if presence events are not enabled\n   */\n  subscribe(listener?: PresenceListener): Subscription;\n}\n\n/**\n * @inheritDoc\n */\nexport class DefaultPresence implements Presence {\n  private readonly _channel: Ably.RealtimeChannel;\n  private readonly _clientId: string;\n  private readonly _logger: Logger;\n  private readonly _emitter = new EventEmitter<PresenceEventsMap>();\n  private readonly _stateEmitter = new EventEmitter<{ 'presence.state.change': PresenceStateChange }>();\n  private readonly _options: InternalRoomOptions;\n  private _presenceState: PresenceState = {\n    present: false,\n  };\n  private readonly _unsubscribePresenceEvents: () => void;\n  private readonly _offChannelUpdate: () => void;\n  private readonly _offChannelDetach: () => void;\n\n  /**\n   * Constructs a new `DefaultPresence` instance.\n   * @param channel The Realtime channel instance.\n   * @param clientId The client ID, attached to presences messages as an identifier of the sender.\n   * A channel can have multiple connections using the same clientId.\n   * @param logger An instance of the Logger.\n   * @param options The room options.\n   */\n  constructor(channel: Ably.RealtimeChannel, clientId: string, logger: Logger, options: InternalRoomOptions) {\n    this._channel = channel;\n    this._clientId = clientId;\n    this._logger = logger;\n    this._options = options;\n\n    // Create bound listener\n    const presenceEventsListener = this.subscribeToEvents.bind(this);\n\n    const channelUpdateListener = (stateChange: Ably.ChannelStateChange) => {\n      if (stateChange.reason?.code === 91004) {\n        // PresenceAutoReentryFailed\n        this._logger.debug('Presence auto-reentry failed', { reason: stateChange.reason });\n        this._emitPresenceStateChange(false, stateChange.reason);\n        return;\n      }\n\n      // Channel has been moved to detached, which means any members we have will be removed\n      if (stateChange.current === 'detached') {\n        this._emitPresenceStateChange(false);\n        return;\n      }\n    };\n\n    const channelDetachListener = (stateChange: Ably.ChannelStateChange) => {\n      this._emitPresenceStateChange(false, stateChange.reason);\n    };\n\n    this._offChannelUpdate = on(this._channel, 'update', channelUpdateListener);\n    this._offChannelDetach = on(this._channel, ['detached', 'failed'], channelDetachListener);\n\n    // Use subscription helper to create cleanup function\n    this._unsubscribePresenceEvents = subscribe(this._channel.presence, presenceEventsListener);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async get(params?: Ably.RealtimePresenceParams): Promise<PresenceMember[]> {\n    this._logger.trace('Presence.get()', { params });\n    this._assertChannelState();\n    const userOnPresence = await this._channel.presence.get(params);\n\n    // ably-js never emits the 'absent' event, so we can safely ignore it here.\n    return userOnPresence.map((user) => this._realtimeMemberToPresenceMember(user));\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async isUserPresent(clientId: string): Promise<boolean> {\n    this._logger.trace(`Presence.isUserPresent()`, { clientId });\n    this._assertChannelState();\n    const presenceSet = await this._channel.presence.get({ clientId: clientId });\n    return presenceSet.length > 0;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async enter(data?: PresenceData): Promise<void> {\n    this._logger.trace(`Presence.enter()`, { data });\n    this._assertChannelState();\n    try {\n      await this._channel.presence.enterClient(this._clientId, data);\n      this._emitPresenceStateChange(true);\n    } catch (error) {\n      this._emitPresenceStateChange(false, error as Ably.ErrorInfo);\n      throw error;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async update(data?: PresenceData): Promise<void> {\n    this._logger.trace(`Presence.update()`, { data });\n    this._assertChannelState();\n    try {\n      await this._channel.presence.updateClient(this._clientId, data);\n      this._emitPresenceStateChange(true);\n    } catch (error) {\n      this._emitPresenceStateChange(false, error as Ably.ErrorInfo);\n      throw error;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async leave(data?: PresenceData): Promise<void> {\n    this._logger.trace(`Presence.leave()`, { data });\n    this._assertChannelState();\n    try {\n      await this._channel.presence.leaveClient(this._clientId, data);\n      this._emitPresenceStateChange(false);\n    } catch (error) {\n      this._emitPresenceStateChange(false, error as Ably.ErrorInfo);\n      throw error;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  subscribe(eventOrEvents: PresenceEventType | PresenceEventType[], listener?: PresenceListener): Subscription;\n  /**\n   * @inheritDoc\n   */\n  subscribe(listener?: PresenceListener): Subscription;\n  subscribe(\n    listenerOrEvents?: PresenceEventType | PresenceEventType[] | PresenceListener,\n    listener?: PresenceListener,\n  ): Subscription {\n    this._logger.trace('Presence.subscribe(); listenerOrEvents', { listenerOrEvents });\n\n    // Check if presence events are enabled\n    if (!this._options.presence.enableEvents) {\n      this._logger.error('could not subscribe to presence; presence events are not enabled');\n      throw new Ably.ErrorInfo('could not subscribe to presence; presence events are not enabled', 40000, 400);\n    }\n\n    if (!listenerOrEvents && !listener) {\n      this._logger.error('could not subscribe to presence; invalid arguments');\n      throw new Ably.ErrorInfo('could not subscribe listener: invalid arguments', 40000, 400);\n    }\n\n    // Add listener to all events\n    if (listener) {\n      const wrapped = wrap(listener);\n      this._emitter.on(listenerOrEvents as PresenceEventType, wrapped);\n      return {\n        unsubscribe: () => {\n          this._logger.trace('Presence.unsubscribe();', { events: listenerOrEvents });\n          this._emitter.off(wrapped);\n        },\n      };\n    } else {\n      const wrapped = wrap(listenerOrEvents as PresenceListener);\n      this._emitter.on(wrapped);\n      return {\n        unsubscribe: () => {\n          this._logger.trace('Presence.unsubscribe();');\n          this._emitter.off(wrapped);\n        },\n      };\n    }\n  }\n\n  /**\n   * Method to handle and emit presence events\n   * @param member - PresenceMessage ably-js object\n   */\n  subscribeToEvents = (member: Ably.PresenceMessage) => {\n    this._emitter.emit(member.action as PresenceEventType, {\n      type: member.action as PresenceEventType,\n      member: this._realtimeMemberToPresenceMember(member),\n    });\n  };\n\n  /**\n   * Merges the channel options for the room with the ones required for presence.\n   * @param roomOptions The room options to merge for.\n   * @returns A function that merges the channel options for the room with the ones required for presence.\n   */\n  static channelOptionMerger(roomOptions: InternalRoomOptions): ChannelOptionsMerger {\n    return (options) => {\n      // Presence mode is always required\n      if (!options.modes.includes('PRESENCE')) {\n        options.modes.push('PRESENCE');\n      }\n      // If presence events are enabled, add the PRESENCE_SUBSCRIBE mode\n      if (roomOptions.presence.enableEvents && !options.modes.includes('PRESENCE_SUBSCRIBE')) {\n        options.modes.push('PRESENCE_SUBSCRIBE');\n      }\n      return options;\n    };\n  }\n\n  /**\n   * Disposes of the presence instance, removing all listeners and subscriptions.\n   * This method should be called when the room is being released to ensure proper cleanup.\n   * @internal\n   */\n  dispose(): void {\n    this._logger.trace('DefaultPresence.dispose();');\n\n    // Remove all user-level listeners from the emitter\n    this._emitter.off();\n\n    // Unsubscribe from presence events using stored unsubscribe function\n    this._unsubscribePresenceEvents();\n\n    // Remove the channel update listener\n    this._offChannelUpdate();\n\n    // Remove the channel detach listener\n    this._offChannelDetach();\n\n    this._logger.debug('DefaultPresence.dispose(); disposed successfully');\n  }\n\n  /**\n   * Checks if there are any listeners registered by users.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._emitter);\n  }\n\n  /**\n   * Converts an Ably presence message to a presence member.\n   * @param member The Ably presence message to convert.\n   * @returns The presence member.\n   */\n  private _realtimeMemberToPresenceMember(member: Ably.PresenceMessage): PresenceMember {\n    return {\n      ...member,\n      data: member.data as PresenceData,\n      updatedAt: new Date(member.timestamp),\n    };\n  }\n\n  private _assertChannelState(): void {\n    if (this._channel.state !== 'attaching' && this._channel.state !== 'attached') {\n      this._logger.error('could not perform presence operation; room is not attached');\n      throw new Ably.ErrorInfo('could not perform presence operation; room is not attached', 40000, 400);\n    }\n  }\n\n  /**\n   * Private method to emit the presence state change event.\n   * @param present - Whether the user is present\n   * @param error - Optional error information\n   */\n  private _emitPresenceStateChange(present: boolean, error?: Ably.ErrorInfo): void {\n    this._logger.trace('Presence._emitPresenceStateChange()', { present, error });\n    const previous: PresenceState = { ...this._presenceState };\n    this._presenceState = { present };\n    const stateChange: PresenceStateChange = {\n      previous,\n      current: this._presenceState,\n      error,\n    };\n    this._stateEmitter.emit('presence.state.change', stateChange);\n  }\n\n  /**\n   * @param listener The listener to subscribe to presence state changes.\n   * @returns A subscription that can be used to unsubscribe from presence state changes.\n   * @internal\n   */\n  onPresenceStateChange(listener: PresenceStateChangeListener): Subscription {\n    this._logger.trace('Presence.onPresenceStateChange()');\n    const wrapped = wrap(listener);\n    this._stateEmitter.on('presence.state.change', wrapped);\n    return {\n      unsubscribe: () => {\n        this._logger.trace('Presence.unsubscribeFromPresenceStateChanges()');\n        this._stateEmitter.off(wrapped);\n      },\n    };\n  }\n}\n","const E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nconst E_ALREADY_LOCKED = new Error('mutex already locked');\nconst E_CANCELED = new Error('request for lock canceled');\n\nvar __awaiter$2 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Semaphore {\n    constructor(_value, _cancelError = E_CANCELED) {\n        this._value = _value;\n        this._cancelError = _cancelError;\n        this._queue = [];\n        this._weightedWaiters = [];\n    }\n    acquire(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve, reject) => {\n            const task = { resolve, reject, weight, priority };\n            const i = findIndexFromEnd(this._queue, (other) => priority <= other.priority);\n            if (i === -1 && weight <= this._value) {\n                // Needs immediate dispatch, skip the queue\n                this._dispatchItem(task);\n            }\n            else {\n                this._queue.splice(i + 1, 0, task);\n            }\n        });\n    }\n    runExclusive(callback_1) {\n        return __awaiter$2(this, arguments, void 0, function* (callback, weight = 1, priority = 0) {\n            const [value, release] = yield this.acquire(weight, priority);\n            try {\n                return yield callback(value);\n            }\n            finally {\n                release();\n            }\n        });\n    }\n    waitForUnlock(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        if (this._couldLockImmediately(weight, priority)) {\n            return Promise.resolve();\n        }\n        else {\n            return new Promise((resolve) => {\n                if (!this._weightedWaiters[weight - 1])\n                    this._weightedWaiters[weight - 1] = [];\n                insertSorted(this._weightedWaiters[weight - 1], { resolve, priority });\n            });\n        }\n    }\n    isLocked() {\n        return this._value <= 0;\n    }\n    getValue() {\n        return this._value;\n    }\n    setValue(value) {\n        this._value = value;\n        this._dispatchQueue();\n    }\n    release(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        this._value += weight;\n        this._dispatchQueue();\n    }\n    cancel() {\n        this._queue.forEach((entry) => entry.reject(this._cancelError));\n        this._queue = [];\n    }\n    _dispatchQueue() {\n        this._drainUnlockWaiters();\n        while (this._queue.length > 0 && this._queue[0].weight <= this._value) {\n            this._dispatchItem(this._queue.shift());\n            this._drainUnlockWaiters();\n        }\n    }\n    _dispatchItem(item) {\n        const previousValue = this._value;\n        this._value -= item.weight;\n        item.resolve([previousValue, this._newReleaser(item.weight)]);\n    }\n    _newReleaser(weight) {\n        let called = false;\n        return () => {\n            if (called)\n                return;\n            called = true;\n            this.release(weight);\n        };\n    }\n    _drainUnlockWaiters() {\n        if (this._queue.length === 0) {\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                waiters.forEach((waiter) => waiter.resolve());\n                this._weightedWaiters[weight - 1] = [];\n            }\n        }\n        else {\n            const queuedPriority = this._queue[0].priority;\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                const i = waiters.findIndex((waiter) => waiter.priority <= queuedPriority);\n                (i === -1 ? waiters : waiters.splice(0, i))\n                    .forEach((waiter => waiter.resolve()));\n            }\n        }\n    }\n    _couldLockImmediately(weight, priority) {\n        return (this._queue.length === 0 || this._queue[0].priority < priority) &&\n            weight <= this._value;\n    }\n}\nfunction insertSorted(a, v) {\n    const i = findIndexFromEnd(a, (other) => v.priority <= other.priority);\n    a.splice(i + 1, 0, v);\n}\nfunction findIndexFromEnd(a, predicate) {\n    for (let i = a.length - 1; i >= 0; i--) {\n        if (predicate(a[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nvar __awaiter$1 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Mutex {\n    constructor(cancelError) {\n        this._semaphore = new Semaphore(1, cancelError);\n    }\n    acquire() {\n        return __awaiter$1(this, arguments, void 0, function* (priority = 0) {\n            const [, releaser] = yield this._semaphore.acquire(1, priority);\n            return releaser;\n        });\n    }\n    runExclusive(callback, priority = 0) {\n        return this._semaphore.runExclusive(() => callback(), 1, priority);\n    }\n    isLocked() {\n        return this._semaphore.isLocked();\n    }\n    waitForUnlock(priority = 0) {\n        return this._semaphore.waitForUnlock(1, priority);\n    }\n    release() {\n        if (this._semaphore.isLocked())\n            this._semaphore.release();\n    }\n    cancel() {\n        return this._semaphore.cancel();\n    }\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction withTimeout(sync, timeout, timeoutError = E_TIMEOUT) {\n    return {\n        acquire: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let isTimeout = false;\n                const handle = setTimeout(() => {\n                    isTimeout = true;\n                    reject(timeoutError);\n                }, timeout);\n                try {\n                    const ticket = yield (isSemaphore(sync)\n                        ? sync.acquire(weight, priority)\n                        : sync.acquire(priority));\n                    if (isTimeout) {\n                        const release = Array.isArray(ticket) ? ticket[1] : ticket;\n                        release();\n                    }\n                    else {\n                        clearTimeout(handle);\n                        resolve(ticket);\n                    }\n                }\n                catch (e) {\n                    if (!isTimeout) {\n                        clearTimeout(handle);\n                        reject(e);\n                    }\n                }\n            }));\n        },\n        runExclusive(callback, weight, priority) {\n            return __awaiter(this, void 0, void 0, function* () {\n                let release = () => undefined;\n                try {\n                    const ticket = yield this.acquire(weight, priority);\n                    if (Array.isArray(ticket)) {\n                        release = ticket[1];\n                        return yield callback(ticket[0]);\n                    }\n                    else {\n                        release = ticket;\n                        return yield callback();\n                    }\n                }\n                finally {\n                    release();\n                }\n            });\n        },\n        release(weight) {\n            sync.release(weight);\n        },\n        cancel() {\n            return sync.cancel();\n        },\n        waitForUnlock: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => {\n                const handle = setTimeout(() => reject(timeoutError), timeout);\n                (isSemaphore(sync)\n                    ? sync.waitForUnlock(weight, priority)\n                    : sync.waitForUnlock(priority)).then(() => {\n                    clearTimeout(handle);\n                    resolve();\n                });\n            });\n        },\n        isLocked: () => sync.isLocked(),\n        getValue: () => sync.getValue(),\n        setValue: (value) => sync.setValue(value),\n    };\n}\nfunction isSemaphore(sync) {\n    return sync.getValue !== undefined;\n}\n\n// eslint-disable-next-lisne @typescript-eslint/explicit-module-boundary-types\nfunction tryAcquire(sync, alreadyAcquiredError = E_ALREADY_LOCKED) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return withTimeout(sync, 0, alreadyAcquiredError);\n}\n\nexport { E_ALREADY_LOCKED, E_CANCELED, E_TIMEOUT, Mutex, Semaphore, tryAcquire, withTimeout };\n","import * as Ably from 'ably';\n\nimport { Logger } from './logger.js';\nimport { StatusSubscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * The different states that a room can be in throughout its lifecycle.\n */\nexport enum RoomStatus {\n  /**\n   * The library is currently initializing the room. This state is a temporary state used in React prior\n   * to the room being resolved.\n   */\n  Initializing = 'initializing',\n\n  /**\n   * A temporary state for when the room object is first initialized.\n   */\n  Initialized = 'initialized',\n\n  /**\n   * The library is currently attempting to attach the room.\n   */\n  Attaching = 'attaching',\n\n  /**\n   * The room is currently attached and receiving events.\n   */\n  Attached = 'attached',\n\n  /**\n   * The room is currently detaching and will not receive events.\n   */\n  Detaching = 'detaching',\n\n  /**\n   * The room is currently detached and will not receive events.\n   */\n  Detached = 'detached',\n\n  /**\n   * The room is in an extended state of detachment, but will attempt to re-attach when able.\n   */\n  Suspended = 'suspended',\n\n  /**\n   * The room is currently detached and will not attempt to re-attach. User intervention is required.\n   */\n  Failed = 'failed',\n\n  /**\n   * The room is in the process of releasing. Attempting to use a room in this state may result in undefined behavior.\n   */\n  Releasing = 'releasing',\n\n  /**\n   * The room has been released and is no longer usable.\n   */\n  Released = 'released',\n}\n\n/**\n * Represents a change in the status of the room.\n */\nexport interface RoomStatusChange {\n  /**\n   * The new status of the room.\n   */\n  current: RoomStatus;\n\n  /**\n   * The previous status of the room.\n   */\n  previous: RoomStatus;\n\n  /**\n   * An error that provides a reason why the room has\n   * entered the new status, if applicable.\n   */\n  error?: Ably.ErrorInfo;\n}\n\n/**\n * A function that can be called when the room status changes.\n * @param change The change in status.\n */\nexport type RoomStatusListener = (change: RoomStatusChange) => void;\n\n/**\n * Represents the status of a Room.\n */\nexport interface RoomLifecycle {\n  /**\n   * The current status of the room.\n   */\n  get status(): RoomStatus;\n\n  /**\n   * The current error, if any, that caused the room to enter the current status.\n   */\n  get error(): Ably.ErrorInfo | undefined;\n\n  /**\n   * Registers a listener that will be called whenever the room status changes.\n   * @param listener The function to call when the status changes.\n   * @returns An object that can be used to unregister the listener.\n   */\n  onChange(listener: RoomStatusListener): StatusSubscription;\n}\n\n/**\n * An internal interface for the status of a room, which can be used to separate critical\n * internal functionality from user listeners.\n * @internal\n */\nexport interface InternalRoomLifecycle extends RoomLifecycle {\n  /**\n   * Sets the status of the room.\n   * @param params The new status of the room.\n   */\n  setStatus(params: NewRoomStatus): void;\n}\n\n/**\n * A new room status that can be set.\n */\nexport interface NewRoomStatus {\n  /**\n   * The new status of the room.\n   */\n  status: RoomStatus;\n\n  /**\n   * An error that provides a reason why the room has\n   * entered the new status, if applicable.\n   */\n  error?: Ably.ErrorInfo;\n}\n\ntype RoomStatusEventsMap = Record<RoomStatus, RoomStatusChange>;\n\n/**\n * An implementation of the `Status` interface.\n * @internal\n */\nexport class DefaultRoomLifecycle implements InternalRoomLifecycle {\n  private _status: RoomStatus = RoomStatus.Initialized;\n  private _error?: Ably.ErrorInfo;\n  private readonly _logger: Logger;\n  private readonly _emitter = new EventEmitter<RoomStatusEventsMap>();\n\n  /**\n   * Constructs a new DefaultRoomLifecycle instance.\n   * @param logger An instance of the Logger.\n   */\n  constructor(logger: Logger) {\n    this._logger = logger;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get status(): RoomStatus {\n    return this._status;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get error(): Ably.ErrorInfo | undefined {\n    return this._error;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  onChange(listener: RoomStatusListener): StatusSubscription {\n    const wrapped = wrap(listener);\n    this._emitter.on(wrapped);\n\n    return {\n      off: () => {\n        this._emitter.off(wrapped);\n      },\n    };\n  }\n\n  setStatus(params: NewRoomStatus): void {\n    const change: RoomStatusChange = {\n      current: params.status,\n      error: params.error,\n      previous: this._status,\n    };\n\n    this._status = change.current;\n    this._error = change.error;\n    this._logger.info(`room status changed`, { ...change });\n    this._emitter.emit(change.current, change);\n  }\n\n  /**\n   * Disposes of the room lifecycle instance, removing all listeners.\n   * This method should be called when the room is being released to ensure proper cleanup.\n   * @internal\n   */\n  dispose(): void {\n    this._logger.trace('DefaultRoomLifecycle.dispose();');\n\n    // Remove all user-level listeners\n    this._emitter.off();\n\n    this._logger.debug('DefaultRoomLifecycle.dispose(); disposed successfully');\n  }\n\n  /**\n   * Checks if there are any listeners registered by users.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._emitter);\n  }\n}\n","import * as Ably from 'ably';\nimport { Mutex } from 'async-mutex';\n\nimport { ChannelManager } from './channel-manager.js';\nimport { DiscontinuityListener } from './discontinuity.js';\nimport { ErrorCode } from './errors.js';\nimport { RoomEventType } from './events.js';\nimport { Logger } from './logger.js';\nimport { on } from './realtime-subscriptions.js';\nimport { InternalRoomLifecycle, RoomStatus } from './room-status.js';\nimport { StatusSubscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * Events that can be emitted by the RoomLifecycleManager\n */\nexport interface RoomLifeCycleEvents {\n  [RoomEventType.Discontinuity]: Ably.ErrorInfo;\n}\n\n/**\n * Priority levels for operations, lower numbers are higher priority\n */\nenum OperationPriority {\n  Release = 0,\n  AttachDetach = 1,\n}\n\n/**\n * Manages the lifecycle of a room's underlying channel, handling attach, detach and release operations\n * while maintaining the room's status.\n */\nexport class RoomLifecycleManager {\n  private readonly _channelManager: ChannelManager;\n  private readonly _roomLifecycle: InternalRoomLifecycle;\n  private readonly _logger: Logger;\n  private readonly _eventEmitter: EventEmitter<RoomLifeCycleEvents>;\n  private _hasAttachedOnce: boolean; // CHA-RL13\n  private _isExplicitlyDetached: boolean; // CHA-RL14\n  private readonly _mutex: Mutex; // CHA-RL7\n  private readonly _unsubscribeChannelStateListener: () => void;\n  private readonly _offDiscontinuityAttached: () => void;\n  private readonly _offDiscontinuityUpdate: () => void;\n\n  constructor(channelManager: ChannelManager, roomLifecycle: InternalRoomLifecycle, logger: Logger) {\n    this._channelManager = channelManager;\n    this._roomLifecycle = roomLifecycle;\n    this._logger = logger;\n    this._eventEmitter = new EventEmitter();\n    this._hasAttachedOnce = false; // CHA-RL13\n    this._isExplicitlyDetached = false; // CHA-RL14\n    this._mutex = new Mutex(); // CHA-RL7\n\n    // Create bound listeners\n    const channelStateListener = this._channelStateListener.bind(this);\n    const discontinuityOnAttachedListener = this._discontinuityOnAttachedListener.bind(this);\n    const discontinuityOnUpdateListener = this._discontinuityOnUpdateListener.bind(this);\n\n    // Use subscription helpers to create cleanup functions\n    const channel = this._channelManager.get();\n    this._unsubscribeChannelStateListener = on(channel, channelStateListener);\n    this._offDiscontinuityAttached = on(channel, 'attached', discontinuityOnAttachedListener);\n    this._offDiscontinuityUpdate = on(channel, 'update', discontinuityOnUpdateListener);\n  }\n\n  /**\n   * Registers a handler for discontinuity events.\n   * @param handler The function to be called when a discontinuity is detected\n   * @returns An object with an off() method to deregister the handler\n   */\n  onDiscontinuity(handler: DiscontinuityListener): StatusSubscription {\n    this._logger.trace('RoomLifecycleManager.onDiscontinuity()');\n    const wrapped = wrap(handler);\n    this._eventEmitter.on(RoomEventType.Discontinuity, wrapped);\n    return {\n      off: () => {\n        this._eventEmitter.off(RoomEventType.Discontinuity, wrapped);\n      },\n    };\n  }\n\n  /**\n   * Attaches to the channel and updates room status accordingly.\n   * If the room is released/releasing, this operation fails.\n   * If already attached, this is a no-op.\n   */\n  async attach(): Promise<void> {\n    // CHA-RL1d, CHA-RL7a\n    await this._mutex.runExclusive(async () => {\n      this._logger.trace('RoomLifecycleManager.attach();');\n\n      // CHA-RL1b, CHA-RL1c\n      this._checkRoomNotReleasing('attach');\n\n      // CHA-RL1a\n      if (this._roomStatusIs(RoomStatus.Attached)) {\n        this._logger.debug('RoomLifecycleManager.attach(); room already attached, no-op');\n        return;\n      }\n\n      const channel = this._channelManager.get();\n      this._logger.debug('RoomLifecycleManager.attach(); attaching room', {\n        channelState: channel.state,\n      });\n\n      try {\n        // CHA-RL1e\n        this._setStatus(RoomStatus.Attaching);\n        // CHA-RL1k\n        await channel.attach();\n        this._setStatus(RoomStatus.Attached);\n        this._isExplicitlyDetached = false;\n        this._hasAttachedOnce = true;\n        this._logger.debug('RoomLifecycleManager.attach(); room attached successfully');\n      } catch (error) {\n        const errInfo = error as Ably.ErrorInfo;\n        const attachError = new Ably.ErrorInfo(\n          `failed to attach room: ${errInfo.message}`,\n          errInfo.code,\n          errInfo.statusCode,\n          errInfo,\n        );\n\n        const newStatus = this._mapChannelStateToRoomStatus(channel.state);\n        this._setStatus(newStatus, attachError);\n        throw attachError;\n      }\n    }, OperationPriority.AttachDetach);\n  }\n\n  /**\n   * Detaches from the channel and updates room status accordingly.\n   * If the room is released/releasing, this operation fails.\n   * If already detached, this is a no-op.\n   */\n  async detach(): Promise<void> {\n    // CHA-RL2i, CHA-RL7a\n    await this._mutex.runExclusive(async () => {\n      this._logger.trace('RoomLifecycleManager.detach();');\n\n      // CHA-RL2d\n      if (this._roomStatusIs(RoomStatus.Failed)) {\n        throw new Ably.ErrorInfo('cannot detach room, room is in failed state', ErrorCode.RoomInFailedState, 400);\n      }\n\n      // CHA-RL2b, CHA-RL2c\n      this._checkRoomNotReleasing('detach');\n\n      // CHA-RL2a\n      if (this._roomStatusIs(RoomStatus.Detached)) {\n        this._logger.debug('RoomLifecycleManager.detach(); room already detached, no-op');\n        return;\n      }\n\n      const channel = this._channelManager.get();\n      this._logger.debug('RoomLifecycleManager.detach(); detaching room', {\n        channelState: channel.state,\n      });\n\n      try {\n        // CHA-RL2j\n        this._setStatus(RoomStatus.Detaching);\n        // CHA-RL2k\n        await channel.detach();\n        this._isExplicitlyDetached = true;\n        this._setStatus(RoomStatus.Detached);\n        this._logger.debug('RoomLifecycleManager.detach(); room detached successfully');\n      } catch (error) {\n        const errInfo = error as Ably.ErrorInfo;\n        const detachError = new Ably.ErrorInfo(\n          `failed to detach room: ${errInfo.message}`,\n          errInfo.code,\n          errInfo.statusCode,\n          errInfo,\n        );\n\n        const newStatus = this._mapChannelStateToRoomStatus(channel.state);\n        this._setStatus(newStatus, detachError);\n        throw detachError;\n      }\n    }, OperationPriority.AttachDetach);\n  }\n\n  /**\n   * Releases the room by detaching the channel and releasing it from the channel manager.\n   * If the channel is in a failed state, skips the detach operation.\n   * Will retry detach until successful unless in failed state.\n   */\n  async release(): Promise<void> {\n    // CHA-RL3k, CHA-RL7a\n    await this._mutex.runExclusive(async () => {\n      this._logger.trace('RoomLifecycleManager.release();');\n\n      // CHA-RL3a\n      if (this._roomStatusIs(RoomStatus.Released)) {\n        this._logger.debug('RoomLifecycleManager.release(); room already released, no-op');\n        return;\n      }\n\n      // CHA-RL3b, CHA-RL3j\n      if (this._roomStatusIs(RoomStatus.Initialized) || this._roomStatusIs(RoomStatus.Detached)) {\n        this._logger.debug('RoomLifecycleManager.release(); room is initialized or detached, releasing immediately', {\n          status: this._roomLifecycle.status,\n        });\n        this._releaseChannel();\n        return;\n      }\n\n      // CHA-RL3m\n      this._setStatus(RoomStatus.Releasing);\n      const channel = this._channelManager.get();\n\n      // CHA-RL3n\n      this._logger.debug('RoomLifecycleManager.release(); attempting channel detach before release', {\n        channelState: channel.state,\n      });\n      await this._channelDetachLoop(channel);\n\n      // CHA-RL3o, CHA-RL3h\n      this._releaseChannel();\n    }, OperationPriority.Release);\n  }\n\n  /**\n   * Maps an Ably channel state to a room status\n   * @param channelState The Ably channel state to map.\n   * @returns The corresponding room status.\n   */\n  private _mapChannelStateToRoomStatus(channelState: Ably.ChannelState): RoomStatus {\n    switch (channelState) {\n      case 'initialized': {\n        return RoomStatus.Initialized;\n      }\n      case 'attaching': {\n        return RoomStatus.Attaching;\n      }\n      case 'attached': {\n        return RoomStatus.Attached;\n      }\n      case 'detaching': {\n        return RoomStatus.Detaching;\n      }\n      case 'detached': {\n        return RoomStatus.Detached;\n      }\n      case 'suspended': {\n        return RoomStatus.Suspended;\n      }\n      case 'failed': {\n        return RoomStatus.Failed;\n      }\n      default: {\n        this._logger.error('RoomLifecycleManager._mapChannelStateToRoomStatus(); unknown channel state', {\n          channelState,\n        });\n        return RoomStatus.Failed;\n      }\n    }\n  }\n\n  private _checkRoomNotReleasing(op: string) {\n    switch (this._roomLifecycle.status) {\n      case RoomStatus.Released: {\n        throw new Ably.ErrorInfo(`cannot ${op} room, room is released`, ErrorCode.RoomIsReleased, 400);\n      }\n      case RoomStatus.Releasing: {\n        throw new Ably.ErrorInfo(`cannot ${op} room, room is currently releasing`, ErrorCode.RoomIsReleasing, 400);\n      }\n    }\n  }\n\n  /**\n   * Returns the current room status\n   * @param status The room status to check against.\n   * @returns true if the room status matches, false otherwise.\n   */\n  private _roomStatusIs(status: RoomStatus): boolean {\n    return this._roomLifecycle.status === status;\n  }\n\n  /**\n   * Disposes of the room lifecycle manager, removing all listeners and subscriptions.\n   * This method should be called when the room is being released to ensure proper cleanup.\n   * @internal\n   */\n  dispose(): void {\n    // Clean up channel listeners using stored unsubscribe functions\n    this._unsubscribeChannelStateListener();\n    this._offDiscontinuityAttached();\n    this._offDiscontinuityUpdate();\n\n    // Clean up user-level listeners\n    this._eventEmitter.off();\n  }\n\n  /**\n   * Checks if there are any listeners registered by users.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._eventEmitter);\n  }\n\n  private _channelStateListener(stateChange: Ably.ChannelStateChange): void {\n    this._logger.debug('RoomLifecycleManager.channel state changed', {\n      oldState: stateChange.previous,\n      newState: stateChange.current,\n      reason: stateChange.reason,\n      resumed: stateChange.resumed,\n    });\n\n    // CHA-RL11b\n    if (this._operationInProgress()) {\n      this._logger.debug(\n        'RoomLifecycleManager._startMonitoringChannelState(); ignoring channel state change - operation in progress',\n        {\n          status: this._roomLifecycle.status,\n        },\n      );\n      return;\n    }\n\n    // CHA-RL11c\n    const newStatus = this._mapChannelStateToRoomStatus(stateChange.current);\n    this._setStatus(newStatus, stateChange.reason);\n  }\n\n  private _discontinuityOnAttachedListener(stateChange: Ably.ChannelStateChange): void {\n    if (!stateChange.resumed && this._hasAttachedOnce && !this._isExplicitlyDetached) {\n      const error = new Ably.ErrorInfo(\n        'discontinuity detected',\n        ErrorCode.RoomDiscontinuity,\n        stateChange.reason?.statusCode ?? 0,\n        stateChange.reason,\n      );\n\n      this._logger.warn('RoomLifecycleManager._startMonitoringDiscontinuity(); discontinuity detected', {\n        error,\n      });\n      this._eventEmitter.emit(RoomEventType.Discontinuity, error);\n    }\n  }\n\n  private _discontinuityOnUpdateListener(stateChange: Ably.ChannelStateChange): void {\n    if (\n      !stateChange.resumed &&\n      this._hasAttachedOnce &&\n      !this._isExplicitlyDetached &&\n      stateChange.current === 'attached' &&\n      stateChange.previous === 'attached'\n    ) {\n      const error = new Ably.ErrorInfo(\n        'discontinuity detected',\n        ErrorCode.RoomDiscontinuity,\n        stateChange.reason?.statusCode ?? 0,\n        stateChange.reason,\n      );\n\n      this._logger.warn('RoomLifecycleManager._startMonitoringDiscontinuity(); discontinuity detected', {\n        error,\n      });\n      this._eventEmitter.emit(RoomEventType.Discontinuity, error);\n    }\n  }\n\n  private async _channelDetachLoop(channel: Ably.RealtimeChannel) {\n    for (;;) {\n      // If channel is now failed, we can stop trying to detach\n      const currentState: Ably.ChannelState = channel.state;\n      if (currentState === 'failed') {\n        this._logger.debug('RoomLifecycleManager._channelDetachLoop(); channel is failed, skipping detach');\n        break;\n      }\n\n      try {\n        await channel.detach();\n        break;\n      } catch (error) {\n        // keep trying\n        this._logger.error('RoomLifecycleManager._channelDetachLoop(); failed to detach channel during release', {\n          error,\n        });\n        await new Promise((resolve) => setTimeout(resolve, 250)); // Wait 250ms before retry\n      }\n    }\n  }\n\n  private _setStatus(status: RoomStatus, error?: Ably.ErrorInfo) {\n    this._logger.debug('RoomLifecycleManager._setStatus(); updating room status', {\n      oldStatus: this._roomLifecycle.status,\n      newStatus: status,\n      hasError: !!error,\n    });\n    this._roomLifecycle.setStatus({ status, error });\n  }\n\n  private _releaseChannel() {\n    this._channelManager.release();\n    this._setStatus(RoomStatus.Released);\n    this._logger.debug('RoomLifecycleManager._releaseChannel(); room released successfully');\n  }\n\n  /**\n   * Returns whether there is currently an operation (attach/detach/release) in progress\n   * @returns True if an operation is in progress, false otherwise.\n   */\n  private _operationInProgress(): boolean {\n    return this._mutex.isLocked();\n  }\n\n  testForceHasAttachedOnce(firstAttach: boolean) {\n    this._logger.trace('RoomLifecycleManager.testForceHasAttachedOnce();', { firstAttach });\n    this._hasAttachedOnce = firstAttach;\n  }\n}\n","import * as Ably from 'ably';\n\nimport { MessageReactionType } from './events.js';\n\n/**\n * The default values for RoomOptions.\n */\nconst DefaultRoomOptions: Omit<InternalRoomOptions, 'isReactClient'> = {\n  /**\n   * The default typing options for a chat room.\n   */\n  typing: {\n    /**\n     * The default time that a client will wait between sending one typing heartbeat and the next.\n     *\n     * Spec: CHA-T10.\n     */\n    heartbeatThrottleMs: 10000,\n  },\n\n  /**\n   * The default occupancy options for a chat room.\n   */\n  occupancy: {\n    /**\n     * Whether to enable occupancy events.\n     */\n    enableEvents: false,\n  },\n\n  /**\n   * The default presence options for the room.\n   */\n  presence: {\n    enableEvents: true,\n  },\n\n  /**\n   * The default options for messages.\n   */\n  messages: {\n    rawMessageReactions: false,\n    defaultMessageReactionType: MessageReactionType.Distinct,\n  },\n};\n\n/**\n * Represents the message options for a chat room.\n */\nexport interface MessageOptions {\n  /**\n   * Whether to enable receiving raw individual message reactions from the\n   * realtime channel. Set to true if subscribing to raw message reactions.\n   *\n   * Note reaction summaries (aggregates) are always available regardless of\n   * this setting.\n   * @defaultValue false\n   */\n  rawMessageReactions?: boolean;\n\n  /**\n   * The default message reaction type to use for sending message reactions.\n   *\n   * Any message reaction type can be sent regardless of this setting by specifying the `type` parameter\n   * in the {@link MessagesReactions.send} method.\n   * @defaultValue {@link MessageReactionType.Distinct}\n   */\n  defaultMessageReactionType?: MessageReactionType;\n}\n\n/**\n * Represents the typing options for a chat room.\n */\nexport interface TypingOptions {\n  /**\n   * A throttle, in milliseconds, that enforces the minimum time interval between consecutive `typing.started`\n   * events sent by the client to the server.\n   * If typing.start() is called, the first call will emit an event immediately.\n   * Later calls will no-op until the time has elapsed.\n   * Calling typing.stop() will immediately send a `typing.stopped` event to the server and reset the interval,\n   * allowing the client to send another `typing.started` event immediately.\n   * @defaultValue 10000\n   */\n  heartbeatThrottleMs?: number;\n}\n\n/**\n * Represents the occupancy options for a chat room.\n */\nexport interface OccupancyOptions {\n  /**\n   * Whether to enable occupancy events.\n   *\n   * Note that enabling this feature will increase the number of messages received by the client as additional\n   * messages will be sent by the server to indicate occupancy changes.\n   * @defaultValue false\n   */\n  enableEvents?: boolean;\n}\n\n/**\n * Represents the presence options for a chat room.\n */\nexport interface PresenceOptions {\n  /**\n   * Whether or not the client should receive presence events from the server. This setting\n   * can be disabled if you are using presence in your Chat Room, but this particular client does not\n   * need to receive the messages.\n   * @defaultValue true\n   */\n  enableEvents?: boolean;\n}\n\n/**\n * Represents the options for a given chat room.\n */\nexport interface RoomOptions {\n  /**\n   * The typing options for the room.\n   */\n  typing?: TypingOptions;\n\n  /**\n   * The occupancy options for the room.\n   */\n  occupancy?: OccupancyOptions;\n\n  /**\n   * The presence options for the room.\n   */\n  presence?: PresenceOptions;\n\n  /**\n   * The message options for the room.\n   */\n  messages?: MessageOptions;\n}\n\n/**\n * Represents the normalized typing options for a chat room, which makes every property required.\n */\nexport type InternalTypingOptions = Required<TypingOptions>;\n\n/**\n * Represents the normalized occupancy options for a chat room. Everything becomes required.\n */\nexport type InternalOccupancyOptions = Required<OccupancyOptions>;\n\n/**\n * Represents the normalized presence options for a chat room. Everything becomes required.\n */\nexport type InternalPresenceOptions = Required<PresenceOptions>;\n\n/**\n * Represents the normalized message options for a chat room. Everything becomes required.\n */\nexport type InternalMessageOptions = Required<MessageOptions>;\n\n/**\n * Represents the normalized options for a chat room.\n */\nexport interface InternalRoomOptions {\n  /**\n   * Are we running the client in a React environment?\n   */\n  isReactClient: boolean;\n\n  /**\n   * Typing options with everything made mandatory.\n   */\n  typing: InternalTypingOptions;\n\n  /**\n   * Occupancy options with everything made mandatory.\n   */\n  occupancy: InternalOccupancyOptions;\n\n  /**\n   * Presence options with everything made mandatory.\n   */\n  presence: InternalPresenceOptions;\n\n  /**\n   * Message options with everything made mandatory.\n   */\n  messages: InternalMessageOptions;\n}\n\n/**\n * Creates an {@link ErrorInfo} for invalid room configuration.\n * @param reason The reason for the invalid room configuration.\n * @returns An ErrorInfo.\n */\nconst invalidRoomConfiguration = (reason: string): Error =>\n  new Ably.ErrorInfo(`invalid room configuration: ${reason}`, 40001, 400);\n\nexport const validateRoomOptions = (options: InternalRoomOptions): void => {\n  validateTypingOptions(options.typing);\n};\n\nconst validateTypingOptions = (options: InternalTypingOptions): void => {\n  if (options.heartbeatThrottleMs <= 0) {\n    throw invalidRoomConfiguration('typing heartbeat interval must be greater than 0');\n  }\n};\n\nconst normalizeTypingOptions = (options: RoomOptions | undefined): InternalTypingOptions => ({\n  ...DefaultRoomOptions.typing,\n  ...options?.typing,\n});\n\nconst normalizeOccupancyOptions = (options: RoomOptions | undefined): InternalOccupancyOptions => ({\n  ...DefaultRoomOptions.occupancy,\n  ...options?.occupancy,\n});\n\nconst normalizePresenceOptions = (options: RoomOptions | undefined): InternalPresenceOptions => ({\n  ...DefaultRoomOptions.presence,\n  ...options?.presence,\n});\n\nconst normalizeMessageOptions = (options: RoomOptions | undefined): InternalMessageOptions => ({\n  ...DefaultRoomOptions.messages,\n  ...options?.messages,\n});\n\nexport const normalizeRoomOptions = (options: RoomOptions | undefined, react: boolean): InternalRoomOptions => ({\n  typing: normalizeTypingOptions(options),\n  occupancy: normalizeOccupancyOptions(options),\n  presence: normalizePresenceOptions(options),\n  messages: normalizeMessageOptions(options),\n  isReactClient: react,\n});\n","import * as Ably from 'ably';\n\n/**\n * Convenience function that takes an event name and optional data and turns it into a\n * message that the server will recognize as ephemeral.\n * @param name The name of the event.\n * @param data Optional data to send with the event.\n * @returns An Ably message.\n */\nexport const ephemeralMessage = (name: string, data?: unknown): Ably.Message => ({\n  name: name,\n  data: data,\n  extras: {\n    ephemeral: true,\n  },\n});\n\n/**\n * Takes an existing Ably message and converts it to an ephemeral message by adding\n * the ephemeral flag in the extras field.\n * @param message The Ably message to convert.\n * @returns A new Ably message with the ephemeral flag set.\n */\nexport const messageToEphemeral = (message: Ably.Message): Ably.Message => {\n  const extras = message.extras ? (message.extras as object) : {};\n\n  return {\n    ...message,\n    extras: {\n      ...extras,\n      ephemeral: true,\n    },\n  };\n};\n","import { Headers } from './headers.js';\nimport { Metadata } from './metadata.js';\n\n/**\n * {@link Headers} type for chat messages.\n */\nexport type RoomReactionHeaders = Headers;\n\n/**\n * {@link Metadata} type for chat messages.\n */\nexport type RoomReactionMetadata = Metadata;\n\n/**\n * Represents a room-level reaction.\n */\nexport interface RoomReaction {\n  /**\n   * The name of the reaction, for example \"like\" or \"love\".\n   */\n  readonly name: string;\n\n  /**\n   * Metadata of the reaction. If no metadata was set this is an empty object.\n   */\n  readonly metadata: RoomReactionMetadata;\n\n  /**\n   * Headers of the reaction. If no headers were set this is an empty object.\n   */\n  readonly headers: RoomReactionHeaders;\n\n  /**\n   * The timestamp at which the reaction was sent.\n   */\n  readonly createdAt: Date;\n\n  /**\n   * The clientId of the user who sent the reaction.\n   */\n  readonly clientId: string;\n\n  /**\n   * Whether the reaction was sent by the current user.\n   */\n  readonly isSelf: boolean;\n}\n\n/**\n * An implementation of the RoomReaction interface for room-level reactions.\n */\nexport class DefaultRoomReaction implements RoomReaction {\n  constructor(\n    public readonly name: string,\n    public readonly clientId: string,\n    public readonly createdAt: Date,\n    public readonly isSelf: boolean,\n    public readonly metadata: RoomReactionMetadata,\n    public readonly headers: RoomReactionHeaders,\n  ) {\n    // The object is frozen after constructing to enforce readonly at runtime too\n    Object.freeze(this);\n  }\n}\n","import * as Ably from 'ably';\n\nimport { DefaultRoomReaction, RoomReaction, RoomReactionHeaders, RoomReactionMetadata } from './room-reaction.js';\n\ninterface ReactionPayload {\n  data?: {\n    name?: string;\n    metadata?: RoomReactionMetadata;\n  };\n  clientId?: string;\n  timestamp: number;\n  extras?: {\n    headers?: RoomReactionHeaders;\n  };\n}\n\n/**\n * Parses a room reaction from an inbound message.\n * @param message The inbound message containing the reaction data.\n * @param clientId The client ID of the user.\n * @returns The parsed room reaction.\n */\nexport const parseRoomReaction = (message: Ably.InboundMessage, clientId?: string): RoomReaction => {\n  const reactionCreatedMessage = message as ReactionPayload;\n\n  // Use empty string if type is missing or invalid\n  const name =\n    reactionCreatedMessage.data?.name && typeof reactionCreatedMessage.data.name === 'string'\n      ? reactionCreatedMessage.data.name\n      : '';\n\n  // Use empty string if clientId is missing\n  const messageClientId = reactionCreatedMessage.clientId ?? '';\n\n  // Use current time if timestamp is missing\n  const timestamp = reactionCreatedMessage.timestamp ? new Date(reactionCreatedMessage.timestamp) : new Date();\n\n  return new DefaultRoomReaction(\n    name,\n    messageClientId,\n    timestamp,\n    clientId ? clientId === messageClientId : false,\n    reactionCreatedMessage.data?.metadata ?? {},\n    reactionCreatedMessage.extras?.headers ?? {},\n  );\n};\n","import * as Ably from 'ably';\n\nimport { RoomReactionEvent, RoomReactionEventType, RoomReactionRealtimeEventType } from './events.js';\nimport { Logger } from './logger.js';\nimport { messageToEphemeral } from './realtime.js';\nimport { subscribe } from './realtime-subscriptions.js';\nimport { RoomReactionHeaders, RoomReactionMetadata } from './room-reaction.js';\nimport { parseRoomReaction } from './room-reaction-parser.js';\nimport { Subscription } from './subscription.js';\nimport EventEmitter, { emitterHasListeners, wrap } from './utils/event-emitter.js';\n\n/**\n * Params for sending a room-level reactions. Only `name` is mandatory.\n */\nexport interface SendReactionParams {\n  /**\n   * The name of the reaction, for example an emoji or a short string such as\n   * \"like\".\n   *\n   * It is the only mandatory parameter to send a room-level reaction.\n   */\n  name: string;\n\n  /**\n   * Optional metadata of the reaction.\n   *\n   * The metadata is a map of extra information that can be attached to the\n   * room reaction. It is not used by Ably and is sent as part of the realtime\n   * message payload. Example use cases are custom animations or other effects.\n   *\n   * Do not use metadata for authoritative information. There is no server-side\n   * validation. When reading the metadata treat it like user input.\n   *\n   */\n  metadata?: RoomReactionMetadata;\n\n  /**\n   * Optional headers of the room reaction.\n   *\n   * The headers are a flat key-value map and are sent as part of the realtime\n   * message's `extras` inside the `headers` property. They can serve similar\n   * purposes as the metadata but they are read by Ably and can be used for\n   * features such as\n   * [subscription filters](https://faqs.ably.com/subscription-filters).\n   *\n   * Do not use the headers for authoritative information. There is no\n   * server-side validation. When reading the headers treat them like user\n   * input.\n   *\n   */\n  headers?: RoomReactionHeaders;\n}\n\n/**\n * The listener function type for room-level reactions.\n * @param event The reaction event that was received.\n */\nexport type RoomReactionListener = (event: RoomReactionEvent) => void;\n\n/**\n * This interface is used to interact with room-level reactions in a chat room: subscribing to reactions and sending them.\n *\n * Get an instance via {@link Room.reactions}.\n */\nexport interface RoomReactions {\n  /**\n   * Send a reaction to the room including some metadata.\n   *\n   * This method accepts parameters for a room-level reaction. It accepts an object\n   * @param params an object containing {name, headers, metadata} for the room\n   * reaction to be sent. Name is required, metadata and headers are optional.\n   * @throws If the `Connection` is not in the `Connected` state.\n   * @returns The returned promise resolves when the reaction was sent. Note\n   * that it is possible to receive your own reaction via the reactions\n   * listener before this promise resolves.\n   */\n  send(params: SendReactionParams): Promise<void>;\n\n  /**\n   * Subscribe to receive room-level reactions.\n   * @param listener The listener function to be called when a reaction is received.\n   * @returns A response object that allows you to control the subscription.\n   */\n  subscribe(listener: RoomReactionListener): Subscription;\n}\n\ninterface RoomReactionEventsMap {\n  [RoomReactionEventType.Reaction]: RoomReactionEvent;\n}\n\ninterface ReactionPayload {\n  name: string;\n  metadata?: RoomReactionMetadata;\n}\n\n/**\n * @inheritDoc\n */\nexport class DefaultRoomReactions implements RoomReactions {\n  private readonly _channel: Ably.RealtimeChannel;\n  private readonly _connection: Ably.Connection;\n  private readonly _clientId: string;\n  private readonly _logger: Logger;\n  private readonly _emitter = new EventEmitter<RoomReactionEventsMap>();\n  private readonly _unsubscribeRoomReactionEvents: () => void;\n\n  /**\n   * Constructs a new `DefaultRoomReactions` instance.\n   * @param channel The Realtime channel instance.\n   * @param connection The connection instance.\n   * @param clientId The client ID of the user.\n   * @param logger An instance of the Logger.\n   */\n  constructor(channel: Ably.RealtimeChannel, connection: Ably.Connection, clientId: string, logger: Logger) {\n    this._channel = channel;\n    this._connection = connection;\n    this._clientId = clientId;\n    this._logger = logger;\n\n    // Create bound listener\n    const roomReactionEventsListener = this._forwarder.bind(this);\n\n    // Use subscription helper to create cleanup function\n    this._unsubscribeRoomReactionEvents = subscribe(\n      this._channel,\n      [RoomReactionRealtimeEventType.Reaction],\n      roomReactionEventsListener,\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  send(params: SendReactionParams): Promise<void> {\n    this._logger.trace('RoomReactions.send();', params);\n\n    const { name, metadata, headers } = params;\n\n    if (!name) {\n      return Promise.reject(new Ably.ErrorInfo('unable to send reaction; name not set and it is required', 40001, 400));\n    }\n\n    // CHA-ER3f\n    if (this._connection.state !== 'connected') {\n      return Promise.reject(new Ably.ErrorInfo('unable to send reaction; not connected to Ably', 40000, 400));\n    }\n\n    const payload: ReactionPayload = {\n      name: name,\n      metadata: metadata ?? {},\n    };\n\n    const realtimeMessage: Ably.Message = {\n      name: RoomReactionRealtimeEventType.Reaction,\n      data: payload,\n      extras: {\n        headers: headers ?? {},\n      },\n    };\n\n    return this._channel.publish(messageToEphemeral(realtimeMessage));\n  }\n\n  /**\n   * @inheritDoc\n   */\n  subscribe(listener: RoomReactionListener): Subscription {\n    this._logger.trace(`RoomReactions.subscribe();`);\n    const wrapped = wrap(listener);\n    this._emitter.on(wrapped);\n\n    return {\n      unsubscribe: () => {\n        this._logger.trace('RoomReactions.unsubscribe();');\n        this._emitter.off(wrapped);\n      },\n    };\n  }\n\n  // parses reactions from realtime channel into Reaction objects and forwards them to the EventEmitter\n  private _forwarder = (inbound: Ably.InboundMessage) => {\n    const reaction = parseRoomReaction(inbound, this._clientId);\n    this._emitter.emit(RoomReactionEventType.Reaction, {\n      type: RoomReactionEventType.Reaction,\n      reaction,\n    });\n  };\n\n  /**\n   * Disposes of the room reactions instance, removing all listeners and subscriptions.\n   * This method should be called when the room is being released to ensure proper cleanup.\n   * @internal\n   */\n  dispose(): void {\n    // Remove room reaction event subscriptions using stored unsubscribe function\n    this._unsubscribeRoomReactionEvents();\n\n    // Remove user-level listeners\n    this._emitter.off();\n  }\n\n  /**\n   * Checks if there are any listeners registered by users.\n   * @internal\n   * @returns true if there are listeners, false otherwise.\n   */\n  hasListeners(): boolean {\n    return emitterHasListeners(this._emitter);\n  }\n}\n","import * as Ably from 'ably';\nimport { E_CANCELED, Mutex } from 'async-mutex';\n\nimport { TypingEventType, TypingSetEvent, TypingSetEventType } from './events.js';\nimport { Logger } from './logger.js';\nimport { ephemeralMessage } from './realtime.js';\nimport { subscribe } from './realtime-subscriptions.js';\nimport { InternalTypingOptions } from './room-options.js';\nimport { Subscription } from './subscription.js';\nimport EventEmitter, { wrap } from './utils/event-emitter.js';\n\n/**\n * This interface is used to interact with typing in a chat room including subscribing to typing events and\n * fetching the current set of typing clients.\n *\n * Get an instance via {@link Room.typing}.\n */\nexport interface Typing {\n  /**\n   * Subscribe a given listener to all typing events from users in the chat room.\n   * @param listener A listener to be called when the typing state of a user in the room changes.\n   * @returns A response object that allows you to control the subscription to typing events.\n   */\n  subscribe(listener: TypingListener): Subscription;\n\n  /**\n   * Get the current typers, a set of clientIds.\n   * @returns The set of clientIds that are currently typing.\n   */\n  current(): Set<string>;\n\n  /**\n   * This will send a `typing.started` event to the server.\n   * Events are throttled according to the `heartbeatThrottleMs` room option.\n   * If an event has been sent within the interval, this operation is no-op.\n   *\n   *\n   * Calls to `keystroke()` and `stop()` are serialized and will always resolve in the correct order.\n   * - For example, if multiple `keystroke()` calls are made in quick succession before the first `keystroke()` call has\n   * sent a `typing.started` event to the server, followed by one `stop()` call, the `stop()` call will execute\n   * as soon as the first `keystroke()` call completes.\n   * All intermediate `keystroke()` calls will be treated as no-ops.\n   * - The most recent operation (`keystroke()` or `stop()`) will always determine the final state, ensuring operations\n   * resolve to a consistent and correct state.\n   * @returns A promise which resolves upon success of the operation and rejects with an {@link Ably.ErrorInfo} object upon its failure.\n   * @throws If the `Connection` is not in the `Connected` state.\n   * @throws If the operation fails to send the event to the server.\n   * @throws If there is a problem acquiring the mutex that controls serialization.\n   */\n  keystroke(): Promise<void>;\n\n  /**\n   * This will send a `typing.stopped` event to the server.\n   * If the user was not currently typing, this operation is no-op.\n   *\n   * Calls to `keystroke()` and `stop()` are serialized and will always resolve in the correct order.\n   * - For example, if multiple `keystroke()` calls are made in quick succession before the first `keystroke()` call has\n   * sent a `typing.started` event to the server, followed by one `stop()` call, the `stop()` call will execute\n   * as soon as the first `keystroke()` call completes.\n   * All intermediate `keystroke()` calls will be treated as no-ops.\n   * - The most recent operation (`keystroke()` or `stop()`) will always determine the final state, ensuring operations\n   * resolve to a consistent and correct state.\n   * @returns A promise which resolves upon success of the operation and rejects with an {@link Ably.ErrorInfo} object upon its failure.\n   * @throws If the `Connection` is not in the `Connected` state.\n   * @throws If the operation fails to send the event to the server.\n   * @throws If there is a problem acquiring the mutex that controls serialization.\n   */\n  stop(): Promise<void>;\n}\n\n/**\n * A listener which listens for typing events.\n * @param event The typing event.\n */\nexport type TypingListener = (event: TypingSetEvent) => void;\n\n/**\n * Represents the typing events mapped to their respective event payloads.\n */\ninterface TypingEventsMap {\n  [TypingSetEventType.SetChanged]: TypingSetEvent;\n}\n\n/**\n * Represents a timer handle that can be undefined.\n */\ntype TypingTimerHandle = ReturnType<typeof setTimeout> | undefined;\n\n/**\n * @inheritDoc\n */\nexport class DefaultTyping extends EventEmitter<TypingEventsMap> implements Typing {\n  private readonly _clientId: string;\n  private readonly _channel: Ably.RealtimeChannel;\n  private readonly _connection: Ably.Connection;\n  private readonly _logger: Logger;\n\n  // Throttle for the heartbeat, how often we should emit a typing event with repeated calls to keystroke()\n  // CHA-T10\n  private readonly _heartbeatThrottleMs: number;\n\n  // Grace period for inactivity before another user is considered to have stopped typing\n  // CHA-T10a\n  private readonly _timeoutMs = 2000;\n  private _heartbeatTimerId: TypingTimerHandle;\n  private readonly _currentlyTyping: Map<string, TypingTimerHandle>;\n\n  // Mutex for controlling `keystroke` and `stop` operations\n  private readonly _mutex = new Mutex();\n\n  // Cleanup function for the channel subscription\n  private readonly _unsubscribeTypingEvents: () => void;\n\n  /**\n   * Constructs a new `DefaultTyping` instance.\n   * @param options The options for typing in the room.\n   * @param connection The connection instance.\n   * @param channel The channel for the room.\n   * @param clientId The client ID of the user.\n   * @param logger An instance of the Logger.\n   */\n  constructor(\n    options: InternalTypingOptions,\n    connection: Ably.Connection,\n    channel: Ably.RealtimeChannel,\n    clientId: string,\n    logger: Logger,\n  ) {\n    super();\n    this._clientId = clientId;\n    this._channel = channel;\n    this._connection = connection;\n\n    // Interval for the heartbeat, how often we should emit a typing event with repeated calls to start()\n    this._heartbeatThrottleMs = options.heartbeatThrottleMs;\n\n    // Map of clientIds to their typing timers, used to track typing state\n    this._currentlyTyping = new Map<string, TypingTimerHandle>();\n    this._logger = logger;\n\n    // Use subscription helper to create cleanup function\n    this._unsubscribeTypingEvents = subscribe(\n      this._channel,\n      [TypingEventType.Started, TypingEventType.Stopped],\n      this._internalSubscribeToEvents.bind(this),\n    );\n  }\n\n  /**\n   * Clears all typing states.\n   * This includes clearing all timeouts and the currently typing map.\n   */\n  private _clearAllTypingStates(): void {\n    this._logger.debug(`DefaultTyping._clearAllTypingStates(); clearing all typing states`);\n    this._clearHeartbeatTimer();\n    this._clearCurrentlyTyping();\n  }\n\n  /**\n   * Clears the heartbeat timer.\n   */\n  private _clearHeartbeatTimer(): void {\n    this._logger.trace(`DefaultTyping._clearHeartbeatTimer(); clearing heartbeat timer`);\n    if (this._heartbeatTimerId) {\n      clearTimeout(this._heartbeatTimerId);\n      this._heartbeatTimerId = undefined;\n    }\n  }\n\n  /**\n   * Clears the currently typing store and removes all timeouts for associated clients.\n   */\n  private _clearCurrentlyTyping(): void {\n    this._logger.trace('DefaultTyping._clearCurrentlyTyping(); clearing current store and timeouts');\n    // Clear all client typing timeouts\n    for (const [, timeoutId] of this._currentlyTyping.entries()) {\n      clearTimeout(timeoutId);\n    }\n    // Clear the currently typing map\n    this._currentlyTyping.clear();\n  }\n\n  /**\n   * CHA-T16\n   * @inheritDoc\n   */\n  current(): Set<string> {\n    this._logger.trace(`DefaultTyping.current();`);\n    return new Set<string>(this._currentlyTyping.keys());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  get channel(): Ably.RealtimeChannel {\n    return this._channel;\n  }\n\n  /**\n   * Start the heartbeat timer. This will expire after the configured interval.\n   */\n  private _startHeartbeatTimer(): void {\n    if (!this._heartbeatTimerId) {\n      this._logger.trace(`DefaultTyping.startHeartbeatTimer();`);\n      const timer = (this._heartbeatTimerId = setTimeout(() => {\n        this._logger.debug(`DefaultTyping.startHeartbeatTimer(); heartbeat timer expired`);\n        // CHA-T2a\n        if (timer === this._heartbeatTimerId) {\n          this._heartbeatTimerId = undefined;\n        }\n      }, this._heartbeatThrottleMs));\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async keystroke(): Promise<void> {\n    this._logger.trace(`DefaultTyping.keystroke();`);\n    this._mutex.cancel();\n\n    // Acquire a mutex\n    try {\n      await this._mutex.acquire();\n    } catch (error: unknown) {\n      if (error === E_CANCELED) {\n        this._logger.debug(`DefaultTyping.keystroke(); mutex was canceled by a later operation`);\n        return;\n      }\n      throw new Ably.ErrorInfo('mutex acquisition failed', 50000, 500);\n    }\n    try {\n      // Check if connection is connected\n      // CHA-T4e\n      if (this._connection.state !== 'connected') {\n        this._logger.error(`DefaultTyping.keystroke(); connection is not connected`, {\n          status: this._connection.state,\n        });\n        throw new Ably.ErrorInfo('cannot type, connection is not connected', 40000, 400);\n      }\n\n      // Check whether user is already typing before publishing again\n      // CHA-T4c1, CHA-T4c2\n      if (this._heartbeatTimerId) {\n        this._logger.debug(`DefaultTyping.keystroke(); no-op, already typing and heartbeat timer has not expired`);\n        return;\n      }\n\n      // Perform the publish\n      // CHA-T4a3\n      await this._channel.publish(ephemeralMessage(TypingEventType.Started));\n\n      // Start the timer after publishing\n      // CHA-T4a5\n      this._startHeartbeatTimer();\n      this._logger.trace(`DefaultTyping.keystroke(); starting timers`);\n    } finally {\n      this._logger.trace(`DefaultTyping.keystroke(); releasing mutex`);\n      this._mutex.release();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async stop(): Promise<void> {\n    this._logger.trace(`DefaultTyping.stop();`);\n\n    this._mutex.cancel();\n    // Acquire a mutex\n    try {\n      await this._mutex.acquire();\n    } catch (error: unknown) {\n      if (error === E_CANCELED) {\n        this._logger.debug(`DefaultTyping.stop(); mutex was canceled by a later operation`);\n        return;\n      }\n      throw new Ably.ErrorInfo('mutex acquisition failed', 50000, 500);\n    }\n    try {\n      // Check if connection is connected\n      if (this._connection.state !== 'connected') {\n        this._logger.error(`DefaultTyping.stop(); connection is not connected`, {\n          status: this._connection.state,\n        });\n        throw new Ably.ErrorInfo('cannot stop typing, connection is not connected', 40000, 400);\n      }\n\n      // If the user is not typing, do nothing.\n      // CHA-T5f\n      if (!this._heartbeatTimerId) {\n        this._logger.debug(`DefaultTyping.stop(); no-op, not currently typing`);\n        return;\n      }\n\n      // CHA-T5d\n      await this._channel.publish(ephemeralMessage(TypingEventType.Stopped));\n      this._logger.trace(`DefaultTyping.stop(); clearing timers`);\n\n      // CHA-T5e\n      // Clear the heartbeat timer\n      clearTimeout(this._heartbeatTimerId);\n      this._heartbeatTimerId = undefined;\n    } finally {\n      this._logger.trace(`DefaultTyping.stop(); releasing mutex`);\n      this._mutex.release();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  subscribe(listener: TypingListener): Subscription {\n    this._logger.trace(`DefaultTyping.subscribe();`);\n    const wrapped = wrap(listener);\n    this.on(wrapped);\n\n    return {\n      unsubscribe: () => {\n        this._logger.trace('DefaultTyping.unsubscribe();');\n        this.off(wrapped);\n      },\n    };\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // CHA-RL3h\n  async dispose(): Promise<void> {\n    this._logger.trace(`DefaultTyping.dispose();`);\n\n    // Keep trying to acquire the mutex; wait 200 ms between attempts.\n    for (;;) {\n      try {\n        this._mutex.cancel();\n        await this._mutex.acquire();\n        break; // success â€“ exit the loop\n      } catch (error: unknown) {\n        if (error === E_CANCELED) {\n          // In this case, the mutex was canceled by a later operation,\n          // but we are trying to release, so we should always take precedence here.\n          // Let's continue trying to acquire it until we win the acquisition lock.\n          this._logger.debug(`DefaultTyping.dispose(); mutex was canceled`);\n          await new Promise((resolve) => setTimeout(resolve, 200));\n          this._logger.debug(`DefaultTyping.dispose(); retrying mutex acquisition`);\n        } else {\n          // If we encounter any other error, we log it and exit the loop.\n          // This is to ensure that we don't get stuck in an infinite loop\n          // if the mutex acquisition fails for some other non-retryable reason.\n          this._logger.error(`DefaultTyping.dispose(); failed to acquire mutex; could not complete resource disposal`, {\n            error,\n          });\n          return;\n        }\n      }\n    }\n    this._clearAllTypingStates();\n    this._unsubscribeTypingEvents();\n    this.off();\n    this._mutex.release();\n  }\n\n  /**\n   * Update the currently typing users. This method is called when a typing event is received.\n   * It will also acquire a mutex to ensure that the currentlyTyping state is updated safely.\n   * @param clientId The client ID of the user.\n   * @param event The typing event.\n   */\n  private _updateCurrentlyTyping(clientId: string, event: TypingEventType): void {\n    this._logger.trace(`DefaultTyping._updateCurrentlyTyping();`, { clientId, event });\n\n    if (event === TypingEventType.Started) {\n      this._handleTypingStart(clientId);\n    } else {\n      this._handleTypingStop(clientId);\n    }\n  }\n\n  /**\n   * Starts a new inactivity timer for the client.\n   * This timer will expire after the configured timeout,\n   * which is the sum of the heartbeat interval and the inactivity timeout.\n   * @param clientId The client ID for which to start the timer.\n   * @returns The timeout ID for the new timer.\n   */\n  private _startNewClientInactivityTimer(clientId: string): ReturnType<typeof setTimeout> {\n    this._logger.trace(`DefaultTyping._startNewClientInactivityTimer(); starting new inactivity timer`, {\n      clientId,\n    });\n    // Set or reset the typing timeout for this client\n    const timeoutId = setTimeout(() => {\n      this._logger.trace(`DefaultTyping._startNewClientInactivityTimer(); client typing timeout expired`, {\n        clientId,\n      });\n      // Verify the timer is still valid (it might have been reset)\n      if (this._currentlyTyping.get(clientId) !== timeoutId) {\n        this._logger.debug(`DefaultTyping._startNewClientInactivityTimer(); timeout already cleared; ignoring`, {\n          clientId,\n        });\n        return;\n      }\n\n      // Remove client whose timeout has expired\n      this._currentlyTyping.delete(clientId);\n      this.emit(TypingSetEventType.SetChanged, {\n        type: TypingSetEventType.SetChanged,\n        currentlyTyping: new Set<string>(this._currentlyTyping.keys()),\n        change: {\n          clientId,\n          type: TypingEventType.Stopped,\n        },\n      });\n    }, this._heartbeatThrottleMs + this._timeoutMs);\n    return timeoutId;\n  }\n\n  /**\n   * Handles logic for TypingEventType.Started, including starting a new timeout or resetting an existing one.\n   * @param clientId The client ID that started typing.\n   */\n  private _handleTypingStart(clientId: string): void {\n    this._logger.debug(`DefaultTyping._handleTypingStart();`, { clientId });\n    // Start a new timeout for the client\n    const timeoutId = this._startNewClientInactivityTimer(clientId);\n\n    const existingTimeout = this._currentlyTyping.get(clientId);\n\n    // Set the new timeout for the client\n    this._currentlyTyping.set(clientId, timeoutId);\n\n    if (existingTimeout) {\n      // Heartbeat - User is already typing, we just need to clear the existing timeout\n      this._logger.debug(`DefaultTyping._handleTypingStart(); received heartbeat for currently typing client`, {\n        clientId,\n      });\n      clearTimeout(existingTimeout);\n    } else {\n      // Otherwise, we need to emit a new typing event\n      this._logger.debug(`DefaultTyping._handleTypingStart(); new client started typing`, {\n        clientId,\n      });\n      this.emit(TypingSetEventType.SetChanged, {\n        type: TypingSetEventType.SetChanged,\n        currentlyTyping: new Set<string>(this._currentlyTyping.keys()),\n        change: {\n          clientId,\n          type: TypingEventType.Started,\n        },\n      });\n    }\n  }\n\n  /**\n   * Handles logic for TypingEventType.Stopped, including clearing the timeout for the client.\n   * @param clientId The client ID that stopped typing.\n   */\n  private _handleTypingStop(clientId: string): void {\n    const existingTimeout = this._currentlyTyping.get(clientId);\n    if (!existingTimeout) {\n      // Stop requested for a client that isn't currently typing\n      this._logger.trace(\n        `DefaultTyping._handleTypingStop(); received \"Stop\" event for client not in currentlyTyping list`,\n        { clientId },\n      );\n      return;\n    }\n\n    // Stop typing: clear their timeout and remove from the currently typing set\n    this._logger.debug(`DefaultTyping._handleTypingStop(); client stopped typing`, { clientId });\n    clearTimeout(existingTimeout);\n    this._currentlyTyping.delete(clientId);\n    // Emit stop event only when the client is removed\n    this.emit(TypingSetEventType.SetChanged, {\n      type: TypingSetEventType.SetChanged,\n      currentlyTyping: new Set<string>(this._currentlyTyping.keys()),\n      change: {\n        clientId,\n        type: TypingEventType.Stopped,\n      },\n    });\n  }\n\n  /**\n   * Subscribe to internal events. This listens to events and converts them into typing updates, with validation.\n   * @param inbound The inbound message containing typing event data.\n   */\n  private _internalSubscribeToEvents = (inbound: Ably.InboundMessage): void => {\n    const { name, clientId } = inbound;\n    this._logger.trace(`DefaultTyping._internalSubscribeToEvents(); received event`, {\n      name,\n      clientId,\n    });\n\n    if (!clientId) {\n      this._logger.error(`DefaultTyping._internalSubscribeToEvents(); invalid clientId in received event`, {\n        inbound,\n      });\n      return;\n    }\n\n    // Safety check to ensure we are handling only typing events\n    if (name === TypingEventType.Started || name === TypingEventType.Stopped) {\n      this._updateCurrentlyTyping(clientId, name);\n    } else {\n      this._logger.warn(`DefaultTyping._internalSubscribeToEvents(); unrecognized event`, {\n        name,\n      });\n    }\n  };\n\n  get heartbeatThrottleMs(): number {\n    return this._heartbeatThrottleMs;\n  }\n\n  get hasHeartbeatTimer(): boolean {\n    return !!this._heartbeatTimerId;\n  }\n}\n","import * as Ably from 'ably';\nimport cloneDeep from 'lodash.clonedeep';\n\nimport { ChannelManager } from './channel-manager.js';\nimport { ChatApi } from './chat-api.js';\nimport { DiscontinuityListener } from './discontinuity.js';\nimport { Logger } from './logger.js';\nimport { DefaultMessages, Messages } from './messages.js';\nimport { DefaultMessageReactions } from './messages-reactions.js';\nimport { DefaultOccupancy, Occupancy } from './occupancy.js';\nimport { DefaultPresence, Presence } from './presence.js';\nimport { RoomLifecycleManager } from './room-lifecycle-manager.js';\nimport { InternalRoomOptions, RoomOptions, validateRoomOptions } from './room-options.js';\nimport { DefaultRoomReactions, RoomReactions } from './room-reactions.js';\nimport { DefaultRoomLifecycle, InternalRoomLifecycle, RoomStatus, RoomStatusListener } from './room-status.js';\nimport { StatusSubscription } from './subscription.js';\nimport { DefaultTyping, Typing } from './typing.js';\n\n/**\n * Represents a chat room.\n */\nexport interface Room {\n  /**\n   * The unique identifier of the room.\n   * @returns The room name.\n   */\n  get name(): string;\n\n  /**\n   * Allows you to send, subscribe-to and query messages in the room.\n   * @returns The messages instance for the room.\n   */\n  get messages(): Messages;\n\n  /**\n   * Allows you to subscribe to presence events in the room.\n   * @returns The presence instance for the room.\n   */\n  get presence(): Presence;\n\n  /**\n   * Allows you to interact with room-level reactions.\n   * @returns The room reactions instance for the room.\n   */\n  get reactions(): RoomReactions;\n\n  /**\n   * Allows you to interact with typing events in the room.\n   * @returns The typing instance for the room.\n   */\n  get typing(): Typing;\n\n  /**\n   * Allows you to interact with occupancy metrics for the room.\n   * @returns The occupancy instance for the room.\n   */\n  get occupancy(): Occupancy;\n\n  /**\n   * The current status of the room.\n   * @returns The current status.\n   */\n  get status(): RoomStatus;\n\n  /**\n   * The current error, if any, that caused the room to enter the current status.\n   */\n  get error(): Ably.ErrorInfo | undefined;\n\n  /**\n   * Registers a listener that will be called whenever the room status changes.\n   * @param listener The function to call when the status changes.\n   * @returns An object that can be used to unregister the listener.\n   */\n  onStatusChange(listener: RoomStatusListener): StatusSubscription;\n\n  /**\n   * Attaches to the room to receive events in realtime.\n   *\n   * If a room fails to attach, it will enter either the {@link RoomStatus.Suspended} or {@link RoomStatus.Failed} state.\n   *\n   * If the room enters the failed state, then it will not automatically retry attaching and intervention is required.\n   *\n   * If the room enters the suspended state, then the call to attach will reject with the {@link ErrorInfo} that caused the suspension. However,\n   * the room will automatically retry attaching after a delay.\n   * @returns A promise that resolves when the room is attached.\n   */\n  attach(): Promise<void>;\n\n  /**\n   * Detaches from the room to stop receiving events in realtime.\n   * @returns A promise that resolves when the room is detached.\n   */\n  detach(): Promise<void>;\n\n  /**\n   * Returns the room options.\n   * @returns A copy of the options used to create the room.\n   */\n  options(): RoomOptions;\n\n  /**\n   * Registers a handler that will be called whenever a discontinuity is detected in the room's connection.\n   * A discontinuity occurs when the room's connection is interrupted and cannot be resumed from its previous state.\n   * @param handler The function to call when a discontinuity is detected.\n   * @returns An object that can be used to unregister the handler.\n   */\n  onDiscontinuity(handler: DiscontinuityListener): StatusSubscription;\n\n  /**\n   * Get the underlying Ably realtime channel used for the room.\n   * @returns The realtime channel.\n   */\n  get channel(): Ably.RealtimeChannel;\n}\n\nexport class DefaultRoom implements Room {\n  private readonly _name: string;\n  private readonly _options: RoomOptions;\n  private readonly _chatApi: ChatApi;\n  private readonly _messages: DefaultMessages;\n  private readonly _typing: DefaultTyping;\n  private readonly _presence: DefaultPresence;\n  private readonly _reactions: DefaultRoomReactions;\n  private readonly _occupancy: DefaultOccupancy;\n  private readonly _logger: Logger;\n  private readonly _lifecycle: DefaultRoomLifecycle;\n  private readonly _lifecycleManager: RoomLifecycleManager;\n  private readonly _finalizer: () => Promise<void>;\n  private readonly _channelManager: ChannelManager;\n\n  /**\n   * A random identifier for the room instance, useful in debugging and logging.\n   */\n  private readonly _nonce: string;\n\n  /**\n   * Constructs a new Room instance.\n   * @param name The unique identifier of the room.\n   * @param nonce A random identifier for the room instance, useful in debugging and logging.\n   * @param options The options for the room.\n   * @param realtime An instance of the Ably Realtime client.\n   * @param chatApi An instance of the ChatApi.\n   * @param logger An instance of the Logger.\n   */\n  constructor(\n    name: string,\n    nonce: string,\n    options: InternalRoomOptions,\n    realtime: Ably.Realtime,\n    chatApi: ChatApi,\n    logger: Logger,\n  ) {\n    validateRoomOptions(options);\n    this._nonce = nonce;\n\n    // Create a logger with room context\n    this._logger = logger.withContext({ roomName: name, roomNonce: nonce });\n    this._logger.debug('Room();', { options });\n\n    this._name = name;\n    this._options = options;\n    this._chatApi = chatApi;\n    this._lifecycle = new DefaultRoomLifecycle(this._logger);\n\n    const channelManager = (this._channelManager = this._getChannelManager(options, realtime, this._logger));\n    const channel = channelManager.get();\n\n    // Setup features\n    this._messages = new DefaultMessages(\n      name,\n      options.messages,\n      channel,\n      this._chatApi,\n      realtime.auth.clientId,\n      this._logger,\n    );\n    this._presence = new DefaultPresence(channel, realtime.auth.clientId, this._logger, options);\n    this._typing = new DefaultTyping(\n      options.typing,\n      realtime.connection,\n      channel,\n      realtime.auth.clientId,\n      this._logger,\n    );\n    this._reactions = new DefaultRoomReactions(channel, realtime.connection, realtime.auth.clientId, this._logger);\n    this._occupancy = new DefaultOccupancy(name, channel, this._chatApi, this._logger, options);\n\n    // Set the lifecycle manager last, so it becomes the last thing to find out about channel state changes\n    // This is to allow Messages to reset subscription points before users get told of a discontinuity\n    this._lifecycleManager = new RoomLifecycleManager(channelManager, this._lifecycle, this._logger);\n\n    // Setup a finalization function to clean up resources\n    let finalized = false;\n    this._finalizer = async () => {\n      // Cycle the channels in the feature and release them from the realtime client\n      if (finalized) {\n        this._logger.debug('Room.finalizer(); already finalized');\n        return;\n      }\n\n      // Release via the lifecycle manager\n      await this._lifecycleManager.release();\n\n      // Dispose of the lifecycle manager, removing all user-registered listeners from emitters\n      // and any listeners that have been registered to the realtime instance\n      this._lifecycleManager.dispose();\n\n      // Dispose of all features, removing any listeners that have been subscribed to the realtime instance\n      // and also removing any user-level listeners from the emitters\n      this._messages.dispose();\n      this._presence.dispose();\n      this._reactions.dispose();\n      this._occupancy.dispose();\n      await this._typing.dispose();\n\n      // Dispose of the RoomStatus instance\n      this._lifecycle.dispose();\n\n      finalized = true;\n    };\n  }\n\n  /**\n   * Gets the channel manager for the room, which handles merging channel options together and creating channels.\n   * @param options The room options.\n   * @param realtime  An instance of the Ably Realtime client.\n   * @param logger An instance of the Logger.\n   * @returns The channel manager instance.\n   */\n  private _getChannelManager(options: InternalRoomOptions, realtime: Ably.Realtime, logger: Logger): ChannelManager {\n    const manager = new ChannelManager(this._name, realtime, logger, options.isReactClient);\n\n    manager.mergeOptions(DefaultOccupancy.channelOptionMerger(options));\n    manager.mergeOptions(DefaultPresence.channelOptionMerger(options));\n    manager.mergeOptions(DefaultMessageReactions.channelOptionMerger(options));\n    return manager;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get name(): string {\n    return this._name;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  options(): RoomOptions {\n    return cloneDeep(this._options);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get messages(): Messages {\n    return this._messages;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get presence(): Presence {\n    return this._presence;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get reactions(): RoomReactions {\n    return this._reactions;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get typing(): Typing {\n    return this._typing;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get occupancy(): Occupancy {\n    return this._occupancy;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get status(): RoomStatus {\n    return this._lifecycle.status;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get error(): Ably.ErrorInfo | undefined {\n    return this._lifecycle.error;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  onStatusChange(listener: RoomStatusListener): StatusSubscription {\n    return this._lifecycle.onChange(listener);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async attach() {\n    this._logger.trace('Room.attach();');\n    return this._lifecycleManager.attach();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  async detach(): Promise<void> {\n    this._logger.trace('Room.detach();');\n    return this._lifecycleManager.detach();\n  }\n\n  /**\n   * Releases resources associated with the room.\n   * @returns A promise that resolves when the room is released.\n   */\n  release(): Promise<void> {\n    this._logger.trace('Room.release();');\n    return this._finalizer();\n  }\n\n  /**\n   * A random identifier for the room instance, useful in debugging and logging.\n   * @returns The nonce.\n   */\n  get nonce(): string {\n    return this._nonce;\n  }\n\n  /**\n   * @internal\n   * @returns The internal room lifecycle.\n   */\n  get lifecycle(): InternalRoomLifecycle {\n    return this._lifecycle;\n  }\n\n  /**\n   * @internal\n   * @returns The room lifecycle manager.\n   */\n  get lifecycleManager(): RoomLifecycleManager {\n    return this._lifecycleManager;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  onDiscontinuity(handler: DiscontinuityListener): StatusSubscription {\n    this._logger.trace('Room.onDiscontinuity();');\n    return this._lifecycleManager.onDiscontinuity(handler);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  get channel(): Ably.RealtimeChannel {\n    return this._channelManager.get();\n  }\n}\n","import * as Ably from 'ably';\nimport { dequal } from 'dequal';\n\nimport { ChatApi } from './chat-api.js';\nimport { ChatClientOptions, NormalizedChatClientOptions } from './config.js';\nimport { ErrorCode } from './errors.js';\nimport { randomId } from './id.js';\nimport { Logger } from './logger.js';\nimport { DefaultRoom, Room } from './room.js';\nimport { normalizeRoomOptions, RoomOptions } from './room-options.js';\n\n/**\n * Manages the lifecycle of chat rooms.\n */\nexport interface Rooms {\n  /**\n   * Gets a room reference by its unique identifier. The Rooms class ensures that only one reference\n   * exists for each room. A new reference object is created if it doesn't already\n   * exist, or if the one used previously was released using release(name).\n   *\n   * Always call `release(name)` after the Room object is no longer needed.\n   *\n   * If a call to `get` is made for a room that is currently being released, then the promise will resolve only when\n   * the release operation is complete.\n   *\n   * If a call to `get` is made, followed by a subsequent call to `release` before the promise resolves, then the\n   * promise will reject with an error.\n   * @param name The unique identifier of the room.\n   * @param options The options for the room.\n   * @throws {@link ErrorInfo} if a room with the same name but different options already exists.\n   * @returns Room A promise to a new or existing Room object.\n   */\n  get(name: string, options?: RoomOptions): Promise<Room>;\n\n  /**\n   * Release the Room object if it exists. This method only releases the reference\n   * to the Room object from the Rooms instance and detaches the room from Ably. It does not unsubscribe to any\n   * events.\n   *\n   * After calling this function, the room object is no-longer usable. If you wish to get the room object again,\n   * you must call {@link Rooms.get}.\n   *\n   * Calling this function will abort any in-progress `get` calls for the same room.\n   * @param name The unique identifier of the room.\n   */\n  release(name: string): Promise<void>;\n\n  /**\n   * Disposes all rooms that are currently in the rooms map.\n   * This method releases all rooms concurrently and clears the rooms map.\n   * @returns A promise that resolves when all rooms have been released.\n   */\n  dispose(): Promise<void>;\n\n  /**\n   * Get the client options used to create the Chat instance.\n   * @returns ChatClientOptions\n   */\n  get clientOptions(): ChatClientOptions;\n\n  /**\n   * Get the number of rooms currently in the rooms map.\n   * @returns The number of rooms currently in the rooms map.\n   */\n  get count(): number;\n}\n\n/**\n * Represents an entry in the chat room map.\n */\ninterface RoomMapEntry {\n  /**\n   * The promise that will eventually resolve to the room.\n   */\n  promise: Promise<DefaultRoom>;\n\n  /**\n   * A random, internal identifier useful for debugging and logging.\n   */\n  nonce: string;\n\n  /**\n   * The options for the room.\n   */\n  options: RoomOptions | undefined;\n\n  /**\n   * An abort controller to abort the get operation if the room is released before the get operation completes.\n   */\n  abort?: AbortController;\n}\n\n/**\n * Manages the chat rooms.\n */\nexport class DefaultRooms implements Rooms {\n  private readonly _realtime: Ably.Realtime;\n  private readonly _chatApi: ChatApi;\n  private readonly _clientOptions: NormalizedChatClientOptions;\n  private readonly _rooms: Map<string, RoomMapEntry> = new Map<string, RoomMapEntry>();\n  private readonly _releasing = new Map<string, Promise<void>>();\n  private readonly _logger: Logger;\n  private _isReact = false;\n  private _disposed = false;\n\n  /**\n   * Constructs a new Rooms instance.\n   * @param realtime An instance of the Ably Realtime client.\n   * @param clientOptions The client options from the chat instance.\n   * @param logger An instance of the Logger.\n   */\n  constructor(realtime: Ably.Realtime, clientOptions: NormalizedChatClientOptions, logger: Logger) {\n    this._realtime = realtime;\n    this._chatApi = new ChatApi(realtime, logger);\n    this._clientOptions = clientOptions;\n    this._logger = logger;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async get(name: string, options?: RoomOptions): Promise<Room> {\n    this._logger.trace('Rooms.get();', { roomName: name });\n\n    this._ensureNotDisposed();\n\n    const existingRoom = this._rooms.get(name);\n    if (existingRoom) {\n      return this._handleExistingRoom(existingRoom, name, options);\n    }\n\n    const ongoingRelease = this._releasing.get(name);\n    const nonce = randomId();\n\n    if (!ongoingRelease) {\n      return this._createNewRoom(name, nonce, options);\n    }\n\n    return this._waitForReleaseAndCreateRoom(name, nonce, options, ongoingRelease);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  async release(name: string): Promise<void> {\n    this._logger.trace('Rooms.release();', { roomName: name });\n\n    const existingRoom = this._rooms.get(name);\n    const ongoingRelease = this._releasing.get(name);\n\n    if (!existingRoom) {\n      return this._handleNonExistentRoomRelease(name, ongoingRelease);\n    }\n\n    if (ongoingRelease) {\n      return this._handleConcurrentRelease(name, existingRoom, ongoingRelease);\n    }\n\n    return this._performRoomRelease(name, existingRoom);\n  }\n\n  /**\n   * Disposes all rooms that are currently in the rooms map and waits for any ongoing release operations to complete.\n   * This method releases all rooms concurrently, waits for any in-flight releases to finish, and clears the rooms map.\n   * After this method resolves, all rooms will have been fully released and cleaned up.\n   * @internal\n   * @returns A promise that resolves when all rooms have been released.\n   */\n  async dispose(): Promise<void> {\n    this._logger.trace('Rooms.dispose();');\n\n    // Mark this instance as disposed\n    this._disposed = true;\n\n    // Get all room names currently in the map\n    const roomNames = [...this._rooms.keys()];\n\n    if (roomNames.length === 0) {\n      this._logger.debug('Rooms.dispose(); no rooms to release');\n      return;\n    }\n\n    // Release all rooms concurrently\n    const releasePromises = roomNames.map((roomName) => this.release(roomName));\n\n    // Ensure we wait for all ongoing releases too, since we guarantee that all rooms are released after this call\n    // resolves.\n    const inFlight = [...this._releasing.values()];\n    const all = [...releasePromises, ...inFlight];\n\n    this._logger.debug('Rooms.dispose(); releasing rooms', { roomCount: roomNames.length, roomNames });\n\n    await Promise.all(all);\n    this._logger.debug('Rooms.dispose(); all rooms released successfully');\n  }\n\n  /**\n   * Get the client options used to create the Chat instance.\n   * @returns ChatClientOptions\n   */\n  get clientOptions(): ChatClientOptions {\n    return this._clientOptions;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  get count(): number {\n    return this._rooms.size;\n  }\n\n  /**\n   * Ensures the rooms instance has not been disposed.\n   */\n  private _ensureNotDisposed(): void {\n    if (this._disposed) {\n      throw new Ably.ErrorInfo('cannot get room, rooms instance has been disposed', 40000, 400);\n    }\n  }\n\n  /**\n   * Handles the case where a room already exists.\n   * @param existingRoom The existing room entry in the map.\n   * @param name The unique identifier of the room.\n   * @param options The options for the room.\n   * @returns A promise that resolves to the existing room.\n   */\n  private async _handleExistingRoom(existingRoom: RoomMapEntry, name: string, options?: RoomOptions): Promise<Room> {\n    if (!dequal(existingRoom.options, options)) {\n      throw new Ably.ErrorInfo('room already exists with different options', 40000, 400);\n    }\n\n    this._logger.debug('Rooms.get(); returning existing room', {\n      roomName: name,\n      nonce: existingRoom.nonce,\n      options,\n    });\n    return await existingRoom.promise;\n  }\n\n  /**\n   * Creates a new room when no existing room or ongoing release exists.\n   * @param name The unique identifier of the room.\n   * @param nonce A random, internal identifier useful for debugging and logging.\n   * @param options The options for the room.\n   * @returns A new room object.\n   */\n  private _createNewRoom(name: string, nonce: string, options?: RoomOptions): Room {\n    const room = this._makeRoom(name, nonce, options);\n    const entry: RoomMapEntry = {\n      promise: Promise.resolve(room),\n      nonce: nonce,\n      options: options,\n    };\n\n    this._rooms.set(name, entry);\n    this._logger.debug('Rooms.get(); returning new room', { roomName: name, nonce: room.nonce });\n    return room; // No need to await Promise.resolve(room)\n  }\n\n  /**\n   * Waits for an ongoing release to complete, then creates a new room.\n   * @param name The unique identifier of the room.\n   * @param nonce A random, internal identifier useful for debugging and logging.\n   * @param options The options for the room.\n   * @param ongoingRelease The promise of an ongoing release operation.\n   * @returns A promise that resolves to a room.\n   */\n  private async _waitForReleaseAndCreateRoom(\n    name: string,\n    nonce: string,\n    options: RoomOptions | undefined,\n    ongoingRelease: Promise<void>,\n  ): Promise<Room> {\n    const abortController = new AbortController();\n    const roomPromise = this._createAbortableRoomPromise(name, nonce, options, ongoingRelease, abortController);\n\n    this._rooms.set(name, {\n      promise: roomPromise,\n      options: options,\n      nonce: nonce,\n      abort: abortController,\n    });\n\n    this._logger.debug('Rooms.get(); creating new promise dependent on previous release', { roomName: name });\n    return await roomPromise;\n  }\n\n  /**\n   * Creates a promise that can be aborted if the room is released before completion.\n   * @param name The unique identifier of the room.\n   * @param nonce A random, internal identifier useful for debugging and logging.\n   * @param options The options for the room.\n   * @param ongoingRelease A promise that resolves when the previous release operation is complete.\n   * @param abortController An AbortController to manage the abort signal.\n   * @returns A promise that resolves to a new room or rejects if the operation is aborted.\n   */\n  private _createAbortableRoomPromise(\n    name: string,\n    nonce: string,\n    options: RoomOptions | undefined,\n    ongoingRelease: Promise<void>,\n    abortController: AbortController,\n  ): Promise<DefaultRoom> {\n    return new Promise<DefaultRoom>((resolve, reject) => {\n      const abortListener = () => {\n        this._logger.debug('Rooms.get(); aborted before init', { roomName: name });\n        reject(\n          new Ably.ErrorInfo(\n            'room released before get operation could complete',\n            ErrorCode.RoomReleasedBeforeOperationCompleted,\n            400,\n          ),\n        );\n      };\n\n      abortController.signal.addEventListener('abort', abortListener);\n\n      ongoingRelease\n        .then(() => {\n          if (abortController.signal.aborted) {\n            this._logger.debug('Rooms.get(); aborted before releasing promise resolved', { roomName: name });\n            return;\n          }\n\n          this._logger.debug('Rooms.get(); releasing finished', { roomName: name });\n          const room = this._makeRoom(name, nonce, options);\n          abortController.signal.removeEventListener('abort', abortListener);\n          resolve(room);\n        })\n        .catch((error: unknown) => {\n          abortController.signal.removeEventListener('abort', abortListener);\n          reject(error as Error);\n        });\n    });\n  }\n\n  /**\n   * Handles release when no room exists.\n   * @param name The unique identifier of the room.\n   * @param ongoingRelease An ongoing release promise, if any.\n   * @returns A promise that resolves when the release operation is complete.\n   */\n  private async _handleNonExistentRoomRelease(name: string, ongoingRelease?: Promise<void>): Promise<void> {\n    if (ongoingRelease) {\n      this._logger.debug('Rooms.release(); waiting for previous release call', { roomName: name });\n      await ongoingRelease;\n      return;\n    }\n\n    this._logger.debug('Rooms.release(); room does not exist', { roomName: name });\n  }\n\n  /**\n   * Handles release when there's already a release in progress.\n   * @param name The unique identifier of the room.\n   * @param existingRoom The existing room entry in the map.\n   * @param ongoingRelease The promise of an ongoing release operation.\n   */\n  private async _handleConcurrentRelease(\n    name: string,\n    existingRoom: RoomMapEntry,\n    ongoingRelease: Promise<void>,\n  ): Promise<void> {\n    if (existingRoom.abort) {\n      this._logger.debug('Rooms.release(); aborting get call', {\n        roomName: name,\n        existingNonce: existingRoom.nonce,\n      });\n      existingRoom.abort.abort();\n      this._rooms.delete(name);\n    }\n\n    await ongoingRelease;\n  }\n\n  /**\n   * Performs the actual room release operation.\n   * @param name The unique identifier of the room.\n   * @param existingRoom The existing room entry in the map.\n   */\n  private async _performRoomRelease(name: string, existingRoom: RoomMapEntry): Promise<void> {\n    this._rooms.delete(name);\n\n    const releasePromise = this._executeRoomRelease(name, existingRoom);\n    this._releasing.set(name, releasePromise);\n\n    this._logger.debug('Rooms.release(); creating new release promise', {\n      roomName: name,\n      nonce: existingRoom.nonce,\n    });\n\n    await releasePromise;\n  }\n\n  /**\n   * Executes the room release and cleanup.\n   * @param name The unique identifier of the room.\n   * @param existingRoom The existing room entry in the map.\n   */\n  private async _executeRoomRelease(name: string, existingRoom: RoomMapEntry): Promise<void> {\n    const room = await existingRoom.promise;\n    this._logger.debug('Rooms.release(); releasing room', { roomName: name, nonce: existingRoom.nonce });\n    await room.release();\n    this._logger.debug('Rooms.release(); room released', { roomName: name, nonce: existingRoom.nonce });\n    this._releasing.delete(name);\n  }\n\n  /**\n   * makes a new room object\n   * @param name The unique identifier of the room.\n   * @param nonce A random, internal identifier useful for debugging and logging.\n   * @param options The options for the room.\n   * @returns DefaultRoom A new room object.\n   */\n  private _makeRoom(name: string, nonce: string, options: RoomOptions | undefined): DefaultRoom {\n    return new DefaultRoom(\n      name,\n      nonce,\n      normalizeRoomOptions(options, this._isReact),\n      this._realtime,\n      this._chatApi,\n      this._logger,\n    );\n  }\n\n  /**\n   * Sets react JS mode.\n   */\n  useReact(): void {\n    this._logger.trace('Rooms.useReact();');\n    this._isReact = true;\n  }\n}\n","import * as Ably from 'ably';\n\nimport { ChatClientOptions, normalizeClientOptions, NormalizedChatClientOptions } from './config.js';\nimport { Connection, DefaultConnection, InternalConnection } from './connection.js';\nimport { randomId } from './id.js';\nimport { Logger, makeLogger } from './logger.js';\nimport { RealtimeWithOptions } from './realtime-extensions.js';\nimport { DefaultRooms, Rooms } from './rooms.js';\nimport { VERSION } from './version.js';\n\n/**\n * This is the core client for Ably chat. It provides access to chat rooms.\n */\nexport class ChatClient {\n  /**\n   * @internal\n   */\n  private readonly _realtime: Ably.Realtime;\n\n  /**\n   * @internal\n   */\n  private readonly _rooms: DefaultRooms;\n\n  /**\n   * @internal\n   */\n  private readonly _clientOptions: NormalizedChatClientOptions;\n\n  /**\n   * @internal\n   */\n  private readonly _connection: InternalConnection;\n\n  /**\n   * @internal\n   */\n  private readonly _logger: Logger;\n\n  /**\n   * @internal\n   */\n  private readonly _nonce: string;\n\n  /**\n   * Constructor for Chat\n   *\n   * **Important**: The Ably Realtime client must have a clientId set. This can be done by configuring\n   * token-based authentication that returns a token with a clientId, or by setting\n   * the clientId directly in the Realtime client options.\n   * @example\n   * ```typescript\n   * import * as Ably from 'ably';\n   * import { ChatClient } from '@ably/chat';\n   *\n   * // Preferred in production: Use auth URL that returns a token with clientId\n   * const realtime = new Ably.Realtime({\n   *   authUrl: '/api/ably-auth', // Your server endpoint that returns an Ably token with clientId\n   *   authMethod: 'POST'\n   * });\n   * const chatClient = new ChatClient(realtime);\n   *\n   * // Alternative for development and server-side operations: Set clientId directly (requires API key)\n   * const realtime = new Ably.Realtime({\n   *   key: 'your-ably-api-key',\n   *   clientId: 'user-123'\n   * });\n   * const chatClient = new ChatClient(realtime);\n   * ```\n   * @param realtime - The Ably Realtime client.\n   * @param clientOptions - The client options.\n   */\n  constructor(realtime: Ably.Realtime, clientOptions?: ChatClientOptions) {\n    this._realtime = realtime;\n    this._clientOptions = normalizeClientOptions(clientOptions);\n    this._nonce = randomId();\n    this._logger = makeLogger(this._clientOptions).withContext({\n      chatClientNonce: this._nonce,\n    });\n\n    this._connection = new DefaultConnection(realtime, this._logger);\n    this._rooms = new DefaultRooms(realtime, this._clientOptions, this._logger);\n    this._addAgent('chat-js');\n    this._logger.trace(`ably chat client version ${VERSION}; initialized`);\n  }\n\n  /**\n   * Returns the rooms object, which provides access to chat rooms.\n   * @returns The rooms object.\n   */\n  get rooms(): Rooms {\n    return this._rooms;\n  }\n\n  /**\n   * Returns the underlying connection to Ably, which can be used to monitor the client's\n   * connection to Ably servers.\n   * @returns The connection object.\n   */\n  get connection(): Connection {\n    return this._connection;\n  }\n\n  /**\n   * Returns the clientId of the current client.\n   * @returns The clientId.\n   */\n  get clientId(): string {\n    return this._realtime.auth.clientId;\n  }\n\n  /**\n   * Returns the underlying Ably Realtime client.\n   * @returns The Ably Realtime client.\n   */\n  get realtime(): Ably.Realtime {\n    return this._realtime;\n  }\n\n  /**\n   * Returns the resolved client options for the client, including any defaults that have been set.\n   * @returns The client options.\n   */\n  get clientOptions(): ChatClientOptions {\n    return this._clientOptions;\n  }\n\n  /**\n   * Returns the logger instance for the client.\n   * @internal\n   * @returns The logger instance.\n   */\n  get logger(): Logger {\n    return this._logger;\n  }\n\n  /**\n   * Adds additional agent information to the client.\n   * Used internally to add React-specific agent information.\n   * @internal\n   */\n  public addReactAgent(): void {\n    this._addAgent('chat-react');\n    this._rooms.useReact();\n  }\n\n  /**\n   * Adds additional agent information to the client.\n   * This is used internally to add a specific agent with a version.\n   * @param agent - The agent to add.\n   * @param version - The version of the agent, defaults to the current client version.\n   * @internal\n   */\n  public addAgentWithVersion(agent: string, version: string): void {\n    this._addAgent(agent, version);\n    this._logger.trace(`Added agent ${agent} with version ${version}`);\n  }\n\n  /**\n   * Disposes of the ChatClient instance, cleaning up any resources and rendering it unusable.\n   * This method will release all rooms before disposing of the client.\n   */\n  async dispose(): Promise<void> {\n    this._logger.trace('ChatClient.dispose();');\n\n    // Release all rooms before disposing\n    await this._rooms.dispose();\n\n    // Dispose of the connection instance\n    this._connection.dispose();\n    this._logger.debug('ChatClient.dispose(); client disposed successfully');\n  }\n\n  /**\n   * Sets the agent string for the client.\n   * @param agent - The agent to add.\n   * @param version - The version of the agent, defaults to the current client version.\n   * @internal\n   */\n  private _addAgent(agent: string, version?: string): void {\n    const realtime = this._realtime as RealtimeWithOptions;\n    realtime.options.agents = { ...(realtime.options.agents ?? realtime.options.agents), [agent]: version ?? VERSION };\n  }\n}\n"],"names":["LogLevel","consoleLogger","message","level","context","contextString","formattedMessage","makeLogger","options","logHandler","DefaultLogger","logLevelNumberMap","handler","levelNumber","Ably","originalLevel","value","defaultClientOptions","normalizeClientOptions","on","emitter","arg2","arg3","once","subscribe","subscribePromise","error","InternalEventEmitter","EventEmitter","wrap","fn","args","emitterHasListeners","destructured","numListeners","ConnectionStatus","DefaultConnection","ably","logger","connectionListener","change","chatState","stateChange","listener","wrapped","status","randomId","has","find","iter","tar","key","dequal","foo","bar","ctor","len","tmp","ChatMessageEventType","RealtimeMessageName","RealtimeMetaEventType","ChatMessageAction","PresenceEventType","TypingEventType","TypingSetEventType","RoomReactionRealtimeEventType","RoomReactionEventType","MessageReactionType","ReactionAnnotationType","AnnotationTypeToReactionType","MessageReactionEventType","OccupancyEventType","RoomEventType","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","global","freeSelf","root","freeExports","exports","freeModule","module","moduleExports","addMapEntry","map","pair","addSetEntry","set","arrayEach","array","iteratee","index","length","arrayPush","values","offset","arrayReduce","accumulator","initAccum","baseTimes","n","result","getValue","object","isHostObject","mapToArray","overArg","func","transform","arg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","funcToString","hasOwnProperty","objectToString","reIsNative","Buffer","Symbol","Uint8Array","getPrototype","objectCreate","propertyIsEnumerable","splice","nativeGetSymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","entries","entry","hashClear","hashDelete","hashGet","data","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","cache","pairs","arrayLikeKeys","inherited","isArray","isArguments","skipIndexes","isIndex","assignValue","objValue","eq","baseAssign","source","copyObject","keys","baseClone","isDeep","isFull","customizer","stack","isObject","isArr","initCloneArray","copyArray","tag","getTag","isFunc","isBuffer","cloneBuffer","initCloneObject","copySymbols","initCloneByTag","stacked","props","getAllKeys","subValue","baseCreate","proto","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","baseIsNative","isMasked","pattern","isFunction","baseKeys","isPrototype","buffer","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","cloneMap","cloneFunc","cloneRegExp","regexp","cloneSet","cloneSymbol","symbol","cloneTypedArray","typedArray","newValue","getSymbols","isKeyable","stubArray","Ctor","ctorString","type","cloneDeep","other","isArrayLikeObject","isArrayLike","isLength","isObjectLike","stubFalse","DefaultMessage","serial","clientId","text","metadata","headers","action","version","timestamp","reactions","first","second","event","newReactions","comparator","replace","params","emptyMessageReactions","parseMessage","inboundMessage","extras","serialToString","serialString","eventTypeMap","DefaultMessageReactions","_logger","_options","_api","_roomName","_channel","reactionType","eventType","name","reactionEvent","summary","unique","distinct","multiple","messageSerial","count","apiParams","roomOptions","messageFromRest","MessageActionsToEventsMap","OrderBy","DefaultMessages","roomName","channel","chatApi","messageEventsListener","channelAttachedListener","channelUpdateListener","subscriptionPoint","subscriptionPointParams","fromResume","newSubscriptionStartResolver","channelWithProperties","resolve","reject","cleanup","offAttachedListener","response","updateParams","details","resolvedSubscriptionStart","channelEventMessage","disposalError","rejectFn","ChatApi","realtime","payload","nextData","firstData","currentData","restMessage","body","url","method","suffix","ErrorCode","errorInfoIs","errorInfo","roomChannelName","VERSION","CHANNEL_OPTIONS_AGENT_STRING","CHANNEL_OPTIONS_AGENT_STRING_REACT","DEFAULT_CHANNEL_MODES","DEFAULT_CHANNEL_OPTIONS","DEFAULT_CHANNEL_OPTIONS_REACT","ChannelManager","isReact","merger","baseOptions","parseOccupancyMessage","connections","presenceMembers","metrics","DefaultOccupancy","occupancyEventsListener","DefaultPresence","member","presenceEventsListener","channelDetachListener","user","listenerOrEvents","present","previous","E_CANCELED","__awaiter$2","thisArg","_arguments","P","generator","adopt","fulfilled","step","e","rejected","Semaphore","_value","_cancelError","weight","priority","task","i","findIndexFromEnd","callback_1","callback","release","insertSorted","item","previousValue","called","waiters","waiter","queuedPriority","a","v","predicate","__awaiter$1","Mutex","cancelError","releaser","RoomStatus","DefaultRoomLifecycle","RoomLifecycleManager","channelManager","roomLifecycle","channelStateListener","discontinuityOnAttachedListener","discontinuityOnUpdateListener","errInfo","attachError","newStatus","detachError","channelState","op","firstAttach","DefaultRoomOptions","invalidRoomConfiguration","reason","validateRoomOptions","validateTypingOptions","normalizeTypingOptions","normalizeOccupancyOptions","normalizePresenceOptions","normalizeMessageOptions","normalizeRoomOptions","react","ephemeralMessage","messageToEphemeral","DefaultRoomReaction","createdAt","isSelf","parseRoomReaction","reactionCreatedMessage","messageClientId","DefaultRoomReactions","connection","inbound","reaction","roomReactionEventsListener","realtimeMessage","DefaultTyping","timeoutId","timer","existingTimeout","DefaultRoom","nonce","finalized","manager","DefaultRooms","clientOptions","existingRoom","ongoingRelease","roomNames","releasePromises","inFlight","all","room","abortController","roomPromise","abortListener","releasePromise","ChatClient","agent"],"mappings":"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"}}]
}