(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/src/app/components/Stories.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Stories",
    ()=>Stories
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/avatar.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$dialog$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/dialog.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/input.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$skeleton$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/skeleton.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$plus$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Plus$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/plus.js [app-client] (ecmascript) <export default as Plus>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__X$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/x.js [app-client] (ecmascript) <export default as X>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$left$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronLeft$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/chevron-left.js [app-client] (ecmascript) <export default as ChevronLeft>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$right$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronRight$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/chevron-right.js [app-client] (ecmascript) <export default as ChevronRight>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$heart$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Heart$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/heart.js [app-client] (ecmascript) <export default as Heart>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$send$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Send$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/send.js [app-client] (ecmascript) <export default as Send>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$cloud$2d$upload$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__UploadCloud$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/cloud-upload.js [app-client] (ecmascript) <export default as UploadCloud>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$trash$2d$2$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Trash2$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/trash-2.js [app-client] (ecmascript) <export default as Trash2>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$camera$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Camera$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/camera.js [app-client] (ecmascript) <export default as Camera>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/loader-circle.js [app-client] (ecmascript) <export default as Loader2>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$video$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Video$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/video.js [app-client] (ecmascript) <export default as Video>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$square$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Square$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/square.js [app-client] (ecmascript) <export default as Square>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$volume$2d$2$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Volume2$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/volume-2.js [app-client] (ecmascript) <export default as Volume2>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$volume$2d$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__VolumeX$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/volume-x.js [app-client] (ecmascript) <export default as VolumeX>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$figma$2f$ImageWithFallback$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/figma/ImageWithFallback.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$userContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/utils/userContext.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/utils/supabase/info.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/components/ui/select.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
'use client';
;
;
;
;
;
;
;
;
;
;
;
;
const API_BASE_URL = `https://${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["projectId"]}.supabase.co/functions/v1/make-server-a14c7986`;
const AUTH_HEADERS = {
    Authorization: `Bearer ${__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$supabase$2f$info$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["publicAnonKey"]}`
};
const JSON_HEADERS = {
    ...AUTH_HEADERS,
    'Content-Type': 'application/json'
};
const STORY_SKELETON_COUNT = 5;
const MAX_STORY_ITEMS = 5;
const DEFAULT_IMAGE_DURATION = 6;
const DEFAULT_VIDEO_DURATION = 15;
const MAX_CAMERA_RECORDING_MS = DEFAULT_VIDEO_DURATION * 1000;
const blobToDataUrl = (blob)=>new Promise((resolve, reject)=>{
        const reader = new FileReader();
        reader.onloadend = ()=>{
            if (typeof reader.result === 'string') {
                resolve(reader.result);
            } else {
                reject(new Error('Unable to read recording data'));
            }
        };
        reader.onerror = reject;
        reader.readAsDataURL(blob);
    });
const getSupportedRecordingMimeType = ()=>{
    if (("TURBOPACK compile-time value", "object") === 'undefined' || typeof window.MediaRecorder === 'undefined') {
        return '';
    }
    const Recorder = window.MediaRecorder;
    const candidates = [
        'video/webm;codecs=vp9',
        'video/webm;codecs=vp8',
        'video/webm;codecs=avc1',
        'video/webm',
        'video/mp4'
    ];
    const supported = candidates.find((candidate)=>candidate && Recorder.isTypeSupported(candidate));
    return supported ?? '';
};
const formatRecordingTime = (seconds)=>{
    const safeSeconds = Math.max(0, seconds);
    const wholeSeconds = Math.floor(safeSeconds);
    const mins = Math.floor(wholeSeconds / 60);
    const secs = wholeSeconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
};
const STORY_VISIBILITY_OPTIONS = [
    {
        label: 'Public',
        value: 'public',
        description: 'Everyone on MoveSplash can view your story'
    },
    {
        label: 'Friends',
        value: 'friends',
        description: 'Only your connections can view'
    },
    {
        label: 'Close friends',
        value: 'close_friends',
        description: 'Share with your inner circle only'
    }
];
const formatRelativeTime = (isoTimestamp)=>{
    const date = new Date(isoTimestamp);
    if (Number.isNaN(date.getTime())) {
        return '';
    }
    const diffMs = Date.now() - date.getTime();
    const minutes = Math.floor(diffMs / (1000 * 60));
    if (minutes < 1) {
        return 'Just now';
    }
    if (minutes < 60) {
        return `${minutes}m ago`;
    }
    const hours = Math.floor(minutes / 60);
    if (hours < 24) {
        return `${hours}h ago`;
    }
    const days = Math.floor(hours / 24);
    if (days < 7) {
        return `${days}d ago`;
    }
    return date.toLocaleDateString();
};
const STORY_PLACEHOLDER_URL = 'https://api.dicebear.com/7.x/shapes/svg?seed=MoveSplashStory&backgroundColor=transparent';
const storyStateToApiResponse = (story)=>({
        id: story.id,
        userId: story.userId,
        user: story.user,
        items: story.items.map((item)=>({
                ...item,
                url: typeof item.url === 'string' && item.url.trim() !== '' && item.url !== '__existing__' ? item.url : STORY_PLACEHOLDER_URL
            })),
        viewers: story.viewers,
        visibility: story.visibility,
        createdAt: story.createdAt,
        expiresAt: story.expiresAt,
        likes: story.likes,
        replies: story.replies.map((reply)=>({
                id: reply.id,
                storyId: reply.storyId,
                authorId: reply.authorId,
                content: reply.content,
                timestamp: reply.timestamp,
                author: reply.author ?? undefined
            }))
    });
function Stories() {
    _s();
    const { currentUser } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$userContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useUser"])();
    const [storiesData, setStoriesData] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [selectedStory, setSelectedStory] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [currentItemIndex, setCurrentItemIndex] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(0);
    const [replyText, setReplyText] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])('');
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [isCreatorOpen, setIsCreatorOpen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const storyVideoRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const [storyDraft, setStoryDraft] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [storyVisibility, setStoryVisibility] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])('friends');
    const [isSubmittingStory, setIsSubmittingStory] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [creationError, setCreationError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [isDragging, setIsDragging] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const fileInputRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const [likingStoryId, setLikingStoryId] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [replySending, setReplySending] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [isCameraActive, setIsCameraActive] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [cameraStream, setCameraStream] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [cameraError, setCameraError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [isCapturingPhoto, setIsCapturingPhoto] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const videoRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const mediaRecorderRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const recordingChunksRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])([]);
    const recordingTimerRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const recordingDiscardRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(false);
    const recordingMimeTypeRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])('video/webm');
    const recordingDurationRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(0);
    const [isRecordingVideo, setIsRecordingVideo] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [recordingDuration, setRecordingDuration] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(0);
    const [recordingError, setRecordingError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [isStoryVideoMuted, setIsStoryVideoMuted] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    const [storyVideoProgress, setStoryVideoProgress] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(0);
    const encodeStoryId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[encodeStoryId]": (storyId)=>encodeURIComponent(storyId)
    }["Stories.useCallback[encodeStoryId]"], []);
    const fetchStories = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[fetchStories]": async (signal)=>{
            try {
                if (!signal?.aborted) {
                    setLoading(true);
                    setError(null);
                }
                const response = await fetch(`${API_BASE_URL}/stories`, {
                    headers: AUTH_HEADERS,
                    signal
                });
                if (!response.ok) {
                    throw new Error('Failed to fetch stories');
                }
                const payload = await response.json().catch({
                    "Stories.useCallback[fetchStories]": ()=>({})
                }["Stories.useCallback[fetchStories]"]);
                if (!signal?.aborted) {
                    setStoriesData(Array.isArray(payload?.stories) ? payload.stories : []);
                }
            } catch (fetchError) {
                if (fetchError.name === 'AbortError') {
                    return;
                }
                console.error('Error loading stories:', fetchError);
                if (!signal?.aborted) {
                    setError('Unable to load stories right now.');
                }
            } finally{
                if (!signal?.aborted) {
                    setLoading(false);
                }
            }
        }
    }["Stories.useCallback[fetchStories]"], []);
    const mergeStoryUpdate = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[mergeStoryUpdate]": (storyUpdate, options)=>{
            setStoriesData({
                "Stories.useCallback[mergeStoryUpdate]": (prev)=>{
                    const sanitizeItems = {
                        "Stories.useCallback[mergeStoryUpdate].sanitizeItems": (items, existing)=>{
                            if (!Array.isArray(items)) {
                                return items;
                            }
                            return items.map({
                                "Stories.useCallback[mergeStoryUpdate].sanitizeItems": (item, index)=>{
                                    const previous = existing?.[index];
                                    const normalizedUrl = typeof item.url === 'string' && item.url.trim() !== '' && item.url !== '__existing__' ? item.url : '';
                                    const previousUrl = typeof previous?.url === 'string' && previous.url.trim() !== '' && previous.url !== '__existing__' ? previous.url : '';
                                    const resolvedUrl = normalizedUrl || previousUrl || STORY_PLACEHOLDER_URL;
                                    return {
                                        ...item,
                                        url: resolvedUrl
                                    };
                                }
                            }["Stories.useCallback[mergeStoryUpdate].sanitizeItems"]);
                        }
                    }["Stories.useCallback[mergeStoryUpdate].sanitizeItems"];
                    const cleanedUpdate = {
                        ...storyUpdate,
                        items: sanitizeItems(storyUpdate.items)
                    };
                    const exists = prev.some({
                        "Stories.useCallback[mergeStoryUpdate].exists": (entry)=>entry.id === storyUpdate.id
                    }["Stories.useCallback[mergeStoryUpdate].exists"]);
                    if (exists) {
                        return prev.map({
                            "Stories.useCallback[mergeStoryUpdate]": (entry)=>entry.id === storyUpdate.id ? {
                                    ...entry,
                                    ...cleanedUpdate,
                                    items: sanitizeItems(cleanedUpdate.items, entry.items)
                                } : entry
                        }["Stories.useCallback[mergeStoryUpdate]"]);
                    }
                    if (options?.prepend) {
                        return [
                            cleanedUpdate,
                            ...prev
                        ];
                    }
                    return [
                        ...prev,
                        cleanedUpdate
                    ];
                }
            }["Stories.useCallback[mergeStoryUpdate]"]);
        }
    }["Stories.useCallback[mergeStoryUpdate]"], []);
    const buildUserSnapshot = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[buildUserSnapshot]": (user)=>{
            if (!user) {
                return null;
            }
            return {
                id: user.id,
                name: user.name,
                username: user.username,
                avatar: user.avatar,
                ablyClientId: user.ablyClientId ?? user.id
            };
        }
    }["Stories.useCallback[buildUserSnapshot]"], []);
    const buildStorySnapshot = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[buildStorySnapshot]": (story)=>{
            return {
                id: story.id,
                userId: story.userId,
                visibility: story.visibility,
                createdAt: story.createdAt,
                expiresAt: story.expiresAt,
                viewers: story.viewers,
                likes: story.likes,
                items: story.items.map({
                    "Stories.useCallback[buildStorySnapshot]": (item)=>({
                            id: item.id,
                            type: item.type,
                            url: typeof item.url === 'string' && item.url.trim() !== '' ? item.url : STORY_PLACEHOLDER_URL,
                            duration: item.duration,
                            timestamp: item.timestamp ?? new Date().toISOString()
                        })
                }["Stories.useCallback[buildStorySnapshot]"]),
                user: {
                    id: story.user.id,
                    name: story.user.name,
                    username: story.user.username,
                    avatar: story.user.avatar,
                    ablyClientId: story.user.ablyClientId
                },
                replies: story.replies.map({
                    "Stories.useCallback[buildStorySnapshot]": (reply)=>({
                            id: reply.id,
                            storyId: reply.storyId,
                            authorId: reply.authorId,
                            content: reply.content,
                            timestamp: reply.timestamp,
                            author: reply.author ? {
                                id: reply.author.id,
                                name: reply.author.name,
                                username: reply.author.username,
                                avatar: reply.author.avatar,
                                ablyClientId: reply.author.ablyClientId
                            } : undefined
                        })
                }["Stories.useCallback[buildStorySnapshot]"])
            };
        }
    }["Stories.useCallback[buildStorySnapshot]"], []);
    const ensureStoryOnServer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[ensureStoryOnServer]": async (story)=>{
            try {
                const ownerSnapshot = buildUserSnapshot(story.user);
                const response = await fetch(`${API_BASE_URL}/stories`, {
                    method: 'POST',
                    headers: JSON_HEADERS,
                    body: JSON.stringify({
                        ...buildStorySnapshot(story),
                        userSnapshot: ownerSnapshot ?? undefined
                    })
                });
                if (!response.ok) {
                    return false;
                }
                const payload = await response.json().catch({
                    "Stories.useCallback[ensureStoryOnServer]": ()=>({})
                }["Stories.useCallback[ensureStoryOnServer]"]);
                if (payload?.story) {
                    mergeStoryUpdate(payload.story);
                }
                return true;
            } catch (restoreError) {
                console.error('Failed to ensure story on server:', restoreError);
                return false;
            }
        }
    }["Stories.useCallback[ensureStoryOnServer]"], [
        buildStorySnapshot,
        buildUserSnapshot,
        mergeStoryUpdate
    ]);
    const processFiles = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[processFiles]": (files)=>{
            if (!files) {
                return;
            }
            const fileArray = Array.from(files).filter({
                "Stories.useCallback[processFiles].fileArray": (file)=>file.type.startsWith('image/') || file.type.startsWith('video/')
            }["Stories.useCallback[processFiles].fileArray"]);
            if (fileArray.length === 0) {
                setCreationError('Only image or video files are supported for stories.');
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Only image or video files are supported for stories.');
                return;
            }
            const availableSlots = Math.max(MAX_STORY_ITEMS - storyDraft.length, 0);
            if (availableSlots <= 0) {
                setCreationError(`You can add up to ${MAX_STORY_ITEMS} story items.`);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info(`You can add up to ${MAX_STORY_ITEMS} story items.`);
                return;
            }
            const allowedFiles = fileArray.slice(0, availableSlots);
            const hasOverflow = fileArray.length > allowedFiles.length;
            allowedFiles.forEach({
                "Stories.useCallback[processFiles]": (file)=>{
                    const reader = new FileReader();
                    reader.onload = ({
                        "Stories.useCallback[processFiles]": (event)=>{
                            const result = event.target?.result;
                            if (!result || typeof result !== 'string') {
                                return;
                            }
                            const isVideo = file.type.startsWith('video/');
                            setStoryDraft({
                                "Stories.useCallback[processFiles]": (prev)=>[
                                        ...prev,
                                        {
                                            id: `${file.name}-${Date.now()}`,
                                            type: isVideo ? 'video' : 'image',
                                            url: result,
                                            duration: isVideo ? DEFAULT_VIDEO_DURATION : DEFAULT_IMAGE_DURATION
                                        }
                                    ]
                            }["Stories.useCallback[processFiles]"]);
                        }
                    })["Stories.useCallback[processFiles]"];
                    reader.readAsDataURL(file);
                }
            }["Stories.useCallback[processFiles]"]);
            if (allowedFiles.length > 0) {
                setCreationError(null);
            }
            if (hasOverflow) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info(`Only the first ${availableSlots} files were added.`);
            }
        }
    }["Stories.useCallback[processFiles]"], [
        storyDraft.length
    ]);
    const handleFileInputChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleFileInputChange]": (event)=>{
            processFiles(event.target.files);
            event.target.value = '';
        }
    }["Stories.useCallback[handleFileInputChange]"], [
        processFiles
    ]);
    const handleDrop = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleDrop]": (event)=>{
            event.preventDefault();
            setIsDragging(false);
            processFiles(event.dataTransfer.files);
        }
    }["Stories.useCallback[handleDrop]"], [
        processFiles
    ]);
    const handleDragOver = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleDragOver]": (event)=>{
            event.preventDefault();
            event.dataTransfer.dropEffect = 'copy';
            if (!isDragging) {
                setIsDragging(true);
            }
        }
    }["Stories.useCallback[handleDragOver]"], [
        isDragging
    ]);
    const handleDragLeave = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleDragLeave]": (event)=>{
            event.preventDefault();
            setIsDragging(false);
        }
    }["Stories.useCallback[handleDragLeave]"], []);
    const clearRecordingTimer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[clearRecordingTimer]": ()=>{
            if (recordingTimerRef.current !== null) {
                window.clearInterval(recordingTimerRef.current);
                recordingTimerRef.current = null;
            }
        }
    }["Stories.useCallback[clearRecordingTimer]"], []);
    const finalizeRecording = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[finalizeRecording]": async ()=>{
            clearRecordingTimer();
            const discard = recordingDiscardRef.current;
            recordingDiscardRef.current = false;
            const chunks = recordingChunksRef.current;
            recordingChunksRef.current = [];
            mediaRecorderRef.current = null;
            const mimeType = recordingMimeTypeRef.current || 'video/webm';
            const durationSeconds = Math.max(recordingDurationRef.current, 0);
            recordingDurationRef.current = 0;
            setIsRecordingVideo(false);
            setRecordingDuration(0);
            if (discard || chunks.length === 0) {
                if (discard && chunks.length > 0) {
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info('Recording discarded.');
                }
                return;
            }
            try {
                const blob = new Blob(chunks, {
                    type: mimeType
                });
                const dataUrl = await blobToDataUrl(blob);
                setStoryDraft({
                    "Stories.useCallback[finalizeRecording]": (prev)=>{
                        if (prev.length >= MAX_STORY_ITEMS) {
                            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info(`You can add up to ${MAX_STORY_ITEMS} story items.`);
                            return prev;
                        }
                        const derivedDuration = Math.min(DEFAULT_VIDEO_DURATION, Math.max(3, Math.round(durationSeconds) || DEFAULT_VIDEO_DURATION));
                        return [
                            ...prev,
                            {
                                id: `recording-${Date.now()}`,
                                type: 'video',
                                url: dataUrl,
                                duration: derivedDuration
                            }
                        ];
                    }
                }["Stories.useCallback[finalizeRecording]"]);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Video added to your story.');
            } catch (error) {
                console.error('Failed to save recording:', error);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Unable to save that recording.');
            }
        }
    }["Stories.useCallback[finalizeRecording]"], [
        setStoryDraft,
        clearRecordingTimer
    ]);
    const stopVideoRecording = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[stopVideoRecording]": (discard = false)=>{
            if (!mediaRecorderRef.current) {
                recordingDiscardRef.current = false;
                return;
            }
            recordingDiscardRef.current = discard;
            if (mediaRecorderRef.current.state !== 'inactive') {
                mediaRecorderRef.current.stop();
            }
        }
    }["Stories.useCallback[stopVideoRecording]"], []);
    const startVideoRecording = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[startVideoRecording]": ()=>{
            if (!isCameraActive || !cameraStream) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info('Start the camera before recording.');
                return;
            }
            if (isRecordingVideo) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info('Recording already in progress.');
                return;
            }
            if (("TURBOPACK compile-time value", "object") === 'undefined' || typeof window.MediaRecorder === 'undefined') {
                setRecordingError('Video recording is not supported in this browser.');
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Recording is not supported on this device.');
                return;
            }
            try {
                const mimeType = getSupportedRecordingMimeType();
                const recorder = mimeType ? new MediaRecorder(cameraStream, {
                    mimeType
                }) : new MediaRecorder(cameraStream);
                recordingMimeTypeRef.current = mimeType || recorder.mimeType || 'video/webm';
                recordingChunksRef.current = [];
                recorder.ondataavailable = ({
                    "Stories.useCallback[startVideoRecording]": (event)=>{
                        if (event.data && event.data.size > 0) {
                            recordingChunksRef.current.push(event.data);
                        }
                    }
                })["Stories.useCallback[startVideoRecording]"];
                recorder.onerror = ({
                    "Stories.useCallback[startVideoRecording]": (errorEvent)=>{
                        console.error('Recording error:', errorEvent);
                        setRecordingError('Recording error. Please try again.');
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Recording error.');
                        recordingDiscardRef.current = true;
                    }
                })["Stories.useCallback[startVideoRecording]"];
                recorder.onstop = ({
                    "Stories.useCallback[startVideoRecording]": ()=>{
                        finalizeRecording().catch({
                            "Stories.useCallback[startVideoRecording]": (error)=>{
                                console.error('Failed to finalize recording:', error);
                            }
                        }["Stories.useCallback[startVideoRecording]"]);
                    }
                })["Stories.useCallback[startVideoRecording]"];
                mediaRecorderRef.current = recorder;
                recorder.start();
                setIsRecordingVideo(true);
                setRecordingDuration(0);
                recordingDurationRef.current = 0;
                setRecordingError(null);
                recordingTimerRef.current = window.setInterval({
                    "Stories.useCallback[startVideoRecording]": ()=>{
                        setRecordingDuration({
                            "Stories.useCallback[startVideoRecording]": (prev)=>{
                                const next = prev + 0.2;
                                recordingDurationRef.current = next;
                                if (next * 1000 >= MAX_CAMERA_RECORDING_MS) {
                                    stopVideoRecording();
                                }
                                return next;
                            }
                        }["Stories.useCallback[startVideoRecording]"]);
                    }
                }["Stories.useCallback[startVideoRecording]"], 200);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Recording started.');
            } catch (error) {
                console.error('Unable to start recording:', error);
                setRecordingError('Unable to start recording. Please try again.');
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Unable to start recording.');
            }
        }
    }["Stories.useCallback[startVideoRecording]"], [
        cameraStream,
        finalizeRecording,
        isCameraActive,
        isRecordingVideo,
        stopVideoRecording
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            return ({
                "Stories.useEffect": ()=>{
                    clearRecordingTimer();
                    recordingDiscardRef.current = true;
                    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {
                        mediaRecorderRef.current.stop();
                    }
                }
            })["Stories.useEffect"];
        }
    }["Stories.useEffect"], [
        clearRecordingTimer
    ]);
    const stopCamera = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[stopCamera]": ()=>{
            if (isRecordingVideo) {
                stopVideoRecording(true);
            }
            setCameraStream({
                "Stories.useCallback[stopCamera]": (stream)=>{
                    if (stream) {
                        stream.getTracks().forEach({
                            "Stories.useCallback[stopCamera]": (track)=>{
                                try {
                                    track.stop();
                                } catch (stopError) {
                                    console.error('Error stopping camera stream track:', stopError);
                                }
                            }
                        }["Stories.useCallback[stopCamera]"]);
                    }
                    return null;
                }
            }["Stories.useCallback[stopCamera]"]);
            setIsCameraActive(false);
            setIsCapturingPhoto(false);
            setRecordingDuration(0);
            recordingDurationRef.current = 0;
            setRecordingError(null);
            setCameraError(null);
        }
    }["Stories.useCallback[stopCamera]"], [
        isRecordingVideo,
        stopVideoRecording
    ]);
    const startCamera = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[startCamera]": async ()=>{
            if (typeof navigator === 'undefined' || !navigator.mediaDevices?.getUserMedia) {
                setCameraError('Camera is not supported on this device.');
                return;
            }
            try {
                stopCamera();
                let stream = null;
                try {
                    stream = await navigator.mediaDevices.getUserMedia({
                        video: {
                            facingMode: 'user'
                        },
                        audio: true
                    });
                } catch (audioError) {
                    console.warn('Falling back to video-only capture for stories:', audioError);
                    stream = await navigator.mediaDevices.getUserMedia({
                        video: {
                            facingMode: 'user'
                        }
                    });
                }
                setCameraStream(stream);
                setIsCameraActive(true);
                setCameraError(null);
            } catch (cameraErr) {
                console.error('Error accessing camera:', cameraErr);
                setCameraError('Unable to access camera. Check your permissions.');
                setIsCameraActive(false);
            }
        }
    }["Stories.useCallback[startCamera]"], [
        stopCamera
    ]);
    const capturePhoto = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[capturePhoto]": ()=>{
            if (!isCameraActive || !videoRef.current) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info('Start the camera to capture a photo.');
                return;
            }
            if (isRecordingVideo) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info('Stop the recording before taking a photo.');
                return;
            }
            const video = videoRef.current;
            setIsCapturingPhoto(true);
            setStoryDraft({
                "Stories.useCallback[capturePhoto]": (prev)=>{
                    if (prev.length >= MAX_STORY_ITEMS) {
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info(`You can add up to ${MAX_STORY_ITEMS} story items.`);
                        setIsCapturingPhoto(false);
                        return prev;
                    }
                    const canvas = document.createElement('canvas');
                    const width = video.videoWidth || 720;
                    const height = video.videoHeight || 1280;
                    canvas.width = width;
                    canvas.height = height;
                    const context = canvas.getContext('2d');
                    if (!context) {
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Unable to capture photo.');
                        setIsCapturingPhoto(false);
                        return prev;
                    }
                    context.drawImage(video, 0, 0, width, height);
                    const dataUrl = canvas.toDataURL('image/jpeg', 0.9);
                    if (!dataUrl) {
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Unable to capture photo.');
                        setIsCapturingPhoto(false);
                        return prev;
                    }
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Photo added to your story.');
                    setIsCapturingPhoto(false);
                    return [
                        ...prev,
                        {
                            id: `camera-${Date.now()}`,
                            type: 'image',
                            url: dataUrl,
                            duration: DEFAULT_IMAGE_DURATION
                        }
                    ];
                }
            }["Stories.useCallback[capturePhoto]"]);
        }
    }["Stories.useCallback[capturePhoto]"], [
        isCameraActive,
        isRecordingVideo
    ]);
    const resetCreatorState = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[resetCreatorState]": ()=>{
            setStoryDraft([]);
            setStoryVisibility('friends');
            setCreationError(null);
            setIsDragging(false);
            setIsSubmittingStory(false);
            stopCamera();
            if (fileInputRef.current) {
                fileInputRef.current.value = '';
            }
        }
    }["Stories.useCallback[resetCreatorState]"], [
        stopCamera
    ]);
    const handleRemoveDraftItem = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleRemoveDraftItem]": (id)=>{
            setStoryDraft({
                "Stories.useCallback[handleRemoveDraftItem]": (prev)=>prev.filter({
                        "Stories.useCallback[handleRemoveDraftItem]": (item)=>item.id !== id
                    }["Stories.useCallback[handleRemoveDraftItem]"])
            }["Stories.useCallback[handleRemoveDraftItem]"]);
        }
    }["Stories.useCallback[handleRemoveDraftItem]"], []);
    const handleCreatorOpenChange = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleCreatorOpenChange]": (open)=>{
            setIsCreatorOpen(open);
            if (!open) {
                resetCreatorState();
            }
        }
    }["Stories.useCallback[handleCreatorOpenChange]"], [
        resetCreatorState
    ]);
    const handleCreateStory = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleCreateStory]": async ()=>{
            if (!currentUser) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info("Sign in to share a story.");
                return;
            }
            if (storyDraft.length === 0) {
                setCreationError('Add at least one photo or video to your story.');
                return;
            }
            setIsSubmittingStory(true);
            setCreationError(null);
            try {
                const payloadItems = storyDraft.map({
                    "Stories.useCallback[handleCreateStory].payloadItems": (item)=>({
                            id: item.id,
                            type: item.type,
                            url: item.url,
                            duration: item.duration,
                            timestamp: new Date().toISOString()
                        })
                }["Stories.useCallback[handleCreateStory].payloadItems"]);
                const response = await fetch(`${API_BASE_URL}/stories`, {
                    method: 'POST',
                    headers: JSON_HEADERS,
                    body: JSON.stringify({
                        userId: currentUser.id,
                        visibility: storyVisibility,
                        items: payloadItems
                    })
                });
                const payload = await response.json().catch({
                    "Stories.useCallback[handleCreateStory]": ()=>({})
                }["Stories.useCallback[handleCreateStory]"]);
                if (!response.ok || !payload?.story) {
                    const errorMessage = payload?.error ?? 'Failed to publish story.';
                    throw new Error(errorMessage);
                }
                const createdStory = payload.story;
                mergeStoryUpdate(createdStory, {
                    prepend: true
                });
                const newStoryId = createdStory.id;
                handleCreatorOpenChange(false);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Your story is live!');
                void fetchStories().catch({
                    "Stories.useCallback[handleCreateStory]": (error)=>{
                        console.error('Error refreshing stories:', error);
                    }
                }["Stories.useCallback[handleCreateStory]"]);
                setSelectedStory(newStoryId);
                setCurrentItemIndex(0);
            } catch (creationErrorCaught) {
                console.error('Error creating story:', creationErrorCaught);
                const message = creationErrorCaught instanceof Error ? creationErrorCaught.message : 'Unable to publish story right now.';
                setCreationError(message);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Unable to publish story right now.');
            } finally{
                setIsSubmittingStory(false);
            }
        }
    }["Stories.useCallback[handleCreateStory]"], [
        currentUser,
        storyDraft,
        storyVisibility,
        fetchStories,
        handleCreatorOpenChange,
        mergeStoryUpdate
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            const controller = new AbortController();
            fetchStories(controller.signal);
            return ({
                "Stories.useEffect": ()=>controller.abort()
            })["Stories.useEffect"];
        }
    }["Stories.useEffect"], [
        fetchStories
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            const video = videoRef.current;
            if (!video) {
                return;
            }
            if (cameraStream) {
                video.srcObject = cameraStream;
                const play = {
                    "Stories.useEffect.play": async ()=>{
                        try {
                            await video.play();
                        } catch (err) {
                            console.error('Error starting camera preview:', err);
                            setCameraError('Unable to start camera preview.');
                        }
                    }
                }["Stories.useEffect.play"];
                void play();
            } else {
                video.srcObject = null;
            }
        }
    }["Stories.useEffect"], [
        cameraStream
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            if (!isCreatorOpen) {
                stopCamera();
            }
        }
    }["Stories.useEffect"], [
        isCreatorOpen,
        stopCamera
    ]);
    const storyFeed = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "Stories.useMemo[storyFeed]": ()=>{
            return storiesData.filter({
                "Stories.useMemo[storyFeed]": (story)=>Boolean(story?.user) && Array.isArray(story.items) && story.items.length > 0
            }["Stories.useMemo[storyFeed]"]).map({
                "Stories.useMemo[storyFeed]": (story)=>{
                    const safeItems = story.items.map({
                        "Stories.useMemo[storyFeed].safeItems": (item)=>({
                                ...item,
                                type: item.type === 'video' ? 'video' : 'image'
                            })
                    }["Stories.useMemo[storyFeed].safeItems"]);
                    const baseUser = story.user;
                    const resolvedUser = {
                        id: baseUser.id,
                        name: baseUser.name,
                        username: baseUser.username,
                        avatar: baseUser.avatar,
                        ablyClientId: baseUser.ablyClientId ?? baseUser.id
                    };
                    const createdAt = story.createdAt && !Number.isNaN(Date.parse(story.createdAt)) ? new Date(story.createdAt).toISOString() : new Date().toISOString();
                    const expiresAt = story.expiresAt && !Number.isNaN(Date.parse(story.expiresAt)) ? new Date(story.expiresAt).toISOString() : createdAt;
                    const likes = Array.from(new Set(Array.isArray(story.likes) ? story.likes.filter({
                        "Stories.useMemo[storyFeed].likes": (value)=>typeof value === 'string'
                    }["Stories.useMemo[storyFeed].likes"]) : []));
                    const replies = Array.isArray(story.replies) ? story.replies.map({
                        "Stories.useMemo[storyFeed]": (reply, index)=>{
                            if (!reply || typeof reply !== 'object') {
                                return null;
                            }
                            const replyData = reply;
                            const replyAuthorId = typeof replyData.authorId === 'string' ? replyData.authorId : '';
                            if (!replyAuthorId) {
                                return null;
                            }
                            const timestamp = replyData.timestamp && !Number.isNaN(Date.parse(replyData.timestamp)) ? new Date(replyData.timestamp).toISOString() : new Date().toISOString();
                            const authorData = replyData.author;
                            const author = authorData ? {
                                id: authorData.id,
                                name: authorData.name,
                                username: authorData.username,
                                avatar: authorData.avatar,
                                ablyClientId: authorData.ablyClientId ?? authorData.id
                            } : null;
                            const content = typeof replyData.content === 'string' ? replyData.content : '';
                            if (!content) {
                                return null;
                            }
                            return {
                                id: replyData.id || `${story.id}-reply-${index}`,
                                storyId: replyData.storyId ?? story.id,
                                authorId: replyAuthorId,
                                author,
                                content,
                                timestamp
                            };
                        }
                    }["Stories.useMemo[storyFeed]"]).filter({
                        "Stories.useMemo[storyFeed]": (reply)=>Boolean(reply)
                    }["Stories.useMemo[storyFeed]"]).sort({
                        "Stories.useMemo[storyFeed]": (a, b)=>Date.parse(a.timestamp) - Date.parse(b.timestamp)
                    }["Stories.useMemo[storyFeed]"]) : [];
                    return {
                        id: story.id,
                        userId: story.userId,
                        user: resolvedUser,
                        items: safeItems,
                        viewers: Array.isArray(story.viewers) ? story.viewers : [],
                        visibility: story.visibility ?? 'friends',
                        createdAt,
                        expiresAt,
                        viewed: currentUser ? Array.isArray(story.viewers) ? story.viewers.includes(currentUser.id) : false : false,
                        likes,
                        likeCount: likes.length,
                        liked: currentUser ? likes.includes(currentUser.id) : false,
                        replies
                    };
                }
            }["Stories.useMemo[storyFeed]"]).sort({
                "Stories.useMemo[storyFeed]": (a, b)=>Date.parse(b.createdAt) - Date.parse(a.createdAt)
            }["Stories.useMemo[storyFeed]"]);
        }
    }["Stories.useMemo[storyFeed]"], [
        storiesData,
        currentUser
    ]);
    const storyCreationPlaceholder = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "Stories.useMemo[storyCreationPlaceholder]": ()=>{
            if (!currentUser) {
                return null;
            }
            const hasExistingStory = storyFeed.some({
                "Stories.useMemo[storyCreationPlaceholder].hasExistingStory": (story)=>story.userId === currentUser.id
            }["Stories.useMemo[storyCreationPlaceholder].hasExistingStory"]);
            if (hasExistingStory) {
                return null;
            }
            const nowIso = new Date().toISOString();
            return {
                id: `create-story-${currentUser.id}`,
                userId: currentUser.id,
                user: {
                    id: currentUser.id,
                    name: currentUser.name,
                    username: currentUser.username,
                    avatar: currentUser.avatar,
                    ablyClientId: currentUser.ablyClientId ?? currentUser.id
                },
                items: [],
                viewers: [],
                visibility: 'friends',
                createdAt: nowIso,
                expiresAt: nowIso,
                viewed: false,
                likes: [],
                likeCount: 0,
                liked: false,
                replies: []
            };
        }
    }["Stories.useMemo[storyCreationPlaceholder]"], [
        currentUser,
        storyFeed
    ]);
    const playableStories = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "Stories.useMemo[playableStories]": ()=>storyFeed.filter({
                "Stories.useMemo[playableStories]": (story)=>story.items.length > 0
            }["Stories.useMemo[playableStories]"])
    }["Stories.useMemo[playableStories]"], [
        storyFeed
    ]);
    const orderedStories = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "Stories.useMemo[orderedStories]": ()=>{
            let ordered = storyFeed;
            if (currentUser) {
                const ownStories = storyFeed.filter({
                    "Stories.useMemo[orderedStories].ownStories": (story)=>story.userId === currentUser.id
                }["Stories.useMemo[orderedStories].ownStories"]);
                const others = storyFeed.filter({
                    "Stories.useMemo[orderedStories].others": (story)=>story.userId !== currentUser.id
                }["Stories.useMemo[orderedStories].others"]);
                ordered = [
                    ...ownStories,
                    ...others
                ];
            }
            if (storyCreationPlaceholder) {
                return [
                    storyCreationPlaceholder,
                    ...ordered
                ];
            }
            return ordered;
        }
    }["Stories.useMemo[orderedStories]"], [
        currentUser,
        storyFeed,
        storyCreationPlaceholder
    ]);
    const currentStory = selectedStory ? playableStories.find((story)=>story.id === selectedStory) ?? null : null;
    const currentItem = currentStory?.items[currentItemIndex];
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            if (!selectedStory) {
                return;
            }
            if (playableStories.some({
                "Stories.useEffect": (story)=>story.id === selectedStory
            }["Stories.useEffect"])) {
                return;
            }
            setSelectedStory(null);
            setCurrentItemIndex(0);
        }
    }["Stories.useEffect"], [
        selectedStory,
        playableStories
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            setReplyText('');
            setStoryVideoProgress(0);
            setIsStoryVideoMuted(true);
        }
    }["Stories.useEffect"], [
        selectedStory
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            if (!selectedStory || !currentUser) {
                return;
            }
            const story = storiesData.find({
                "Stories.useEffect.story": (entry)=>entry.id === selectedStory
            }["Stories.useEffect.story"]);
            if (!story) {
                return;
            }
            if (Array.isArray(story.viewers) && story.viewers.includes(currentUser.id)) {
                return;
            }
            const controller = new AbortController();
            const trackView = {
                "Stories.useEffect.trackView": async ()=>{
                    try {
                        const storyIdParam = encodeStoryId(story.id);
                        await fetch(`${API_BASE_URL}/stories/${storyIdParam}/view`, {
                            method: 'POST',
                            headers: JSON_HEADERS,
                            body: JSON.stringify({
                                viewerId: currentUser.id
                            }),
                            signal: controller.signal
                        });
                        setStoriesData({
                            "Stories.useEffect.trackView": (prev)=>prev.map({
                                    "Stories.useEffect.trackView": (entry)=>entry.id === story.id ? {
                                            ...entry,
                                            viewers: Array.from(new Set([
                                                ...entry.viewers ?? [],
                                                currentUser.id
                                            ]))
                                        } : entry
                                }["Stories.useEffect.trackView"])
                        }["Stories.useEffect.trackView"]);
                    } catch (markError) {
                        if (markError.name !== 'AbortError') {
                            console.error('Failed to update story view state:', markError);
                        }
                    }
                }
            }["Stories.useEffect.trackView"];
            trackView();
            return ({
                "Stories.useEffect": ()=>controller.abort()
            })["Stories.useEffect"];
        }
    }["Stories.useEffect"], [
        selectedStory,
        currentUser,
        storiesData,
        encodeStoryId
    ]);
    const handleStorySelect = (story)=>{
        if (currentUser && story.userId === currentUser.id && story.items.length === 0) {
            handleCreatorOpenChange(true);
            return;
        }
        if (story.items.length === 0) {
            return;
        }
        setSelectedStory(story.id);
        setCurrentItemIndex(0);
    };
    const handleNext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleNext]": ()=>{
            if (!currentStory) {
                return;
            }
            if (currentItemIndex < currentStory.items.length - 1) {
                setCurrentItemIndex({
                    "Stories.useCallback[handleNext]": (index)=>index + 1
                }["Stories.useCallback[handleNext]"]);
                return;
            }
            const storyIndex = playableStories.findIndex({
                "Stories.useCallback[handleNext].storyIndex": (story)=>story.id === currentStory.id
            }["Stories.useCallback[handleNext].storyIndex"]);
            if (storyIndex >= 0 && storyIndex < playableStories.length - 1) {
                setSelectedStory(playableStories[storyIndex + 1].id);
                setCurrentItemIndex(0);
            } else {
                setSelectedStory(null);
                setCurrentItemIndex(0);
            }
        }
    }["Stories.useCallback[handleNext]"], [
        currentStory,
        currentItemIndex,
        playableStories
    ]);
    const handlePrevious = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handlePrevious]": ()=>{
            if (!currentStory) {
                return;
            }
            if (currentItemIndex > 0) {
                setCurrentItemIndex({
                    "Stories.useCallback[handlePrevious]": (index)=>index - 1
                }["Stories.useCallback[handlePrevious]"]);
                return;
            }
            const storyIndex = playableStories.findIndex({
                "Stories.useCallback[handlePrevious].storyIndex": (story)=>story.id === currentStory.id
            }["Stories.useCallback[handlePrevious].storyIndex"]);
            if (storyIndex > 0) {
                const prevStory = playableStories[storyIndex - 1];
                setSelectedStory(prevStory.id);
                setCurrentItemIndex(Math.max(prevStory.items.length - 1, 0));
            }
        }
    }["Stories.useCallback[handlePrevious]"], [
        currentStory,
        currentItemIndex,
        playableStories
    ]);
    const sendStoryReplyMessage = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[sendStoryReplyMessage]": async (story, content)=>{
            if (!currentUser || story.userId === currentUser.id) {
                return;
            }
            const senderClientId = currentUser.ablyClientId ?? currentUser.id;
            const targetClientId = story.user.ablyClientId ?? story.user.id;
            const members = Array.from(new Set([
                senderClientId,
                targetClientId
            ].filter({
                "Stories.useCallback[sendStoryReplyMessage].members": (value)=>Boolean(value)
            }["Stories.useCallback[sendStoryReplyMessage].members"])));
            if (members.length < 2) {
                return;
            }
            const chatName = `Story chat with ${story.user.name}`;
            let chatId = null;
            try {
                const response = await fetch(`${API_BASE_URL}/chats`, {
                    method: 'POST',
                    headers: JSON_HEADERS,
                    body: JSON.stringify({
                        name: chatName,
                        members,
                        isGroup: false,
                        createdBy: currentUser.id
                    })
                });
                const payload = await response.json().catch({
                    "Stories.useCallback[sendStoryReplyMessage]": ()=>({})
                }["Stories.useCallback[sendStoryReplyMessage]"]);
                if (response.ok && payload?.chat && typeof payload.chat.id === 'string') {
                    chatId = payload.chat.id;
                } else if (!response.ok) {
                    console.warn('Failed to ensure chat for story reply', response.status);
                }
            } catch (ensureChatError) {
                console.error('Error ensuring chat for story reply:', ensureChatError);
            }
            if (!chatId) {
                return;
            }
            try {
                const messageResponse = await fetch(`${API_BASE_URL}/messages`, {
                    method: 'POST',
                    headers: JSON_HEADERS,
                    body: JSON.stringify({
                        chatId,
                        senderId: senderClientId,
                        senderName: currentUser.name,
                        senderAvatar: currentUser.avatar,
                        content: `Reply to your story: ${content}`
                    })
                });
                if (!messageResponse.ok) {
                    console.warn('Failed to persist story reply message', messageResponse.status);
                }
            } catch (messageError) {
                console.error('Error sending story reply message:', messageError);
            }
        }
    }["Stories.useCallback[sendStoryReplyMessage]"], [
        currentUser
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Stories.useEffect": ()=>{
            if (!currentItem || currentItem.type !== 'video') {
                setStoryVideoProgress(0);
                const existing = storyVideoRef.current;
                if (existing) {
                    existing.pause();
                    existing.currentTime = 0;
                }
                return;
            }
            const videoElement = storyVideoRef.current;
            if (!videoElement) {
                return;
            }
            videoElement.muted = isStoryVideoMuted;
            const handleEnded = {
                "Stories.useEffect.handleEnded": ()=>handleNext()
            }["Stories.useEffect.handleEnded"];
            const handleTimeUpdate = {
                "Stories.useEffect.handleTimeUpdate": ()=>{
                    if (videoElement.duration) {
                        setStoryVideoProgress(videoElement.currentTime / videoElement.duration);
                    }
                }
            }["Stories.useEffect.handleTimeUpdate"];
            const handleLoadedMetadata = {
                "Stories.useEffect.handleLoadedMetadata": ()=>{
                    setStoryVideoProgress(0);
                    videoElement.muted = isStoryVideoMuted;
                    const playPromise = videoElement.play();
                    if (playPromise) {
                        playPromise.catch({
                            "Stories.useEffect.handleLoadedMetadata": (error)=>console.warn('Unable to autoplay story video:', error)
                        }["Stories.useEffect.handleLoadedMetadata"]);
                    }
                }
            }["Stories.useEffect.handleLoadedMetadata"];
            videoElement.addEventListener('ended', handleEnded);
            videoElement.addEventListener('timeupdate', handleTimeUpdate);
            videoElement.addEventListener('loadedmetadata', handleLoadedMetadata);
            const playPromise = videoElement.play();
            if (playPromise) {
                playPromise.catch({
                    "Stories.useEffect": (error)=>console.warn('Unable to autoplay story video:', error)
                }["Stories.useEffect"]);
            }
            return ({
                "Stories.useEffect": ()=>{
                    videoElement.removeEventListener('ended', handleEnded);
                    videoElement.removeEventListener('timeupdate', handleTimeUpdate);
                    videoElement.removeEventListener('loadedmetadata', handleLoadedMetadata);
                }
            })["Stories.useEffect"];
        }
    }["Stories.useEffect"], [
        currentItem,
        handleNext,
        isStoryVideoMuted
    ]);
    const toggleStoryVideoMute = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[toggleStoryVideoMute]": ()=>{
            setIsStoryVideoMuted({
                "Stories.useCallback[toggleStoryVideoMute]": (prev)=>{
                    const next = !prev;
                    if (storyVideoRef.current) {
                        storyVideoRef.current.muted = next;
                    }
                    return next;
                }
            }["Stories.useCallback[toggleStoryVideoMute]"]);
        }
    }["Stories.useCallback[toggleStoryVideoMute]"], []);
    const handleStoryLike = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleStoryLike]": async (story)=>{
            if (!currentUser) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info('Sign in to like stories.');
                return;
            }
            if (likingStoryId && likingStoryId !== story.id) {
                return;
            }
            setLikingStoryId(story.id);
            try {
                const toggleLike = {
                    "Stories.useCallback[handleStoryLike].toggleLike": async (attempt = 0)=>{
                        const storyIdParam = encodeStoryId(story.id);
                        const includeSnapshot = attempt > 0;
                        const response = await fetch(`${API_BASE_URL}/stories/${storyIdParam}/like`, {
                            method: 'POST',
                            headers: JSON_HEADERS,
                            body: JSON.stringify({
                                userId: currentUser.id,
                                likerSnapshot: {
                                    id: currentUser.id,
                                    name: currentUser.name,
                                    username: currentUser.username,
                                    avatar: currentUser.avatar,
                                    ablyClientId: currentUser.ablyClientId ?? currentUser.id
                                },
                                ...includeSnapshot ? {
                                    storySnapshot: buildStorySnapshot(story)
                                } : {}
                            })
                        });
                        if (response.status === 404 && attempt === 0) {
                            const restored = await ensureStoryOnServer(story);
                            if (restored) {
                                return toggleLike(attempt + 1);
                            }
                        }
                        const payload = await response.json().catch({
                            "Stories.useCallback[handleStoryLike].toggleLike": ()=>({})
                        }["Stories.useCallback[handleStoryLike].toggleLike"]);
                        if (!response.ok || !payload?.story) {
                            return false;
                        }
                        mergeStoryUpdate(payload.story);
                        return true;
                    }
                }["Stories.useCallback[handleStoryLike].toggleLike"];
                const applied = await toggleLike();
                if (!applied) {
                    throw new Error('restore');
                }
            } catch  {
                if (currentUser) {
                    const currentlyLiked = story.likes.includes(currentUser.id);
                    const updatedLikes = currentlyLiked ? story.likes.filter({
                        "Stories.useCallback[handleStoryLike]": (id)=>id !== currentUser.id
                    }["Stories.useCallback[handleStoryLike]"]) : [
                        ...story.likes,
                        currentUser.id
                    ];
                    const fallbackStory = {
                        ...story,
                        likes: updatedLikes,
                        likeCount: updatedLikes.length,
                        liked: !currentlyLiked
                    };
                    mergeStoryUpdate(storyStateToApiResponse(fallbackStory));
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success(currentlyLiked ? 'Removed like.' : 'Liked story!');
                } else {
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Story like recorded!');
                }
            } finally{
                setLikingStoryId(null);
            }
        }
    }["Stories.useCallback[handleStoryLike]"], [
        currentUser,
        likingStoryId,
        mergeStoryUpdate,
        encodeStoryId,
        ensureStoryOnServer,
        buildStorySnapshot
    ]);
    const handleReply = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "Stories.useCallback[handleReply]": async ()=>{
            if (!currentStory) {
                return;
            }
            const trimmed = replyText.trim();
            if (!trimmed) {
                return;
            }
            if (!currentUser) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].info('Sign in to reply to stories.');
                return;
            }
            setReplySending(true);
            try {
                const sendReply = {
                    "Stories.useCallback[handleReply].sendReply": async (attempt = 0)=>{
                        const storyIdParam = encodeStoryId(currentStory.id);
                        const response = await fetch(`${API_BASE_URL}/stories/${storyIdParam}/reply`, {
                            method: 'POST',
                            headers: JSON_HEADERS,
                            body: JSON.stringify({
                                authorId: currentUser.id,
                                content: trimmed,
                                authorSnapshot: {
                                    id: currentUser.id,
                                    name: currentUser.name,
                                    username: currentUser.username,
                                    avatar: currentUser.avatar,
                                    ablyClientId: currentUser.ablyClientId ?? currentUser.id
                                },
                                ...attempt > 0 ? {
                                    storySnapshot: buildStorySnapshot(currentStory)
                                } : {}
                            })
                        });
                        if (response.status === 404 && attempt === 0) {
                            const restored = await ensureStoryOnServer(currentStory);
                            if (restored) {
                                return sendReply(attempt + 1);
                            }
                        }
                        const payload = await response.json().catch({
                            "Stories.useCallback[handleReply].sendReply": ()=>({})
                        }["Stories.useCallback[handleReply].sendReply"]);
                        if (!response.ok || !payload?.story) {
                            return false;
                        }
                        mergeStoryUpdate(payload.story);
                        setReplyText('');
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Reply sent!');
                        void sendStoryReplyMessage(currentStory, trimmed);
                        return true;
                    }
                }["Stories.useCallback[handleReply].sendReply"];
                const applied = await sendReply();
                if (!applied) {
                    throw new Error('restore');
                }
            } catch  {
                if (currentStory && currentUser) {
                    const replyId = `offline-${Date.now().toString(36)}`;
                    const fallbackReply = {
                        id: replyId,
                        storyId: currentStory.id,
                        authorId: currentUser.id,
                        content: trimmed,
                        timestamp: new Date().toISOString(),
                        author: {
                            id: currentUser.id,
                            name: currentUser.name,
                            username: currentUser.username,
                            avatar: currentUser.avatar,
                            ablyClientId: currentUser.ablyClientId ?? currentUser.id
                        }
                    };
                    const fallbackStory = {
                        ...currentStory,
                        replies: [
                            ...currentStory.replies,
                            fallbackReply
                        ]
                    };
                    mergeStoryUpdate(storyStateToApiResponse(fallbackStory));
                    setReplyText('');
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Reply sent!');
                    void sendStoryReplyMessage(currentStory, trimmed);
                } else {
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success('Reply captured!');
                }
            } finally{
                setReplySending(false);
            }
        }
    }["Stories.useCallback[handleReply]"], [
        currentStory,
        currentUser,
        encodeStoryId,
        ensureStoryOnServer,
        mergeStoryUpdate,
        replyText,
        sendStoryReplyMessage,
        buildStorySnapshot
    ]);
    const showSkeleton = loading && storiesData.length === 0;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "max-w-7xl mx-auto space-y-4",
        children: [
            error && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "p-4 rounded-2xl bg-white/10 border border-white/20 text-white/80 flex items-center justify-between gap-4",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "text-sm",
                        children: error
                    }, void 0, false, {
                        fileName: "[project]/src/app/components/Stories.tsx",
                        lineNumber: 1497,
                        columnNumber: 11
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                        size: "sm",
                        variant: "outline",
                        onClick: ()=>void fetchStories(),
                        className: "bg-white/10 border-white/30 text-white hover:bg-white/20",
                        children: "Try again"
                    }, void 0, false, {
                        fileName: "[project]/src/app/components/Stories.tsx",
                        lineNumber: 1498,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/app/components/Stories.tsx",
                lineNumber: 1496,
                columnNumber: 9
            }, this),
            showSkeleton ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex gap-4 overflow-x-auto pb-4 hide-scrollbar",
                children: Array.from({
                    length: STORY_SKELETON_COUNT
                }).map((_, index)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex flex-col items-center gap-2 flex-shrink-0",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$skeleton$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Skeleton"], {
                                className: "w-20 h-20 rounded-full bg-white/10"
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1513,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$skeleton$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Skeleton"], {
                                className: "w-16 h-3 bg-white/10"
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1514,
                                columnNumber: 15
                            }, this)
                        ]
                    }, index, true, {
                        fileName: "[project]/src/app/components/Stories.tsx",
                        lineNumber: 1512,
                        columnNumber: 13
                    }, this))
            }, void 0, false, {
                fileName: "[project]/src/app/components/Stories.tsx",
                lineNumber: 1510,
                columnNumber: 9
            }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex gap-4 overflow-x-auto pb-4 hide-scrollbar",
                children: orderedStories.length === 0 && !currentUser ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "text-white/70 text-sm",
                    children: "No stories yet. Check back soon!"
                }, void 0, false, {
                    fileName: "[project]/src/app/components/Stories.tsx",
                    lineNumber: 1521,
                    columnNumber: 13
                }, this) : orderedStories.map((story)=>{
                    const isOwnStory = Boolean(currentUser && story.userId === currentUser.id);
                    const isPlaceholder = isOwnStory && story.items.length === 0;
                    const ringGradient = story.viewed && !isPlaceholder ? 'from-white/30 via-white/20 to-white/30' : 'from-pink-500 via-purple-500 to-indigo-500';
                    const label = isPlaceholder ? 'Create a story' : isOwnStory ? 'View your story' : `View ${story.user.name}'s story`;
                    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                        type: "button",
                        onClick: ()=>handleStorySelect(story),
                        className: "relative flex flex-col items-center gap-2 flex-shrink-0 group focus:outline-none transition-transform duration-300 hover:-translate-y-1",
                        "aria-label": label,
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "relative",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: `relative p-[3px] rounded-full bg-gradient-to-tr ${ringGradient} transition-all duration-500 ease-out group-hover:shadow-[0_18px_35px_rgba(168,85,247,0.35)] group-hover:scale-[1.03]`,
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 group-hover:blur-lg bg-white/25 transition-all duration-500"
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1547,
                                                columnNumber: 23
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "relative p-0.5 rounded-full bg-gradient-to-br from-purple-950/80 via-purple-900/70 to-pink-900/80",
                                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Avatar"], {
                                                    className: "w-16 h-16 border-2 border-white/20 transition-transform duration-500 group-hover:scale-[1.04]",
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarImage"], {
                                                            src: story.user.avatar
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1550,
                                                            columnNumber: 27
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarFallback"], {
                                                            children: story.user.name[0]
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1551,
                                                            columnNumber: 27
                                                        }, this)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                    lineNumber: 1549,
                                                    columnNumber: 25
                                                }, this)
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1548,
                                                columnNumber: 23
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1544,
                                        columnNumber: 21
                                    }, this),
                                    isPlaceholder && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "absolute -bottom-1 -right-1 w-7 h-7 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 rounded-full flex items-center justify-center border-2 border-purple-950 shadow-[0_12px_35px_rgba(236,72,153,0.45)] transition-transform duration-300 group-hover:scale-110",
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$plus$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Plus$3e$__["Plus"], {
                                            className: "w-3.5 h-3.5 text-white"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1558,
                                            columnNumber: 25
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1557,
                                        columnNumber: 23
                                    }, this),
                                    isOwnStory && !isPlaceholder && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                        type: "button",
                                        onClick: (event)=>{
                                            event.stopPropagation();
                                            handleCreatorOpenChange(true);
                                        },
                                        className: "absolute -bottom-1 -right-1 flex h-7 w-7 items-center justify-center rounded-full border-2 border-purple-950 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white shadow-[0_12px_35px_rgba(236,72,153,0.45)] transition-transform duration-300 hover:scale-110 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/80",
                                        "aria-label": "Add to your story",
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$plus$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Plus$3e$__["Plus"], {
                                            className: "w-3.5 h-3.5"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1571,
                                            columnNumber: 25
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1562,
                                        columnNumber: 23
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1543,
                                columnNumber: 19
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                className: "text-white/90 text-sm max-w-[90px] truncate text-center tracking-tight transition-colors duration-300 group-hover:text-white",
                                children: isOwnStory ? 'Your Story' : story.user.name
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1575,
                                columnNumber: 19
                            }, this)
                        ]
                    }, story.id, true, {
                        fileName: "[project]/src/app/components/Stories.tsx",
                        lineNumber: 1536,
                        columnNumber: 17
                    }, this);
                })
            }, void 0, false, {
                fileName: "[project]/src/app/components/Stories.tsx",
                lineNumber: 1519,
                columnNumber: 9
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$dialog$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Dialog"], {
                open: selectedStory !== null,
                onOpenChange: (open)=>!open && setSelectedStory(null),
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$dialog$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DialogContent"], {
                    className: "max-w-md h-[90vh] p-0 bg-transparent border-0",
                    children: currentStory && currentItem && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "relative w-full h-full rounded-3xl overflow-hidden bg-black",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "absolute inset-0",
                                children: currentItem.type === 'video' ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                                    children: [
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("video", {
                                            ref: storyVideoRef,
                                            src: currentItem.url,
                                            className: "h-full w-full object-contain bg-black",
                                            playsInline: true,
                                            autoPlay: true,
                                            controls: false,
                                            muted: isStoryVideoMuted
                                        }, currentItem.id, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1592,
                                            columnNumber: 21
                                        }, this),
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "pointer-events-none absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-black/60"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1602,
                                            columnNumber: 21
                                        }, this)
                                    ]
                                }, void 0, true) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                                    children: [
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$figma$2f$ImageWithFallback$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ImageWithFallback"], {
                                            src: currentItem.url,
                                            alt: "Story",
                                            className: "w-full h-full object-cover"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1606,
                                            columnNumber: 21
                                        }, this),
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/60"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1607,
                                            columnNumber: 21
                                        }, this)
                                    ]
                                }, void 0, true)
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1589,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "absolute top-0 left-0 right-0 p-4 z-10",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    className: "flex gap-1",
                                    children: currentStory.items.map((item, index)=>{
                                        const isActive = index === currentItemIndex;
                                        const isCompleted = index < currentItemIndex;
                                        const widthPercent = isCompleted || isActive && item.type !== 'video' ? undefined : isActive && item.type === 'video' ? Math.min(Math.max(storyVideoProgress, 0), 1) * 100 : undefined;
                                        const progressClass = [
                                            'h-full bg-white transition-all duration-300',
                                            isCompleted ? 'w-full' : '',
                                            !isActive && !isCompleted ? 'w-0' : '',
                                            isActive && item.type !== 'video' ? 'w-full animate-progress' : ''
                                        ].filter(Boolean).join(' ');
                                        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "flex-1 h-1 bg-white/30 rounded-full overflow-hidden",
                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: progressClass,
                                                style: widthPercent !== undefined ? {
                                                    width: `${widthPercent}%`
                                                } : undefined
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1634,
                                                columnNumber: 25
                                            }, this)
                                        }, index, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1633,
                                            columnNumber: 23
                                        }, this);
                                    })
                                }, void 0, false, {
                                    fileName: "[project]/src/app/components/Stories.tsx",
                                    lineNumber: 1613,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1612,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "absolute top-4 right-4 z-20 flex gap-2",
                                children: [
                                    currentItem.type === 'video' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                        size: "icon",
                                        variant: "ghost",
                                        onClick: toggleStoryVideoMute,
                                        className: "text-white hover:bg-white/20",
                                        children: isStoryVideoMuted ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$volume$2d$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__VolumeX$3e$__["VolumeX"], {
                                            className: "w-5 h-5"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1654,
                                            columnNumber: 42
                                        }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$volume$2d$2$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Volume2$3e$__["Volume2"], {
                                            className: "w-5 h-5"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1654,
                                            columnNumber: 76
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1648,
                                        columnNumber: 19
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                        size: "icon",
                                        variant: "ghost",
                                        onClick: ()=>setSelectedStory(null),
                                        className: "text-white hover:bg-white/20",
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__X$3e$__["X"], {
                                            className: "w-5 h-5"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1663,
                                            columnNumber: 19
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1657,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1646,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "absolute top-6 left-0 right-0 px-4 z-10",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    className: "flex items-center justify-between",
                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "flex items-center gap-3",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Avatar"], {
                                                className: "w-10 h-10 border-2 border-white/50",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarImage"], {
                                                        src: currentStory.user.avatar
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1671,
                                                        columnNumber: 23
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarFallback"], {
                                                        children: currentStory.user.name[0]
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1672,
                                                        columnNumber: 23
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1670,
                                                columnNumber: 21
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "text-white",
                                                        children: currentStory.user.name
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1675,
                                                        columnNumber: 23
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "text-white/70 text-sm",
                                                        children: formatRelativeTime(currentItem.timestamp)
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1676,
                                                        columnNumber: 23
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1674,
                                                columnNumber: 21
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1669,
                                        columnNumber: 19
                                    }, this)
                                }, void 0, false, {
                                    fileName: "[project]/src/app/components/Stories.tsx",
                                    lineNumber: 1668,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1667,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                onClick: handlePrevious,
                                className: "absolute left-0 top-0 bottom-0 w-1/3 z-10 cursor-pointer",
                                "aria-label": "Previous"
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1682,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                onClick: handleNext,
                                className: "absolute right-0 top-0 bottom-0 w-1/3 z-10 cursor-pointer",
                                "aria-label": "Next"
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1687,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                size: "sm",
                                variant: "ghost",
                                onClick: handlePrevious,
                                className: "absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-20",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$left$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronLeft$3e$__["ChevronLeft"], {
                                    className: "w-6 h-6"
                                }, void 0, false, {
                                    fileName: "[project]/src/app/components/Stories.tsx",
                                    lineNumber: 1699,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1693,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                size: "sm",
                                variant: "ghost",
                                onClick: handleNext,
                                className: "absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-20",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$right$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronRight$3e$__["ChevronRight"], {
                                    className: "w-6 h-6"
                                }, void 0, false, {
                                    fileName: "[project]/src/app/components/Stories.tsx",
                                    lineNumber: 1707,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1701,
                                columnNumber: 15
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "absolute bottom-0 left-0 right-0 p-4 z-10",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    className: "space-y-3",
                                    children: [
                                        currentStory.replies.length > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "max-h-40 overflow-y-auto rounded-2xl border border-white/10 bg-black/30 p-3 backdrop-blur",
                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "space-y-3",
                                                children: currentStory.replies.map((reply)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "flex items-start gap-3",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Avatar"], {
                                                                className: "h-8 w-8 border border-white/20",
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarImage"], {
                                                                        src: reply.author?.avatar
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1718,
                                                                        columnNumber: 31
                                                                    }, this),
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarFallback"], {
                                                                        children: (reply.author?.name ?? reply.author?.username ?? '?')[0] ?? '?'
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1719,
                                                                        columnNumber: 31
                                                                    }, this)
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1717,
                                                                columnNumber: 29
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                                className: "flex-1 space-y-1",
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                                        className: "flex items-center justify-between text-xs text-white/60",
                                                                        children: [
                                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                                className: "font-medium text-white/90",
                                                                                children: reply.author?.name ?? reply.author?.username ?? 'MoveSplash user'
                                                                            }, void 0, false, {
                                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                                lineNumber: 1725,
                                                                                columnNumber: 33
                                                                            }, this),
                                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                                children: formatRelativeTime(reply.timestamp)
                                                                            }, void 0, false, {
                                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                                lineNumber: 1728,
                                                                                columnNumber: 33
                                                                            }, this)
                                                                        ]
                                                                    }, void 0, true, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1724,
                                                                        columnNumber: 31
                                                                    }, this),
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                                        className: "text-sm text-white/90",
                                                                        children: reply.content
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1730,
                                                                        columnNumber: 31
                                                                    }, this)
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1723,
                                                                columnNumber: 29
                                                            }, this)
                                                        ]
                                                    }, reply.id, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1716,
                                                        columnNumber: 27
                                                    }, this))
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1714,
                                                columnNumber: 23
                                            }, this)
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1713,
                                            columnNumber: 21
                                        }, this),
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "flex flex-wrap items-center gap-2",
                                            children: [
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                    type: "button",
                                                    variant: "ghost",
                                                    onClick: ()=>void handleStoryLike(currentStory),
                                                    disabled: likingStoryId === currentStory.id,
                                                    className: `flex items-center gap-2 rounded-full border border-white/25 bg-black/40 px-4 py-2 text-sm transition-all duration-200 ${currentStory.liked ? 'border-rose-400/60 text-rose-100 hover:bg-rose-500/20' : 'text-white hover:bg-white/15'} ${likingStoryId === currentStory.id ? 'opacity-70 cursor-not-allowed' : ''}`,
                                                    children: [
                                                        likingStoryId === currentStory.id ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__["Loader2"], {
                                                            className: "h-4 w-4 animate-spin"
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1751,
                                                            columnNumber: 25
                                                        }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$heart$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Heart$3e$__["Heart"], {
                                                            className: `h-4 w-4 ${currentStory.liked ? 'fill-current' : ''}`
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1753,
                                                            columnNumber: 25
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                            children: currentStory.likeCount
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1755,
                                                            columnNumber: 23
                                                        }, this)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                    lineNumber: 1739,
                                                    columnNumber: 21
                                                }, this),
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Input"], {
                                                    placeholder: "Send a reply...",
                                                    value: replyText,
                                                    onChange: (e)=>setReplyText(e.target.value),
                                                    onKeyDown: (e)=>{
                                                        if (e.key === 'Enter') {
                                                            e.preventDefault();
                                                            void handleReply();
                                                        }
                                                    },
                                                    disabled: replySending,
                                                    className: "flex-1 min-w-[140px] bg-white/10 backdrop-blur-md border-white/20 text-white placeholder:text-white/50"
                                                }, void 0, false, {
                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                    lineNumber: 1758,
                                                    columnNumber: 21
                                                }, this),
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                    type: "button",
                                                    onClick: ()=>void handleReply(),
                                                    disabled: replySending || !replyText.trim(),
                                                    className: "flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-[0_12px_30px_rgba(168,85,247,0.45)] transition-all duration-200 hover:from-pink-600 hover:to-purple-600 disabled:opacity-70",
                                                    children: [
                                                        replySending ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__["Loader2"], {
                                                            className: "h-4 w-4 animate-spin"
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1777,
                                                            columnNumber: 39
                                                        }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$send$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Send$3e$__["Send"], {
                                                            className: "h-4 w-4"
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1777,
                                                            columnNumber: 86
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                            className: "text-sm font-medium",
                                                            children: "Send"
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1778,
                                                            columnNumber: 23
                                                        }, this)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                    lineNumber: 1771,
                                                    columnNumber: 21
                                                }, this)
                                            ]
                                        }, void 0, true, {
                                            fileName: "[project]/src/app/components/Stories.tsx",
                                            lineNumber: 1738,
                                            columnNumber: 19
                                        }, this)
                                    ]
                                }, void 0, true, {
                                    fileName: "[project]/src/app/components/Stories.tsx",
                                    lineNumber: 1711,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1710,
                                columnNumber: 15
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/app/components/Stories.tsx",
                        lineNumber: 1588,
                        columnNumber: 13
                    }, this)
                }, void 0, false, {
                    fileName: "[project]/src/app/components/Stories.tsx",
                    lineNumber: 1586,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/app/components/Stories.tsx",
                lineNumber: 1585,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$dialog$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Dialog"], {
                open: isCreatorOpen,
                onOpenChange: handleCreatorOpenChange,
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$dialog$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DialogContent"], {
                    className: "w-full max-w-[95vw] sm:max-w-2xl lg:max-w-3xl p-0 border-0 bg-transparent shadow-none",
                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "relative flex max-h-[88vh] flex-col overflow-hidden rounded-3xl bg-gradient-to-br from-[#24103f] via-[#170d3e] to-[#0b1531] text-white shadow-[0_28px_70px_rgba(147,51,234,0.45)]",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "pointer-events-none absolute inset-0 opacity-70",
                                style: {
                                    background: 'radial-gradient(circle at 20% 20%, rgba(236,72,153,0.3), transparent 60%), radial-gradient(circle at 80% 10%, rgba(96,165,250,0.25), transparent 55%), radial-gradient(circle at 50% 90%, rgba(168,85,247,0.25), transparent 60%)'
                                }
                            }, void 0, false, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1791,
                                columnNumber: 13
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "relative flex-1 overflow-y-auto px-5 py-6 sm:px-8 sm:py-8 space-y-6",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "flex flex-wrap items-start justify-between gap-4",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "space-y-2 sm:space-y-1",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                                        className: "text-lg font-semibold sm:text-xl",
                                                        children: "Create a Story"
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1801,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                        className: "text-sm text-white/70",
                                                        children: "Add photos or short clips to share with your friends."
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1802,
                                                        columnNumber: 19
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1800,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                type: "button",
                                                variant: "ghost",
                                                onClick: ()=>handleCreatorOpenChange(false),
                                                className: "text-white/70 hover:text-white hover:bg-white/15",
                                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__X$3e$__["X"], {
                                                    className: "w-5 h-5"
                                                }, void 0, false, {
                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                    lineNumber: 1812,
                                                    columnNumber: 19
                                                }, this)
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1806,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1799,
                                        columnNumber: 15
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: `relative rounded-2xl border border-dashed ${isDragging ? 'border-white/60 bg-white/10' : 'border-white/20 bg-white/5'} transition-all duration-300 ease-out`,
                                        onDragOver: handleDragOver,
                                        onDragLeave: handleDragLeave,
                                        onDrop: handleDrop,
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("input", {
                                                ref: fileInputRef,
                                                type: "file",
                                                accept: "image/*,video/*",
                                                multiple: true,
                                                className: "hidden",
                                                onChange: handleFileInputChange
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1824,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex flex-col items-center justify-center gap-4 px-4 py-8 text-center sm:px-6 sm:py-10",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "rounded-full bg-white/10 p-4 text-white shadow-[0_12px_35px_rgba(236,72,153,0.35)]",
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$cloud$2d$upload$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__UploadCloud$3e$__["UploadCloud"], {
                                                            className: "w-7 h-7"
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                            lineNumber: 1834,
                                                            columnNumber: 21
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1833,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "space-y-1",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                                className: "text-base font-medium",
                                                                children: "Drag & drop to upload"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1837,
                                                                columnNumber: 21
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                                className: "text-sm text-white/60",
                                                                children: [
                                                                    "You can add up to ",
                                                                    MAX_STORY_ITEMS,
                                                                    " photos or videos."
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1838,
                                                                columnNumber: 21
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1836,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "flex flex-wrap items-center justify-center gap-3 text-xs text-white/60",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                children: "Supported: JPG, PNG, MP4"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1843,
                                                                columnNumber: 21
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                className: "hidden sm:inline",
                                                                children: "|"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1844,
                                                                columnNumber: 21
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                children: [
                                                                    "Recommended length ~ ",
                                                                    DEFAULT_VIDEO_DURATION,
                                                                    "s"
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1845,
                                                                columnNumber: 21
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1842,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        type: "button",
                                                        onClick: ()=>fileInputRef.current?.click(),
                                                        className: "rounded-full bg-white px-5 py-2 text-sm font-semibold text-purple-900 shadow-[0_12px_30px_rgba(148,63,255,0.35)] hover:bg-white/90",
                                                        children: "Browse files"
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1847,
                                                        columnNumber: 19
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1832,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1816,
                                        columnNumber: 15
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-5 backdrop-blur space-y-3",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex flex-wrap items-center gap-2 sm:gap-3",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        type: "button",
                                                        onClick: ()=>void startCamera(),
                                                        disabled: isCameraActive,
                                                        className: "flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-purple-900 shadow-[0_12px_30px_rgba(148,63,255,0.35)] transition duration-200 hover:bg-white/90 disabled:cursor-not-allowed disabled:opacity-70",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$camera$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Camera$3e$__["Camera"], {
                                                                className: "h-4 w-4"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1865,
                                                                columnNumber: 21
                                                            }, this),
                                                            isCameraActive ? 'Camera Ready' : 'Use Camera'
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1859,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        type: "button",
                                                        variant: "outline",
                                                        onClick: ()=>void capturePhoto(),
                                                        disabled: !isCameraActive || isCapturingPhoto,
                                                        className: "flex items-center gap-2 rounded-full border-white/40 bg-purple-900/30 px-4 py-2 text-sm text-white hover:bg-purple-800/50 disabled:opacity-60",
                                                        children: [
                                                            isCapturingPhoto ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__["Loader2"], {
                                                                className: "h-4 w-4 animate-spin"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1876,
                                                                columnNumber: 23
                                                            }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$camera$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Camera$3e$__["Camera"], {
                                                                className: "h-4 w-4"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1878,
                                                                columnNumber: 23
                                                            }, this),
                                                            "Capture photo"
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1868,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        type: "button",
                                                        variant: isRecordingVideo ? 'destructive' : 'outline',
                                                        onClick: ()=>{
                                                            if (isRecordingVideo) {
                                                                stopVideoRecording();
                                                            } else {
                                                                startVideoRecording();
                                                            }
                                                        },
                                                        disabled: !isCameraActive || isCapturingPhoto,
                                                        className: `flex items-center gap-2 rounded-full border-white/40 px-4 py-2 text-sm ${isRecordingVideo ? 'bg-rose-500/30 text-white hover:bg-rose-500/40' : 'bg-purple-900/30 text-white hover:bg-purple-800/50'} disabled:opacity-60`,
                                                        children: [
                                                            isRecordingVideo ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$square$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Square$3e$__["Square"], {
                                                                className: "h-4 w-4"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1899,
                                                                columnNumber: 41
                                                            }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$video$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Video$3e$__["Video"], {
                                                                className: "h-4 w-4"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1899,
                                                                columnNumber: 74
                                                            }, this),
                                                            isRecordingVideo ? 'Stop recording' : 'Record video'
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1882,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        type: "button",
                                                        variant: "ghost",
                                                        onClick: ()=>stopCamera(),
                                                        disabled: !isCameraActive,
                                                        className: "rounded-full px-4 py-2 text-sm text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-60",
                                                        children: "Stop camera"
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1902,
                                                        columnNumber: 19
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1858,
                                                columnNumber: 17
                                            }, this),
                                            isRecordingVideo && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "text-xs uppercase tracking-[0.2em] text-amber-200",
                                                children: [
                                                    "Recording ",
                                                    formatRecordingTime(recordingDuration),
                                                    " / ",
                                                    formatRecordingTime(DEFAULT_VIDEO_DURATION)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1913,
                                                columnNumber: 19
                                            }, this),
                                            cameraError && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-sm text-rose-200",
                                                children: cameraError
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1917,
                                                columnNumber: 33
                                            }, this),
                                            recordingError && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-sm text-rose-200",
                                                children: recordingError
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1918,
                                                columnNumber: 36
                                            }, this),
                                            isCameraActive && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "overflow-hidden rounded-2xl border border-white/20 bg-black/30 shadow-[0_18px_40px_rgba(124,58,237,0.35)]",
                                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("video", {
                                                    ref: videoRef,
                                                    autoPlay: true,
                                                    playsInline: true,
                                                    muted: true,
                                                    className: "h-48 w-full object-cover sm:h-64"
                                                }, void 0, false, {
                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                    lineNumber: 1921,
                                                    columnNumber: 21
                                                }, this)
                                            }, void 0, false, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1920,
                                                columnNumber: 19
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1857,
                                        columnNumber: 15
                                    }, this),
                                    storyDraft.length > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "grid gap-4 sm:grid-cols-2",
                                        children: storyDraft.map((item)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "group relative overflow-hidden rounded-2xl border border-white/15 bg-white/5 backdrop-blur-sm shadow-[0_18px_40px_rgba(124,58,237,0.35)]",
                                                children: [
                                                    item.type === 'image' ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$figma$2f$ImageWithFallback$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ImageWithFallback"], {
                                                        src: item.url,
                                                        alt: "Story preview",
                                                        className: "h-48 w-full object-cover sm:h-56"
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1940,
                                                        columnNumber: 25
                                                    }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("video", {
                                                        src: item.url,
                                                        className: "h-48 w-full object-cover sm:h-56",
                                                        controls: true,
                                                        playsInline: true,
                                                        muted: true
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1946,
                                                        columnNumber: 25
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "absolute inset-x-0 bottom-0 flex items-center justify-between gap-2 bg-gradient-to-t from-black/80 via-black/40 to-transparent px-4 py-3 text-sm",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                className: "text-white/80 capitalize",
                                                                children: item.type
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1955,
                                                                columnNumber: 25
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                                type: "button",
                                                                variant: "ghost",
                                                                size: "sm",
                                                                onClick: ()=>handleRemoveDraftItem(item.id),
                                                                className: "text-white/80 transition-colors duration-200 hover:text-white hover:bg-white/15",
                                                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$trash$2d$2$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Trash2$3e$__["Trash2"], {
                                                                    className: "w-4 h-4"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                                    lineNumber: 1963,
                                                                    columnNumber: 27
                                                                }, this)
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1956,
                                                                columnNumber: 25
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1954,
                                                        columnNumber: 23
                                                    }, this)
                                                ]
                                            }, item.id, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1935,
                                                columnNumber: 21
                                            }, this))
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1933,
                                        columnNumber: 17
                                    }, this),
                                    creationError && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-sm text-rose-200",
                                        children: creationError
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1971,
                                        columnNumber: 33
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-6",
                                                children: [
                                                    currentUser && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "flex items-center gap-3",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Avatar"], {
                                                                className: "h-10 w-10 border border-white/25",
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarImage"], {
                                                                        src: currentUser.avatar
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1978,
                                                                        columnNumber: 25
                                                                    }, this),
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$avatar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AvatarFallback"], {
                                                                        children: currentUser.name[0]
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1979,
                                                                        columnNumber: 25
                                                                    }, this)
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1977,
                                                                columnNumber: 23
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                                        className: "text-sm font-medium text-white",
                                                                        children: currentUser.name
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1982,
                                                                        columnNumber: 25
                                                                    }, this),
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                                        className: "text-xs text-white/60",
                                                                        children: [
                                                                            "@",
                                                                            currentUser.username
                                                                        ]
                                                                    }, void 0, true, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1983,
                                                                        columnNumber: 25
                                                                    }, this)
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1981,
                                                                columnNumber: 23
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1976,
                                                        columnNumber: 21
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "h-px w-full bg-white/10 sm:hidden"
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1987,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "hidden sm:block sm:h-14 sm:w-px bg-white/15"
                                                    }, void 0, false, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1988,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "min-w-[200px] space-y-1 sm:flex sm:flex-col sm:justify-center sm:space-y-2",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                                className: "text-xs uppercase tracking-[0.25em] text-white/50",
                                                                children: "Visibility"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1990,
                                                                columnNumber: 21
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Select"], {
                                                                value: storyVisibility,
                                                                onValueChange: (value)=>setStoryVisibility(value),
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectTrigger"], {
                                                                        className: "w-full border-white/20 bg-white/10 text-white hover:bg-white/15",
                                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectValue"], {
                                                                            placeholder: "Choose who can view"
                                                                        }, void 0, false, {
                                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                                            lineNumber: 1996,
                                                                            columnNumber: 25
                                                                        }, this)
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1995,
                                                                        columnNumber: 23
                                                                    }, this),
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectContent"], {
                                                                        className: "border-white/20 bg-slate-950/95 text-white backdrop-blur",
                                                                        children: STORY_VISIBILITY_OPTIONS.map((option)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                                value: option.value,
                                                                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                                                    className: "flex flex-col",
                                                                                    children: [
                                                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                                            className: "text-sm font-medium",
                                                                                            children: option.label
                                                                                        }, void 0, false, {
                                                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                                                            lineNumber: 2002,
                                                                                            columnNumber: 31
                                                                                        }, this),
                                                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                                            className: "text-xs text-white/60",
                                                                                            children: option.description
                                                                                        }, void 0, false, {
                                                                                            fileName: "[project]/src/app/components/Stories.tsx",
                                                                                            lineNumber: 2003,
                                                                                            columnNumber: 31
                                                                                        }, this)
                                                                                    ]
                                                                                }, void 0, true, {
                                                                                    fileName: "[project]/src/app/components/Stories.tsx",
                                                                                    lineNumber: 2001,
                                                                                    columnNumber: 29
                                                                                }, this)
                                                                            }, option.value, false, {
                                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                                lineNumber: 2000,
                                                                                columnNumber: 27
                                                                            }, this))
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                                        lineNumber: 1998,
                                                                        columnNumber: 23
                                                                    }, this)
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 1991,
                                                                columnNumber: 21
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 1989,
                                                        columnNumber: 19
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 1974,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex flex-col gap-3 sm:items-end",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                        className: "text-xs text-white/60",
                                                        children: [
                                                            storyDraft.length,
                                                            " / ",
                                                            MAX_STORY_ITEMS,
                                                            " items selected"
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 2013,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "flex items-center gap-2",
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                                type: "button",
                                                                variant: "ghost",
                                                                onClick: ()=>handleCreatorOpenChange(false),
                                                                className: "text-white/70 hover:text-white hover:bg-white/10",
                                                                disabled: isSubmittingStory,
                                                                children: "Cancel"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 2017,
                                                                columnNumber: 21
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                                type: "button",
                                                                onClick: ()=>void handleCreateStory(),
                                                                disabled: isSubmittingStory || storyDraft.length === 0,
                                                                className: "bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 px-6 py-2 text-sm font-semibold text-white shadow-[0_15px_40px_rgba(168,85,247,0.45)] transition-all duration-300 hover:brightness-110 disabled:opacity-60",
                                                                children: isSubmittingStory ? 'Posting...' : 'Share Story'
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                                lineNumber: 2026,
                                                                columnNumber: 21
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/app/components/Stories.tsx",
                                                        lineNumber: 2016,
                                                        columnNumber: 19
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/src/app/components/Stories.tsx",
                                                lineNumber: 2012,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/app/components/Stories.tsx",
                                        lineNumber: 1973,
                                        columnNumber: 15
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/app/components/Stories.tsx",
                                lineNumber: 1798,
                                columnNumber: 13
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/app/components/Stories.tsx",
                        lineNumber: 1790,
                        columnNumber: 11
                    }, this)
                }, void 0, false, {
                    fileName: "[project]/src/app/components/Stories.tsx",
                    lineNumber: 1789,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/app/components/Stories.tsx",
                lineNumber: 1788,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("style", {
                children: `
        .hide-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        @keyframes progress {
          from { width: 0%; }
          to { width: 100%; }
        }
        .animate-progress {
          animation: progress 5s linear forwards;
        }
      `
            }, void 0, false, {
                fileName: "[project]/src/app/components/Stories.tsx",
                lineNumber: 2042,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/app/components/Stories.tsx",
        lineNumber: 1494,
        columnNumber: 5
    }, this);
}
_s(Stories, "PIFYiFEGPHXBvmIArvGQ5U3A5TM=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$userContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useUser"]
    ];
});
_c = Stories;
var _c;
__turbopack_context__.k.register(_c, "Stories");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
]);

//# sourceMappingURL=src_app_components_Stories_tsx_d97689cc._.js.map